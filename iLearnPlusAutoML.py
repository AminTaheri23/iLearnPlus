#!/usr/bin/env python
# _*_ coding: utf-8 _*_

import sys, os
from PyQt5.QtWidgets import (QApplication, QWidget, QPushButton, QFileDialog, QLabel, QHBoxLayout, QGroupBox, QTextEdit,
                             QVBoxLayout, QTreeWidget, QTreeWidgetItem, QSplitter, QTableWidget, QTabWidget,
                             QTableWidgetItem, QInputDialog, QMessageBox, QFormLayout, QHeaderView, QAbstractItemView)
from PyQt5.QtGui import QIcon, QFont, QMovie
from PyQt5.QtCore import Qt, pyqtSignal
from util import (InputDialog, MachineLearning, ModelMetrics, PlotWidgets)
import qdarkstyle
import base64
import pandas as pd
import threading
import datetime
import joblib
import sip
import torch

## secret key ##################################################################
CBzeXMuZXhpdChhcHAuZXhlY18o="""#################################################
Y2xhc3MgSUxlYXJuUGx1c0F1dG9NTChRV2lkZ2V0KToKICAgICMgc2lnbmFsCiAgICBkaXNwbGF5X3Np
Z25hbCA9IHB5cXRTaWduYWwobGlzdCkKICAgIGRpc3BsYXlfY3VydmVzX3NpZ25hbCA9IHB5cXRTaWdu
YWwoKQogICAgYXBwZW5kX21zZ19zaWduYWwgPSBweXF0U2lnbmFsKHN0cikKICAgIGNsb3NlX3NpZ25h
bCA9IHB5cXRTaWduYWwoc3RyKQoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzdXBlcihJ
TGVhcm5QbHVzQXV0b01MLCBzZWxmKS5fX2luaXRfXygpCiAgICAgICAgIyBzaWduYWwKICAgICAgICBz
ZWxmLmRpc3BsYXlfc2lnbmFsLmNvbm5lY3Qoc2VsZi5kaXNwbGF5X21ldHJpY3MpCiAgICAgICAgc2Vs
Zi5kaXNwbGF5X2N1cnZlc19zaWduYWwuY29ubmVjdChzZWxmLmRpc3BsYXlfY3VydmVzKQogICAgICAg
IHNlbGYuYXBwZW5kX21zZ19zaWduYWwuY29ubmVjdChzZWxmLmFwcGVuZF9tZXNzYWdlKQoKICAgICAg
ICBzZWxmLk1MRGF0YSA9IE5vbmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICMgTWFjaGluZSBsZWFybmluZyBvYmplY3QKICAgICAgICBzZWxmLmFsZ29yaXRo
bXNfc2VsZWN0ZWQgPSBzZXQoW10pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMg
c2VsZWN0ZWQgYWxnb3JpdGhtcwogICAgICAgIHNlbGYubWV0cmljcyA9IE1vZGVsTWV0cmljcy5Nb2Rl
bE1ldHJpY3MoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBkYXRhIGZvciBkaXNwbGF5IHJl
c3VsdAogICAgICAgIHNlbGYuY3VycmVudF9kYXRhX2luZGV4ID0gMAogICAgICAgIHNlbGYuYm94cGxv
dF9kYXRhID0ge30gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IyBkaWN0CiAgICAgICAgc2VsZi5wZW5fY29sb3IgPSBbCiAgICAgICAgICAgICg1MCwgMTE2LCAxNjEp
LAogICAgICAgICAgICAoMjI1LCAxMjksIDQ0KSwKICAgICAgICAgICAgKDU4LCAxNDYsIDU4KSwKICAg
ICAgICAgICAgKDE5MiwgNjEsIDYyKSwKICAgICAgICAgICAgKDE0NywgMTE0LCAxNzgpLAogICAgICAg
ICAgICAoMTMyLCA5MSwgODMpLAogICAgICAgICAgICAoMjE0LCAxMzIsIDE4OSksCiAgICAgICAgICAg
ICgxMjcsIDEyNywgMTI3KQogICAgICAgIF0KICAgICAgICBzZWxmLmxpbmVTdHlsZSA9IHsKICAgICAg
ICAgICAgMDogUXQuU29saWRMaW5lLAogICAgICAgICAgICAxOiBRdC5Tb2xpZExpbmUsCiAgICAgICAg
ICAgIDI6IFF0LlNvbGlkTGluZSwKICAgICAgICAgICAgMzogUXQuU29saWRMaW5lLAogICAgICAgICAg
ICA0OiBRdC5Tb2xpZExpbmUsCiAgICAgICAgICAgIDU6IFF0LlNvbGlkTGluZSwKICAgICAgICAgICAg
NjogUXQuU29saWRMaW5lLAogICAgICAgICAgICA3OiBRdC5Tb2xpZExpbmUsCiAgICAgICAgICAgIDg6
IFF0LkRhc2hMaW5lLAogICAgICAgICAgICA5OiBRdC5EYXNoTGluZSwKICAgICAgICAgICAgMTA6IFF0
LkRhc2hMaW5lLAogICAgICAgICAgICAxMTogUXQuRGFzaExpbmUsCiAgICAgICAgICAgIDEyOiBRdC5E
YXNoTGluZSwKICAgICAgICAgICAgMTM6IFF0LkRhc2hMaW5lLAogICAgICAgICAgICAxNDogUXQuRGFz
aExpbmUsCiAgICAgICAgICAgIDE1OiBRdC5EYXNoTGluZSwKICAgICAgICB9CiAgICAgICAgc2VsZi5t
bF9kZWZhdHVsdF9wYXJhID0gewogICAgICAgICAgICAnRk9MRCc6IDUsCiAgICAgICAgICAgICdjcHUn
OiAxLAogICAgICAgICAgICAnYXV0byc6IEZhbHNlLAogICAgICAgICAgICAnbl90cmVlcyc6IDEwMCwK
ICAgICAgICAgICAgJ3RyZWVfcmFuZ2UnOiAoMTAwLCAxMDAwLCAxMDApLAogICAgICAgICAgICAna2Vy
bmVsJzogJ3JiZicsCiAgICAgICAgICAgICdwZW5hbGl0eSc6IDEuMCwKICAgICAgICAgICAgJ2dhbW1h
JzogJ2F1dG8nLAogICAgICAgICAgICAncGVuYWxpdHlSYW5nZSc6ICgxLjAsIDE1LjApLAogICAgICAg
ICAgICAnZ2FtbWFSYW5nZSc6ICgtMTAuMCwgNS4wKSwKICAgICAgICAgICAgJ2xheWVyJzogJzMyOzMy
JywKICAgICAgICAgICAgJ2FjdGl2YXRpb24nOiAncmVsdScsCiAgICAgICAgICAgICdvcHRpbWl6ZXIn
OiAnYWRhbScsCiAgICAgICAgICAgICd0b3BLVmFsdWUnOiAzLAogICAgICAgICAgICAnYm9vc3Rpbmdf
dHlwZSc6ICdnYmR0JywKICAgICAgICAgICAgJ251bV9sZWF2ZXMnOiAzMSwKICAgICAgICAgICAgJ21h
eF9kZXB0aCc6IC0xLAogICAgICAgICAgICAnbGVhcm5pbmdfcmF0ZSc6IDAuMDEsCiAgICAgICAgICAg
ICdsZWF2ZXNfcmFuZ2UnOiAoMjAsIDEwMCwgMTApLAogICAgICAgICAgICAnZGVwdGhfcmFuZ2UnOiAo
MTUsIDU1LCAxMCksCiAgICAgICAgICAgICdyYXRlX3JhbmdlJzogKDAuMDEsIDAuMTUsIDAuMDIpLAog
ICAgICAgICAgICAnYm9vc3Rlcic6ICdnYnRyZWUnLAogICAgICAgICAgICAnbl9lc3RpbWF0b3InOiAx
MDAsCiAgICAgICAgICAgICdjb2xzYW1wbGVfYnl0cmVlJzogMC44LAogICAgICAgICAgICAnaW5wdXRf
Y2hhbm5lbCc6IDEsCiAgICAgICAgICAgICdpbnB1dF9sZW5ndGgnOiAxMDAsCiAgICAgICAgICAgICdv
dXRwdXRfY2hhbm5lbCc6IDY0LAogICAgICAgICAgICAncGFkZGluZyc6IDIsCiAgICAgICAgICAgICdr
ZXJuZWxfc2l6ZSc6IDUsCiAgICAgICAgICAgICdkcm9wb3V0JzogMC41LAogICAgICAgICAgICAnZXBv
Y2hzJzogMTAwMCwKICAgICAgICAgICAgJ2Vhcmx5X3N0b3BwaW5nJzogMTAwLAogICAgICAgICAgICAn
YmF0Y2hfc2l6ZSc6IDY0LAogICAgICAgICAgICAnZmNfc2l6ZSc6IDY0LAogICAgICAgICAgICAncm5u
X2hpZGRlbl9zaXplJzogMzIsCiAgICAgICAgICAgICdybm5faGlkZGVuX2xheWVycyc6IDEsCiAgICAg
ICAgICAgICdybm5fYmlkaXJlY3Rpb24nOiBGYWxzZSwKICAgICAgICAgICAgJ21scF9pbnB1dF9kaW0n
OiBOb25lLAogICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAj
IGRlZmF1bHQgbWFjaGluZSBsZWFybmluZyBwYXJhbWV0ZXJzCiAgICAgICAgc2VsZi5wYXJhX3JmID0g
ewogICAgICAgICAgICAnY3B1JzogMSwKICAgICAgICAgICAgJ2F1dG8nOiBGYWxzZSwKICAgICAgICB9
CiAgICAgICAgc2VsZi5wYXJhX3N2bSA9IHsKICAgICAgICAgICAgJ2F1dG8nOiBGYWxzZSwKICAgICAg
ICB9CiAgICAgICAgc2VsZi5wYXJhX2xpZ2h0Z2JtID0gewogICAgICAgICAgICAnbWF4X2RlcHRoJzog
LTEsCiAgICAgICAgICAgICdsZWFybmluZ19yYXRlJzogMC4wMSwKICAgICAgICAgICAgJ2NwdSc6IDEs
CiAgICAgICAgICAgICdhdXRvJzogRmFsc2UsCiAgICAgICAgICAgICdkZXB0aF9yYW5nZSc6ICgxNSwg
NTUsIDEwKSwKICAgICAgICAgICAgJ3JhdGVfcmFuZ2UnOiAoMC4wMSwgMC4xNSwgMC4wMiksCiAgICAg
ICAgfQogICAgICAgIHNlbGYucGFyYV94Z2Jvb3N0ID0gewogICAgICAgICAgICAnbWF4X2RlcHRoJzog
LTEsCiAgICAgICAgICAgICdsZWFybmluZ19yYXRlJzogMC4wMSwKICAgICAgICAgICAgJ25fZXN0aW1h
dG9yJzogMTAwLAogICAgICAgICAgICAnYXV0byc6IEZhbHNlLAogICAgICAgICAgICAnZGVwdGhfcmFu
Z2UnOiAoMTUsIDU1LCAxMCksCiAgICAgICAgICAgICdyYXRlX3JhbmdlJzogKDAuMDEsIDAuMTUsIDAu
MDIpLAogICAgICAgIH0KICAgICAgICBzZWxmLnBhcmFfYmFnZ2luZyA9IHsKICAgICAgICAgICAgJ25f
ZXN0aW1hdG9yJzogMTAwLAogICAgICAgICAgICAnY3B1JzogMSwKICAgICAgICB9CiAgICAgICAgc2Vs
Zi5wYXJhX25ldF8xID0gewogICAgICAgICAgICAnaW5wdXRfY2hhbm5lbCc6IDEsCiAgICAgICAgICAg
ICdpbnB1dF9sZW5ndGgnOiAxMDAsCiAgICAgICAgICAgICdvdXRwdXRfY2hhbm5lbCc6IDY0LAogICAg
ICAgICAgICAncGFkZGluZyc6IDIsCiAgICAgICAgICAgICdrZXJuZWxfc2l6ZSc6IDUsCiAgICAgICAg
ICAgICdkcm9wb3V0JzogMC41LAogICAgICAgICAgICAnZXBvY2hzJzogMTAwMCwKICAgICAgICAgICAg
J2Vhcmx5X3N0b3BwaW5nJzogMTAwLAogICAgICAgICAgICAnYmF0Y2hfc2l6ZSc6IDY0LAogICAgICAg
ICAgICAnZmNfc2l6ZSc6IDY0LAogICAgICAgICAgICAncm5uX2hpZGRlbl9zaXplJzogMzIsCiAgICAg
ICAgICAgICdybm5faGlkZGVuX2xheWVycyc6IDEsCiAgICAgICAgICAgICdybm5fYmlkaXJlY3Rpb24n
OiBGYWxzZSwKICAgICAgICAgICAgJ21scF9pbnB1dF9kaW0nOiBOb25lLAogICAgICAgIH0KICAgICAg
ICBzZWxmLnBhcmFfbmV0XzExID0gewogICAgICAgICAgICAnaW5wdXRfY2hhbm5lbCc6IDEsCiAgICAg
ICAgICAgICdpbnB1dF9sZW5ndGgnOiAxMDAsCiAgICAgICAgICAgICdvdXRwdXRfY2hhbm5lbCc6IDY0
LAogICAgICAgICAgICAncGFkZGluZyc6IDIsCiAgICAgICAgICAgICdrZXJuZWxfc2l6ZSc6IDUsCiAg
ICAgICAgICAgICdkcm9wb3V0JzogMC41LAogICAgICAgICAgICAnZXBvY2hzJzogMTAwMCwKICAgICAg
ICAgICAgJ2Vhcmx5X3N0b3BwaW5nJzogMTAwLAogICAgICAgICAgICAnYmF0Y2hfc2l6ZSc6IDY0LAog
ICAgICAgICAgICAnZmNfc2l6ZSc6IDY0LAogICAgICAgICAgICAncm5uX2hpZGRlbl9zaXplJzogMzIs
CiAgICAgICAgICAgICdybm5faGlkZGVuX2xheWVycyc6IDEsCiAgICAgICAgICAgICdybm5fYmlkaXJl
Y3Rpb24nOiBGYWxzZSwKICAgICAgICAgICAgJ21scF9pbnB1dF9kaW0nOiBOb25lLAogICAgICAgIH0K
ICAgICAgICBzZWxmLnBhcmFfbmV0XzIgPSB7CiAgICAgICAgICAgICdpbnB1dF9jaGFubmVsJzogMSwK
ICAgICAgICAgICAgJ2lucHV0X2xlbmd0aCc6IDEwMCwKICAgICAgICAgICAgJ291dHB1dF9jaGFubmVs
JzogNjQsCiAgICAgICAgICAgICdwYWRkaW5nJzogMiwKICAgICAgICAgICAgJ2tlcm5lbF9zaXplJzog
NSwKICAgICAgICAgICAgJ2Ryb3BvdXQnOiAwLjUsCiAgICAgICAgICAgICdlcG9jaHMnOiAxMDAwLAog
ICAgICAgICAgICAnZWFybHlfc3RvcHBpbmcnOiAxMDAsCiAgICAgICAgICAgICdiYXRjaF9zaXplJzog
NjQsCiAgICAgICAgICAgICdmY19zaXplJzogNjQsCiAgICAgICAgICAgICdybm5faGlkZGVuX3NpemUn
OiAzMiwKICAgICAgICAgICAgJ3Jubl9oaWRkZW5fbGF5ZXJzJzogMSwKICAgICAgICAgICAgJ3Jubl9i
aWRpcmVjdGlvbic6IEZhbHNlLAogICAgICAgICAgICAnbWxwX2lucHV0X2RpbSc6IE5vbmUsCiAgICAg
ICAgfQogICAgICAgIHNlbGYucGFyYV9uZXRfMyA9IHsKICAgICAgICAgICAgJ2lucHV0X2NoYW5uZWwn
OiAxLAogICAgICAgICAgICAnaW5wdXRfbGVuZ3RoJzogMTAwLAogICAgICAgICAgICAnb3V0cHV0X2No
YW5uZWwnOiA2NCwKICAgICAgICAgICAgJ3BhZGRpbmcnOiAyLAogICAgICAgICAgICAna2VybmVsX3Np
emUnOiA1LAogICAgICAgICAgICAnZHJvcG91dCc6IDAuNSwKICAgICAgICAgICAgJ2Vwb2Nocyc6IDEw
MDAsCiAgICAgICAgICAgICdlYXJseV9zdG9wcGluZyc6IDEwMCwKICAgICAgICAgICAgJ2JhdGNoX3Np
emUnOiA2NCwKICAgICAgICAgICAgJ2ZjX3NpemUnOiA2NCwKICAgICAgICAgICAgJ3Jubl9oaWRkZW5f
c2l6ZSc6IDMyLAogICAgICAgICAgICAncm5uX2hpZGRlbl9sYXllcnMnOiAxLAogICAgICAgICAgICAn
cm5uX2JpZGlyZWN0aW9uJzogRmFsc2UsCiAgICAgICAgICAgICdtbHBfaW5wdXRfZGltJzogTm9uZSwK
ICAgICAgICB9CiAgICAgICAgc2VsZi5wYXJhX25ldF80ID0gewogICAgICAgICAgICAnaW5wdXRfY2hh
bm5lbCc6IDEsCiAgICAgICAgICAgICdpbnB1dF9sZW5ndGgnOiAxMDAsCiAgICAgICAgICAgICdvdXRw
dXRfY2hhbm5lbCc6IDY0LAogICAgICAgICAgICAncGFkZGluZyc6IDIsCiAgICAgICAgICAgICdrZXJu
ZWxfc2l6ZSc6IDUsCiAgICAgICAgICAgICdkcm9wb3V0JzogMC41LAogICAgICAgICAgICAnZXBvY2hz
JzogMTAwMCwKICAgICAgICAgICAgJ2Vhcmx5X3N0b3BwaW5nJzogMTAwLAogICAgICAgICAgICAnYmF0
Y2hfc2l6ZSc6IDY0LAogICAgICAgICAgICAnZmNfc2l6ZSc6IDY0LAogICAgICAgICAgICAncm5uX2hp
ZGRlbl9zaXplJzogMzIsCiAgICAgICAgICAgICdybm5faGlkZGVuX2xheWVycyc6IDEsCiAgICAgICAg
ICAgICdybm5fYmlkaXJlY3Rpb24nOiBGYWxzZSwKICAgICAgICAgICAgJ21scF9pbnB1dF9kaW0nOiBO
b25lLAogICAgICAgIH0KICAgICAgICBzZWxmLnBhcmFfbmV0XzUgPSB7CiAgICAgICAgICAgICdpbnB1
dF9jaGFubmVsJzogMSwKICAgICAgICAgICAgJ2lucHV0X2xlbmd0aCc6IDEwMCwKICAgICAgICAgICAg
J291dHB1dF9jaGFubmVsJzogNjQsCiAgICAgICAgICAgICdwYWRkaW5nJzogMiwKICAgICAgICAgICAg
J2tlcm5lbF9zaXplJzogNSwKICAgICAgICAgICAgJ2Ryb3BvdXQnOiAwLjUsCiAgICAgICAgICAgICdl
cG9jaHMnOiAxMDAwLAogICAgICAgICAgICAnZWFybHlfc3RvcHBpbmcnOiAxMDAsCiAgICAgICAgICAg
ICdiYXRjaF9zaXplJzogNjQsCiAgICAgICAgICAgICdmY19zaXplJzogNjQsCiAgICAgICAgICAgICdy
bm5faGlkZGVuX3NpemUnOiAzMiwKICAgICAgICAgICAgJ3Jubl9oaWRkZW5fbGF5ZXJzJzogMSwKICAg
ICAgICAgICAgJ3Jubl9iaWRpcmVjdGlvbic6IEZhbHNlLAogICAgICAgICAgICAnbWxwX2lucHV0X2Rp
bSc6IE5vbmUsCiAgICAgICAgfQogICAgICAgIHNlbGYucGFyYV9uZXRfNiA9IHsKICAgICAgICAgICAg
J2lucHV0X2NoYW5uZWwnOiAxLAogICAgICAgICAgICAnaW5wdXRfbGVuZ3RoJzogMTAwLAogICAgICAg
ICAgICAnb3V0cHV0X2NoYW5uZWwnOiA2NCwKICAgICAgICAgICAgJ3BhZGRpbmcnOiAyLAogICAgICAg
ICAgICAna2VybmVsX3NpemUnOiA1LAogICAgICAgICAgICAnZHJvcG91dCc6IDAuNSwKICAgICAgICAg
ICAgJ2Vwb2Nocyc6IDEwMDAsCiAgICAgICAgICAgICdlYXJseV9zdG9wcGluZyc6IDEwMCwKICAgICAg
ICAgICAgJ2JhdGNoX3NpemUnOiA2NCwKICAgICAgICAgICAgJ2ZjX3NpemUnOiA2NCwKICAgICAgICAg
ICAgJ3Jubl9oaWRkZW5fc2l6ZSc6IDMyLAogICAgICAgICAgICAncm5uX2hpZGRlbl9sYXllcnMnOiAx
LAogICAgICAgICAgICAncm5uX2JpZGlyZWN0aW9uJzogRmFsc2UsCiAgICAgICAgICAgICdtbHBfaW5w
dXRfZGltJzogTm9uZSwKICAgICAgICB9CgogICAgICAgICMgc3RhdHVzIGJhcgogICAgICAgIHNlbGYu
Z2lmID0gUU1vdmllKCdpbWFnZXMvcHJvZ3Jlc3NfYmFyLmdpZicpCiAgICAgICAgc2VsZi5pbml0VUko
KQoKICAgIGRlZiBpbml0VUkoc2VsZik6CiAgICAgICAgc2VsZi5zZXRXaW5kb3dUaXRsZSgnaUxlYXJu
UGx1cyBBdXRvTUwnKQogICAgICAgIHNlbGYucmVzaXplKDgwMCwgNjAwKQogICAgICAgIHNlbGYuc2V0
V2luZG93U3RhdGUoUXQuV2luZG93TWF4aW1pemVkKQogICAgICAgIHNlbGYuc2V0V2luZG93SWNvbihR
SWNvbignaW1hZ2VzL2xvZ28uaWNvJykpCiAgICAgICAgc2VsZi5zZXR1cF9VSSgpCgogICAgZGVmIHNl
dHVwX1VJKHNlbGYpOgogICAgICAgICMgZmlsZQogICAgICAgIHRvcEdyb3VwQm94ID0gUUdyb3VwQm94
KCdMb2FkIGRhdGEnLCBzZWxmKQogICAgICAgIHRvcEdyb3VwQm94LnNldEZvbnQoUUZvbnQoJ0FyaWFs
JywgMTApKQogICAgICAgICMgdG9wR3JvdXBCb3guc2V0TWluaW11bUhlaWdodCgxMDApCiAgICAgICAg
dG9wR3JvdXBCb3hMYXlvdXQgPSBRRm9ybUxheW91dCgpCiAgICAgICAgdHJhaW5GaWxlQnV0dG9uID0g
UVB1c2hCdXR0b24oJ09wZW4nKQogICAgICAgIHRyYWluRmlsZUJ1dHRvbi5jbGlja2VkLmNvbm5lY3Qo
bGFtYmRhOnNlbGYuZGF0YV9mcm9tX2ZpbGVfbWwoJ1RyYWluaW5nJykpCiAgICAgICAgIyB0ZXN0Rmls
ZUJ1dHRvbiA9IFFQdXNoQnV0dG9uKCdPcGVuJykKICAgICAgICAjIHRlc3RGaWxlQnV0dG9uLmNsaWNr
ZWQuY29ubmVjdChsYW1iZGE6c2VsZi5kYXRhX2Zyb21fZmlsZV9tbCgnVGVzdGluZycpKQogICAgICAg
IHRvcEdyb3VwQm94TGF5b3V0LmFkZFJvdygnT3BlbiB0cmFpbmluZyBmaWxlOicsIHRyYWluRmlsZUJ1
dHRvbikKICAgICAgICAjIHRvcEdyb3VwQm94TGF5b3V0LmFkZFJvdygnT3BlbiB0ZXN0aW5nIGZpbGU6
JywgdGVzdEZpbGVCdXR0b24pCiAgICAgICAgdG9wR3JvdXBCb3guc2V0TGF5b3V0KHRvcEdyb3VwQm94
TGF5b3V0KQoKICAgICAgICAjIHRyZWUKICAgICAgICB0cmVlR3JvdXBCb3ggPSBRR3JvdXBCb3goJ01h
Y2hpbmUgbGVhcm5pbmcgYWxnb3JpdGhtcycsIHNlbGYpCiAgICAgICAgdHJlZUdyb3VwQm94LnNldEZv
bnQoUUZvbnQoJ0FyaWFsJywgMTApKQogICAgICAgIHRyZWVMYXlvdXQgPSBRSEJveExheW91dCgpCiAg
ICAgICAgc2VsZi5tbF90cmVlV2lkZ2V0ID0gUVRyZWVXaWRnZXQoKQogICAgICAgIHNlbGYubWxfdHJl
ZVdpZGdldC5zZXRDb2x1bW5Db3VudCgyKQogICAgICAgIHNlbGYubWxfdHJlZVdpZGdldC5zZXRNaW5p
bXVtV2lkdGgoMzAwKQogICAgICAgIHNlbGYubWxfdHJlZVdpZGdldC5zZXRDb2x1bW5XaWR0aCgwLCAx
NTApCiAgICAgICAgc2VsZi5tbF90cmVlV2lkZ2V0LnNldEZvbnQoUUZvbnQoJ0FyaWFsJywgOCkpCiAg
ICAgICAgc2VsZi5tbF90cmVlV2lkZ2V0LnNldEhlYWRlckxhYmVscyhbJ01ldGhvZHMnLCAnRGVmaW5p
dGlvbiddKQogICAgICAgIHNlbGYubWFjaGluZUxlYXJuaW5nQWxnb3JpZ2htcyA9IFFUcmVlV2lkZ2V0
SXRlbShzZWxmLm1sX3RyZWVXaWRnZXQpCiAgICAgICAgc2VsZi5tYWNoaW5lTGVhcm5pbmdBbGdvcmln
aG1zLnNldEV4cGFuZGVkKFRydWUpICAjIHNldCBub2RlIGV4cGFuZGVkCiAgICAgICAgc2VsZi5tYWNo
aW5lTGVhcm5pbmdBbGdvcmlnaG1zLnNldFRleHQoMCwgJ01hY2hpbmUgbGVhcm5pbmcgYWxnb3JpdGht
cycpCiAgICAgICAgcmYgPSBRVHJlZVdpZGdldEl0ZW0oc2VsZi5tYWNoaW5lTGVhcm5pbmdBbGdvcmln
aG1zKQogICAgICAgIHJmLnNldFRleHQoMCwgJ1JGJykKICAgICAgICByZi5zZXRUZXh0KDEsICdSYW5k
b20gRm9yZXN0JykKICAgICAgICByZi5zZXRDaGVja1N0YXRlKDAsIFF0LlVuY2hlY2tlZCkKICAgICAg
ICBkdHJlZSA9IFFUcmVlV2lkZ2V0SXRlbShzZWxmLm1hY2hpbmVMZWFybmluZ0FsZ29yaWdobXMpCiAg
ICAgICAgZHRyZWUuc2V0VGV4dCgwLCAnRGVjaXNpb25UcmVlJykKICAgICAgICBkdHJlZS5zZXRUZXh0
KDEsICdEZWNpc2lvbiBUcmVlJykKICAgICAgICBkdHJlZS5zZXRDaGVja1N0YXRlKDAsIFF0LlVuY2hl
Y2tlZCkKICAgICAgICBsaWdodGdibSA9IFFUcmVlV2lkZ2V0SXRlbShzZWxmLm1hY2hpbmVMZWFybmlu
Z0FsZ29yaWdobXMpCiAgICAgICAgbGlnaHRnYm0uc2V0VGV4dCgwLCAnTGlnaHRHQk0nKQogICAgICAg
IGxpZ2h0Z2JtLnNldFRleHQoMSwgJ0xpZ2h0R0JNJykKICAgICAgICBsaWdodGdibS5zZXRDaGVja1N0
YXRlKDAsIFF0LlVuY2hlY2tlZCkKICAgICAgICBzdm0gPSBRVHJlZVdpZGdldEl0ZW0oc2VsZi5tYWNo
aW5lTGVhcm5pbmdBbGdvcmlnaG1zKQogICAgICAgIHN2bS5zZXRUZXh0KDAsICdTVk0nKQogICAgICAg
IHN2bS5zZXRUZXh0KDEsICdTdXBwb3J0IFZlcmN0b3IgTWFjaGluZScpCiAgICAgICAgc3ZtLnNldENo
ZWNrU3RhdGUoMCwgUXQuVW5jaGVja2VkKQogICAgICAgIG1scCA9IFFUcmVlV2lkZ2V0SXRlbShzZWxm
Lm1hY2hpbmVMZWFybmluZ0FsZ29yaWdobXMpCiAgICAgICAgbWxwLnNldFRleHQoMCwgJ01MUCcpCiAg
ICAgICAgbWxwLnNldFRleHQoMSwgJ011bHRpLWxheWVyIFBlcmNlcHRyb24nKQogICAgICAgIG1scC5z
ZXRDaGVja1N0YXRlKDAsIFF0LlVuY2hlY2tlZCkKICAgICAgICB4Z2Jvb3N0ID0gUVRyZWVXaWRnZXRJ
dGVtKHNlbGYubWFjaGluZUxlYXJuaW5nQWxnb3JpZ2htcykKICAgICAgICB4Z2Jvb3N0LnNldFRleHQo
MCwgJ1hHQm9vc3QnKQogICAgICAgIHhnYm9vc3Quc2V0VGV4dCgxLCAnWEdCb29zdCcpCiAgICAgICAg
eGdib29zdC5zZXRDaGVja1N0YXRlKDAsIFF0LlVuY2hlY2tlZCkKICAgICAgICBrbm4gPSBRVHJlZVdp
ZGdldEl0ZW0oc2VsZi5tYWNoaW5lTGVhcm5pbmdBbGdvcmlnaG1zKQogICAgICAgIGtubi5zZXRUZXh0
KDAsICdLTk4nKQogICAgICAgIGtubi5zZXRUZXh0KDEsICdLLU5lYXJlc3QgTmVpZ2hib3VyJykKICAg
ICAgICBrbm4uc2V0Q2hlY2tTdGF0ZSgwLCBRdC5VbmNoZWNrZWQpCiAgICAgICAgbHIgPSBRVHJlZVdp
ZGdldEl0ZW0oc2VsZi5tYWNoaW5lTGVhcm5pbmdBbGdvcmlnaG1zKQogICAgICAgIGxyLnNldFRleHQo
MCwgJ0xSJykKICAgICAgICBsci5zZXRUZXh0KDEsICdMb2dpc3RpYyBSZWdyZXNzaW9uJykKICAgICAg
ICBsci5zZXRDaGVja1N0YXRlKDAsIFF0LlVuY2hlY2tlZCkKICAgICAgICBsZGEgPSBRVHJlZVdpZGdl
dEl0ZW0oc2VsZi5tYWNoaW5lTGVhcm5pbmdBbGdvcmlnaG1zKQogICAgICAgIGxkYS5zZXRUZXh0KDAs
ICdMREEnKQogICAgICAgIGxkYS5zZXRUZXh0KDEsICdMaW5lYXIgRGlzY3JpbWluYW50IEFuYWx5c2lz
JykKICAgICAgICBsZGEuc2V0Q2hlY2tTdGF0ZSgwLCBRdC5VbmNoZWNrZWQpCiAgICAgICAgcWRhID0g
UVRyZWVXaWRnZXRJdGVtKHNlbGYubWFjaGluZUxlYXJuaW5nQWxnb3JpZ2htcykKICAgICAgICBxZGEu
c2V0VGV4dCgwLCAnUURBJykKICAgICAgICBxZGEuc2V0VGV4dCgxLCAnUXVhZHJhdGljIERpc2NyaW1p
bmFudCBBbmFseXNpcycpCiAgICAgICAgcWRhLnNldENoZWNrU3RhdGUoMCwgUXQuVW5jaGVja2VkKQog
ICAgICAgIHNnZCA9IFFUcmVlV2lkZ2V0SXRlbShzZWxmLm1hY2hpbmVMZWFybmluZ0FsZ29yaWdobXMp
CiAgICAgICAgc2dkLnNldFRleHQoMCwgJ1NHRCcpCiAgICAgICAgc2dkLnNldFRleHQoMSwgJ1N0b2No
YXN0aWMgR3JhZGllbnQgRGVzY2VudCcpCiAgICAgICAgc2dkLnNldENoZWNrU3RhdGUoMCwgUXQuVW5j
aGVja2VkKQogICAgICAgIGJheWVzID0gUVRyZWVXaWRnZXRJdGVtKHNlbGYubWFjaGluZUxlYXJuaW5n
QWxnb3JpZ2htcykKICAgICAgICBiYXllcy5zZXRUZXh0KDAsICdOYWl2ZUJheWVzJykKICAgICAgICBi
YXllcy5zZXRUZXh0KDEsICdOYWl2ZUJheWVzJykKICAgICAgICBiYXllcy5zZXRDaGVja1N0YXRlKDAs
IFF0LlVuY2hlY2tlZCkKICAgICAgICBiYWdnaW5nID0gUVRyZWVXaWRnZXRJdGVtKHNlbGYubWFjaGlu
ZUxlYXJuaW5nQWxnb3JpZ2htcykKICAgICAgICBiYWdnaW5nLnNldFRleHQoMCwgJ0JhZ2dpbmcnKQog
ICAgICAgIGJhZ2dpbmcuc2V0VGV4dCgxLCAnQmFnZ2luZycpCiAgICAgICAgYmFnZ2luZy5zZXRDaGVj
a1N0YXRlKDAsIFF0LlVuY2hlY2tlZCkKICAgICAgICBhZGFib29zdCA9IFFUcmVlV2lkZ2V0SXRlbShz
ZWxmLm1hY2hpbmVMZWFybmluZ0FsZ29yaWdobXMpCiAgICAgICAgYWRhYm9vc3Quc2V0VGV4dCgwLCAn
QWRhQm9vc3QnKQogICAgICAgIGFkYWJvb3N0LnNldFRleHQoMSwgJ0FkYUJvb3N0JykKICAgICAgICBh
ZGFib29zdC5zZXRDaGVja1N0YXRlKDAsIFF0LlVuY2hlY2tlZCkKICAgICAgICBnYmR0ID0gUVRyZWVX
aWRnZXRJdGVtKHNlbGYubWFjaGluZUxlYXJuaW5nQWxnb3JpZ2htcykKICAgICAgICBnYmR0LnNldFRl
eHQoMCwgJ0dCRFQnKQogICAgICAgIGdiZHQuc2V0VGV4dCgxLCAnR3JhZGllbnQgVHJlZSBCb29zdGlu
ZycpCiAgICAgICAgZ2JkdC5zZXRDaGVja1N0YXRlKDAsIFF0LlVuY2hlY2tlZCkKICAgICAgICAjIGRl
ZXAgbGVhcm5pbmcgYWxnb3JpZ2htcwogICAgICAgIG5ldDEgPSBRVHJlZVdpZGdldEl0ZW0oc2VsZi5t
YWNoaW5lTGVhcm5pbmdBbGdvcmlnaG1zKQogICAgICAgIG5ldDEuc2V0VGV4dCgwLCAnTmV0XzFfQ05O
JykKICAgICAgICBuZXQxLnNldFRleHQoMSwgJ0NvbnZvbHV0aW9uYWwgTmV1cmFsIE5ldHdvcmsnKQog
ICAgICAgIG5ldDEuc2V0Q2hlY2tTdGF0ZSgwLCBRdC5VbmNoZWNrZWQpCiAgICAgICAgbmV0MTEgPSBR
VHJlZVdpZGdldEl0ZW0oc2VsZi5tYWNoaW5lTGVhcm5pbmdBbGdvcmlnaG1zKQogICAgICAgIG5ldDEx
LnNldFRleHQoMCwgJ05ldF8xX0NOTl9iaW5hcnknKQogICAgICAgIG5ldDExLnNldFRleHQoMSwgJ0Nv
bnZvbHV0aW9uYWwgTmV1cmFsIE5ldHdvcmsnKQogICAgICAgIG5ldDExLnNldENoZWNrU3RhdGUoMCwg
UXQuVW5jaGVja2VkKQogICAgICAgIG5ldDIgPSBRVHJlZVdpZGdldEl0ZW0oc2VsZi5tYWNoaW5lTGVh
cm5pbmdBbGdvcmlnaG1zKQogICAgICAgIG5ldDIuc2V0VGV4dCgwLCAnTmV0XzJfUk5OJykKICAgICAg
ICBuZXQyLnNldFRleHQoMSwgJ1JlY3VycmVudCBOZXVyYWwgTmV0d29yaycpCiAgICAgICAgbmV0Mi5z
ZXRDaGVja1N0YXRlKDAsIFF0LlVuY2hlY2tlZCkKICAgICAgICBuZXQzID0gUVRyZWVXaWRnZXRJdGVt
KHNlbGYubWFjaGluZUxlYXJuaW5nQWxnb3JpZ2htcykKICAgICAgICBuZXQzLnNldFRleHQoMCwgJ05l
dF8zX0JSTk4nKQogICAgICAgIG5ldDMuc2V0VGV4dCgxLCAnQmlkaXJlY3Rpb25hbCBSZWN1cnJlbnQg
TmV1cmFsIE5ldHdvcmsnKQogICAgICAgIG5ldDMuc2V0Q2hlY2tTdGF0ZSgwLCBRdC5VbmNoZWNrZWQp
CiAgICAgICAgbmV0NCA9IFFUcmVlV2lkZ2V0SXRlbShzZWxmLm1hY2hpbmVMZWFybmluZ0FsZ29yaWdo
bXMpCiAgICAgICAgbmV0NC5zZXRUZXh0KDAsICdOZXRfNF9BQkNOTicpCiAgICAgICAgbmV0NC5zZXRU
ZXh0KDEsICdBdHRlbnRpb24gQmFzZWQgQ29udm9sdXRpb25hbCBOZXVyYWwgTmV0d29yaycpCiAgICAg
ICAgbmV0NC5zZXRDaGVja1N0YXRlKDAsIFF0LlVuY2hlY2tlZCkKICAgICAgICBuZXQ1ID0gUVRyZWVX
aWRnZXRJdGVtKHNlbGYubWFjaGluZUxlYXJuaW5nQWxnb3JpZ2htcykKICAgICAgICBuZXQ1LnNldFRl
eHQoMCwgJ05ldF81X1Jlc05ldCcpCiAgICAgICAgbmV0NS5zZXRUZXh0KDEsICdEZWVwIFJlc2lkdWFs
IE5ldHdvcmsnKQogICAgICAgIG5ldDUuc2V0Q2hlY2tTdGF0ZSgwLCBRdC5VbmNoZWNrZWQpCiAgICAg
ICAgbmV0NiA9IFFUcmVlV2lkZ2V0SXRlbShzZWxmLm1hY2hpbmVMZWFybmluZ0FsZ29yaWdobXMpCiAg
ICAgICAgbmV0Ni5zZXRUZXh0KDAsICdOZXRfNl9BRScpCiAgICAgICAgbmV0Ni5zZXRUZXh0KDEsICdB
dXRvRW5jb2RlcicpCiAgICAgICAgbmV0Ni5zZXRDaGVja1N0YXRlKDAsIFF0LlVuY2hlY2tlZCkKICAg
ICAgICB0cmVlTGF5b3V0LmFkZFdpZGdldChzZWxmLm1sX3RyZWVXaWRnZXQpCiAgICAgICAgdHJlZUdy
b3VwQm94LnNldExheW91dCh0cmVlTGF5b3V0KQogICAgICAgIHNlbGYubWxfdHJlZVdpZGdldC5jbGlj
a2VkLmNvbm5lY3Qoc2VsZi5tbF90cmVlX2NsaWNrZWQpCiAgICAgICAgc2VsZi5tbF90cmVlV2lkZ2V0
Lml0ZW1DaGFuZ2VkLmNvbm5lY3Qoc2VsZi5tbF90cmVlX2NoZWNrU3RhdGUpCgogICAgICAgICMjIHBh
cmFtZXRlcgogICAgICAgIHBhcmFHcm91cEJveCA9IFFHcm91cEJveCgnU2V0IEstZm9sZCBDcm9zcy1W
YWxpZGF0aW9uJywgc2VsZikKICAgICAgICBwYXJhR3JvdXBCb3guc2V0Rm9udChRRm9udCgnQXJpYWwn
LCAxMCkpCiAgICAgICAgcGFyYUxheW91dCA9IFFGb3JtTGF5b3V0KHBhcmFHcm91cEJveCkKICAgICAg
ICBzZWxmLmZvbGRfbGluZUVkaXQgPSBJbnB1dERpYWxvZy5NeUxpbmVFZGl0KCc1JykKICAgICAgICBz
ZWxmLmZvbGRfbGluZUVkaXQuc2V0Rm9udChRRm9udCgnQXJpYWwnLCA4KSkKICAgICAgICBzZWxmLmZv
bGRfbGluZUVkaXQuY2xpY2tlZC5jb25uZWN0KHNlbGYuc2V0Rm9sZCkKICAgICAgICBwYXJhTGF5b3V0
LmFkZFJvdygnQ3Jvc3MtVmFsaWRhdGlvbjonLCBzZWxmLmZvbGRfbGluZUVkaXQpCgogICAgICAgICMg
b3BlcmF0aW9uCiAgICAgICAgc3RhcnRHcm91cEJveCA9IFFHcm91cEJveCgnT3BlcmF0b3InLCBzZWxm
KQogICAgICAgIHN0YXJ0R3JvdXBCb3guc2V0Rm9udChRRm9udCgnQXJpYWwnLCAxMCkpCiAgICAgICAg
c3RhcnRMYXlvdXQgPSBRSEJveExheW91dChzdGFydEdyb3VwQm94KQogICAgICAgIHNlbGYuc3RhcnRf
YnV0dG9uID0gUVB1c2hCdXR0b24oJ1N0YXJ0JykKICAgICAgICBzZWxmLnN0YXJ0X2J1dHRvbi5jbGlj
a2VkLmNvbm5lY3Qoc2VsZi5ydW5fbWwpCiAgICAgICAgc2VsZi5zdGFydF9idXR0b24uc2V0Rm9udChR
Rm9udCgnQXJpYWwnLCAxMCkpCiAgICAgICAgc3RhcnRMYXlvdXQuYWRkV2lkZ2V0KHNlbGYuc3RhcnRf
YnV0dG9uKQoKICAgICAgICAjIyMgbGF5b3V0CiAgICAgICAgbGVmdF92ZXJ0aWNhbF9sYXlvdXQgPSBR
VkJveExheW91dCgpCiAgICAgICAgbGVmdF92ZXJ0aWNhbF9sYXlvdXQuYWRkV2lkZ2V0KHRvcEdyb3Vw
Qm94KQogICAgICAgIGxlZnRfdmVydGljYWxfbGF5b3V0LmFkZFdpZGdldCh0cmVlR3JvdXBCb3gpCiAg
ICAgICAgbGVmdF92ZXJ0aWNhbF9sYXlvdXQuYWRkV2lkZ2V0KHBhcmFHcm91cEJveCkKICAgICAgICBs
ZWZ0X3ZlcnRpY2FsX2xheW91dC5hZGRXaWRnZXQoc3RhcnRHcm91cEJveCkKCiAgICAgICAgIyMjIyB3
aWRnZXQKICAgICAgICBsZWZ0V2lkZ2V0ID0gUVdpZGdldCgpCiAgICAgICAgbGVmdFdpZGdldC5zZXRM
YXlvdXQobGVmdF92ZXJ0aWNhbF9sYXlvdXQpCgogICAgICAgIHJlc3VsdFRhYldpZGdldCA9IFFXaWRn
ZXQoKQogICAgICAgIHJlc3VsdFRhYkxheW91dCA9IFFWQm94TGF5b3V0KHJlc3VsdFRhYldpZGdldCkK
ICAgICAgICByZXN1bHRUYWJDb250cm9sTGF5b3V0ID0gUUhCb3hMYXlvdXQoKQogICAgICAgIHNlbGYu
cmVzdWx0U2F2ZUJ0biA9IFFQdXNoQnV0dG9uKCdTYXZlIG1ldHJpY3MnKQogICAgICAgIHNlbGYucmVz
dWx0U2F2ZUJ0bi5jbGlja2VkLmNvbm5lY3Qoc2VsZi5zYXZlX3Jlc3VsdCkKICAgICAgICBzZWxmLm1v
ZGVsU2F2ZUJ0biA9IFFQdXNoQnV0dG9uKCdTYXZlIG1vZGVsJykKICAgICAgICBzZWxmLm1vZGVsU2F2
ZUJ0bi5jbGlja2VkLmNvbm5lY3Qoc2VsZi5zYXZlX21vZGVsKQogICAgICAgIHNlbGYuZGlzcGxheUNv
cnJCdG4gPSBRUHVzaEJ1dHRvbignIERpc3BsYXkgQ29ycmVsYXRpb24gJykKICAgICAgICBzZWxmLmRp
c3BsYXlDb3JyQnRuLmNsaWNrZWQuY29ubmVjdChzZWxmLmRpc3BsYXlfY29ycmVsYXRpb25faGVhdG1h
cCkKICAgICAgICByZXN1bHRUYWJDb250cm9sTGF5b3V0LmFkZFN0cmV0Y2goMSkKICAgICAgICByZXN1
bHRUYWJDb250cm9sTGF5b3V0LmFkZFdpZGdldChzZWxmLnJlc3VsdFNhdmVCdG4pCiAgICAgICAgcmVz
dWx0VGFiQ29udHJvbExheW91dC5hZGRXaWRnZXQoc2VsZi5tb2RlbFNhdmVCdG4pCiAgICAgICAgcmVz
dWx0VGFiQ29udHJvbExheW91dC5hZGRXaWRnZXQoc2VsZi5kaXNwbGF5Q29yckJ0bikKICAgICAgICBy
ZXN1bHRUYWJDb250cm9sTGF5b3V0LmFkZFN0cmV0Y2goMSkKICAgICAgICBzZWxmLm1ldHJpY3NUYWJs
ZVdpZGdldCA9IFFUYWJsZVdpZGdldCgpCiAgICAgICAgc2VsZi5tZXRyaWNzVGFibGVXaWRnZXQuc2V0
Rm9udChRRm9udCgnQXJpYWwnLCA4KSkKICAgICAgICBzZWxmLm1ldHJpY3NUYWJsZVdpZGdldC5zZXRD
b2x1bW5Db3VudCgxMSkKICAgICAgICBzZWxmLm1ldHJpY3NUYWJsZVdpZGdldC5zZXRIb3Jpem9udGFs
SGVhZGVyTGFiZWxzKFsnSWQnLCAnU3RhcnRUaW1lJywgJ0VuZFRpbWUnLCAnU24gKCUpJywgJ1NwICgl
KScsICdQcmUgKCUpJywgJ0FjYyAoJSknLCAnTUNDJywgJ0YxJywgJ0FVUk9DJywgJ0FVUFJDJ10pCiAg
ICAgICAgc2VsZi5tZXRyaWNzVGFibGVXaWRnZXQudmVydGljYWxIZWFkZXIoKS5zZXRIaWRkZW4oVHJ1
ZSkKICAgICAgICBzZWxmLm1ldHJpY3NUYWJsZVdpZGdldC5ob3Jpem9udGFsSGVhZGVyKCkuc2V0U2Vj
dGlvblJlc2l6ZU1vZGUoUUhlYWRlclZpZXcuU3RyZXRjaCkKICAgICAgICBzZWxmLm1ldHJpY3NUYWJs
ZVdpZGdldC5zZXRFZGl0VHJpZ2dlcnMoUUFic3RyYWN0SXRlbVZpZXcuTm9FZGl0VHJpZ2dlcnMpCiAg
ICAgICAgc2VsZi5tZXRyaWNzVGFibGVXaWRnZXQuaG9yaXpvbnRhbEhlYWRlcigpLnNldFNlY3Rpb25S
ZXNpemVNb2RlKDAsIFFIZWFkZXJWaWV3LlJlc2l6ZVRvQ29udGVudHMpCiAgICAgICAgc2VsZi5tZXRy
aWNzVGFibGVXaWRnZXQuaG9yaXpvbnRhbEhlYWRlcigpLnNldFNlY3Rpb25SZXNpemVNb2RlKDEsIFFI
ZWFkZXJWaWV3LlJlc2l6ZVRvQ29udGVudHMpCiAgICAgICAgc2VsZi5tZXRyaWNzVGFibGVXaWRnZXQu
aG9yaXpvbnRhbEhlYWRlcigpLnNldFNlY3Rpb25SZXNpemVNb2RlKDIsIFFIZWFkZXJWaWV3LlJlc2l6
ZVRvQ29udGVudHMpCiAgICAgICAgc2VsZi5tZXRyaWNzVGFibGVXaWRnZXQucmVzaXplUm93c1RvQ29u
dGVudHMoKQogICAgICAgIHJlc3VsdFRhYkxheW91dC5hZGRXaWRnZXQoc2VsZi5tZXRyaWNzVGFibGVX
aWRnZXQpCiAgICAgICAgcmVzdWx0VGFiTGF5b3V0LmFkZExheW91dChyZXN1bHRUYWJDb250cm9sTGF5
b3V0KQoKICAgICAgICAiIiIgYm94cGxvdCB1c2luZyBtYXRwbG90bGliICIiIgogICAgICAgIGJveHBs
b3RXaWRnZXQgPSBRV2lkZ2V0KCkKICAgICAgICBzZWxmLmJveHBsb3RMYXlvdXQgPSBRVkJveExheW91
dChib3hwbG90V2lkZ2V0KQogICAgICAgIHNlbGYuYm94cGxvdEdyYXBoID0gUGxvdFdpZGdldHMuQm94
cGxvdFdpZGdldCgpCiAgICAgICAgc2VsZi5ib3hwbG90TGF5b3V0LmFkZFdpZGdldChzZWxmLmJveHBs
b3RHcmFwaCkKCiAgICAgICAgIiIiIFJPQyBjdXJ2ZSB1c2luZyBtYXRwbG90bGliICIiIgogICAgICAg
IHJvY1dpZGdldCA9IFFXaWRnZXQoKQogICAgICAgIHNlbGYucm9jTGF5b3V0ID0gUVZCb3hMYXlvdXQo
cm9jV2lkZ2V0KQogICAgICAgIHNlbGYucm9jQ3VydmVHcmFwaCA9IFBsb3RXaWRnZXRzLkN1cnZlc1dp
ZGdldCgpCiAgICAgICAgc2VsZi5yb2NMYXlvdXQuYWRkV2lkZ2V0KHNlbGYucm9jQ3VydmVHcmFwaCkK
CiAgICAgICAgbG9nV2lkZ2V0ID0gUVdpZGdldCgpCiAgICAgICAgbG9nTGF5b3V0ID0gUUhCb3hMYXlv
dXQobG9nV2lkZ2V0KQogICAgICAgIHNlbGYubG9nVGV4dEVkaXQgPSBRVGV4dEVkaXQoKQogICAgICAg
IHNlbGYubG9nVGV4dEVkaXQuc2V0Rm9udChRRm9udCgnQXJpYWwnLCA4KSkKICAgICAgICBsb2dMYXlv
dXQuYWRkV2lkZ2V0KHNlbGYubG9nVGV4dEVkaXQpCgogICAgICAgIHBsb3RUYWJXaWRnZXQgPSBRVGFi
V2lkZ2V0KCkKICAgICAgICBwbG90VGFiV2lkZ2V0LmFkZFRhYihyZXN1bHRUYWJXaWRnZXQsICcgIFJl
c3VsdCAgJykKICAgICAgICBwbG90VGFiV2lkZ2V0LmFkZFRhYihib3hwbG90V2lkZ2V0LCAnICBCb3gg
cGxvdCAgJykKICAgICAgICBwbG90VGFiV2lkZ2V0LmFkZFRhYihyb2NXaWRnZXQsICcgIFJPQyBhbmQg
UFJDIGN1cnZlICAnKQogICAgICAgIHBsb3RUYWJXaWRnZXQuYWRkVGFiKGxvZ1dpZGdldCwgJyAgTG9n
ICAnKQoKICAgICAgICAjIyMjIyBzcGxpdHRlcgogICAgICAgIHNwbGl0dGVyXzEgPSBRU3BsaXR0ZXIo
UXQuSG9yaXpvbnRhbCkKICAgICAgICBzcGxpdHRlcl8xLmFkZFdpZGdldChsZWZ0V2lkZ2V0KQogICAg
ICAgIHNwbGl0dGVyXzEuYWRkV2lkZ2V0KHBsb3RUYWJXaWRnZXQpCiAgICAgICAgc3BsaXR0ZXJfMS5z
ZXRTaXplcyhbMTAwLCAxMjAwXSkKCiAgICAgICAgIyMjIyMjIHZlcnRpY2FsIGxheW91dAogICAgICAg
IHZMYXlvdXQgPSBRVkJveExheW91dCgpCgogICAgICAgICMjIHN0YXR1cyBiYXIKICAgICAgICBzdGF0
dXNHcm91cEJveCA9IFFHcm91cEJveCgnU3RhdHVzJywgc2VsZikKICAgICAgICBzdGF0dXNHcm91cEJv
eC5zZXRGb250KFFGb250KCdBcmlhbCcsIDEwKSkKICAgICAgICBzdGF0dXNMYXlvdXQgPSBRSEJveExh
eW91dChzdGF0dXNHcm91cEJveCkKICAgICAgICBzZWxmLnN0YXR1c19sYWJlbCA9IFFMYWJlbCgnV2Vs
Y29tZSB0byBpTGVhcm5QbHVzIEFuYWx5c2lzJykKICAgICAgICBzZWxmLnByb2dyZXNzX2JhciA9IFFM
YWJlbCgpCiAgICAgICAgc2VsZi5wcm9ncmVzc19iYXIuc2V0TWF4aW11bVdpZHRoKDIzMCkKICAgICAg
ICBzdGF0dXNMYXlvdXQuYWRkV2lkZ2V0KHNlbGYuc3RhdHVzX2xhYmVsKQogICAgICAgIHN0YXR1c0xh
eW91dC5hZGRXaWRnZXQoc2VsZi5wcm9ncmVzc19iYXIpCgogICAgICAgIHNwbGl0dGVyXzIgPSBRU3Bs
aXR0ZXIoUXQuVmVydGljYWwpCiAgICAgICAgc3BsaXR0ZXJfMi5hZGRXaWRnZXQoc3BsaXR0ZXJfMSkK
ICAgICAgICBzcGxpdHRlcl8yLmFkZFdpZGdldChzdGF0dXNHcm91cEJveCkKICAgICAgICBzcGxpdHRl
cl8yLnNldFNpemVzKFsxMDAwLCAxMDBdKQogICAgICAgIHZMYXlvdXQuYWRkV2lkZ2V0KHNwbGl0dGVy
XzIpCiAgICAgICAgc2VsZi5zZXRMYXlvdXQodkxheW91dCkKCiAgICBkZWYgZGF0YV9mcm9tX2ZpbGVf
bWwoc2VsZiwgdGFyZ2V0PSdUcmFpbmluZycpOgogICAgICAgIGZpbGVfbmFtZSwgb2sgPSBRRmlsZURp
YWxvZy5nZXRPcGVuRmlsZU5hbWUoc2VsZiwgJ09wZW4nLCAnLi9kYXRhJywgJ0NTViBGaWxlcyAoKi5j
c3YpOztUU1YgRmlsZXMgKCoudHN2KTs7U1ZNIEZpbGVzKCouc3ZtKTs7V2VrYSBGaWxlcyAoKi5hcmZm
KScpCiAgICAgICAgaWYgb2s6CiAgICAgICAgICAgIGlmIHNlbGYuTUxEYXRhIGlzIE5vbmU6CiAgICAg
ICAgICAgICAgICBzZWxmLk1MRGF0YSA9IE1hY2hpbmVMZWFybmluZy5JTGVhcm5NYWNoaW5lTGVhcm5p
bmcoc2VsZi5tbF9kZWZhdHVsdF9wYXJhKQogICAgICAgICAgICBvazEgPSBzZWxmLk1MRGF0YS5sb2Fk
X2RhdGEoZmlsZV9uYW1lLCB0YXJnZXQpCiAgICAgICAgICAgIGlmIG9rMToKICAgICAgICAgICAgICAg
IGlmIHRhcmdldCA9PSAnVHJhaW5pbmcnOgogICAgICAgICAgICAgICAgICAgIHNoYXBlID0gc2VsZi5N
TERhdGEudHJhaW5pbmdfZGF0YWZyYW1lLnZhbHVlcy5zaGFwZQogICAgICAgICAgICAgICAgZWxzZToK
ICAgICAgICAgICAgICAgICAgICBzaGFwZSA9IHNlbGYuTUxEYXRhLnRlc3RpbmdfZGF0YWZyYW1lLnZh
bHVlcy5zaGFwZQogICAgICAgICAgICAgICAgc2VsZi5sb2dUZXh0RWRpdC5hcHBlbmQoJyVzXHRMb2Fk
ICVzIGZpbGU7IERhdGFzaGFwZTogJXMnICUoZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUo
JyVZLSVtLSVkICVIOiVNOiVTJyksIHRhcmdldCwgc2hhcGUpKQogICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgc2VsZi5sb2dUZXh0RWRpdC5hcHBlbmQoJyVzXHRMb2FkICVzIGZpbGUgZmFpbGVk
LicgJShkYXRldGltZS5kYXRldGltZS5ub3coKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKSwg
dGFyZ2V0KSkKCiAgICBkZWYgbWxfdHJlZV9jbGlja2VkKHNlbGYsIGluZGV4KToKICAgICAgICBpdGVt
ID0gc2VsZi5tbF90cmVlV2lkZ2V0LmN1cnJlbnRJdGVtKCkKICAgICAgICBpZiBpdGVtLnRleHQoMCkg
aW4gWydSRiddOgogICAgICAgICAgICBudW0sIHJhbmdlLCBjcHUsIGF1dG8sIG9rID0gSW5wdXREaWFs
b2cuUVJhbmRvbUZvcmVzdElucHV0LmdldFZhbHVlcygpCiAgICAgICAgICAgIGlmIG9rOgogICAgICAg
ICAgICAgICAgc2VsZi5tbF9kZWZhdHVsdF9wYXJhWyduX3RyZWVzJ10gPSBudW0KICAgICAgICAgICAg
ICAgIHNlbGYubWxfZGVmYXR1bHRfcGFyYVsndHJlZV9yYW5nZSddID0gcmFuZ2UKICAgICAgICAgICAg
ICAgICMgc2VsZi5tbF9kZWZhdHVsdF9wYXJhWydhdXRvJ10gPSBhdXRvCiAgICAgICAgICAgICAgICAj
IHNlbGYubWxfZGVmYXR1bHRfcGFyYVsnY3B1J10gPSBjcHUKICAgICAgICAgICAgICAgIHNlbGYucGFy
YV9yZlsnYXV0byddID0gYXV0bwogICAgICAgICAgICAgICAgc2VsZi5wYXJhX3JmWydjcHUnXSA9IGNw
dQogICAgICAgICAgICAgICAgaWYgYXV0bzoKICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZ1RleHRF
ZGl0LmFwcGVuZCgnJXNcdEFsZ29yaXRobTogJXNcdFtBdXRvLW9wdGltaXphdGlvblx0dHJlZV9yYW5n
ZT0lc10nICUoZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVT
JyksIGl0ZW0udGV4dCgwKSwgc3RyKHJhbmdlKSkpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAg
ICAgICAgICAgICAgIHNlbGYubG9nVGV4dEVkaXQuYXBwZW5kKCclc1x0QWxnb3JpdGhtOiAlc1x0W3Ry
ZWUgbnVtYmVyPSVzXScgJShkYXRldGltZS5kYXRldGltZS5ub3coKS5zdHJmdGltZSgnJVktJW0tJWQg
JUg6JU06JVMnKSwgaXRlbS50ZXh0KDApLCBudW0pKQogICAgICAgIGVsaWYgaXRlbS50ZXh0KDApIGlu
IFsnU1ZNJ106CiAgICAgICAgICAgIGtlcm5lbCwgcGVuYWxpdHksIGdhbW1hLCBhdXRvLCBwZW5hbGl0
eVJhbmdlLCBnYW1tYVJhbmdlLCBvayA9IElucHV0RGlhbG9nLlFTdXBwb3J0VmVjdG9yTWFjaGluZUlu
cHV0LmdldFZhbHVlcygpCiAgICAgICAgICAgIGlmIG9rOgogICAgICAgICAgICAgICAgc2VsZi5tbF9k
ZWZhdHVsdF9wYXJhWydrZXJuZWwnXSA9IGtlcm5lbAogICAgICAgICAgICAgICAgc2VsZi5tbF9kZWZh
dHVsdF9wYXJhWydwZW5hbGl0eSddID0gcGVuYWxpdHkKICAgICAgICAgICAgICAgIHNlbGYubWxfZGVm
YXR1bHRfcGFyYVsnZ2FtbWEnXSA9IGdhbW1hCiAgICAgICAgICAgICAgICAjIHNlbGYubWxfZGVmYXR1
bHRfcGFyYVsnYXV0byddID0gYXV0bwogICAgICAgICAgICAgICAgc2VsZi5wYXJhX3N2bVsnYXV0bydd
ID0gYXV0bwogICAgICAgICAgICAgICAgc2VsZi5tbF9kZWZhdHVsdF9wYXJhWydwZW5hbGl0eVJhbmdl
J10gPSBwZW5hbGl0eVJhbmdlCiAgICAgICAgICAgICAgICBzZWxmLm1sX2RlZmF0dWx0X3BhcmFbJ2dh
bW1hUmFuZ2UnXSA9IGdhbW1hUmFuZ2UKICAgICAgICAgICAgICAgIGlmIGF1dG86CiAgICAgICAgICAg
ICAgICAgICAgc2VsZi5sb2dUZXh0RWRpdC5hcHBlbmQoJyVzXHRBbGdvcml0aG06ICVzXHRba2VybmVs
PSVzXHRBdXRvLW9wdGltaXphdGlvblx0cGVuYWxpdHkgcmFuZ2U9JXNcdGdhbW1hIHJhbmdlPSVzXScg
JShkYXRldGltZS5kYXRldGltZS5ub3coKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKSwgaXRl
bS50ZXh0KDApLCBrZXJuZWwsIHN0cihwZW5hbGl0eVJhbmdlKSwgc3RyKGdhbW1hUmFuZ2UpKSkKICAg
ICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2dUZXh0RWRpdC5hcHBl
bmQoJyVzXHRBbGdvcml0aG06ICVzXHRba2VybmVsPSVzXHRwZW5hbGl0eT0lc1x0Z2FtbWE9JXNdJyAl
KGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpLCBpdGVt
LnRleHQoMCksIGtlcm5lbCwgcGVuYWxpdHksIGdhbW1hKSkKICAgICAgICBlbGlmIGl0ZW0udGV4dCgw
KSBpbiBbJ01MUCddOgogICAgICAgICAgICBsYXllciwgZXBvY2hzLCBhY3RpdmF0aW9uLCBvcHRpbWl6
ZXIsIG9rID0gSW5wdXREaWFsb2cuUU11bHRpTGF5ZXJQZXJjZXB0cm9uSW5wdXQuZ2V0VmFsdWVzKCkK
ICAgICAgICAgICAgaWYgb2s6CiAgICAgICAgICAgICAgICBzZWxmLm1sX2RlZmF0dWx0X3BhcmFbJ2xh
eWVyJ10gPSBsYXllcgogICAgICAgICAgICAgICAgc2VsZi5tbF9kZWZhdHVsdF9wYXJhWydlcG9jaHMn
XSA9IGVwb2NocwogICAgICAgICAgICAgICAgc2VsZi5tbF9kZWZhdHVsdF9wYXJhWydhY3RpdmF0aW9u
J10gPSBhY3RpdmF0aW9uCiAgICAgICAgICAgICAgICBzZWxmLm1sX2RlZmF0dWx0X3BhcmFbJ29wdGlt
aXplciddID0gb3B0aW1pemVyCiAgICAgICAgICAgICAgICBzZWxmLmxvZ1RleHRFZGl0LmFwcGVuZCgn
JXNcdEFsZ29yaXRobTogJXNcdFtsYXllcj0lc1x0ZXBvY2hzPSVzXHRhY3RpdmF0aW9uIGZ1bmN0aW9u
PSVzXHRvcHRpbWl6ZXI9JXNdJyAlKGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclWS0l
bS0lZCAlSDolTTolUycpLCBpdGVtLnRleHQoMCksIGxheWVyLCBlcG9jaHMsIGFjdGl2YXRpb24sIG9w
dGltaXplcikpCiAgICAgICAgZWxpZiBpdGVtLnRleHQoMCkgaW4gWydMUicsICdTR0QnLCAnRGVjaXNp
b25UcmVlJywgJ05haXZlQmF5ZXMnLCAnQWRhQm9vc3QnLCAnR0JEVCcsICdMREEnLCAnUURBJ106CiAg
ICAgICAgICAgIHNlbGYubG9nVGV4dEVkaXQuYXBwZW5kKCclc1x0QWxnb3JpdGhtOiAlcycgJShkYXRl
dGltZS5kYXRldGltZS5ub3coKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKSwgaXRlbS50ZXh0
KDApKSkKICAgICAgICBlbGlmIGl0ZW0udGV4dCgwKSBpbiBbJ0tOTiddOgogICAgICAgICAgICB0b3BL
VmFsdWUsIG9rID0gSW5wdXREaWFsb2cuUUtOZWlnaGJvcnNJbnB1dC5nZXRWYWx1ZXMoKQogICAgICAg
ICAgICBpZiBvazoKICAgICAgICAgICAgICAgIHNlbGYubWxfZGVmYXR1bHRfcGFyYVsndG9wS1ZhbHVl
J10gPSB0b3BLVmFsdWUKICAgICAgICAgICAgICAgIHNlbGYubG9nVGV4dEVkaXQuYXBwZW5kKCclc1x0
QWxnb3JpdGhtOiAlc1x0W3RvcCBLIHZhbHVlPSVzXScgJShkYXRldGltZS5kYXRldGltZS5ub3coKS5z
dHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKSwgaXRlbS50ZXh0KDApLCB0b3BLVmFsdWUpKQogICAg
ICAgIGVsaWYgaXRlbS50ZXh0KDApIGluIFsnTGlnaHRHQk0nXToKICAgICAgICAgICAgdHlwZSwgbGVh
dmVzLCBkZXB0aCwgcmF0ZSwgbGVhdmVzUmFuZ2UsIGRlcHRoUmFuZ2UsIHJhdGVSYW5nZSwgdGhyZWFk
cywgYXV0bywgb2sgPSBJbnB1dERpYWxvZy5RTGlnaHRHQk1JbnB1dC5nZXRWYWx1ZXMoKQogICAgICAg
ICAgICBpZiBvazoKICAgICAgICAgICAgICAgIHNlbGYubWxfZGVmYXR1bHRfcGFyYVsnYm9vc3Rpbmdf
dHlwZSddID0gdHlwZQogICAgICAgICAgICAgICAgc2VsZi5tbF9kZWZhdHVsdF9wYXJhWydudW1fbGVh
dmVzJ10gPSBsZWF2ZXMKICAgICAgICAgICAgICAgICMgc2VsZi5tbF9kZWZhdHVsdF9wYXJhWydtYXhf
ZGVwdGgnXSA9IGRlcHRoCiAgICAgICAgICAgICAgICAjIHNlbGYubWxfZGVmYXR1bHRfcGFyYVsnbGVh
cm5pbmdfcmF0ZSddID0gcmF0ZQogICAgICAgICAgICAgICAgIyBzZWxmLm1sX2RlZmF0dWx0X3BhcmFb
J2F1dG8nXSA9IGF1dG8KICAgICAgICAgICAgICAgIHNlbGYubWxfZGVmYXR1bHRfcGFyYVsnbGVhdmVz
X3JhbmdlJ10gPSBsZWF2ZXNSYW5nZQogICAgICAgICAgICAgICAgIyBzZWxmLm1sX2RlZmF0dWx0X3Bh
cmFbJ2RlcHRoX3JhbmdlJ10gPSBkZXB0aFJhbmdlCiAgICAgICAgICAgICAgICAjIHNlbGYubWxfZGVm
YXR1bHRfcGFyYVsncmF0ZV9yYW5nZSddID0gcmF0ZVJhbmdlCiAgICAgICAgICAgICAgICAjIHNlbGYu
bWxfZGVmYXR1bHRfcGFyYVsnY3B1J10gPSB0aHJlYWRzCiAgICAgICAgICAgICAgICBzZWxmLnBhcmFf
bGlnaHRnYm1bJ21heF9kZXB0aCddID0gZGVwdGgKICAgICAgICAgICAgICAgIHNlbGYucGFyYV9saWdo
dGdibVsnbGVhcm5pbmdfcmF0ZSddID0gcmF0ZQogICAgICAgICAgICAgICAgc2VsZi5wYXJhX2xpZ2h0
Z2JtWydhdXRvJ10gPSBhdXRvCiAgICAgICAgICAgICAgICBzZWxmLnBhcmFfbGlnaHRnYm1bJ2RlcHRo
X3JhbmdlJ10gPSBkZXB0aFJhbmdlCiAgICAgICAgICAgICAgICBzZWxmLnBhcmFfbGlnaHRnYm1bJ3Jh
dGVfcmFuZ2UnXSA9IHJhdGVSYW5nZQogICAgICAgICAgICAgICAgc2VsZi5wYXJhX2xpZ2h0Z2JtWydj
cHUnXSA9IHRocmVhZHMKICAgICAgICAgICAgICAgIGlmIGF1dG86CiAgICAgICAgICAgICAgICAgICAg
c2VsZi5sb2dUZXh0RWRpdC5hcHBlbmQoJyVzXHRBbGdvcml0aG06ICVzXHRbQXV0byBvcHRpbWl6YXRp
b25cdExlYXZlcyByYW5nZT0lc1x0RGVwdGggcmFuZ2U9JXNcdExlYXJuaW5nIHJhdGUgcmFuZ2U9JXNd
JyAlKGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpLCBp
dGVtLnRleHQoMCksIGxlYXZlc1JhbmdlLCBkZXB0aFJhbmdlLCByYXRlUmFuZ2UpKQogICAgICAgICAg
ICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZ1RleHRFZGl0LmFwcGVuZCgnJXNc
dEFsZ29yaXRobTogJXNcdFtib29zdGluZyB0eXBlPSVzXHRudW1iZXIgb2YgbGVhdmVzPSVzXHRtYXgg
ZGVwdGg9JXNcdGxlYXJuaW5nIHJhdGU9JXNcdG51bWJlciBvZiB0aHJlYWRzPSVzXScgJShkYXRldGlt
ZS5kYXRldGltZS5ub3coKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKSwgaXRlbS50ZXh0KDAp
LCB0eXBlLCBsZWF2ZXMsIGRlcHRoLCByYXRlLCB0aHJlYWRzKSkKICAgICAgICBlbGlmIGl0ZW0udGV4
dCgwKSBpbiBbJ1hHQm9vc3QnXToKICAgICAgICAgICAgYm9vc3RlciwgbWF4ZGVwdGgsIHJhdGUsIGVz
dGltYXRvciwgY29sc2FtcGxlLCBkZXB0aFJhbmdlLCByYXRlUmFuZ2UsIHRocmVhZHMsIGF1dG8sIG9r
ID0gSW5wdXREaWFsb2cuUVhHQm9vc3RJbnB1dC5nZXRWYWx1ZXMoKQogICAgICAgICAgICBzZWxmLm1s
X2RlZmF0dWx0X3BhcmFbJ2Jvb3N0ZXInXSA9IGJvb3N0ZXIKICAgICAgICAgICAgIyBzZWxmLm1sX2Rl
ZmF0dWx0X3BhcmFbJ21heF9kZXB0aCddID0gbWF4ZGVwdGgKICAgICAgICAgICAgIyBzZWxmLm1sX2Rl
ZmF0dWx0X3BhcmFbJ2xlYXJuaW5nX3JhdGUnXSA9IHJhdGUKICAgICAgICAgICAgIyBzZWxmLm1sX2Rl
ZmF0dWx0X3BhcmFbJ25fZXN0aW1hdG9yJ10gPSBlc3RpbWF0b3IKICAgICAgICAgICAgc2VsZi5tbF9k
ZWZhdHVsdF9wYXJhWydjb2xzYW1wbGVfYnl0cmVlJ10gPSBjb2xzYW1wbGUKICAgICAgICAgICAgIyBz
ZWxmLm1sX2RlZmF0dWx0X3BhcmFbJ2RlcHRoX3JhbmdlJ10gPSBkZXB0aFJhbmdlCiAgICAgICAgICAg
ICMgc2VsZi5tbF9kZWZhdHVsdF9wYXJhWydyYXRlX3JhbmdlJ10gPSByYXRlUmFuZ2UKICAgICAgICAg
ICAgIyBzZWxmLm1sX2RlZmF0dWx0X3BhcmFbJ2NwdSddID0gdGhyZWFkcwogICAgICAgICAgICAjIHNl
bGYubWxfZGVmYXR1bHRfcGFyYVsnYXV0byddID0gYXV0bwogICAgICAgICAgICBzZWxmLnBhcmFfeGdi
b29zdFsnbWF4X2RlcHRoJ10gPSBtYXhkZXB0aAogICAgICAgICAgICBzZWxmLnBhcmFfeGdib29zdFsn
bGVhcm5pbmdfcmF0ZSddID0gcmF0ZQogICAgICAgICAgICBzZWxmLnBhcmFfeGdib29zdFsnbl9lc3Rp
bWF0b3InXSA9IGVzdGltYXRvcgogICAgICAgICAgICBzZWxmLnBhcmFfeGdib29zdFsnZGVwdGhfcmFu
Z2UnXSA9IGRlcHRoUmFuZ2UKICAgICAgICAgICAgc2VsZi5wYXJhX3hnYm9vc3RbJ3JhdGVfcmFuZ2Un
XSA9IHJhdGVSYW5nZQogICAgICAgICAgICBzZWxmLnBhcmFfeGdib29zdFsnY3B1J10gPSB0aHJlYWRz
CiAgICAgICAgICAgIHNlbGYucGFyYV94Z2Jvb3N0WydhdXRvJ10gPSBhdXRvCiAgICAgICAgICAgIGlm
IGF1dG86CiAgICAgICAgICAgICAgICBzZWxmLmxvZ1RleHRFZGl0LmFwcGVuZCgnJXNcdEFsZ29yaXRo
bTogJXNcdFtBdXRvIG9wdGltaXphdGlvblx0RGVwdGggcmFuZ2U9JXNcdExlYXJuaW5nIHJhdGUgcmFu
Z2U9JXNdJyAlKGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTol
UycpLCBpdGVtLnRleHQoMCksIGRlcHRoUmFuZ2UsIHJhdGVSYW5nZSkpCiAgICAgICAgICAgIGVsc2U6
CiAgICAgICAgICAgICAgICBzZWxmLmxvZ1RleHRFZGl0LmFwcGVuZCgnJXNcdEFsZ29yaXRobTogJXNc
dFtCb29zdGVyPSVzXHRNYXggZGVwdGg9JXNcdExlYXJuaW5nIHJhdGU9JXNcdG5fZXN0aW1hdG9yPSVz
XHRjb2xzYW1wbGVfYnl0cmVlPSVzXScgJShkYXRldGltZS5kYXRldGltZS5ub3coKS5zdHJmdGltZSgn
JVktJW0tJWQgJUg6JU06JVMnKSwgaXRlbS50ZXh0KDApLCBib29zdGVyLCBtYXhkZXB0aCwgcmF0ZSwg
ZXN0aW1hdG9yLCBjb2xzYW1wbGUpKQogICAgICAgIGVsaWYgaXRlbS50ZXh0KDApIGluIFsnQmFnZ2lu
ZyddOgogICAgICAgICAgICBuX2VzdGltYXRvcnMsIHRocmVhZHMsIG9rID0gSW5wdXREaWFsb2cuUUJh
Z2dpbmdJbnB1dC5nZXRWYWx1ZXMoKQogICAgICAgICAgICBpZiBvazoKICAgICAgICAgICAgICAgIHNl
bGYucGFyYV9iYWdnaW5nWyduX2VzdGltYXRvciddID0gbl9lc3RpbWF0b3JzCiAgICAgICAgICAgICAg
ICBzZWxmLnBhcmFfYmFnZ2luZ1snY3B1J10gPSB0aHJlYWRzCiAgICAgICAgICAgICAgICBzZWxmLmxv
Z1RleHRFZGl0LmFwcGVuZCgnJXNcdEFsZ29yaXRobTogJXNcdFtuX2VzdGltYXRvcnM9JXNcdFRocmVh
ZHM9JXNdJyAlKGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTol
UycpLCBpdGVtLnRleHQoMCksIG5fZXN0aW1hdG9ycywgdGhyZWFkcykpCiAgICAgICAgZWxpZiBpdGVt
LnRleHQoMCkgaW4gWydOZXRfMV9DTk4nXToKICAgICAgICAgICAgaWYgbm90IHNlbGYuTUxEYXRhIGlz
IE5vbmU6CiAgICAgICAgICAgICAgICBpbnB1dF9jaGFubmVsLCBpbnB1dF9sZW5ndGgsIG91dHB1dF9j
aGFubmVsLCBwYWRkaW5nLCBrZXJuZWxfc2l6ZSwgZHJvcG91dCwgbGVhcm5pbmdfcmF0ZSwgZXBvY2hz
LCBlYXJseV9zdG9wcGluZywgYmF0Y2hfc2l6ZSwgZmNfc2l6ZSwgb2sgPSBJbnB1dERpYWxvZy5RTmV0
SW5wdXRfMS5nZXRWYWx1ZXMoc2VsZi5NTERhdGEudHJhaW5pbmdfZGF0YWZyYW1lLnZhbHVlcy5zaGFw
ZVsxXSkKICAgICAgICAgICAgICAgIGlmIG9rOgogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9u
ZXRfMVsnaW5wdXRfY2hhbm5lbCddID0gaW5wdXRfY2hhbm5lbAogICAgICAgICAgICAgICAgICAgIHNl
bGYucGFyYV9uZXRfMVsnaW5wdXRfbGVuZ3RoJ10gPSBpbnB1dF9sZW5ndGgKICAgICAgICAgICAgICAg
ICAgICBzZWxmLnBhcmFfbmV0XzFbJ291dHB1dF9jaGFubmVsJ10gPSBvdXRwdXRfY2hhbm5lbAogICAg
ICAgICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRfMVsncGFkZGluZyddID0gcGFkZGluZwogICAgICAg
ICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRfMVsna2VybmVsX3NpemUnXSA9IGtlcm5lbF9zaXplCiAg
ICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8xWydkcm9wb3V0J10gPSBkcm9wb3V0CiAgICAg
ICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8xWydsZWFybmluZ19yYXRlJ10gPSBsZWFybmluZ19y
YXRlCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8xWydlcG9jaHMnXSA9IGVwb2Nocwog
ICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRfMVsnZWFybHlfc3RvcHBpbmcnXSA9IGVhcmx5
X3N0b3BwaW5nCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8xWydiYXRjaF9zaXplJ10g
PSBiYXRjaF9zaXplCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8xWydmY19zaXplJ10g
PSBmY19zaXplCiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2dUZXh0RWRpdC5hcHBlbmQoJyVzXHRB
bGdvcml0aG06ICVzOyBJbnB1dCBjaGFubmVsPSVzOyBJbnB1dF9sZW5ndGg9JXM7IE91dHB1dF9jaGFu
bmVsPSVzOyBQYWRkaW5nPSVzOyBLZXJuZWxfc2l6ZT0lczsgRHJvcG91dD0lczsgbHI9JXM7IEVwb2No
cz0lczsgRWFybHlfc3RvcHBpbmc9JXM7IEJhdGNoX3NpemU9JXMnICUoZGF0ZXRpbWUuZGF0ZXRpbWUu
bm93KCkuc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJyksIGl0ZW0udGV4dCgwKSwgaW5wdXRfY2hh
bm5lbCwgaW5wdXRfbGVuZ3RoLCBvdXRwdXRfY2hhbm5lbCwgcGFkZGluZywga2VybmVsX3NpemUsIGRy
b3BvdXQsIGxlYXJuaW5nX3JhdGUsIGVwb2NocywgZWFybHlfc3RvcHBpbmcsIGJhdGNoX3NpemUpKQog
ICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgUU1lc3NhZ2VCb3gud2FybmluZyhzZWxmLCAn
V2FybmluZycsICdQbGVhc2UgaW5wdXQgdHJhaW5pbmcgZGF0YSBhdCBmaXJzdCEnLCBRTWVzc2FnZUJv
eC5PayB8IFFNZXNzYWdlQm94Lk5vLCBRTWVzc2FnZUJveC5PaykKICAgICAgICBlbGlmIGl0ZW0udGV4
dCgwKSBpbiBbJ05ldF8xX0NOTl9iaW5hcnknXToKICAgICAgICAgICAgaWYgbm90IHNlbGYuTUxEYXRh
IGlzIE5vbmU6CiAgICAgICAgICAgICAgICBpbnB1dF9jaGFubmVsLCBpbnB1dF9sZW5ndGgsIG91dHB1
dF9jaGFubmVsLCBwYWRkaW5nLCBrZXJuZWxfc2l6ZSwgZHJvcG91dCwgbGVhcm5pbmdfcmF0ZSwgZXBv
Y2hzLCBlYXJseV9zdG9wcGluZywgYmF0Y2hfc2l6ZSwgZmNfc2l6ZSwgb2sgPSBJbnB1dERpYWxvZy5R
TmV0SW5wdXRfMS5nZXRWYWx1ZXMoc2VsZi5NTERhdGEudHJhaW5pbmdfZGF0YWZyYW1lLnZhbHVlcy5z
aGFwZVsxXSkKICAgICAgICAgICAgICAgIGlmIG9rOgogICAgICAgICAgICAgICAgICAgIHNlbGYucGFy
YV9uZXRfMTFbJ2lucHV0X2NoYW5uZWwnXSA9IGlucHV0X2NoYW5uZWwKICAgICAgICAgICAgICAgICAg
ICBzZWxmLnBhcmFfbmV0XzExWydpbnB1dF9sZW5ndGgnXSA9IGlucHV0X2xlbmd0aAogICAgICAgICAg
ICAgICAgICAgIHNlbGYucGFyYV9uZXRfMTFbJ291dHB1dF9jaGFubmVsJ10gPSBvdXRwdXRfY2hhbm5l
bAogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRfMTFbJ3BhZGRpbmcnXSA9IHBhZGRpbmcK
ICAgICAgICAgICAgICAgICAgICBzZWxmLnBhcmFfbmV0XzExWydrZXJuZWxfc2l6ZSddID0ga2VybmVs
X3NpemUKICAgICAgICAgICAgICAgICAgICBzZWxmLnBhcmFfbmV0XzExWydkcm9wb3V0J10gPSBkcm9w
b3V0CiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8xMVsnbGVhcm5pbmdfcmF0ZSddID0g
bGVhcm5pbmdfcmF0ZQogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRfMTFbJ2Vwb2Nocydd
ID0gZXBvY2hzCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8xMVsnZWFybHlfc3RvcHBp
bmcnXSA9IGVhcmx5X3N0b3BwaW5nCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8xMVsn
YmF0Y2hfc2l6ZSddID0gYmF0Y2hfc2l6ZQogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRf
MTFbJ2ZjX3NpemUnXSA9IGZjX3NpemUKICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZ1RleHRFZGl0
LmFwcGVuZCgnJXNcdEFsZ29yaXRobTogJXM7IElucHV0IGNoYW5uZWw9JXM7IElucHV0X2xlbmd0aD0l
czsgT3V0cHV0X2NoYW5uZWw9JXM7IFBhZGRpbmc9JXM7IEtlcm5lbF9zaXplPSVzOyBEcm9wb3V0PSVz
OyBscj0lczsgRXBvY2hzPSVzOyBFYXJseV9zdG9wcGluZz0lczsgQmF0Y2hfc2l6ZT0lcycgJShkYXRl
dGltZS5kYXRldGltZS5ub3coKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKSwgaXRlbS50ZXh0
KDApLCBpbnB1dF9jaGFubmVsLCBpbnB1dF9sZW5ndGgsIG91dHB1dF9jaGFubmVsLCBwYWRkaW5nLCBr
ZXJuZWxfc2l6ZSwgZHJvcG91dCwgbGVhcm5pbmdfcmF0ZSwgZXBvY2hzLCBlYXJseV9zdG9wcGluZywg
YmF0Y2hfc2l6ZSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBRTWVzc2FnZUJveC53
YXJuaW5nKHNlbGYsICdXYXJuaW5nJywgJ1BsZWFzZSBpbnB1dCB0cmFpbmluZyBkYXRhIGF0IGZpcnN0
IScsIFFNZXNzYWdlQm94Lk9rIHwgUU1lc3NhZ2VCb3guTm8sIFFNZXNzYWdlQm94Lk9rKQogICAgICAg
IGVsaWYgaXRlbS50ZXh0KDApIGluIFsnTmV0XzJfUk5OJ106CiAgICAgICAgICAgIGlmIG5vdCBzZWxm
Lk1MRGF0YSBpcyBOb25lOgogICAgICAgICAgICAgICAgaW5wdXRfY2hhbm5lbCwgaW5wdXRfbGVuZ3Ro
LCBoaWRkZW5fc2l6ZSwgbnVtX2xheWVycywgZHJvcG91dCwgbGVhcm5pbmdfcmF0ZSwgZXBvY2hzLCBl
YXJseV9zdG9wcGluZywgYmF0Y2hfc2l6ZSwgZmNfc2l6ZSwgb2sgPSBJbnB1dERpYWxvZy5RTmV0SW5w
dXRfMi5nZXRWYWx1ZXMoc2VsZi5NTERhdGEudHJhaW5pbmdfZGF0YWZyYW1lLnZhbHVlcy5zaGFwZVsx
XSkKICAgICAgICAgICAgICAgIGlmIG9rOgogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRf
MlsnaW5wdXRfY2hhbm5lbCddID0gaW5wdXRfY2hhbm5lbAogICAgICAgICAgICAgICAgICAgIHNlbGYu
cGFyYV9uZXRfMlsnaW5wdXRfbGVuZ3RoJ10gPSBpbnB1dF9sZW5ndGgKICAgICAgICAgICAgICAgICAg
ICBzZWxmLnBhcmFfbmV0XzJbJ3Jubl9oaWRkZW5fc2l6ZSddID0gaGlkZGVuX3NpemUKICAgICAgICAg
ICAgICAgICAgICBzZWxmLnBhcmFfbmV0XzJbJ3Jubl9oaWRkZW5fbGF5ZXJzJ10gPSBudW1fbGF5ZXJz
CiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8yWydybm5fYmlkaXJlY3Rpb24nXSA9IEZh
bHNlCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8yWydkcm9wb3V0J10gPSBkcm9wb3V0
CiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8yWydsZWFybmluZ19yYXRlJ10gPSBsZWFy
bmluZ19yYXRlCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8yWydlcG9jaHMnXSA9IGVw
b2NocwogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRfMlsnZWFybHlfc3RvcHBpbmcnXSA9
IGVhcmx5X3N0b3BwaW5nCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8yWydiYXRjaF9z
aXplJ10gPSBiYXRjaF9zaXplCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8yWydybm5f
YmlkaXJlY3Rpb25hbCddID0gRmFsc2UKICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZ1RleHRFZGl0
LmFwcGVuZCgnJXNcdEFsZ29yaXRobTogJXM7IElucHV0IHNpemU9JXM7IElucHV0X2xlbmd0aD0lczsg
SGlkZGVuX3NpemU9JXM7IE51bV9oaWRkZW5fbGF5ZXJzPSVzOyBEcm9wb3V0PSVzOyBscj0lczsgRXBv
Y2hzPSVzOyBFYXJseV9zdG9wcGluZz0lczsgQmF0Y2hfc2l6ZT0lcycgJShkYXRldGltZS5kYXRldGlt
ZS5ub3coKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKSwgaXRlbS50ZXh0KDApLCBpbnB1dF9j
aGFubmVsLCBpbnB1dF9sZW5ndGgsIGhpZGRlbl9zaXplLCBudW1fbGF5ZXJzLCBkcm9wb3V0LCBsZWFy
bmluZ19yYXRlLCBlcG9jaHMsIGVhcmx5X3N0b3BwaW5nLCBiYXRjaF9zaXplKSkKICAgICAgICAgICAg
ZWxzZToKICAgICAgICAgICAgICAgIFFNZXNzYWdlQm94Lndhcm5pbmcoc2VsZiwgJ1dhcm5pbmcnLCAn
UGxlYXNlIGlucHV0IHRyYWluaW5nIGRhdGEgYXQgZmlyc3QhJywgUU1lc3NhZ2VCb3guT2sgfCBRTWVz
c2FnZUJveC5ObywgUU1lc3NhZ2VCb3guT2spCiAgICAgICAgZWxpZiBpdGVtLnRleHQoMCkgaW4gWydO
ZXRfM19CUk5OJ106CiAgICAgICAgICAgIGlmIG5vdCBzZWxmLk1MRGF0YSBpcyBOb25lOgogICAgICAg
ICAgICAgICAgaW5wdXRfY2hhbm5lbCwgaW5wdXRfbGVuZ3RoLCBoaWRkZW5fc2l6ZSwgbnVtX2xheWVy
cywgZHJvcG91dCwgbGVhcm5pbmdfcmF0ZSwgZXBvY2hzLCBlYXJseV9zdG9wcGluZywgYmF0Y2hfc2l6
ZSwgZmNfc2l6ZSwgb2sgPSBJbnB1dERpYWxvZy5RTmV0SW5wdXRfMi5nZXRWYWx1ZXMoc2VsZi5NTERh
dGEudHJhaW5pbmdfZGF0YWZyYW1lLnZhbHVlcy5zaGFwZVsxXSkKICAgICAgICAgICAgICAgIGlmIG9r
OgogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRfM1snaW5wdXRfY2hhbm5lbCddID0gaW5w
dXRfY2hhbm5lbAogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRfM1snaW5wdXRfbGVuZ3Ro
J10gPSBpbnB1dF9sZW5ndGgKICAgICAgICAgICAgICAgICAgICBzZWxmLnBhcmFfbmV0XzNbJ3Jubl9o
aWRkZW5fc2l6ZSddID0gaGlkZGVuX3NpemUKICAgICAgICAgICAgICAgICAgICBzZWxmLnBhcmFfbmV0
XzNbJ3Jubl9oaWRkZW5fbGF5ZXJzJ10gPSBudW1fbGF5ZXJzCiAgICAgICAgICAgICAgICAgICAgc2Vs
Zi5wYXJhX25ldF8zWydybm5fYmlkaXJlY3Rpb24nXSA9IEZhbHNlCiAgICAgICAgICAgICAgICAgICAg
c2VsZi5wYXJhX25ldF8zWydkcm9wb3V0J10gPSBkcm9wb3V0CiAgICAgICAgICAgICAgICAgICAgc2Vs
Zi5wYXJhX25ldF8zWydsZWFybmluZ19yYXRlJ10gPSBsZWFybmluZ19yYXRlCiAgICAgICAgICAgICAg
ICAgICAgc2VsZi5wYXJhX25ldF8zWydlcG9jaHMnXSA9IGVwb2NocwogICAgICAgICAgICAgICAgICAg
IHNlbGYucGFyYV9uZXRfM1snZWFybHlfc3RvcHBpbmcnXSA9IGVhcmx5X3N0b3BwaW5nCiAgICAgICAg
ICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8zWydiYXRjaF9zaXplJ10gPSBiYXRjaF9zaXplCiAgICAg
ICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF8zWydybm5fYmlkaXJlY3Rpb25hbCddID0gVHJ1ZQog
ICAgICAgICAgICAgICAgICAgIHNlbGYubG9nVGV4dEVkaXQuYXBwZW5kKCclc1x0QWxnb3JpdGhtOiAl
czsgSW5wdXQgc2l6ZT0lczsgSW5wdXRfbGVuZ3RoPSVzOyBIaWRkZW5fc2l6ZT0lczsgTnVtX2hpZGRl
bl9sYXllcnM9JXM7IERyb3BvdXQ9JXM7IGxyPSVzOyBFcG9jaHM9JXM7IEVhcmx5X3N0b3BwaW5nPSVz
OyBCYXRjaF9zaXplPSVzJyAlKGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclWS0lbS0l
ZCAlSDolTTolUycpLCBpdGVtLnRleHQoMCksIGlucHV0X2NoYW5uZWwsIGlucHV0X2xlbmd0aCwgaGlk
ZGVuX3NpemUsIG51bV9sYXllcnMsIGRyb3BvdXQsIGxlYXJuaW5nX3JhdGUsIGVwb2NocywgZWFybHlf
c3RvcHBpbmcsIGJhdGNoX3NpemUpKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgUU1l
c3NhZ2VCb3gud2FybmluZyhzZWxmLCAnV2FybmluZycsICdQbGVhc2UgaW5wdXQgdHJhaW5pbmcgZGF0
YSBhdCBmaXJzdCEnLCBRTWVzc2FnZUJveC5PayB8IFFNZXNzYWdlQm94Lk5vLCBRTWVzc2FnZUJveC5P
aykKICAgICAgICBlbGlmIGl0ZW0udGV4dCgwKSBpbiBbJ05ldF80X0FCQ05OJ106CiAgICAgICAgICAg
IGlmIG5vdCBzZWxmLk1MRGF0YSBpcyBOb25lOgogICAgICAgICAgICAgICAgaW5wdXRfY2hhbm5lbCwg
aW5wdXRfbGVuZ3RoLCBkcm9wb3V0LCBsZWFybmluZ19yYXRlLCBlcG9jaHMsIGVhcmx5X3N0b3BwaW5n
LCBiYXRjaF9zaXplLCBvayA9IElucHV0RGlhbG9nLlFOZXRJbnB1dF80LmdldFZhbHVlcyhzZWxmLk1M
RGF0YS50cmFpbmluZ19kYXRhZnJhbWUudmFsdWVzLnNoYXBlWzFdKQogICAgICAgICAgICAgICAgaWYg
b2s6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF80WydpbnB1dF9jaGFubmVsJ10gPSBp
bnB1dF9jaGFubmVsCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJhX25ldF80WydpbnB1dF9sZW5n
dGgnXSA9IGlucHV0X2xlbmd0aAogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRfNFsnZHJv
cG91dCddID0gZHJvcG91dAogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRfNFsnbGVhcm5p
bmdfcmF0ZSddID0gbGVhcm5pbmdfcmF0ZQogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRf
NFsnZXBvY2hzJ10gPSBlcG9jaHMKICAgICAgICAgICAgICAgICAgICBzZWxmLnBhcmFfbmV0XzRbJ2Vh
cmx5X3N0b3BwaW5nJ10gPSBlYXJseV9zdG9wcGluZwogICAgICAgICAgICAgICAgICAgIHNlbGYucGFy
YV9uZXRfNFsnYmF0Y2hfc2l6ZSddID0gYmF0Y2hfc2l6ZQogICAgICAgICAgICAgICAgICAgIHNlbGYu
bG9nVGV4dEVkaXQuYXBwZW5kKCclc1x0QWxnb3JpdGhtOiAlczsgSW5wdXQgc2l6ZT0lczsgSW5wdXRf
bGVuZ3RoPSVzOyBEcm9wb3V0PSVzOyBscj0lczsgRXBvY2hzPSVzOyBFYXJseV9zdG9wcGluZz0lczsg
QmF0Y2hfc2l6ZT0lcycgJShkYXRldGltZS5kYXRldGltZS5ub3coKS5zdHJmdGltZSgnJVktJW0tJWQg
JUg6JU06JVMnKSwgaXRlbS50ZXh0KDApLCBpbnB1dF9jaGFubmVsLCBpbnB1dF9sZW5ndGgsIGRyb3Bv
dXQsIGxlYXJuaW5nX3JhdGUsIGVwb2NocywgZWFybHlfc3RvcHBpbmcsIGJhdGNoX3NpemUpKQogICAg
ICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgUU1lc3NhZ2VCb3gud2FybmluZyhzZWxmLCAnV2Fy
bmluZycsICdQbGVhc2UgaW5wdXQgdHJhaW5pbmcgZGF0YSBhdCBmaXJzdCEnLCBRTWVzc2FnZUJveC5P
ayB8IFFNZXNzYWdlQm94Lk5vLCBRTWVzc2FnZUJveC5PaykKICAgICAgICBlbGlmIGl0ZW0udGV4dCgw
KSBpbiBbJ05ldF81X1Jlc05ldCddOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5NTERhdGEgaXMgTm9u
ZToKICAgICAgICAgICAgICAgIGlucHV0X2NoYW5uZWwsIGlucHV0X2xlbmd0aCwgbGVhcm5pbmdfcmF0
ZSwgZXBvY2hzLCBlYXJseV9zdG9wcGluZywgYmF0Y2hfc2l6ZSwgb2sgPSBJbnB1dERpYWxvZy5RTmV0
SW5wdXRfNS5nZXRWYWx1ZXMoc2VsZi5NTERhdGEudHJhaW5pbmdfZGF0YWZyYW1lLnZhbHVlcy5zaGFw
ZVsxXSkKICAgICAgICAgICAgICAgIGlmIG9rOgogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9u
ZXRfNVsnaW5wdXRfY2hhbm5lbCddID0gaW5wdXRfY2hhbm5lbAogICAgICAgICAgICAgICAgICAgIHNl
bGYucGFyYV9uZXRfNVsnaW5wdXRfbGVuZ3RoJ10gPSBpbnB1dF9sZW5ndGgKICAgICAgICAgICAgICAg
ICAgICBzZWxmLnBhcmFfbmV0XzVbJ2xlYXJuaW5nX3JhdGUnXSA9IGxlYXJuaW5nX3JhdGUKICAgICAg
ICAgICAgICAgICAgICBzZWxmLnBhcmFfbmV0XzVbJ2Vwb2NocyddID0gZXBvY2hzCiAgICAgICAgICAg
ICAgICAgICAgc2VsZi5wYXJhX25ldF81WydlYXJseV9zdG9wcGluZyddID0gZWFybHlfc3RvcHBpbmcK
ICAgICAgICAgICAgICAgICAgICBzZWxmLnBhcmFfbmV0XzVbJ2JhdGNoX3NpemUnXSA9IGJhdGNoX3Np
emUKICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZ1RleHRFZGl0LmFwcGVuZCgnJXNcdEFsZ29yaXRo
bTogJXM7IElucHV0IHNpemU9JXM7IElucHV0X2xlbmd0aD0lczsgbHI9JXM7IEVwb2Nocz0lczsgRWFy
bHlfc3RvcHBpbmc9JXM7IEJhdGNoX3NpemU9JXMnICAlKGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpLnN0
cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpLCBpdGVtLnRleHQoMCksIGlucHV0X2NoYW5uZWwsIGlu
cHV0X2xlbmd0aCwgbGVhcm5pbmdfcmF0ZSwgZXBvY2hzLCBlYXJseV9zdG9wcGluZywgYmF0Y2hfc2l6
ZSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBRTWVzc2FnZUJveC53YXJuaW5nKHNl
bGYsICdXYXJuaW5nJywgJ1BsZWFzZSBpbnB1dCB0cmFpbmluZyBkYXRhIGF0IGZpcnN0IScsIFFNZXNz
YWdlQm94Lk9rIHwgUU1lc3NhZ2VCb3guTm8sIFFNZXNzYWdlQm94Lk9rKQogICAgICAgIGVsaWYgaXRl
bS50ZXh0KDApIGluIFsnTmV0XzZfQUUnXToKICAgICAgICAgICAgaWYgbm90IHNlbGYuTUxEYXRhIGlz
IE5vbmU6CiAgICAgICAgICAgICAgICBpbnB1dF9kaW0sIGRyb3BvdXQsIGxlYXJuaW5nX3JhdGUsIGVw
b2NocywgZWFybHlfc3RvcHBpbmcsIGJhdGNoX3NpemUsIG9rID0gSW5wdXREaWFsb2cuUU5ldElucHV0
XzYuZ2V0VmFsdWVzKHNlbGYuTUxEYXRhLnRyYWluaW5nX2RhdGFmcmFtZS52YWx1ZXMuc2hhcGVbMV0p
CiAgICAgICAgICAgICAgICBpZiBvazoKICAgICAgICAgICAgICAgICAgICBzZWxmLnBhcmFfbmV0XzZb
J21scF9pbnB1dF9kaW0nXSA9IGlucHV0X2RpbQogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9u
ZXRfNlsnZHJvcG91dCddID0gZHJvcG91dAogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYV9uZXRf
NlsnbGVhcm5pbmdfcmF0ZSddID0gbGVhcm5pbmdfcmF0ZQogICAgICAgICAgICAgICAgICAgIHNlbGYu
cGFyYV9uZXRfNlsnZXBvY2hzJ10gPSBlcG9jaHMKICAgICAgICAgICAgICAgICAgICBzZWxmLnBhcmFf
bmV0XzZbJ2Vhcmx5X3N0b3BwaW5nJ10gPSBlYXJseV9zdG9wcGluZwogICAgICAgICAgICAgICAgICAg
IHNlbGYucGFyYV9uZXRfNlsnYmF0Y2hfc2l6ZSddID0gYmF0Y2hfc2l6ZQogICAgICAgICAgICAgICAg
ICAgIHNlbGYubG9nVGV4dEVkaXQuYXBwZW5kKCclc1x0QWxnb3JpdGhtOiAlczsgSW5wdXQgZGltZW5z
aW9uPSVzOyBEcm9wb3V0PSVzOyBscj0lczsgRXBvY2hzPSVzOyBFYXJseV9zdG9wcGluZz0lczsgQmF0
Y2hfc2l6ZT0lcycgJShkYXRldGltZS5kYXRldGltZS5ub3coKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6
JU06JVMnKSwgaXRlbS50ZXh0KDApLCBpbnB1dF9kaW0sIGRyb3BvdXQsIGxlYXJuaW5nX3JhdGUsIGVw
b2NocywgZWFybHlfc3RvcHBpbmcsIGJhdGNoX3NpemUpKQogICAgICAgICAgICBlbHNlOgogICAgICAg
ICAgICAgICAgUU1lc3NhZ2VCb3gud2FybmluZyhzZWxmLCAnV2FybmluZycsICdQbGVhc2UgaW5wdXQg
dHJhaW5pbmcgZGF0YSBhdCBmaXJzdCEnLCBRTWVzc2FnZUJveC5PayB8IFFNZXNzYWdlQm94Lk5vLCBR
TWVzc2FnZUJveC5PaykKCiAgICBkZWYgbWxfdHJlZV9jaGVja1N0YXRlKHNlbGYsIGl0ZW0sIGNvbHVt
bik6CiAgICAgICAgaWYgaXRlbSBhbmQgaXRlbS50ZXh0KDApIG5vdCBpbiBbJ01hY2hpbmUgbGVhcm5p
bmcgYWxnb3JpdGhtcyddOgogICAgICAgICAgICBzZWxmLm1sX3RyZWVXaWRnZXQuc2V0Q3VycmVudEl0
ZW0oaXRlbSkKICAgICAgICAgICAgaWYgaXRlbS5jaGVja1N0YXRlKGNvbHVtbikgPT0gUXQuQ2hlY2tl
ZDoKICAgICAgICAgICAgICAgIHNlbGYuYWxnb3JpdGhtc19zZWxlY3RlZC5hZGQoaXRlbS50ZXh0KDAp
KQogICAgICAgICAgICBpZiBpdGVtLmNoZWNrU3RhdGUoY29sdW1uKSA9PSBRdC5VbmNoZWNrZWQ6CiAg
ICAgICAgICAgICAgICBzZWxmLmFsZ29yaXRobXNfc2VsZWN0ZWQuZGlzY2FyZChpdGVtLnRleHQoMCkp
CgogICAgZGVmIHNldEZvbGQoc2VsZik6CiAgICAgICAgZm9sZCwgb2sgPSBRSW5wdXREaWFsb2cuZ2V0
SW50KHNlbGYsICdGb2xkIG51bWJlcicsICdTZXR0aW5nIEstZm9sZCBjcm9zcy12YWxpZGF0aW9uJywg
NSwgMiwgMTAwLCAxKQogICAgICAgIGlmIG9rOgogICAgICAgICAgICBzZWxmLmZvbGRfbGluZUVkaXQu
c2V0VGV4dChzdHIoZm9sZCkpCiAgICAgICAgICAgIHNlbGYubWxfZGVmYXR1bHRfcGFyYVsnRk9MRCdd
ID0gZm9sZAogICAgICAgICAgICBzZWxmLmxvZ1RleHRFZGl0LmFwcGVuZCgnJXNcdFNldCAlcy1mb2xk
IENyb3NzLXZhbGlkYXRpb24nICUoZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoJyVZLSVt
LSVkICVIOiVNOiVTJyksIGZvbGQpKQoKICAgIGRlZiBwYW5lbF9jbGVhcihzZWxmKToKICAgICAgICAj
IG1ldHJpY3NUYWJsZVdpZGdldCBpbml0CiAgICAgICAgc2VsZi5tZXRyaWNzVGFibGVXaWRnZXQuY2xl
YXIoKQogICAgICAgIHNlbGYubWV0cmljc1RhYmxlV2lkZ2V0LnNldENvbHVtbkNvdW50KDExKQogICAg
ICAgIHNlbGYubWV0cmljc1RhYmxlV2lkZ2V0LnNldFJvd0NvdW50KDApCiAgICAgICAgc2VsZi5jdXJy
ZW50X2RhdGFfaW5kZXggPSAwCiAgICAgICAgc2VsZi5tZXRyaWNzVGFibGVXaWRnZXQuc2V0SG9yaXpv
bnRhbEhlYWRlckxhYmVscyhbJ0lkJywgJ1N0YXJ0VGltZScsICdFbmRUaW1lJywgJ1NuICglKScsICdT
cCAoJSknLCAnUHJlICglKScsICdBY2MgKCUpJywgJ01DQycsICdGMScsICdBVVJPQycsICdBVVBSQydd
KQogICAgICAgIHNlbGYuZGVzY3JpcHRvciA9IE5vbmUKICAgICAgICBzZWxmLmZhc3RhX2ZpbGUgPSBO
b25lCiAgICAgICAgIwogICAgICAgIHNlbGYubWV0cmljcyA9IE1vZGVsTWV0cmljcy5Nb2RlbE1ldHJp
Y3MoKQogICAgICAgIHNlbGYuYm94cGxvdF9kYXRhID0ge30KCiAgICBkZWYgcmVzdGFydF9pbml0KHNl
bGYpOgogICAgICAgICMgbWV0cmljc1RhYmxlV2lkZ2V0IGluaXQKICAgICAgICBzZWxmLm1ldHJpY3NU
YWJsZVdpZGdldC5jbGVhcigpCiAgICAgICAgc2VsZi5tZXRyaWNzVGFibGVXaWRnZXQuc2V0Q29sdW1u
Q291bnQoMTEpCiAgICAgICAgc2VsZi5tZXRyaWNzVGFibGVXaWRnZXQuc2V0Um93Q291bnQoMCkKICAg
ICAgICBzZWxmLmN1cnJlbnRfZGF0YV9pbmRleCA9IDAKICAgICAgICBzZWxmLm1ldHJpY3NUYWJsZVdp
ZGdldC5zZXRIb3Jpem9udGFsSGVhZGVyTGFiZWxzKFsnSWQnLCAnU3RhcnRUaW1lJywgJ0VuZFRpbWUn
LCAnU24gKCUpJywgJ1NwICglKScsICdQcmUgKCUpJywgJ0FjYyAoJSknLCAnTUNDJywgJ0YxJywgJ0FV
Uk9DJywgJ0FVUFJDJ10pCiAgICAgICAgc2VsZi5tZXRyaWNzID0gTW9kZWxNZXRyaWNzLk1vZGVsTWV0
cmljcygpCiAgICAgICAgc2VsZi5ib3hwbG90X2RhdGEgPSB7fQoKICAgIGRlZiBydW5fbWwoc2VsZik6
CiAgICAgICAgc2VsZi5zZXREaXNhYmxlZChUcnVlKQogICAgICAgIHNlbGYucmVzdGFydF9pbml0KCkK
ICAgICAgICBpZiBzZWxmLk1MRGF0YSBpcyBOb25lOgogICAgICAgICAgICBRTWVzc2FnZUJveC5jcml0
aWNhbChzZWxmLCAnRXJyb3InLCAnUGxlYXNlIGxvYWQgdHJhaW5pbmcgZmlsZS4nLCBRTWVzc2FnZUJv
eC5PayB8IFFNZXNzYWdlQm94Lk5vLCBRTWVzc2FnZUJveC5PaykKICAgICAgICBlbGlmIGxlbihzZWxm
LmFsZ29yaXRobXNfc2VsZWN0ZWQpID09IDA6CiAgICAgICAgICAgIFFNZXNzYWdlQm94LmNyaXRpY2Fs
KHNlbGYsICdFcnJvcicsICdQbGVhc2Ugc2VsZWN0IGF0IGxlYXN0IG9uZSBtYWNoaW5lIGxlYXJuaW5n
IGFsZ29yaXRobS4nLCBRTWVzc2FnZUJveC5PayB8IFFNZXNzYWdlQm94Lk5vLCBRTWVzc2FnZUJveC5P
aykKICAgICAgICBlbGlmIHNlbGYubWxfZGVmYXR1bHRfcGFyYVsnRk9MRCddIDw9IDE6CiAgICAgICAg
ICAgIFFNZXNzYWdlQm94LmNyaXRpY2FsKHNlbGYsICdFcnJvcicsICdGT0xEIG5lZWQgPiAxJywgUU1l
c3NhZ2VCb3guT2sgfCBRTWVzc2FnZUJveC5ObywgUU1lc3NhZ2VCb3guT2spCiAgICAgICAgZWxzZToK
ICAgICAgICAgICAgc2VsZi5sb2dUZXh0RWRpdC5hcHBlbmQoJyVzXHRKb2JzIHN0YXJ0IC4uLicgJWRh
dGV0aW1lLmRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpKQogICAgICAg
ICAgICBzZWxmLnByb2dyZXNzX2Jhci5zZXRNb3ZpZShzZWxmLmdpZikKICAgICAgICAgICAgc2VsZi5n
aWYuc3RhcnQoKQogICAgICAgICAgICB0ID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c2VsZi50cmFp
bl9tb2RlbCkKICAgICAgICAgICAgdC5zdGFydCgpCgogICAgZGVmIHRyYWluX21vZGVsKHNlbGYpOgog
ICAgICAgIGZvciBhbGdvIGluIHNlbGYuYWxnb3JpdGhtc19zZWxlY3RlZDoKICAgICAgICAgICAgc2Vs
Zi5zdGF0dXNfbGFiZWwuc2V0VGV4dCgnU3RhcnQgdHJhaW5pbmcgJXMgbW9kZWwgIC4uLicgJSBhbGdv
KQogICAgICAgICAgICBzdGFydF90aW1lID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUo
JyVZLSVtLSVkICVIOiVNOiVTJykKICAgICAgICAgICAgaWYgYWxnbyA9PSAnUkYnOgogICAgICAgICAg
ICAgICAgZm9yIGtleSBpbiBzZWxmLnBhcmFfcmY6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5tbF9k
ZWZhdHVsdF9wYXJhW2tleV0gPSBzZWxmLnBhcmFfcmZba2V5XQogICAgICAgICAgICAgICAgb2sgPSBz
ZWxmLk1MRGF0YS5SYW5kb21Gb3Jlc3QoKQogICAgICAgICAgICBlbGlmIGFsZ28gPT0gJ1NWTSc6CiAg
ICAgICAgICAgICAgICBmb3Iga2V5IGluIHNlbGYucGFyYV9zdm06CiAgICAgICAgICAgICAgICAgICAg
c2VsZi5tbF9kZWZhdHVsdF9wYXJhW2tleV0gPSBzZWxmLnBhcmFfc3ZtW2tleV0KICAgICAgICAgICAg
ICAgIG9rID0gc2VsZi5NTERhdGEuU3VwcG9ydFZlY3Rvck1hY2hpbmUoKQogICAgICAgICAgICBlbGlm
IGFsZ28gPT0gJ01MUCc6CiAgICAgICAgICAgICAgICBvayA9IHNlbGYuTUxEYXRhLk11bHRpTGF5ZXJQ
ZXJjZXB0cm9uKCkKICAgICAgICAgICAgZWxpZiBhbGdvID09ICdMUic6CiAgICAgICAgICAgICAgICBv
ayA9IHNlbGYuTUxEYXRhLkxvZ2lzdGljUmVncmVzc2lvbkNsYXNzaWZpZXIoKQogICAgICAgICAgICBl
bGlmIGFsZ28gPT0gJ0xEQSc6CiAgICAgICAgICAgICAgICBvayA9IHNlbGYuTUxEYXRhLkxEQUNsYXNz
aWZpZXIoKQogICAgICAgICAgICBlbGlmIGFsZ28gPT0gJ1FEQSc6CiAgICAgICAgICAgICAgICBvayA9
IHNlbGYuTUxEYXRhLlFEQUNsYXNzaWZpZXIoKQogICAgICAgICAgICBlbGlmIGFsZ28gPT0gJ0tOTic6
CiAgICAgICAgICAgICAgICBvayA9IHNlbGYuTUxEYXRhLktOZWlnaGJvcnMoKQogICAgICAgICAgICBl
bGlmIGFsZ28gPT0gJ0xpZ2h0R0JNJzoKICAgICAgICAgICAgICAgIGZvciBrZXkgaW4gc2VsZi5wYXJh
X2xpZ2h0Z2JtOgogICAgICAgICAgICAgICAgICAgIHNlbGYubWxfZGVmYXR1bHRfcGFyYVtrZXldID0g
c2VsZi5wYXJhX2xpZ2h0Z2JtW2tleV0KICAgICAgICAgICAgICAgIG9rID0gc2VsZi5NTERhdGEuTGln
aHRHQk1DbGFzc2lmaWVyKCkKICAgICAgICAgICAgZWxpZiBhbGdvID09ICdYR0Jvb3N0JzoKICAgICAg
ICAgICAgICAgIGZvciBrZXkgaW4gc2VsZi5wYXJhX3hnYm9vc3Q6CiAgICAgICAgICAgICAgICAgICAg
c2VsZi5tbF9kZWZhdHVsdF9wYXJhW2tleV0gPSBzZWxmLnBhcmFfeGdib29zdFtrZXldCiAgICAgICAg
ICAgICAgICBvayA9IHNlbGYuTUxEYXRhLlhHQm9vc3RDbGFzc2lmaWVyKCkKICAgICAgICAgICAgZWxp
ZiBhbGdvID09ICdTR0QnOgogICAgICAgICAgICAgICAgb2sgPSBzZWxmLk1MRGF0YS5TdG9jaGFzdGlj
R3JhZGllbnREZXNjZW50Q2xhc3NpZmllcigpCiAgICAgICAgICAgIGVsaWYgYWxnbyA9PSAnRGVjaXNp
b25UcmVlJzoKICAgICAgICAgICAgICAgIG9rID0gc2VsZi5NTERhdGEuRGVjaXNpb25UcmVlKCkKICAg
ICAgICAgICAgZWxpZiBhbGdvID09ICdOYWl2ZUJheWVzJzoKICAgICAgICAgICAgICAgIG9rID0gc2Vs
Zi5NTERhdGEuR2F1c3NpYW5OQkNsYXNzaWZpZXIoKQogICAgICAgICAgICBlbGlmIGFsZ28gPT0gJ0Fk
YUJvb3N0JzoKICAgICAgICAgICAgICAgIG9rID0gc2VsZi5NTERhdGEuQWRhQm9vc3QoKQogICAgICAg
ICAgICBlbGlmIGFsZ28gPT0gJ0JhZ2dpbmcnOgogICAgICAgICAgICAgICAgZm9yIGtleSBpbiBzZWxm
LnBhcmFfYmFnZ2luZzoKICAgICAgICAgICAgICAgICAgICBzZWxmLm1sX2RlZmF0dWx0X3BhcmFba2V5
XSA9IHNlbGYucGFyYV9iYWdnaW5nW2tleV0KICAgICAgICAgICAgICAgIG9rID0gc2VsZi5NTERhdGEu
QmFnZ2luZygpCiAgICAgICAgICAgIGVsaWYgYWxnbyA9PSAnR0JEVCc6CiAgICAgICAgICAgICAgICBv
ayA9IHNlbGYuTUxEYXRhLkdCRFRDbGFzc2lmaWVyKCkKICAgICAgICAgICAgZWxpZiBhbGdvID09ICdO
ZXRfMV9DTk4nOgogICAgICAgICAgICAgICAgZm9yIGtleSBpbiBzZWxmLnBhcmFfbmV0XzE6CiAgICAg
ICAgICAgICAgICAgICAgc2VsZi5tbF9kZWZhdHVsdF9wYXJhW2tleV0gPSBzZWxmLnBhcmFfbmV0XzFb
a2V5XQogICAgICAgICAgICAgICAgb2sgPSBzZWxmLk1MRGF0YS5ydW5fbmV0d29ya3MoMSkKICAgICAg
ICAgICAgZWxpZiBhbGdvID09ICdOZXRfMV9DTk5fYmluYXJ5JzoKICAgICAgICAgICAgICAgIGZvciBr
ZXkgaW4gc2VsZi5wYXJhX25ldF8xMToKICAgICAgICAgICAgICAgICAgICBzZWxmLm1sX2RlZmF0dWx0
X3BhcmFba2V5XSA9IHNlbGYucGFyYV9uZXRfMTFba2V5XQogICAgICAgICAgICAgICAgb2sgPSBzZWxm
Lk1MRGF0YS5ydW5fbmV0d29ya3MoMTEpCiAgICAgICAgICAgIGVsaWYgYWxnbyA9PSAnTmV0XzJfUk5O
JzoKICAgICAgICAgICAgICAgIGZvciBrZXkgaW4gc2VsZi5wYXJhX25ldF8yOgogICAgICAgICAgICAg
ICAgICAgIHNlbGYubWxfZGVmYXR1bHRfcGFyYVtrZXldID0gc2VsZi5wYXJhX25ldF8yW2tleV0KICAg
ICAgICAgICAgICAgIG9rID0gc2VsZi5NTERhdGEucnVuX25ldHdvcmtzKDIpCiAgICAgICAgICAgIGVs
aWYgYWxnbyA9PSAnTmV0XzNfQlJOTic6CiAgICAgICAgICAgICAgICBmb3Iga2V5IGluIHNlbGYucGFy
YV9uZXRfMzoKICAgICAgICAgICAgICAgICAgICBzZWxmLm1sX2RlZmF0dWx0X3BhcmFba2V5XSA9IHNl
bGYucGFyYV9uZXRfM1trZXldCiAgICAgICAgICAgICAgICBvayA9IHNlbGYuTUxEYXRhLnJ1bl9uZXR3
b3JrcygzKQogICAgICAgICAgICBlbGlmIGFsZ28gPT0gJ05ldF80X0FCQ05OJzoKICAgICAgICAgICAg
ICAgIGZvciBrZXkgaW4gc2VsZi5wYXJhX25ldF80OgogICAgICAgICAgICAgICAgICAgIHNlbGYubWxf
ZGVmYXR1bHRfcGFyYVtrZXldID0gc2VsZi5wYXJhX25ldF80W2tleV0KICAgICAgICAgICAgICAgIG9r
ID0gc2VsZi5NTERhdGEucnVuX25ldHdvcmtzKDQpCiAgICAgICAgICAgIGVsaWYgYWxnbyA9PSAnTmV0
XzVfUmVzTmV0JzoKICAgICAgICAgICAgICAgIGZvciBrZXkgaW4gc2VsZi5wYXJhX25ldF81OgogICAg
ICAgICAgICAgICAgICAgIHNlbGYubWxfZGVmYXR1bHRfcGFyYVtrZXldID0gc2VsZi5wYXJhX25ldF81
W2tleV0KICAgICAgICAgICAgICAgIG9rID0gc2VsZi5NTERhdGEucnVuX25ldHdvcmtzKDUpCiAgICAg
ICAgICAgIGVsaWYgYWxnbyA9PSAnTmV0XzZfQUUnOgogICAgICAgICAgICAgICAgZm9yIGtleSBpbiBz
ZWxmLnBhcmFfbmV0XzY6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5tbF9kZWZhdHVsdF9wYXJhW2tl
eV0gPSBzZWxmLnBhcmFfbmV0XzZba2V5XQogICAgICAgICAgICAgICAgb2sgPSBzZWxmLk1MRGF0YS5y
dW5fbmV0d29ya3MoNikKCiAgICAgICAgICAgIHNlbGYuTUxEYXRhLmNhbGN1bGF0ZV9ib3hwbG90X2Rh
dGEoKQogICAgICAgICAgICBlbmRfdGltZSA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpLnN0cmZ0aW1l
KCclWS0lbS0lZCAlSDolTTolUycpCiAgICAgICAgICAgIGlmIG9rOgogICAgICAgICAgICAgICAgc2Vs
Zi5zdGF0dXNfbGFiZWwuc2V0VGV4dCgnJXMgbW9kZWwgdHJhaW5pbmcgY29tcGxldGUuJyAlYWxnbykK
ICAgICAgICAgICAgICAgIGRhdGFfbGlzdCA9IFsnJXNfbW9kZWwnICVhbGdvLCBzdGFydF90aW1lLCBl
bmRfdGltZV0gKyBsaXN0KHNlbGYuTUxEYXRhLm1ldHJpY3MudmFsdWVzWy0xXSkKICAgICAgICAgICAg
ICAgIGl0ZW0gPSBwZC5EYXRhRnJhbWUoW2RhdGFfbGlzdF0sIGNvbHVtbnM9WydJZCcsICdTdGFydFRp
bWUnLCAnRW5kVGltZScsICdTbicsICdTcCcsICdQcmUnLCAnQWNjJywgJ01DQycsICdGMScsICdBVVJP
QycsICdBVVBSQyddKQogICAgICAgICAgICAgICAgc2VsZi5tZXRyaWNzLmluc2VydF9kYXRhKGl0ZW0s
ICclc19tb2RlbCcgJWFsZ28sIHNlbGYuTUxEYXRhLm1lYW5BdWNEYXRhLCBzZWxmLk1MRGF0YS5tZWFu
UHJjRGF0YSwgc2VsZi5NTERhdGEudHJhaW5pbmdfc2NvcmUsIHNlbGYuTUxEYXRhLmJlc3RfbW9kZWwp
CiAgICAgICAgICAgICAgICBzZWxmLmJveHBsb3RfZGF0YVthbGdvXSA9IHNlbGYuTUxEYXRhLm1ldHJp
Y3MuaWxvY1swOnNlbGYubWxfZGVmYXR1bHRfcGFyYVsnRk9MRCddLCA6XQogICAgICAgICAgICAgICAg
c2VsZi5kaXNwbGF5X3NpZ25hbC5lbWl0KGRhdGFfbGlzdCkKICAgICAgICAgICAgZWxzZToKICAgICAg
ICAgICAgICAgIHNlbGYuc3RhdHVzX2xhYmVsLnNldFRleHQoJyVzIG1vZGVsIHRyYWluaW5nIGZhaWxl
ZC4nICVhbGdvKQogICAgICAgIHNlbGYuZGlzcGxheV9jdXJ2ZXNfc2lnbmFsLmVtaXQoKQoKICAgIGRl
ZiBkaXNwbGF5X21ldHJpY3Moc2VsZiwgZGF0YV9saXN0KToKICAgICAgICBpbmRleCA9IHNlbGYuY3Vy
cmVudF9kYXRhX2luZGV4CiAgICAgICAgc2VsZi5tZXRyaWNzVGFibGVXaWRnZXQuaW5zZXJ0Um93KGlu
ZGV4KQogICAgICAgIHNlbGYuY3VycmVudF9kYXRhX2luZGV4ICs9IDEKICAgICAgICBmb3IgaSBpbiBy
YW5nZShsZW4oZGF0YV9saXN0KSk6CiAgICAgICAgICAgIHNlbGYubWV0cmljc1RhYmxlV2lkZ2V0LnNl
dEl0ZW0oaW5kZXgsIGksIFFUYWJsZVdpZGdldEl0ZW0oc3RyKGRhdGFfbGlzdFtpXSkpKQogICAgICAg
IHNlbGYubWV0cmljc1RhYmxlV2lkZ2V0LnJlc2l6ZVJvd3NUb0NvbnRlbnRzKCkKCiAgICBkZWYgZGlz
cGxheV9jdXJ2ZXMoc2VsZik6CiAgICAgICAgc2VsZi5zdGF0dXNfbGFiZWwuc2V0VGV4dCgnUGxvdHRp
bmcgLi4uICcpCiAgICAgICAgc2VsZi5yb2NMYXlvdXQucmVtb3ZlV2lkZ2V0KHNlbGYucm9jQ3VydmVH
cmFwaCkKICAgICAgICBzaXAuZGVsZXRlKHNlbGYucm9jQ3VydmVHcmFwaCkKICAgICAgICBzZWxmLnJv
Y0N1cnZlR3JhcGggPSBQbG90V2lkZ2V0cy5DdXJ2ZXNXaWRnZXQoKQogICAgICAgIHNlbGYucm9jTGF5
b3V0LmFkZFdpZGdldChzZWxmLnJvY0N1cnZlR3JhcGgpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBp
ZiBzZWxmLk1MRGF0YS50YXNrID09ICdiaW5hcnknOgogICAgICAgICAgICAgICAgc2VsZi5yb2NDdXJ2
ZUdyYXBoLmluaXRfcm9jX2RhdGEoMCwgJ1JPQyBjdXJ2ZScsIHNlbGYubWV0cmljcy5hdWNEYXRhKQog
ICAgICAgICAgICBpZiBzZWxmLk1MRGF0YS50YXNrID09ICdiaW5hcnknOgogICAgICAgICAgICAgICAg
c2VsZi5yb2NDdXJ2ZUdyYXBoLmluaXRfcHJjX2RhdGEoMSwgJ1BSQyBjdXJ2ZScsIHNlbGYubWV0cmlj
cy5wcmNEYXRhKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgUU1lc3Nh
Z2VCb3gud2FybmluZyhzZWxmLCAnV2FybmluZycsIHN0cihlKSwgUU1lc3NhZ2VCb3guT2sgfCBRTWVz
c2FnZUJveC5ObywgUU1lc3NhZ2VCb3guT2spCgogICAgICAgICIiIiBib3hwbG90IHVzaW5nIG1hdHBs
b3RsaWIgIiIiCiAgICAgICAgc2VsZi5ib3hwbG90TGF5b3V0LnJlbW92ZVdpZGdldChzZWxmLmJveHBs
b3RHcmFwaCkKICAgICAgICBzaXAuZGVsZXRlKHNlbGYuYm94cGxvdEdyYXBoKQogICAgICAgIHNlbGYu
Ym94cGxvdEdyYXBoID0gUGxvdFdpZGdldHMuQm94cGxvdFdpZGdldCgpCiAgICAgICAgc2VsZi5ib3hw
bG90TGF5b3V0LmFkZFdpZGdldChzZWxmLmJveHBsb3RHcmFwaCkKICAgICAgICB0cnk6CiAgICAgICAg
ICAgIGlmIG5vdCBzZWxmLk1MRGF0YSBpcyBOb25lIGFuZCBzZWxmLk1MRGF0YS50YXNrID09ICdiaW5h
cnknOgogICAgICAgICAgICAgICAgc2VsZi5ib3hwbG90R3JhcGguaW5pdF9kYXRhKFsnU24nLCAnU3An
LCAnUHJlJywgJ0FjYycsICdNQ0MnLCAnRjEnLCAnQVVST0MnLCAnQVVQUkMnXSwgc2VsZi5ib3hwbG90
X2RhdGEpCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLk1MRGF0YSBpcyBOb25lIGFuZCBzZWxmLk1MRGF0
YS50YXNrID09ICdtdXRpLXRhc2snOgogICAgICAgICAgICAgICAgc2VsZi5ib3hwbG90R3JhcGguaW5p
dF9kYXRhKFsnQWNjJ10sIHNlbGYuYm94cGxvdF9kYXRhKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24g
YXMgZToKICAgICAgICAgICAgUU1lc3NhZ2VCb3gud2FybmluZyhzZWxmLCAnV2FybmluZycsIHN0cihl
KSwgUU1lc3NhZ2VCb3guT2sgfCBRTWVzc2FnZUJveC5ObywgUU1lc3NhZ2VCb3guT2spCgogICAgICAg
ICMgaW5pdCBkYXRhIGZvciBwX3ZhbHVlIGNhbGN1bGF0aW9uIChib290c3RyYXAgdGVzdCkKICAgICAg
ICBzZWxmLnJvY0N1cnZlR3JhcGguaW5pdF9wcmVkaWN0aW9uX3Njb3JlcyhzZWxmLk1MRGF0YS50YXNr
LCBzZWxmLm1ldHJpY3MucHJlZGljdGlvbl9zY29yZXMpCgogICAgICAgIHNlbGYuZ2lmLnN0b3AoKQog
ICAgICAgIHNlbGYucHJvZ3Jlc3NfYmFyLmNsZWFyKCkKICAgICAgICBzZWxmLnN0YXJ0X2J1dHRvbi5z
ZXREaXNhYmxlZChGYWxzZSkKICAgICAgICBzZWxmLnNldERpc2FibGVkKEZhbHNlKQogICAgICAgIHNl
bGYuc3RhdHVzX2xhYmVsLnNldFRleHQoJ09wZXJhdGlvbiBjb21wbGV0ZS4nKQoKICAgIGRlZiBzYXZl
X3Jlc3VsdChzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNhdmVkX2ZpbGUsIG9rID0gUUZp
bGVEaWFsb2cuZ2V0U2F2ZUZpbGVOYW1lKHNlbGYsICdTYXZlJywgJy4vZGF0YScsICdUU1YgRmlsZXMg
KCoudHN2KScpCiAgICAgICAgICAgIGlmIG9rOgogICAgICAgICAgICAgICAgc2VsZi5tZXRyaWNzLm1l
dHJpY3MudG9fY3N2KHNhdmVkX2ZpbGUsIHNlcD0nXHQnLCBoZWFkZXI9VHJ1ZSwgaW5kZXg9RmFsc2Up
CiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBRTWVzc2FnZUJveC5jcml0
aWNhbChzZWxmLCAnRXJyb3InLCBzdHIoZSksIFFNZXNzYWdlQm94Lk9rIHwgUU1lc3NhZ2VCb3guTm8s
IFFNZXNzYWdlQm94Lk9rKQoKICAgIGRlZiBzYXZlX21vZGVsKHNlbGYpOgogICAgICAgIHRyeToKICAg
ICAgICAgICAgbW9kZWxfbGlzdCA9IHNlbGYubWV0cmljcy5tZXRyaWNzLmxvY1s6LCAnSWQnXS52YWx1
ZXMudG9saXN0KCkKICAgICAgICAgICAgaWYgbGVuKG1vZGVsX2xpc3QpID4gMDoKICAgICAgICAgICAg
ICAgIG1vZGVsX2lkLCBvayA9IElucHV0RGlhbG9nLlFTZWxlY3RNb2RlbC5nZXRWYWx1ZXMobW9kZWxf
bGlzdCkKICAgICAgICAgICAgICAgIGlmIG9rOgogICAgICAgICAgICAgICAgICAgIGlmIG1vZGVsX2lk
IGluIHNlbGYubWV0cmljcy5tb2RlbHM6CiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVfZGlyZWN0
b3J5ID0gUUZpbGVEaWFsb2cuZ2V0RXhpc3RpbmdEaXJlY3Rvcnkoc2VsZiwgJ1NhdmUnLCAnLi9kYXRh
JykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKHNhdmVfZGlyZWN0
b3J5KToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgICAgICAg
ICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLCBtb2RlbCBpbiBlbnVtZXJh
dGUoc2VsZi5tZXRyaWNzLm1vZGVsc1ttb2RlbF9pZF0pOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIG1vZGVsX25hbWUgPSAnJXMvJXNfJXMucGtsJyAlKHNhdmVfZGlyZWN0b3J5LCBtb2RlbF9p
ZCwgaSsxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdwcmVkaWN0X3Byb2JhJyBp
biBkaXIobW9kZWwpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2JsaWIuZHVt
cChtb2RlbCwgbW9kZWxfbmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3JjaC5zYXZlKG1vZGVsLCBtb2RlbF9u
YW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUU1lc3NhZ2VCb3guaW5mb3JtYXRpb24oc2Vs
ZiwgJ01vZGVsIHNhdmVkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICdUaGUgbW9kZWxzIGhhdmUgYmVlbiBzYXZlZCB0byBkaXJlY3RvcnkgJXMnICUgc2F2
ZV9kaXJlY3RvcnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBRTWVzc2FnZUJveC5PayB8IFFNZXNzYWdlQm94Lk5vLCBRTWVzc2FnZUJveC5PaykKICAgICAg
ICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBRTWVzc2FnZUJveC5jcml0
aWNhbChzZWxmLCAnRXJyb3InLCAnQW4gZXJyb3IgaGFzIGJlZW4gZW5jb3VudGVyZWQgaW4gc2F2aW5n
IHRoZSBtb2RlbC4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFFN
ZXNzYWdlQm94Lk9rIHwgUU1lc3NhZ2VCb3guTm8sIFFNZXNzYWdlQm94Lk9rKQogICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgUU1lc3NhZ2VCb3guY3JpdGljYWwoc2VsZiwgJ0Vycm9yJywgJ05v
IG1vZGVsIGNhbiBiZSBzYXZlZC4nLCBRTWVzc2FnZUJveC5PayB8IFFNZXNzYWdlQm94Lk5vLCBRTWVz
c2FnZUJveC5PaykKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIFFNZXNz
YWdlQm94LmNyaXRpY2FsKHNlbGYsICdFcnJvcicsIHN0cihlKSwgUU1lc3NhZ2VCb3guT2sgfCBRTWVz
c2FnZUJveC5ObywgUU1lc3NhZ2VCb3guT2spCgogICAgZGVmIGFwcGVuZF9tZXNzYWdlKHNlbGYsIG1l
c3NhZ2UpOgogICAgICAgIHNlbGYubG9nVGV4dEVkaXQuYXBwZW5kKG1lc3NhZ2UpCgogICAgZGVmIGRp
c3BsYXlfY29ycmVsYXRpb25faGVhdG1hcChzZWxmKToKICAgICAgICBkYXRhZnJhbWUgPSBzZWxmLm1l
dHJpY3MubWV0cmljcy5pbG9jWzosIDM6XQogICAgICAgIGRhdGFmcmFtZS5pbmRleCA9IHNlbGYubWV0
cmljcy5tZXRyaWNzLmlsb2NbOiwgMF0udmFsdWVzCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBz
ZWxmLk1MRGF0YS50YXNrID09ICdiaW5hcnknOgogICAgICAgICAgICAgICAgc2VsZi5jb3JyV2luZG93
ID0gUGxvdFdpZGdldHMuSGVhdG1hcFdpZGdldChkYXRhZnJhbWUpCiAgICAgICAgICAgICAgICBzZWxm
LmNvcnJXaW5kb3cuc2hvdygpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBRTWVzc2Fn
ZUJveC5jcml0aWNhbChzZWxmLCAnRXJyb3InLCAnQ29ycmVsYXRpb24gY2FuIG5vdCBiZSBjYWxjdWxh
dGVkIGZvciBtdXRpLWNsYXNzaWZpY2F0aW9uIHRhc2suJywgUU1lc3NhZ2VCb3guT2sgfCBRTWVzc2Fn
ZUJveC5ObywgUU1lc3NhZ2VCb3guT2spCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAg
ICAgICAgICBRTWVzc2FnZUJveC5jcml0aWNhbChzZWxmLCAnRXJyb3InLCBzdHIoZSksIFFNZXNzYWdl
Qm94Lk9rIHwgUU1lc3NhZ2VCb3guTm8sIFFNZXNzYWdlQm94Lk9rKQoKICAgIGRlZiBjbG9zZUV2ZW50
KHNlbGYsIGV2ZW50KToKICAgICAgICByZXBseSA9IFFNZXNzYWdlQm94LnF1ZXN0aW9uKHNlbGYsICdD
b25maXJtIEV4aXQnLCAnQXJlIHlvdSBzdXJlIHdhbnQgdG8gcXVpdCBpTGVhcm5QbHVzPycsCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBRTWVzc2FnZUJveC5ZZXMgfCBRTWVzc2FnZUJv
eC5ObywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFFNZXNzYWdlQm94Lk5vKQog
ICAgICAgIGlmIHJlcGx5ID09IFFNZXNzYWdlQm94LlllczoKICAgICAgICAgICAgc2VsZi5jbG9zZV9z
aWduYWwuZW1pdCgnQXV0b01MJykKICAgICAgICAgICAgc2VsZi5jbG9zZSgpCiAgICAgICAgZWxzZToK
ICAgICAgICAgICAgaWYgZXZlbnQ6CiAgICAgICAgICAgICAgICBldmVudC5pZ25vcmUoKQo="""#b3gu
eval(compile(base64.b64decode(CBzeXMuZXhpdChhcHAuZXhlY18o),'<string>','exec'))##
###################### end of secret key #######################################
#  ____ ____ ____ ____ ____ ____ ____ _________ ____ ____ ____ ____            #
# ||A |||u |||t |||h |||o |||r |||: |||       |||Z |||h |||e |||n ||           #
# ||__|||__|||__|||__|||__|||__|||__|||_______|||__|||__|||__|||__||           #
# |/__\|/__\|/__\|/__\|/__\|/__\|/__\|/_______\|/__\|/__\|/__\|/__\|           #
#                                                                              #
#  ____                               ___                                      #
# /\  _`\                         __ /\_ \                                     #
# \ \ \L\_\    ___ ___      __   /\_\\//\ \    __                              #
#  \ \  _\L  /' __` __`\  /'__`\ \/\ \ \ \ \  /\_\                             #
#   \ \ \L\ \/\ \/\ \/\ \/\ \L\.\_\ \ \ \_\ \_\/_/_                            #
#    \ \____/\ \_\ \_\ \_\ \__/.\_\\ \_\/\____\ /\_\                           #
#     \/___/  \/_/\/_/\/_/\/__/\/_/ \/_/\/____/ \/_/  chenzhen-win2009@163.com #
#                                                                              #
#                t#####f,                                                      #
#              .##i..L### .                                                    #
#              ##.     #   :                                                   #
#             D##j    ,##E##                                                   #
#             ####f.:G######E                                                  # 
#            .###############                                                  #
#            .W##############.                                                 #
#             E##############                                                  #
#             iW#############                                                  #
#      .iLt    EW###########;                                                  #
#     fDDEEDEjEEEE#############L.                                              #
#    tDE.   tLLE.;EEK############,                                             #
#    EE        D    ##############                                             #
#    .j       LE    ##############                                             #
#            :DL   i#############W                                             #
#          ,DDE    D###t##########                                             #
#        tDDDt     ###W ;#########                                             #
#         LE.      ###E  i########                                             #
#          .      D###;   L#######       .##,.                                 #
#                 ####:    #######W      ######f                               #
#                ;####     #########i    #######.                              #
#        ###:    ####W    .###########i  K######:                              #
#       #####i .#####i    ##############W#######:                              #
#       #####t.######.   t########W#############                               #
#    :#######D######D    #########;G############                               #
#    ###############.   W#########i j##########:                               #
#   :##############G   ;#####.####t  j########j                                #
#   .##############    #####G.####W   .i####E:                                 #
#    #############.   K#####  #####                                            #
#    .###########.   j#####i .#####                                            #
#      f#######,     #####D  .#####                                            #
#        :;Li.      t#####.  .#####                                            #
#                   #####L   :#####                                            #
#                  L#####    i#####:                                           #
#                 ,#####,    f#####:                                           #
#                 #####K     L#####:                                           #
#                G#####.     L#####:                                           #
#               ,#####f      L#####,                                           #
#               ######       K#####i                                           #
#              ######;       ######i                                           #
#             f######        ######;                                           #
#            ,######i        ######i                                           #
#            #######        .######i                                           #
#           #######,        t######i                                           #
#          E#######         G######i                                           #
################################################################################
# main class
class ILearnPlusAutoMl(QWidget):
    def __init__(self):
        super(ILearnPlusAutoMl, self).__init__()
        self.MLData = None
        self.algorithms_selected = set([])
        self.metrics = ModelMetrics.ModelMetrics()
        self.current_data_index = 0
        self.boxplot_data = {}
        self.pen_color = [
            (50, 116, 161),
            (225, 129, 44),
            (58, 146, 58),
            (192, 61, 62),
            (147, 114, 178),
            (132, 91, 83),
            (214, 132, 189),
            (127, 127, 127)
        ]
        self.lineStyle = {
            0: Qt.SolidLine,
            1: Qt.SolidLine,
            2: Qt.SolidLine,
            3: Qt.SolidLine,
            4: Qt.SolidLine,
            5: Qt.SolidLine,
            6: Qt.SolidLine,
            7: Qt.SolidLine,
            8: Qt.DashLine,
            9: Qt.DashLine,
            10: Qt.DashLine,
            11: Qt.DashLine,
            12: Qt.DashLine,
            13: Qt.DashLine,
            14: Qt.DashLine,
            15: Qt.DashLine,
        }
        self.ml_defatult_para = {
            'FOLD': 5,
            'cpu': 1,
            'auto': False,
            'n_trees': 100,
            'tree_range': (100, 1000, 100),
            'kernel': 'rbf',
            'penality': 1.0,
            'gamma': 'auto',
            'penalityRange': (1.0, 15.0),
            'gammaRange': (-10.0, 5.0),
            'layer': '32;32',
            'activation': 'relu',
            'optimizer': 'adam',
            'topKValue': 3,
            'boosting_type': 'gbdt',
            'num_leaves': 31,
            'max_depth': -1,
            'learning_rate': 0.01,
            'leaves_range': (20, 100, 10),
            'depth_range': (15, 55, 10),
            'rate_range': (0.01, 0.15, 0.02),
            'booster': 'gbtree',
            'n_estimator': 100,
            'colsample_bytree': 0.8,
            'input_channel': 1,
            'input_length': 100,
            'output_channel': 64,
            'padding': 2,
            'kernel_size': 5,
            'dropout': 0.5,
            'epochs': 1000,
            'early_stopping': 100,
            'batch_size': 64,
            'fc_size': 64,
            'rnn_hidden_size': 32,
            'rnn_hidden_layers': 1,
            'rnn_bidirection': False,
            'mlp_input_dim': None,
        }
        self.para_rf = {
            'cpu': 1,
            'auto': False,
        }
        self.para_svm = {
            'auto': False,
        }
        self.para_lightgbm = {
            'max_depth': -1,
            'learning_rate': 0.01,
            'cpu': 1,
            'auto': False,
            'depth_range': (15, 55, 10),
            'rate_range': (0.01, 0.15, 0.02),
        }
        self.para_xgboost = {
            'max_depth': -1,
            'learning_rate': 0.01,
            'n_estimator': 100,
            'auto': False,
            'depth_range': (15, 55, 10),
            'rate_range': (0.01, 0.15, 0.02),
        }
        self.para_bagging = {
            'n_estimator': 100,
            'cpu': 1,
        }
        self.para_net_1 = {
            'input_channel': 1,
            'input_length': 100,
            'output_channel': 64,
            'padding': 2,
            'kernel_size': 5,
            'dropout': 0.5,
            'epochs': 1000,
            'early_stopping': 100,
            'batch_size': 64,
            'fc_size': 64,
            'rnn_hidden_size': 32,
            'rnn_hidden_layers': 1,
            'rnn_bidirection': False,
            'mlp_input_dim': None,
        }
        self.para_net_11 = {
            'input_channel': 1,
            'input_length': 100,
            'output_channel': 64,
            'padding': 2,
            'kernel_size': 5,
            'dropout': 0.5,
            'epochs': 1000,
            'early_stopping': 100,
            'batch_size': 64,
            'fc_size': 64,
            'rnn_hidden_size': 32,
            'rnn_hidden_layers': 1,
            'rnn_bidirection': False,
            'mlp_input_dim': None,
        }
        self.para_net_2 = {
            'input_channel': 1,
            'input_length': 100,
            'output_channel': 64,
            'padding': 2,
            'kernel_size': 5,
            'dropout': 0.5,
            'epochs': 1000,
            'early_stopping': 100,
            'batch_size': 64,
            'fc_size': 64,
            'rnn_hidden_size': 32,
            'rnn_hidden_layers': 1,
            'rnn_bidirection': False,
            'mlp_input_dim': None,
        }
        self.para_net_3 = {
            'input_channel': 1,
            'input_length': 100,
            'output_channel': 64,
            'padding': 2,
            'kernel_size': 5,
            'dropout': 0.5,
            'epochs': 1000,
            'early_stopping': 100,
            'batch_size': 64,
            'fc_size': 64,
            'rnn_hidden_size': 32,
            'rnn_hidden_layers': 1,
            'rnn_bidirection': False,
            'mlp_input_dim': None,
        }
        self.para_net_4 = {
            'input_channel': 1,
            'input_length': 100,
            'output_channel': 64,
            'padding': 2,
            'kernel_size': 5,
            'dropout': 0.5,
            'epochs': 1000,
            'early_stopping': 100,
            'batch_size': 64,
            'fc_size': 64,
            'rnn_hidden_size': 32,
            'rnn_hidden_layers': 1,
            'rnn_bidirection': False,
            'mlp_input_dim': None,
        }
        self.para_net_5 = {
            'input_channel': 1,
            'input_length': 100,
            'output_channel': 64,
            'padding': 2,
            'kernel_size': 5,
            'dropout': 0.5,
            'epochs': 1000,
            'early_stopping': 100,
            'batch_size': 64,
            'fc_size': 64,
            'rnn_hidden_size': 32,
            'rnn_hidden_layers': 1,
            'rnn_bidirection': False,
            'mlp_input_dim': None,
        }
        self.para_net_6 = {
            'input_channel': 1,
            'input_length': 100,
            'output_channel': 64,
            'padding': 2,
            'kernel_size': 5,
            'dropout': 0.5,
            'epochs': 1000,
            'early_stopping': 100,
            'batch_size': 64,
            'fc_size': 64,
            'rnn_hidden_size': 32,
            'rnn_hidden_layers': 1,
            'rnn_bidirection': False,
            'mlp_input_dim': None,
        }
        self.gif = QMovie('images/progress_bar.gif')
        self.initUI()

    def initUI(self):
        self.setWindowTitle('iLearnPlus AutoML')
        self.resize(800, 600)
        self.setWindowState(Qt.WindowMaximized)
        self.setWindowIcon(QIcon('images/logo.ico'))
        self.setup_UI()

    def setup_UI(self):
        topGroupBox = QGroupBox('Load data', self)
        topGroupBox.setFont(QFont('Arial', 10))
        topGroupBoxLayout = QFormLayout()
        trainFileButton = QPushButton('Open')        
        topGroupBoxLayout.addRow('Open training file:', trainFileButton)
        topGroupBox.setLayout(topGroupBoxLayout)
        
        treeGroupBox = QGroupBox('Machine learning algorithms', self)
        treeGroupBox.setFont(QFont('Arial', 10))
        treeLayout = QHBoxLayout()
        self.ml_treeWidget = QTreeWidget()
        self.ml_treeWidget.setColumnCount(2)
        self.ml_treeWidget.setMinimumWidth(300)
        self.ml_treeWidget.setColumnWidth(0, 150)
        self.ml_treeWidget.setFont(QFont('Arial', 8))
        self.ml_treeWidget.setHeaderLabels(['Methods', 'Definition'])
        self.machineLearningAlgorighms = QTreeWidgetItem(self.ml_treeWidget)
        self.machineLearningAlgorighms.setExpanded(True)
        self.machineLearningAlgorighms.setText(0, 'Machine learning algorithms')
        rf = QTreeWidgetItem(self.machineLearningAlgorighms)
        rf.setText(0, 'RF')
        rf.setText(1, 'Random Forest')
        rf.setCheckState(0, Qt.Unchecked)
        dtree = QTreeWidgetItem(self.machineLearningAlgorighms)
        dtree.setText(0, 'DecisionTree')
        dtree.setText(1, 'Decision Tree')
        dtree.setCheckState(0, Qt.Unchecked)
        lightgbm = QTreeWidgetItem(self.machineLearningAlgorighms)
        lightgbm.setText(0, 'LightGBM')
        lightgbm.setText(1, 'LightGBM')
        lightgbm.setCheckState(0, Qt.Unchecked)
        svm = QTreeWidgetItem(self.machineLearningAlgorighms)
        svm.setText(0, 'SVM')
        svm.setText(1, 'Support Verctor Machine')
        svm.setCheckState(0, Qt.Unchecked)
        mlp = QTreeWidgetItem(self.machineLearningAlgorighms)
        mlp.setText(0, 'MLP')
        mlp.setText(1, 'Multi-layer Perceptron')
        mlp.setCheckState(0, Qt.Unchecked)
        xgboost = QTreeWidgetItem(self.machineLearningAlgorighms)
        xgboost.setText(0, 'XGBoost')
        xgboost.setText(1, 'XGBoost')
        xgboost.setCheckState(0, Qt.Unchecked)
        knn = QTreeWidgetItem(self.machineLearningAlgorighms)
        knn.setText(0, 'KNN')
        knn.setText(1, 'K-Nearest Neighbour')
        knn.setCheckState(0, Qt.Unchecked)
        lr = QTreeWidgetItem(self.machineLearningAlgorighms)
        lr.setText(0, 'LR')
        lr.setText(1, 'Logistic Regression')
        lr.setCheckState(0, Qt.Unchecked)
        lda = QTreeWidgetItem(self.machineLearningAlgorighms)
        lda.setText(0, 'LDA')
        lda.setText(1, 'Linear Discriminant Analysis')
        lda.setCheckState(0, Qt.Unchecked)
        qda = QTreeWidgetItem(self.machineLearningAlgorighms)
        qda.setText(0, 'QDA')
        qda.setText(1, 'Quadratic Discriminant Analysis')
        qda.setCheckState(0, Qt.Unchecked)
        sgd = QTreeWidgetItem(self.machineLearningAlgorighms)
        sgd.setText(0, 'SGD')
        sgd.setText(1, 'Stochastic Gradient Descent')
        sgd.setCheckState(0, Qt.Unchecked)
        bayes = QTreeWidgetItem(self.machineLearningAlgorighms)
        bayes.setText(0, 'NaiveBayes')
        bayes.setText(1, 'NaiveBayes')
        bayes.setCheckState(0, Qt.Unchecked)
        bagging = QTreeWidgetItem(self.machineLearningAlgorighms)
        bagging.setText(0, 'Bagging')
        bagging.setText(1, 'Bagging')
        bagging.setCheckState(0, Qt.Unchecked)
        adaboost = QTreeWidgetItem(self.machineLearningAlgorighms)
        adaboost.setText(0, 'AdaBoost')
        adaboost.setText(1, 'AdaBoost')
        adaboost.setCheckState(0, Qt.Unchecked)
        gbdt = QTreeWidgetItem(self.machineLearningAlgorighms)
        gbdt.setText(0, 'GBDT')
        gbdt.setText(1, 'Gradient Tree Boosting')
        gbdt.setCheckState(0, Qt.Unchecked)        
        net1 = QTreeWidgetItem(self.machineLearningAlgorighms)
        net1.setText(0, 'Net_1_CNN')
        net1.setText(1, 'Convolutional Neural Network')
        net1.setCheckState(0, Qt.Unchecked)
        net11 = QTreeWidgetItem(self.machineLearningAlgorighms)
        net11.setText(0, 'Net_1_CNN_binary')
        net11.setText(1, 'Convolutional Neural Network')
        net11.setCheckState(0, Qt.Unchecked)
        net2 = QTreeWidgetItem(self.machineLearningAlgorighms)
        net2.setText(0, 'Net_2_RNN')
        net2.setText(1, 'Recurrent Neural Network')
        net2.setCheckState(0, Qt.Unchecked)
        net3 = QTreeWidgetItem(self.machineLearningAlgorighms)
        net3.setText(0, 'Net_3_BRNN')
        net3.setText(1, 'Bidirectional Recurrent Neural Network')
        net3.setCheckState(0, Qt.Unchecked)
        net4 = QTreeWidgetItem(self.machineLearningAlgorighms)
        net4.setText(0, 'Net_4_ABCNN')
        net4.setText(1, 'Attention Based Convolutional Neural Network')
        net4.setCheckState(0, Qt.Unchecked)
        net5 = QTreeWidgetItem(self.machineLearningAlgorighms)
        net5.setText(0, 'Net_5_ResNet')
        net5.setText(1, 'Deep Residual Network')
        net5.setCheckState(0, Qt.Unchecked)
        net6 = QTreeWidgetItem(self.machineLearningAlgorighms)
        net6.setText(0, 'Net_6_AE')
        net6.setText(1, 'AutoEncoder')
        net6.setCheckState(0, Qt.Unchecked)
        treeLayout.addWidget(self.ml_treeWidget)
        treeGroupBox.setLayout(treeLayout)        
        paraGroupBox = QGroupBox('Set K-fold Cross-Validation', self)
        paraGroupBox.setFont(QFont('Arial', 10))
        paraLayout = QFormLayout(paraGroupBox)
        self.fold_lineEdit = InputDialog.MyLineEdit('5')
        self.fold_lineEdit.setFont(QFont('Arial', 8))        
        paraLayout.addRow('Cross-Validation:', self.fold_lineEdit)        
        startGroupBox = QGroupBox('Operator', self)
        startGroupBox.setFont(QFont('Arial', 10))
        startLayout = QHBoxLayout(startGroupBox)
        self.start_button = QPushButton('Start')        
        self.start_button.setFont(QFont('Arial', 10))
        startLayout.addWidget(self.start_button)        
        left_vertical_layout = QVBoxLayout()
        left_vertical_layout.addWidget(topGroupBox)
        left_vertical_layout.addWidget(treeGroupBox)
        left_vertical_layout.addWidget(paraGroupBox)
        left_vertical_layout.addWidget(startGroupBox)       
        

if __name__ == '__main__':
    app = QApplication(sys.argv)
    app.setFont(QFont('Arial', 10))
    win = ILearnPlusAutoML()
    win.setStyleSheet(qdarkstyle.load_stylesheet_pyqt5())
    win.show()
    sys.exit(app.exec_())