#!/usr/bin/env python
# _*_ coding: utf-8 _*_

import os, sys, re, platform

pPath = os.path.split(os.path.realpath(__file__))[0]
sys.path.append(pPath)

import warnings
import pandas as pd
import numpy as np
import torch
from sklearn.naive_bayes import GaussianNB
from sklearn.ensemble import RandomForestClassifier, AdaBoostClassifier, BaggingClassifier, GradientBoostingClassifier
from sklearn.tree import DecisionTreeClassifier
from sklearn.neural_network import MLPClassifier
from sklearn.linear_model import LogisticRegression, SGDClassifier
from sklearn.neighbors import KNeighborsClassifier
from sklearn import svm
from sklearn.discriminant_analysis import LinearDiscriminantAnalysis, QuadraticDiscriminantAnalysis
from sklearn.model_selection import StratifiedKFold, GridSearchCV
import lightgbm as lgb
import xgboost as xgb
from scipy import interp
import base64
from EvaluationMetrics import Metrics
from Nets import (DealDataset, Net_CNN_1, Net_CNN_11, Net_RNN_2, Net_ABCNN_4, Net_ResNet_5, Net_AutoEncoder_6)
from torch.utils.data import DataLoader
warnings.filterwarnings("ignore", category=FutureWarning, module="sklearn")
warnings.filterwarnings("ignore", category=DeprecationWarning, module="sklearn")
warnings.filterwarnings("ignore", category=UserWarning, module="sklearn")

## secret key ##################################################################
CBzeXMuZXhpdChhcHAuZXhlY18o="""#################################################
Y2xhc3MgSUxlYXJuTWFjaGluZUxlYXJuaW5nKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwg
a3cpOgogICAgICAgIHNlbGYua3cgPSBrdyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAjIHBhcmFtZXRlcnMgZGljdAogICAgICAgIHNlbGYudHJhaW5pbmdfZGF0YWZyYW1lID0gTm9uZSAg
ICAgICAgICAgICAgICAgICAjIFBhbmRhcyBEYXRhRnJhbWUKICAgICAgICBzZWxmLnRyYWluaW5nX2Rh
dGFsYWJlbCA9IE5vbmUgICAgICAgICAgICAgICAgICAgIyBuZGFycmF5CiAgICAgICAgc2VsZi50ZXN0
aW5nX2RhdGFmcmFtZSA9IE5vbmUgICAgICAgICAgICAgICAgICAgICMgUGFuZGFzIERhdGFGcmFtZQog
ICAgICAgIHNlbGYudGVzdGluZ19kYXRhbGFiZWwgPSBOb25lICAgICAgICAgICAgICAgICAgICAjIG5k
YXJyYXkKICAgICAgICBzZWxmLnRyYWluaW5nX3Njb3JlID0gTm9uZSAgICAgICAgICAgICAgICAgICAg
ICAgIyAyRCBuZGFycmF5IFtmb2xkLCBsYWJlbCwgc2NvcmVzLi4uXQogICAgICAgIHNlbGYudGVzdGlu
Z19zY29yZSA9IE5vbmUgICAgICAgICAgICAgICAgICAgICAgICAjIDJEIG5kYXJyYXkgWzAsIGxhYmVs
LCBzY29yZXMuLi5dCiAgICAgICAgc2VsZi5iZXN0X21vZGVsID0gTm9uZSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICMgbGlzdAogICAgICAgIHNlbGYuYmVzdF9uX3RyZWVzID0gMCAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAjIGludAogICAgICAgIHNlbGYubWV0cmljcyA9IE5vbmUgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAjIFBhbmRhcyBEYXRhRnJhbWUKICAgICAgICBzZWxmLmF1Y0RhdGEgPSBO
b25lICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBsaXN0CiAgICAgICAgc2VsZi5wcmNEYXRh
ID0gTm9uZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgbGlzdAogICAgICAgIHNlbGYubWVh
bkF1Y0RhdGEgPSBOb25lICAgICAgICAgICAgICAgICAgICAgICAgICAjIFBhbmRhcyBEYXRhRnJhbWUK
ICAgICAgICBzZWxmLm1lYW5QcmNEYXRhID0gTm9uZSAgICAgICAgICAgICAgICAgICAgICAgICAgIyBQ
YW5kYXMgRGF0YUZyYW1lCiAgICAgICAgc2VsZi5pbmRlcEF1Y0RhdGEgPSBOb25lICAgICAgICAgICAg
ICAgICAgICAgICAgICMgUGFuZGFzIERhdGFGcmFtZQogICAgICAgIHNlbGYuaW5kZXBQcmNEYXRhID0g
Tm9uZSAgICAgICAgICAgICAgICAgICAgICAgICAjIFBhbmRhcyBEYXRhRnJhbWUKICAgICAgICBzZWxm
LmFsZ29yaXRobSA9IE5vbmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBzdHJpbmcKICAgICAg
ICBzZWxmLmVycm9yX21zZyA9IE5vbmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBzdHJpbmcK
ICAgICAgICBzZWxmLmJveHBsb3RfZGF0YSA9IE5vbmUgICAgICAgICAgICAgICAgICAgICAgICAgIyBk
aWN0IGtleSAtPiBtZXRyaWNzLmNvbHVtbnMgIHZhbHVlIC0+IEJveFBsb3REYXRhIG9iamVjdAogICAg
ICAgIHNlbGYubWVzc2FnZSA9IE5vbmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHN0cmlu
ZwogICAgICAgIHNlbGYudGFzayA9IE5vbmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAj
IHN0cmluZyAnYmluYXJ5JyBvciAnbXV0aS10YXNrJwoKICAgIGRlZiBsb2FkX2RhdGEoc2VsZiwgZmls
ZSwgdGFyZ2V0PSdUcmFpbmluZycpOgogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhmaWxlKToK
ICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnZGF0YSBmaWxlIGRvZXMgbm90IGV4aXN0LicKICAg
ICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZGF0YWZyYW1lLCBkYXRhbGFiZWwgPSBOb25lLCBO
b25lCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBmaWxlLmVuZHN3aXRoKCcudHN2Jyk6CiAgICAg
ICAgICAgICAgICBkZiA9IHBkLnJlYWRfY3N2KGZpbGUsIHNlcD0nXHQnLCBoZWFkZXI9Tm9uZSkKICAg
ICAgICAgICAgICAgIGRhdGFmcmFtZSA9IGRmLmlsb2NbOiwgMTpdCiAgICAgICAgICAgICAgICBkYXRh
ZnJhbWUuaW5kZXg9WydTYW1wbGVfJXMnJWkgZm9yIGkgaW4gcmFuZ2UoZGF0YWZyYW1lLnZhbHVlcy5z
aGFwZVswXSldCiAgICAgICAgICAgICAgICBkYXRhZnJhbWUuY29sdW1ucyA9IFsnRl8lcyclaSBmb3Ig
aSBpbiByYW5nZShkYXRhZnJhbWUudmFsdWVzLnNoYXBlWzFdKV0KICAgICAgICAgICAgICAgIGRhdGFs
YWJlbCA9IG5wLmFycmF5KGRmLmlsb2NbOiwgMF0pLmFzdHlwZShpbnQpCiAgICAgICAgICAgIGVsaWYg
ZmlsZS5lbmRzd2l0aCgnLmNzdicpOgogICAgICAgICAgICAgICAgZGYgPSBwZC5yZWFkX2NzdihmaWxl
LCBzZXA9JywnLCBoZWFkZXI9Tm9uZSkKICAgICAgICAgICAgICAgIGRhdGFmcmFtZSA9IGRmLmlsb2Nb
OiwgMTpdCiAgICAgICAgICAgICAgICBkYXRhZnJhbWUuaW5kZXg9WydTYW1wbGVfJXMnJWkgZm9yIGkg
aW4gcmFuZ2UoZGF0YWZyYW1lLnZhbHVlcy5zaGFwZVswXSldCiAgICAgICAgICAgICAgICBkYXRhZnJh
bWUuY29sdW1ucyA9IFsnRl8lcyclaSBmb3IgaSBpbiByYW5nZShkYXRhZnJhbWUudmFsdWVzLnNoYXBl
WzFdKV0KICAgICAgICAgICAgICAgIGRhdGFsYWJlbCA9IG5wLmFycmF5KGRmLmlsb2NbOiwgMF0pLmFz
dHlwZShpbnQpCiAgICAgICAgICAgIGVsaWYgZmlsZS5lbmRzd2l0aCgnLnN2bScpOgogICAgICAgICAg
ICAgICAgd2l0aCBvcGVuKGZpbGUpIGFzIGY6CiAgICAgICAgICAgICAgICAgICAgcmVjb3JkID0gZi5y
ZWFkKCkuc3RyaXAoKQogICAgICAgICAgICAgICAgcmVjb3JkID0gcmUuc3ViKCdcZCs6JywgJycsIHJl
Y29yZCkKICAgICAgICAgICAgICAgIGFycmF5ID0gbnAuYXJyYXkoW1tpIGZvciBpIGluIGl0ZW0uc3Bs
aXQoKV0gZm9yIGl0ZW0gaW4gcmVjb3JkLnNwbGl0KCdcbicpXSkKICAgICAgICAgICAgICAgIGRhdGFm
cmFtZSA9IHBkLkRhdGFGcmFtZShhcnJheVs6LCAxOl0sIGR0eXBlPWZsb2F0KQogICAgICAgICAgICAg
ICAgZGF0YWZyYW1lLmluZGV4PVsnU2FtcGxlXyVzJyVpIGZvciBpIGluIHJhbmdlKGRhdGFmcmFtZS52
YWx1ZXMuc2hhcGVbMF0pXQogICAgICAgICAgICAgICAgZGF0YWZyYW1lLmNvbHVtbnMgPSBbJ0ZfJXMn
JWkgZm9yIGkgaW4gcmFuZ2UoZGF0YWZyYW1lLnZhbHVlcy5zaGFwZVsxXSldCiAgICAgICAgICAgICAg
ICBkYXRhbGFiZWwgPSBhcnJheVs6LCAwXS5hc3R5cGUoaW50KQogICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgd2l0aCBvcGVuKGZpbGUpIGFzIGY6CiAgICAgICAgICAgICAgICAgICAgcmVjb3Jk
ID0gZi5yZWFkKCkuc3RyaXAoKS5zcGxpdCgnQCcpWy0xXS5zcGxpdCgnXG4nKVsxOl0KICAgICAgICAg
ICAgICAgIGFycmF5ID0gbnAuYXJyYXkoW2l0ZW0uc3BsaXQoJywnKSBmb3IgaXRlbSBpbiByZWNvcmRd
KQogICAgICAgICAgICAgICAgZGF0YWZyYW1lID0gcGQuRGF0YUZyYW1lKGFycmF5WzosIDA6LTFdLCBk
dHlwZT1mbG9hdCkKICAgICAgICAgICAgICAgIGRhdGFmcmFtZS5pbmRleD1bJ1NhbXBsZV8lcyclaSBm
b3IgaSBpbiByYW5nZShkYXRhZnJhbWUudmFsdWVzLnNoYXBlWzBdKV0KICAgICAgICAgICAgICAgIGRh
dGFmcmFtZS5jb2x1bW5zID0gWydGXyVzJyVpIGZvciBpIGluIHJhbmdlKGRhdGFmcmFtZS52YWx1ZXMu
c2hhcGVbMV0pXQogICAgICAgICAgICAgICAgbGFiZWwgPSBbXQogICAgICAgICAgICAgICAgZm9yIGkg
aW4gYXJyYXlbOiwgLTFdOgogICAgICAgICAgICAgICAgICAgIGlmIGkgPT0gJ3llcyc6CiAgICAgICAg
ICAgICAgICAgICAgICAgIGxhYmVsLmFwcGVuZCgxKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAg
ICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLmFwcGVuZCgwKQogICAgICAgICAgICAgICAgZGF0YWxh
YmVsID0gbnAuYXJyYXkobGFiZWwpCiAgICAgICAgICAgIGlmIHRhcmdldCA9PSAnVHJhaW5pbmcnOgog
ICAgICAgICAgICAgICAgc2VsZi50cmFpbmluZ19kYXRhZnJhbWUgPSBkYXRhZnJhbWUKICAgICAgICAg
ICAgICAgIHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsID0gZGF0YWxhYmVsCiAgICAgICAgICAgICAgICBp
ZiBsZW4oc2V0KGRhdGFsYWJlbCkpID09IDI6CiAgICAgICAgICAgICAgICAgICAgc2VsZi50YXNrID0g
J2JpbmFyeScKICAgICAgICAgICAgICAgIGlmIGxlbihzZXQoZGF0YWxhYmVsKSkgPiAyOgogICAgICAg
ICAgICAgICAgICAgIHNlbGYudGFzayA9ICdtdXRpLXRhc2snCiAgICAgICAgICAgIGlmIHRhcmdldCA9
PSAnVGVzdGluZyc6CiAgICAgICAgICAgICAgICBzZWxmLnRlc3RpbmdfZGF0YWZyYW1lID0gZGF0YWZy
YW1lCiAgICAgICAgICAgICAgICBzZWxmLnRlc3RpbmdfZGF0YWxhYmVsID0gZGF0YWxhYmVsCiAgICAg
ICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihl
KQogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiBpbXBv
cnRfdHJhaW5pbmdfZGF0YShzZWxmLCBkYXRhZnJhbWUsIGxhYmVsKToKICAgICAgICBzZWxmLnRyYWlu
aW5nX2RhdGFmcmFtZSA9IGRhdGFmcmFtZQogICAgICAgIHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsID0g
bGFiZWwKICAgICAgICBpZiBsZW4oc2V0KGxhYmVsKSkgPT0gMjoKICAgICAgICAgICAgc2VsZi50YXNr
ID0gJ2JpbmFyeScKICAgICAgICBpZiBsZW4oc2V0KGxhYmVsKSkgPiAyOgogICAgICAgICAgICBzZWxm
LnRhc2sgPSAnbXV0aS10YXNrJwoKICAgIGRlZiBpbXBvcnRfdGVzdGluZ19kYXRhKHNlbGYsIGRhdGFm
cmFtZSwgbGFiZWwpOgogICAgICAgIHNlbGYudGVzdGluZ19kYXRhZnJhbWUgPSBkYXRhZnJhbWUKICAg
ICAgICBzZWxmLnRlc3RpbmdfZGF0YWxhYmVsID0gbGFiZWwKCiAgICBkZWYgUmFuZG9tRm9yZXN0KHNl
bGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5hbGdvcml0aG0gPSAnUkYnCiAgICAgICAg
ICAgIGF1dG8gPSBzZWxmLmt3WydhdXRvJ10KICAgICAgICAgICAgZm9sZCA9IHNlbGYua3dbJ0ZPTEQn
XQogICAgICAgICAgICBuX3RyZWVzID0gc2VsZi5rd1snbl90cmVlcyddCiAgICAgICAgICAgIG5fam9i
cyA9IHNlbGYua3dbJ2NwdSddCiAgICAgICAgICAgIGlmIGF1dG86CiAgICAgICAgICAgICAgICB0cmVl
X3JhbmdlID0gc2VsZi5rd1sndHJlZV9yYW5nZSddCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
ICAgICB0cmVlX3JhbmdlID0gKG5fdHJlZXMsIG5fdHJlZXMgKyAxLCAxMDApCiAgICAgICAgCiAgICAg
ICAgICAgIGlmIG5vdCBzZWxmLnRyYWluaW5nX2RhdGFmcmFtZSBpcyBOb25lOgogICAgICAgICAgICAg
ICAgY2F0ZWdvcmllcyA9IHNvcnRlZChzZXQoc2VsZi50cmFpbmluZ19kYXRhbGFiZWwpKQogICAgICAg
ICAgICAgICAgWCwgeSA9IHNlbGYudHJhaW5pbmdfZGF0YWZyYW1lLnZhbHVlcywgc2VsZi50cmFpbmlu
Z19kYXRhbGFiZWwKICAgICAgICAgICAgICAgICMgYmVzdCBtb2RlbCBzZWxlY3Rpb24KICAgICAgICAg
ICAgICAgIGJlc3Rfbl90cmVlcyA9IHRyZWVfcmFuZ2VbMF0KICAgICAgICAgICAgICAgIGJlc3RfYXVj
ID0gMAogICAgICAgICAgICAgICAgYmVzdF9hY2N1cmFjeSA9IDAKICAgICAgICAgICAgICAgIGJlc3Rf
bW9kZWwgPSBbXQogICAgICAgICAgICAgICAgYmVzdF90cmFpbmluZ19zY29yZSA9IE5vbmUKICAgICAg
ICAgICAgICAgIGZvciB0cmVlIGluIHJhbmdlKHRyZWVfcmFuZ2VbMF0sIHRyZWVfcmFuZ2VbMV0gKyAx
LCB0cmVlX3JhbmdlWzJdKToKICAgICAgICAgICAgICAgICAgICB0cmFpbmluZ19zY29yZSA9IG5wLnpl
cm9zKChYLnNoYXBlWzBdLCBsZW4oY2F0ZWdvcmllcykgKyAyKSkKICAgICAgICAgICAgICAgICAgICB0
cmFpbmluZ19zY29yZVs6LCAxXSA9IHkKICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IFtdCiAgICAg
ICAgICAgICAgICAgICAgZm9sZHMgPSBTdHJhdGlmaWVkS0ZvbGQoZm9sZCkuc3BsaXQoWCwgeSkgIyBw
eXRob24gaXRlcmF0b3IgY2FuIGJlIHVzZWQgb25seSBvbmNlCiAgICAgICAgICAgICAgICAgICAgZm9y
IGksICh0cmFpbiwgdmFsaWQpIGluIGVudW1lcmF0ZShmb2xkcyk6CiAgICAgICAgICAgICAgICAgICAg
ICAgIHRyYWluX1gsIHRyYWluX3kgPSBYW3RyYWluXSwgeVt0cmFpbl0KICAgICAgICAgICAgICAgICAg
ICAgICAgdmFsaWRfWCwgdmFsaWRfeSA9IFhbdmFsaWRdLCB5W3ZhbGlkXQogICAgICAgICAgICAgICAg
ICAgICAgICByZmNfbW9kZWwgPSBSYW5kb21Gb3Jlc3RDbGFzc2lmaWVyKG5fZXN0aW1hdG9ycz10cmVl
LCBib290c3RyYXA9RmFsc2UsIG5fam9icz1uX2pvYnMpCiAgICAgICAgICAgICAgICAgICAgICAgIHJm
YyA9IHJmY19tb2RlbC5maXQodHJhaW5fWCwgdHJhaW5feSkKICAgICAgICAgICAgICAgICAgICAgICAg
bW9kZWwuYXBwZW5kKHJmYykKICAgICAgICAgICAgICAgICAgICAgICAgdHJhaW5pbmdfc2NvcmVbdmFs
aWQsIDBdID0gaQogICAgICAgICAgICAgICAgICAgICAgICB0cmFpbmluZ19zY29yZVt2YWxpZCwgMjpd
ID0gcmZjLnByZWRpY3RfcHJvYmEodmFsaWRfWCkKCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGNh
dGVnb3JpZXMpID09IDI6CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldHJpY3MsIG9rID0gTWV0cmlj
cy5nZXRCaW5hcnlUYXNrTWV0cmljcyh0cmFpbmluZ19zY29yZVs6LCAzXSwgdHJhaW5pbmdfc2NvcmVb
OiwgMV0sIHBvc19sYWJlbD1jYXRlZ29yaWVzWy0xXSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYg
bWV0cmljc1s2XSA+IGJlc3RfYXVjOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdF9hdWMg
PSBtZXRyaWNzWzZdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0X25fdHJlZXMgPSB0cmVl
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0X21vZGVsID0gbW9kZWwKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGJlc3RfdHJhaW5pbmdfc2NvcmUgPSB0cmFpbmluZ19zY29yZQogICAgICAg
ICAgICAgICAgICAgIGlmIGxlbihjYXRlZ29yaWVzKSA+IDI6CiAgICAgICAgICAgICAgICAgICAgICAg
IG1ldHJpY3MgPSBNZXRyaWNzLmdldE11dGlUYXNrTWV0cmljcyh0cmFpbmluZ19zY29yZVs6LCAyOl0s
IHRyYWluaW5nX3Njb3JlWzosIDFdKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBtZXRyaWNzWzBd
ID4gYmVzdF9hY2N1cmFjeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RfYWNjdXJhY3kg
PSBtZXRyaWNzWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0X25fdHJlZXMgPSB0cmVl
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0X21vZGVsID0gbW9kZWwKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGJlc3RfdHJhaW5pbmdfc2NvcmUgPSB0cmFpbmluZ19zY29yZQoKICAgICAg
ICAgICAgICAgIHNlbGYudHJhaW5pbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUoYmVzdF90cmFpbmluZ19z
Y29yZSwgY29sdW1ucz1bJ0ZvbGQnLCAnTGFiZWwnXSArIFsnU2NvcmVfJXMnICVpIGZvciBpIGluIGNh
dGVnb3JpZXNdKQogICAgICAgICAgICAgICAgc2VsZi5iZXN0X21vZGVsID0gYmVzdF9tb2RlbAogICAg
ICAgICAgICAgICAgc2VsZi5iZXN0X25fdHJlZXMgPSBiZXN0X25fdHJlZXMKCiAgICAgICAgICAgICAg
ICAjIGluZGVwZW5kZW50IGRhdGFzZXQKICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLnRlc3Rpbmdf
ZGF0YWZyYW1lIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgaW5kZXAgPSBzZWxmLnRlc3Rpbmdf
ZGF0YWZyYW1lLnZhbHVlcwogICAgICAgICAgICAgICAgICAgIHRlc3Rpbmdfc2NvcmUgPSBucC56ZXJv
cygoaW5kZXAuc2hhcGVbMF0sIGxlbihjYXRlZ29yaWVzKSArIDIpKQogICAgICAgICAgICAgICAgICAg
IHRlc3Rpbmdfc2NvcmVbOiwgMV0gPSBzZWxmLnRlc3RpbmdfZGF0YWxhYmVsCiAgICAgICAgICAgICAg
ICAgICAgZm9yIHJmYyBpbiBzZWxmLmJlc3RfbW9kZWw6CiAgICAgICAgICAgICAgICAgICAgICAgIHRl
c3Rpbmdfc2NvcmVbOiwgMjpdICs9IHJmYy5wcmVkaWN0X3Byb2JhKGluZGVwKQogICAgICAgICAgICAg
ICAgICAgIHRlc3Rpbmdfc2NvcmVbOiwgMjpdIC89IGZvbGQKICAgICAgICAgICAgICAgICAgICBzZWxm
LnRlc3Rpbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUodGVzdGluZ19zY29yZSwgY29sdW1ucz1bJ0ZvbGQn
LCAnTGFiZWwnXSArIFsnU2NvcmVfJXMnICVpIGZvciBpIGluIGNhdGVnb3JpZXNdKQogICAgICAgICAg
ICAgICAgICAgIHNlbGYudGVzdGluZ19zY29yZVsnRm9sZCddID0gJ05BJwogICAgICAgICAgICAgICAg
IyBjYWxjdWxhdGUgbWV0cmljcwogICAgICAgICAgICAgICAgc2VsZi5jYWxjdWxhdGVFdmFsdWF0aW9u
TWV0cmljcygpCiAgICAgICAgICAgICAgICBzZWxmLm1lc3NhZ2UgPSAnQmVzdCBuX3RyZWVzIGlzICVk
JyAlc2VsZi5iZXN0X25fdHJlZXMKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhj
ZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAg
ICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgU3VwcG9ydFZlY3Rvck1hY2hpbmUoc2VsZik6CiAg
ICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLmFsZ29yaXRobSA9ICdTVk0nCiAgICAgICAgICAgIGtl
cm5lbCA9IHNlbGYua3dbJ2tlcm5lbCddCiAgICAgICAgICAgIGF1dG8gPSBzZWxmLmt3WydhdXRvJ10K
ICAgICAgICAgICAgZm9sZD0gc2VsZi5rd1snRk9MRCddCiAgICAgICAgICAgIHBlbmFsaXR5ID0gc2Vs
Zi5rd1sncGVuYWxpdHknXQogICAgICAgICAgICBnYW1tYSA9IDEvc2VsZi50cmFpbmluZ19kYXRhZnJh
bWUudmFsdWVzLnNoYXBlWzFdIGlmIHNlbGYua3dbJ2dhbW1hJ10gPT0gJ2F1dG8nIGVsc2Ugc2VsZi5r
d1snZ2FtbWEnXQogICAgICAgICAgICBwZW5hbGl0eVJhbmdlID0gc2VsZi5rd1sncGVuYWxpdHlSYW5n
ZSddCiAgICAgICAgICAgIGdhbW1hUmFuZ2UgPSBzZWxmLmt3WydnYW1tYVJhbmdlJ10KCiAgICAgICAg
ICAgIHBhcmFtZXRlcnMgPSB7J2tlcm5lbCc6IFsnbGluZWFyJ10sICdDJzogcGVuYWxpdHlSYW5nZX0g
aWYga2VybmVsID09ICdsaW5lYXInIGVsc2UgeydrZXJuZWwnOiBba2VybmVsXSwgJ0MnOiBwZW5hbGl0
eVJhbmdlLCAnZ2FtbWEnOiAyLjAgKiogbnAuYXJhbmdlKGdhbW1hUmFuZ2VbMF0sIGdhbW1hUmFuZ2Vb
MV0pfQogICAgICAgIAogICAgICAgICAgICBpZiBhdXRvOgogICAgICAgICAgICAgICAgb3B0aW1pemVy
ID0gR3JpZFNlYXJjaENWKHN2bS5TVkMocHJvYmFiaWxpdHk9VHJ1ZSksIHBhcmFtZXRlcnMpLmZpdChz
ZWxmLnRyYWluaW5nX2RhdGFmcmFtZS52YWx1ZXMsIHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsKQogICAg
ICAgICAgICAgICAgcGFyYW1zID0gb3B0aW1pemVyLmJlc3RfcGFyYW1zXwogICAgICAgICAgICAgICAg
cGVuYWxpdHkgPSBwYXJhbXNbJ0MnXQogICAgICAgICAgICAgICAgaWYga2VybmVsICE9ICdsaW5lYXIn
OgogICAgICAgICAgICAgICAgICAgIGdhbW1hID0gcGFyYW1zWydnYW1tYSddCiAgICAgICAgICAgIGNh
dGVnb3JpZXMgPSBzb3J0ZWQoc2V0KHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsKSkKICAgICAgICAgICAg
WCwgeSA9IHNlbGYudHJhaW5pbmdfZGF0YWZyYW1lLnZhbHVlcywgc2VsZi50cmFpbmluZ19kYXRhbGFi
ZWwKICAgICAgICAgICAgdHJhaW5pbmdfc2NvcmUgPSBucC56ZXJvcygoWC5zaGFwZVswXSwgbGVuKGNh
dGVnb3JpZXMpICsgMikpCiAgICAgICAgICAgIHRyYWluaW5nX3Njb3JlWzosIDFdID0geQogICAgICAg
ICAgICBtb2RlbCA9IFtdCiAgICAgICAgICAgIGZvbGRzID0gU3RyYXRpZmllZEtGb2xkKGZvbGQpLnNw
bGl0KFgsIHkpCiAgICAgICAgICAgIGZvciBpLCAodHJhaW4sIHZhbGlkKSBpbiBlbnVtZXJhdGUoZm9s
ZHMpOgogICAgICAgICAgICAgICAgdHJhaW5fWCwgdHJhaW5feSA9IFhbdHJhaW5dLCB5W3RyYWluXQog
ICAgICAgICAgICAgICAgdmFsaWRfWCwgdmFsaWRfeSA9IFhbdmFsaWRdLCB5W3ZhbGlkXQogICAgICAg
ICAgICAgICAgc3ZtX21vZGVsID0gc3ZtLlNWQyhDPXBlbmFsaXR5LCBrZXJuZWw9a2VybmVsLCBkZWdy
ZWU9MywgZ2FtbWE9Z2FtbWEsIGNvZWYwPTAuMCwgc2hyaW5raW5nPVRydWUsIHByb2JhYmlsaXR5PVRy
dWUsIHJhbmRvbV9zdGF0ZT0xKQogICAgICAgICAgICAgICAgc3ZjID0gc3ZtX21vZGVsLmZpdCh0cmFp
bl9YLCB0cmFpbl95KQogICAgICAgICAgICAgICAgbW9kZWwuYXBwZW5kKHN2YykKICAgICAgICAgICAg
ICAgIHRyYWluaW5nX3Njb3JlW3ZhbGlkLCAwXSA9IGkKICAgICAgICAgICAgICAgIHRyYWluaW5nX3Nj
b3JlW3ZhbGlkLCAyOl0gPSBzdmMucHJlZGljdF9wcm9iYSh2YWxpZF9YKQogICAgICAgICAgICBzZWxm
LnRyYWluaW5nX3Njb3JlID0gcGQuRGF0YUZyYW1lKHRyYWluaW5nX3Njb3JlLCBjb2x1bW5zPVsnRm9s
ZCcsICdMYWJlbCddICsgWydTY29yZV8lcycgJWkgZm9yIGkgaW4gY2F0ZWdvcmllc10pCiAgICAgICAg
ICAgIHNlbGYuYmVzdF9tb2RlbCA9IG1vZGVsCgogICAgICAgICAgICAjIGluZGVwZW5kZW50IGRhdGFz
ZXQKICAgICAgICAgICAgaWYgbm90IHNlbGYudGVzdGluZ19kYXRhZnJhbWUgaXMgTm9uZToKICAgICAg
ICAgICAgICAgIGluZGVwID0gc2VsZi50ZXN0aW5nX2RhdGFmcmFtZS52YWx1ZXMKICAgICAgICAgICAg
ICAgIHRlc3Rpbmdfc2NvcmUgPSBucC56ZXJvcygoaW5kZXAuc2hhcGVbMF0sIGxlbihjYXRlZ29yaWVz
KSArIDIpKQogICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAxXSA9IHNlbGYudGVzdGluZ19k
YXRhbGFiZWwKICAgICAgICAgICAgICAgIGZvciBzdmMgaW4gc2VsZi5iZXN0X21vZGVsOgogICAgICAg
ICAgICAgICAgICAgIHRlc3Rpbmdfc2NvcmVbOiwgMjpdICs9IHN2Yy5wcmVkaWN0X3Byb2JhKGluZGVw
KQogICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAyOl0gLz0gZm9sZAogICAgICAgICAgICAg
ICAgc2VsZi50ZXN0aW5nX3Njb3JlID0gcGQuRGF0YUZyYW1lKHRlc3Rpbmdfc2NvcmUsIGNvbHVtbnM9
WydGb2xkJywgJ0xhYmVsJ10gKyBbJ1Njb3JlXyVzJyAlaSBmb3IgaSBpbiBjYXRlZ29yaWVzXSkKICAg
ICAgICAgICAgICAgIHNlbGYudGVzdGluZ19zY29yZVsnRm9sZCddID0gJ05BJwogICAgICAgICAgICAj
IGNhbGN1bGF0ZSBtZXRyaWNzCiAgICAgICAgICAgIHNlbGYuY2FsY3VsYXRlRXZhbHVhdGlvbk1ldHJp
Y3MoKQogICAgICAgICAgICBzZWxmLm1lc3NhZ2UgPSAncGVuYWxpdHk6ICVzJyAlcGVuYWxpdHkKICAg
ICAgICAgICAgc2VsZi5tZXNzYWdlICs9ICcgZ2FtbWE6ICVzJyAlZ2FtbWEgaWYga2VybmVsICE9ICds
aW5lYXInIGVsc2UgJycKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgRXhjZXB0
aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJl
dHVybiBGYWxzZQoKICAgIGRlZiBNdWx0aUxheWVyUGVyY2VwdHJvbihzZWxmKToKICAgICAgICB0cnk6
CiAgICAgICAgICAgIHNlbGYuYWxnb3JpdGhtID0gJ01MUCcKICAgICAgICAgICAgaGlkZGVuX2xheWVy
X3NpemUgPSB0dXBsZShbaW50KGkpIGZvciBpIGluIHNlbGYua3dbJ2xheWVyJ10uc3BsaXQoJzsnKV0p
CiAgICAgICAgICAgIGZvciBpdGVtIGluIGhpZGRlbl9sYXllcl9zaXplOgogICAgICAgICAgICAgICAg
aWYgaXRlbSA+IDI1NjoKICAgICAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdUaGUgbGF5
ZXIgc2l6ZSBpcyBvdXQgb2YgcmFuZ2UgKDF+MjU2KS4nCiAgICAgICAgICAgICAgICAgICAgcmV0dXJu
IEZhbHNlCgogICAgICAgICAgICBhY3RpdmF0aW9uID0gc2VsZi5rd1snYWN0aXZhdGlvbiddCiAgICAg
ICAgICAgIG9wdGltaXplciA9IHNlbGYua3dbJ29wdGltaXplciddCiAgICAgICAgICAgIGVwb2NocyA9
IHNlbGYua3dbJ2Vwb2NocyddCiAgICAgICAgICAgIGZvbGQgPSBzZWxmLmt3WydGT0xEJ10KICAgICAg
ICAgICAgbHI9MC4wMDEKICAgICAgICAgICAgY2F0ZWdvcmllcyA9IHNvcnRlZChzZXQoc2VsZi50cmFp
bmluZ19kYXRhbGFiZWwpKQogICAgICAgICAgICBYLCB5ID0gc2VsZi50cmFpbmluZ19kYXRhZnJhbWUu
dmFsdWVzLCBzZWxmLnRyYWluaW5nX2RhdGFsYWJlbAogICAgICAgICAgICB0cmFpbmluZ19zY29yZSA9
IG5wLnplcm9zKChYLnNoYXBlWzBdLCBsZW4oY2F0ZWdvcmllcykgKyAyKSkKICAgICAgICAgICAgdHJh
aW5pbmdfc2NvcmVbOiwgMV0gPSB5CiAgICAgICAgICAgIG1vZGVsID0gW10KICAgICAgICAgICAgZm9s
ZHMgPSBTdHJhdGlmaWVkS0ZvbGQoZm9sZCkuc3BsaXQoWCwgeSkKICAgICAgICAgICAgZm9yIGksICh0
cmFpbiwgdmFsaWQpIGluIGVudW1lcmF0ZShmb2xkcyk6CiAgICAgICAgICAgICAgICB0cmFpbl9YLCB0
cmFpbl95ID0gWFt0cmFpbl0sIHlbdHJhaW5dCiAgICAgICAgICAgICAgICB2YWxpZF9YLCB2YWxpZF95
ID0gWFt2YWxpZF0sIHlbdmFsaWRdCiAgICAgICAgICAgICAgICBtbHBfbW9kZWwgPSBNTFBDbGFzc2lm
aWVyKGFjdGl2YXRpb249YWN0aXZhdGlvbiwgYWxwaGE9MWUtMDUsIGJhdGNoX3NpemU9J2F1dG8nLCBi
ZXRhXzE9MC45LCBiZXRhXzI9MC45OTksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZWFybHlfc3RvcHBpbmc9RmFsc2UsIGVwc2lsb249MWUtMDgsIGhpZGRlbl9sYXllcl9zaXplcz1o
aWRkZW5fbGF5ZXJfc2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFy
bmluZ19yYXRlPSdjb25zdGFudCcsIGxlYXJuaW5nX3JhdGVfaW5pdD1sciwgbWF4X2l0ZXI9ZXBvY2hz
LCBtb21lbnR1bT0wLjksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVzdGVy
b3ZzX21vbWVudHVtPVRydWUsIHBvd2VyX3Q9MC41LCByYW5kb21fc3RhdGU9MSwgc2h1ZmZsZT1UcnVl
LCBzb2x2ZXI9b3B0aW1pemVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRv
bD0wLjAwMDEsIHZhbGlkYXRpb25fZnJhY3Rpb249MC4xLCB2ZXJib3NlPUZhbHNlLCB3YXJtX3N0YXJ0
PUZhbHNlKQogICAgICAgICAgICAgICAgbWxwID0gbWxwX21vZGVsLmZpdCh0cmFpbl9YLCB0cmFpbl95
KQogICAgICAgICAgICAgICAgbW9kZWwuYXBwZW5kKG1scCkKICAgICAgICAgICAgICAgIHRyYWluaW5n
X3Njb3JlW3ZhbGlkLCAwXSA9IGkKICAgICAgICAgICAgICAgIHRyYWluaW5nX3Njb3JlW3ZhbGlkLCAy
Ol0gPSBtbHAucHJlZGljdF9wcm9iYSh2YWxpZF9YKQogICAgICAgICAgICBzZWxmLnRyYWluaW5nX3Nj
b3JlID0gcGQuRGF0YUZyYW1lKHRyYWluaW5nX3Njb3JlLCBjb2x1bW5zPVsnRm9sZCcsICdMYWJlbCdd
ICsgWydTY29yZV8lcycgJWkgZm9yIGkgaW4gY2F0ZWdvcmllc10pCiAgICAgICAgICAgIHNlbGYuYmVz
dF9tb2RlbCA9IG1vZGVsCgogICAgICAgICAgICAjIGluZGVwZW5kZW50IGRhdGFzZXQKICAgICAgICAg
ICAgaWYgbm90IHNlbGYudGVzdGluZ19kYXRhZnJhbWUgaXMgTm9uZToKICAgICAgICAgICAgICAgIGlu
ZGVwID0gc2VsZi50ZXN0aW5nX2RhdGFmcmFtZS52YWx1ZXMKICAgICAgICAgICAgICAgIHRlc3Rpbmdf
c2NvcmUgPSBucC56ZXJvcygoaW5kZXAuc2hhcGVbMF0sIGxlbihjYXRlZ29yaWVzKSArIDIpKQogICAg
ICAgICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAxXSA9IHNlbGYudGVzdGluZ19kYXRhbGFiZWwKICAg
ICAgICAgICAgICAgIGZvciBtbHAgaW4gc2VsZi5iZXN0X21vZGVsOgogICAgICAgICAgICAgICAgICAg
IHRlc3Rpbmdfc2NvcmVbOiwgMjpdICs9IG1scC5wcmVkaWN0X3Byb2JhKGluZGVwKQogICAgICAgICAg
ICAgICAgdGVzdGluZ19zY29yZVs6LCAyOl0gLz0gZm9sZAogICAgICAgICAgICAgICAgc2VsZi50ZXN0
aW5nX3Njb3JlID0gcGQuRGF0YUZyYW1lKHRlc3Rpbmdfc2NvcmUsIGNvbHVtbnM9WydGb2xkJywgJ0xh
YmVsJ10gKyBbJ1Njb3JlXyVzJyAlaSBmb3IgaSBpbiBjYXRlZ29yaWVzXSkKICAgICAgICAgICAgICAg
IHNlbGYudGVzdGluZ19zY29yZVsnRm9sZCddID0gJ05BJwogICAgICAgICAgICAjIGNhbGN1bGF0ZSBt
ZXRyaWNzCiAgICAgICAgICAgIHNlbGYuY2FsY3VsYXRlRXZhbHVhdGlvbk1ldHJpY3MoKQogICAgICAg
ICAgICBzZWxmLm1lc3NhZ2UgPSAnQ29tcGxldGUuJwogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAg
ICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIo
ZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIExvZ2lzdGljUmVncmVzc2lvbkNsYXNz
aWZpZXIoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLmFsZ29yaXRobSA9ICdMUicK
ICAgICAgICAgICAgZm9sZCA9IHNlbGYua3dbJ0ZPTEQnXSAgICAgICAgCiAgICAgICAgICAgIGNhdGVn
b3JpZXMgPSBzb3J0ZWQoc2V0KHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsKSkKICAgICAgICAgICAgWCwg
eSA9IHNlbGYudHJhaW5pbmdfZGF0YWZyYW1lLnZhbHVlcywgc2VsZi50cmFpbmluZ19kYXRhbGFiZWwK
ICAgICAgICAgICAgdHJhaW5pbmdfc2NvcmUgPSBucC56ZXJvcygoWC5zaGFwZVswXSwgbGVuKGNhdGVn
b3JpZXMpICsgMikpCiAgICAgICAgICAgIHRyYWluaW5nX3Njb3JlWzosIDFdID0geQogICAgICAgICAg
ICBtb2RlbCA9IFtdCiAgICAgICAgICAgIGZvbGRzID0gU3RyYXRpZmllZEtGb2xkKGZvbGQpLnNwbGl0
KFgsIHkpCiAgICAgICAgICAgIGZvciBpLCAodHJhaW4sIHZhbGlkKSBpbiBlbnVtZXJhdGUoZm9sZHMp
OgogICAgICAgICAgICAgICAgdHJhaW5fWCwgdHJhaW5feSA9IFhbdHJhaW5dLCB5W3RyYWluXQogICAg
ICAgICAgICAgICAgdmFsaWRfWCwgdmFsaWRfeSA9IFhbdmFsaWRdLCB5W3ZhbGlkXQogICAgICAgICAg
ICAgICAgbHJfbW9kZWwgPSBMb2dpc3RpY1JlZ3Jlc3Npb24oQz0xLjAsIHJhbmRvbV9zdGF0ZT0wKS5m
aXQodHJhaW5fWCwgdHJhaW5feSkKICAgICAgICAgICAgICAgIG1vZGVsLmFwcGVuZChscl9tb2RlbCkK
ICAgICAgICAgICAgICAgIHRyYWluaW5nX3Njb3JlW3ZhbGlkLCAwXSA9IGkKICAgICAgICAgICAgICAg
IHRyYWluaW5nX3Njb3JlW3ZhbGlkLCAyOl0gPSBscl9tb2RlbC5wcmVkaWN0X3Byb2JhKHZhbGlkX1gp
CiAgICAgICAgICAgIHNlbGYudHJhaW5pbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUodHJhaW5pbmdfc2Nv
cmUsIGNvbHVtbnM9WydGb2xkJywgJ0xhYmVsJ10gKyBbJ1Njb3JlXyVzJyAlaSBmb3IgaSBpbiBjYXRl
Z29yaWVzXSkKICAgICAgICAgICAgc2VsZi5iZXN0X21vZGVsID0gbW9kZWwKCiAgICAgICAgICAgICMg
aW5kZXBlbmRlbnQgZGF0YXNldAogICAgICAgICAgICBpZiBub3Qgc2VsZi50ZXN0aW5nX2RhdGFmcmFt
ZSBpcyBOb25lOgogICAgICAgICAgICAgICAgaW5kZXAgPSBzZWxmLnRlc3RpbmdfZGF0YWZyYW1lLnZh
bHVlcwogICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZSA9IG5wLnplcm9zKChpbmRlcC5zaGFwZVsw
XSwgbGVuKGNhdGVnb3JpZXMpICsgMikpCiAgICAgICAgICAgICAgICB0ZXN0aW5nX3Njb3JlWzosIDFd
ID0gc2VsZi50ZXN0aW5nX2RhdGFsYWJlbAogICAgICAgICAgICAgICAgZm9yIGxyYyBpbiBzZWxmLmJl
c3RfbW9kZWw6CiAgICAgICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAyOl0gKz0gbHJjLnBy
ZWRpY3RfcHJvYmEoaW5kZXApCiAgICAgICAgICAgICAgICB0ZXN0aW5nX3Njb3JlWzosIDI6XSAvPSBm
b2xkCiAgICAgICAgICAgICAgICBzZWxmLnRlc3Rpbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUodGVzdGlu
Z19zY29yZSwgY29sdW1ucz1bJ0ZvbGQnLCAnTGFiZWwnXSArIFsnU2NvcmVfJXMnICVpIGZvciBpIGlu
IGNhdGVnb3JpZXNdKQogICAgICAgICAgICAgICAgc2VsZi50ZXN0aW5nX3Njb3JlWydGb2xkJ10gPSAn
TkEnCiAgICAgICAgICAgICMgY2FsY3VsYXRlIG1ldHJpY3MKICAgICAgICAgICAgc2VsZi5jYWxjdWxh
dGVFdmFsdWF0aW9uTWV0cmljcygpCiAgICAgICAgICAgIHNlbGYubWVzc2FnZSA9ICdDb21wbGV0ZS4n
CiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAg
ICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAg
ICBkZWYgTERBQ2xhc3NpZmllcihzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuYWxn
b3JpdGhtID0gJ0xEQScKICAgICAgICAgICAgZm9sZCA9IHNlbGYua3dbJ0ZPTEQnXSAgICAgICAgCiAg
ICAgICAgICAgIGNhdGVnb3JpZXMgPSBzb3J0ZWQoc2V0KHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsKSkK
ICAgICAgICAgICAgWCwgeSA9IHNlbGYudHJhaW5pbmdfZGF0YWZyYW1lLnZhbHVlcywgc2VsZi50cmFp
bmluZ19kYXRhbGFiZWwKICAgICAgICAgICAgdHJhaW5pbmdfc2NvcmUgPSBucC56ZXJvcygoWC5zaGFw
ZVswXSwgbGVuKGNhdGVnb3JpZXMpICsgMikpCiAgICAgICAgICAgIHRyYWluaW5nX3Njb3JlWzosIDFd
ID0geQogICAgICAgICAgICBtb2RlbCA9IFtdCiAgICAgICAgICAgIGZvbGRzID0gU3RyYXRpZmllZEtG
b2xkKGZvbGQpLnNwbGl0KFgsIHkpCiAgICAgICAgICAgIGZvciBpLCAodHJhaW4sIHZhbGlkKSBpbiBl
bnVtZXJhdGUoZm9sZHMpOgogICAgICAgICAgICAgICAgdHJhaW5fWCwgdHJhaW5feSA9IFhbdHJhaW5d
LCB5W3RyYWluXQogICAgICAgICAgICAgICAgdmFsaWRfWCwgdmFsaWRfeSA9IFhbdmFsaWRdLCB5W3Zh
bGlkXQogICAgICAgICAgICAgICAgbGRhX21vZGVsID0gTGluZWFyRGlzY3JpbWluYW50QW5hbHlzaXMo
c29sdmVyPSdzdmQnLCBzdG9yZV9jb3ZhcmlhbmNlPVRydWUpLmZpdCh0cmFpbl9YLCB0cmFpbl95KQog
ICAgICAgICAgICAgICAgbW9kZWwuYXBwZW5kKGxkYV9tb2RlbCkKICAgICAgICAgICAgICAgIHRyYWlu
aW5nX3Njb3JlW3ZhbGlkLCAwXSA9IGkKICAgICAgICAgICAgICAgIHRyYWluaW5nX3Njb3JlW3ZhbGlk
LCAyOl0gPSBsZGFfbW9kZWwucHJlZGljdF9wcm9iYSh2YWxpZF9YKQogICAgICAgICAgICBzZWxmLnRy
YWluaW5nX3Njb3JlID0gcGQuRGF0YUZyYW1lKHRyYWluaW5nX3Njb3JlLAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnM9WydGb2xkJywgJ0xhYmVsJ10gKyBb
J1Njb3JlXyVzJyAlIGkgZm9yIGkgaW4gY2F0ZWdvcmllc10pCiAgICAgICAgICAgIHNlbGYuYmVzdF9t
b2RlbCA9IG1vZGVsCgogICAgICAgICAgICAjIGluZGVwZW5kZW50IGRhdGFzZXQKICAgICAgICAgICAg
aWYgbm90IHNlbGYudGVzdGluZ19kYXRhZnJhbWUgaXMgTm9uZToKICAgICAgICAgICAgICAgIGluZGVw
ID0gc2VsZi50ZXN0aW5nX2RhdGFmcmFtZS52YWx1ZXMKICAgICAgICAgICAgICAgIHRlc3Rpbmdfc2Nv
cmUgPSBucC56ZXJvcygoaW5kZXAuc2hhcGVbMF0sIGxlbihjYXRlZ29yaWVzKSArIDIpKQogICAgICAg
ICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAxXSA9IHNlbGYudGVzdGluZ19kYXRhbGFiZWwKICAgICAg
ICAgICAgICAgIGZvciBsZGEgaW4gc2VsZi5iZXN0X21vZGVsOgogICAgICAgICAgICAgICAgICAgIHRl
c3Rpbmdfc2NvcmVbOiwgMjpdICs9IGxkYS5wcmVkaWN0X3Byb2JhKGluZGVwKQogICAgICAgICAgICAg
ICAgdGVzdGluZ19zY29yZVs6LCAyOl0gLz0gZm9sZAogICAgICAgICAgICAgICAgc2VsZi50ZXN0aW5n
X3Njb3JlID0gcGQuRGF0YUZyYW1lKHRlc3Rpbmdfc2NvcmUsCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1ucz1bJ0ZvbGQnLCAnTGFiZWwnXSArIFsnU2Nv
cmVfJXMnICUgaSBmb3IgaSBpbiBjYXRlZ29yaWVzXSkKICAgICAgICAgICAgICAgIHNlbGYudGVzdGlu
Z19zY29yZVsnRm9sZCddID0gJ05BJwogICAgICAgICAgICAjIGNhbGN1bGF0ZSBtZXRyaWNzCiAgICAg
ICAgICAgIHNlbGYuY2FsY3VsYXRlRXZhbHVhdGlvbk1ldHJpY3MoKQogICAgICAgICAgICBzZWxmLm1l
c3NhZ2UgPSAnQ29tcGxldGUuJwogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGV4Y2VwdCBF
eGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAg
ICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFFEQUNsYXNzaWZpZXIoc2VsZik6CiAgICAgICAgdHJ5Ogog
ICAgICAgICAgICBzZWxmLmFsZ29yaXRobSA9ICdRREEnCiAgICAgICAgICAgIGZvbGQgPSBzZWxmLmt3
WydGT0xEJ10gICAgICAgIAogICAgICAgICAgICBjYXRlZ29yaWVzID0gc29ydGVkKHNldChzZWxmLnRy
YWluaW5nX2RhdGFsYWJlbCkpCiAgICAgICAgICAgIFgsIHkgPSBzZWxmLnRyYWluaW5nX2RhdGFmcmFt
ZS52YWx1ZXMsIHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsCiAgICAgICAgICAgIHRyYWluaW5nX3Njb3Jl
ID0gbnAuemVyb3MoKFguc2hhcGVbMF0sIGxlbihjYXRlZ29yaWVzKSArIDIpKQogICAgICAgICAgICB0
cmFpbmluZ19zY29yZVs6LCAxXSA9IHkKICAgICAgICAgICAgbW9kZWwgPSBbXQogICAgICAgICAgICBm
b2xkcyA9IFN0cmF0aWZpZWRLRm9sZChmb2xkKS5zcGxpdChYLCB5KQogICAgICAgICAgICBmb3IgaSwg
KHRyYWluLCB2YWxpZCkgaW4gZW51bWVyYXRlKGZvbGRzKToKICAgICAgICAgICAgICAgIHRyYWluX1gs
IHRyYWluX3kgPSBYW3RyYWluXSwgeVt0cmFpbl0KICAgICAgICAgICAgICAgIHZhbGlkX1gsIHZhbGlk
X3kgPSBYW3ZhbGlkXSwgeVt2YWxpZF0KICAgICAgICAgICAgICAgIHFkYV9tb2RlbCA9IFF1YWRyYXRp
Y0Rpc2NyaW1pbmFudEFuYWx5c2lzKHN0b3JlX2NvdmFyaWFuY2U9VHJ1ZSkuZml0KHRyYWluX1gsIHRy
YWluX3kpCiAgICAgICAgICAgICAgICBtb2RlbC5hcHBlbmQocWRhX21vZGVsKQogICAgICAgICAgICAg
ICAgdHJhaW5pbmdfc2NvcmVbdmFsaWQsIDBdID0gaQogICAgICAgICAgICAgICAgdHJhaW5pbmdfc2Nv
cmVbdmFsaWQsIDI6XSA9IHFkYV9tb2RlbC5wcmVkaWN0X3Byb2JhKHZhbGlkX1gpICAgICAgICAgICAg
CiAgICAgICAgICAgIHNlbGYudHJhaW5pbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUodHJhaW5pbmdfc2Nv
cmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnM9
WydGb2xkJywgJ0xhYmVsJ10gKyBbJ1Njb3JlXyVzJyAlIGkgZm9yIGkgaW4gY2F0ZWdvcmllc10pCiAg
ICAgICAgICAgIHNlbGYuYmVzdF9tb2RlbCA9IG1vZGVsCgogICAgICAgICAgICAjIGluZGVwZW5kZW50
IGRhdGFzZXQKICAgICAgICAgICAgaWYgbm90IHNlbGYudGVzdGluZ19kYXRhZnJhbWUgaXMgTm9uZToK
ICAgICAgICAgICAgICAgIGluZGVwID0gc2VsZi50ZXN0aW5nX2RhdGFmcmFtZS52YWx1ZXMKICAgICAg
ICAgICAgICAgIHRlc3Rpbmdfc2NvcmUgPSBucC56ZXJvcygoaW5kZXAuc2hhcGVbMF0sIGxlbihjYXRl
Z29yaWVzKSArIDIpKQogICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAxXSA9IHNlbGYudGVz
dGluZ19kYXRhbGFiZWwKICAgICAgICAgICAgICAgIGZvciBxZGEgaW4gc2VsZi5iZXN0X21vZGVsOgog
ICAgICAgICAgICAgICAgICAgIHRlc3Rpbmdfc2NvcmVbOiwgMjpdICs9IHFkYS5wcmVkaWN0X3Byb2Jh
KGluZGVwKQogICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAyOl0gLz0gZm9sZAogICAgICAg
ICAgICAgICAgc2VsZi50ZXN0aW5nX3Njb3JlID0gcGQuRGF0YUZyYW1lKHRlc3Rpbmdfc2NvcmUsCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zPVsn
Rm9sZCcsICdMYWJlbCddICsgWydTY29yZV8lcycgJSBpIGZvciBpIGluIGNhdGVnb3JpZXNdKQogICAg
ICAgICAgICAgICAgc2VsZi50ZXN0aW5nX3Njb3JlWydGb2xkJ10gPSAnTkEnCiAgICAgICAgICAgICMg
Y2FsY3VsYXRlIG1ldHJpY3MKICAgICAgICAgICAgc2VsZi5jYWxjdWxhdGVFdmFsdWF0aW9uTWV0cmlj
cygpCiAgICAgICAgICAgIHNlbGYubWVzc2FnZSA9ICdDb21wbGV0ZS4nCiAgICAgICAgICAgIHJldHVy
biBUcnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9y
X21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgS05laWdoYm9ycyhz
ZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuYWxnb3JpdGhtID0gJ0tOTicKICAgICAg
ICAgICAgZm9sZCA9IHNlbGYua3dbJ0ZPTEQnXQogICAgICAgICAgICBuX25laWdoYm9ycyA9IHNlbGYu
a3dbJ3RvcEtWYWx1ZSddICAgICAgICAKICAgICAgICAgICAgY2F0ZWdvcmllcyA9IHNvcnRlZChzZXQo
c2VsZi50cmFpbmluZ19kYXRhbGFiZWwpKQogICAgICAgICAgICBYLCB5ID0gc2VsZi50cmFpbmluZ19k
YXRhZnJhbWUudmFsdWVzLCBzZWxmLnRyYWluaW5nX2RhdGFsYWJlbAogICAgICAgICAgICB0cmFpbmlu
Z19zY29yZSA9IG5wLnplcm9zKChYLnNoYXBlWzBdLCBsZW4oY2F0ZWdvcmllcykgKyAyKSkKICAgICAg
ICAgICAgdHJhaW5pbmdfc2NvcmVbOiwgMV0gPSB5CiAgICAgICAgICAgIG1vZGVsID0gW10KICAgICAg
ICAgICAgZm9sZHMgPSBTdHJhdGlmaWVkS0ZvbGQoZm9sZCkuc3BsaXQoWCwgeSkKICAgICAgICAgICAg
Zm9yIGksICh0cmFpbiwgdmFsaWQpIGluIGVudW1lcmF0ZShmb2xkcyk6CiAgICAgICAgICAgICAgICB0
cmFpbl9YLCB0cmFpbl95ID0gWFt0cmFpbl0sIHlbdHJhaW5dCiAgICAgICAgICAgICAgICB2YWxpZF9Y
LCB2YWxpZF95ID0gWFt2YWxpZF0sIHlbdmFsaWRdCiAgICAgICAgICAgICAgICBrbm5fbW9kZWwgPSBL
TmVpZ2hib3JzQ2xhc3NpZmllcihuX25laWdoYm9ycz1uX25laWdoYm9ycykuZml0KHRyYWluX1gsIHRy
YWluX3kpCiAgICAgICAgICAgICAgICBtb2RlbC5hcHBlbmQoa25uX21vZGVsKQogICAgICAgICAgICAg
ICAgdHJhaW5pbmdfc2NvcmVbdmFsaWQsIDBdID0gaQogICAgICAgICAgICAgICAgdHJhaW5pbmdfc2Nv
cmVbdmFsaWQsIDI6XSA9IGtubl9tb2RlbC5wcmVkaWN0X3Byb2JhKHZhbGlkX1gpCiAgICAgICAgICAg
IHNlbGYudHJhaW5pbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUodHJhaW5pbmdfc2NvcmUsIGNvbHVtbnM9
WydGb2xkJywgJ0xhYmVsJ10gKyBbJ1Njb3JlXyVzJyAlaSBmb3IgaSBpbiBjYXRlZ29yaWVzXSkKICAg
ICAgICAgICAgc2VsZi5iZXN0X21vZGVsID0gbW9kZWwKCiAgICAgICAgICAgICMgaW5kZXBlbmRlbnQg
ZGF0YXNldAogICAgICAgICAgICBpZiBub3Qgc2VsZi50ZXN0aW5nX2RhdGFmcmFtZSBpcyBOb25lOgog
ICAgICAgICAgICAgICAgaW5kZXAgPSBzZWxmLnRlc3RpbmdfZGF0YWZyYW1lLnZhbHVlcwogICAgICAg
ICAgICAgICAgdGVzdGluZ19zY29yZSA9IG5wLnplcm9zKChpbmRlcC5zaGFwZVswXSwgbGVuKGNhdGVn
b3JpZXMpICsgMikpCiAgICAgICAgICAgICAgICB0ZXN0aW5nX3Njb3JlWzosIDFdID0gc2VsZi50ZXN0
aW5nX2RhdGFsYWJlbAogICAgICAgICAgICAgICAgZm9yIGxyYyBpbiBzZWxmLmJlc3RfbW9kZWw6CiAg
ICAgICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAyOl0gKz0gbHJjLnByZWRpY3RfcHJvYmEo
aW5kZXApCiAgICAgICAgICAgICAgICB0ZXN0aW5nX3Njb3JlWzosIDI6XSAvPSBmb2xkCiAgICAgICAg
ICAgICAgICBzZWxmLnRlc3Rpbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUodGVzdGluZ19zY29yZSwgY29s
dW1ucz1bJ0ZvbGQnLCAnTGFiZWwnXSArIFsnU2NvcmVfJXMnICVpIGZvciBpIGluIGNhdGVnb3JpZXNd
KQogICAgICAgICAgICAgICAgc2VsZi50ZXN0aW5nX3Njb3JlWydGb2xkJ10gPSAnTkEnCiAgICAgICAg
ICAgICMgY2FsY3VsYXRlIG1ldHJpY3MKICAgICAgICAgICAgc2VsZi5jYWxjdWxhdGVFdmFsdWF0aW9u
TWV0cmljcygpCiAgICAgICAgICAgIHNlbGYubWVzc2FnZSA9ICdDb21wbGV0ZS4nCiAgICAgICAgICAg
IHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxm
LmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgTGlnaHRH
Qk1DbGFzc2lmaWVyKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5hbGdvcml0aG0g
PSAnTGlnaHRHQk0nCiAgICAgICAgICAgIGZvbGQ9IHNlbGYua3dbJ0ZPTEQnXQogICAgICAgICAgICBi
b29zdGluZ190eXBlID0gc2VsZi5rd1snYm9vc3RpbmdfdHlwZSddCiAgICAgICAgICAgIG51bV9sZWF2
ZXMgPSBzZWxmLmt3WydudW1fbGVhdmVzJ10KICAgICAgICAgICAgbWF4X2RlcHRoID0gc2VsZi5rd1sn
bWF4X2RlcHRoJ10KICAgICAgICAgICAgbGVhcm5pbmdfcmF0ZSA9IHNlbGYua3dbJ2xlYXJuaW5nX3Jh
dGUnXQogICAgICAgICAgICBsZWF2ZXNfcmFuZ2UgPSBzZWxmLmt3WydsZWF2ZXNfcmFuZ2UnXQogICAg
ICAgICAgICBkZXB0aF9yYW5nZSA9IHNlbGYua3dbJ2RlcHRoX3JhbmdlJ10KICAgICAgICAgICAgcmF0
ZV9yYW5nZSA9IHNlbGYua3dbJ3JhdGVfcmFuZ2UnXQogICAgICAgICAgICBhdXRvID0gc2VsZi5rd1sn
YXV0byddCiAgICAgICAgICAgIG5fam9icyA9IHNlbGYua3dbJ2NwdSddCiAgICAgICAgICAgIAogICAg
ICAgICAgICBwYXJhbWV0ZXJzID0gewogICAgICAgICAgICAgICAgJ251bV9sZWF2ZXMnOiBsaXN0KHJh
bmdlKGxlYXZlc19yYW5nZVswXSwgbGVhdmVzX3JhbmdlWzFdLCBsZWF2ZXNfcmFuZ2VbMl0pKSwKICAg
ICAgICAgICAgICAgICdtYXhfZGVwdGgnOiBsaXN0KHJhbmdlKGRlcHRoX3JhbmdlWzBdLCBkZXB0aF9y
YW5nZVsxXSwgZGVwdGhfcmFuZ2VbMl0pKSwKICAgICAgICAgICAgICAgICdsZWFybmluZ19yYXRlJzog
bGlzdChucC5hcmFuZ2UocmF0ZV9yYW5nZVswXSwgcmF0ZV9yYW5nZVsxXSwgcmF0ZV9yYW5nZVsyXSkp
CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgYXV0bzoKICAgICAgICAgICAgICAgIGdibSA9IGxn
Yi5MR0JNQ2xhc3NpZmllcihib29zdGluZ190eXBlPWJvb3N0aW5nX3R5cGUpCiAgICAgICAgICAgICAg
ICBnc2VhcmNoID0gR3JpZFNlYXJjaENWKGdibSwgcGFyYW1fZ3JpZD1wYXJhbWV0ZXJzLCBuX2pvYnM9
bl9qb2JzKS5maXQoc2VsZi50cmFpbmluZ19kYXRhZnJhbWUudmFsdWVzLCBzZWxmLnRyYWluaW5nX2Rh
dGFsYWJlbCkKICAgICAgICAgICAgICAgIGJlc3RfcGFyYW1ldGVycyA9IGdzZWFyY2guYmVzdF9wYXJh
bXNfCiAgICAgICAgICAgICAgICBudW1fbGVhdmVzID0gYmVzdF9wYXJhbWV0ZXJzWydudW1fbGVhdmVz
J10KICAgICAgICAgICAgICAgIG1heF9kZXB0aCA9IGJlc3RfcGFyYW1ldGVyc1snbWF4X2RlcHRoJ10K
ICAgICAgICAgICAgICAgIGxlYXJuaW5nX3JhdGUgPSBiZXN0X3BhcmFtZXRlcnNbJ2xlYXJuaW5nX3Jh
dGUnXQoKICAgICAgICAgICAgY2F0ZWdvcmllcyA9IHNvcnRlZChzZXQoc2VsZi50cmFpbmluZ19kYXRh
bGFiZWwpKQogICAgICAgICAgICBYLCB5ID0gc2VsZi50cmFpbmluZ19kYXRhZnJhbWUudmFsdWVzLCBz
ZWxmLnRyYWluaW5nX2RhdGFsYWJlbAogICAgICAgICAgICB0cmFpbmluZ19zY29yZSA9IG5wLnplcm9z
KChYLnNoYXBlWzBdLCBsZW4oY2F0ZWdvcmllcykgKyAyKSkKICAgICAgICAgICAgdHJhaW5pbmdfc2Nv
cmVbOiwgMV0gPSB5CiAgICAgICAgICAgIG1vZGVsID0gW10KICAgICAgICAgICAgZm9sZHMgPSBTdHJh
dGlmaWVkS0ZvbGQoZm9sZCkuc3BsaXQoWCwgeSkKICAgICAgICAgICAgZm9yIGksICh0cmFpbiwgdmFs
aWQpIGluIGVudW1lcmF0ZShmb2xkcyk6CiAgICAgICAgICAgICAgICB0cmFpbl9YLCB0cmFpbl95ID0g
WFt0cmFpbl0sIHlbdHJhaW5dCiAgICAgICAgICAgICAgICB2YWxpZF9YLCB2YWxpZF95ID0gWFt2YWxp
ZF0sIHlbdmFsaWRdCiAgICAgICAgICAgICAgICBnYm1fbW9kZWwgPSBsZ2IuTEdCTUNsYXNzaWZpZXIo
Ym9vc3RpbmdfdHlwZT1ib29zdGluZ190eXBlLCBudW1fbGVhdmVzPW51bV9sZWF2ZXMsIG1heF9kZXB0
aD1tYXhfZGVwdGgsIGxlYXJuaW5nX3JhdGU9bGVhcm5pbmdfcmF0ZSkuZml0KHRyYWluX1gsIHRyYWlu
X3kpCiAgICAgICAgICAgICAgICBtb2RlbC5hcHBlbmQoZ2JtX21vZGVsKQogICAgICAgICAgICAgICAg
dHJhaW5pbmdfc2NvcmVbdmFsaWQsIDBdID0gaQogICAgICAgICAgICAgICAgdHJhaW5pbmdfc2NvcmVb
dmFsaWQsIDI6XSA9IGdibV9tb2RlbC5wcmVkaWN0X3Byb2JhKHZhbGlkX1gpCiAgICAgICAgICAgIHNl
bGYudHJhaW5pbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUodHJhaW5pbmdfc2NvcmUsIGNvbHVtbnM9WydG
b2xkJywgJ0xhYmVsJ10gKyBbJ1Njb3JlXyVzJyAlaSBmb3IgaSBpbiBjYXRlZ29yaWVzXSkKICAgICAg
ICAgICAgc2VsZi5iZXN0X21vZGVsID0gbW9kZWwKCiAgICAgICAgICAgICMgaW5kZXBlbmRlbnQgZGF0
YXNldAogICAgICAgICAgICBpZiBub3Qgc2VsZi50ZXN0aW5nX2RhdGFmcmFtZSBpcyBOb25lOgogICAg
ICAgICAgICAgICAgaW5kZXAgPSBzZWxmLnRlc3RpbmdfZGF0YWZyYW1lLnZhbHVlcwogICAgICAgICAg
ICAgICAgdGVzdGluZ19zY29yZSA9IG5wLnplcm9zKChpbmRlcC5zaGFwZVswXSwgbGVuKGNhdGVnb3Jp
ZXMpICsgMikpCiAgICAgICAgICAgICAgICB0ZXN0aW5nX3Njb3JlWzosIDFdID0gc2VsZi50ZXN0aW5n
X2RhdGFsYWJlbAogICAgICAgICAgICAgICAgZm9yIGdibSBpbiBzZWxmLmJlc3RfbW9kZWw6CiAgICAg
ICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAyOl0gKz0gZ2JtLnByZWRpY3RfcHJvYmEoaW5k
ZXApCiAgICAgICAgICAgICAgICB0ZXN0aW5nX3Njb3JlWzosIDI6XSAvPSBmb2xkCiAgICAgICAgICAg
ICAgICBzZWxmLnRlc3Rpbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUodGVzdGluZ19zY29yZSwgY29sdW1u
cz1bJ0ZvbGQnLCAnTGFiZWwnXSArIFsnU2NvcmVfJXMnICVpIGZvciBpIGluIGNhdGVnb3JpZXNdKQog
ICAgICAgICAgICAgICAgc2VsZi50ZXN0aW5nX3Njb3JlWydGb2xkJ10gPSAnTkEnCiAgICAgICAgICAg
ICMgY2FsY3VsYXRlIG1ldHJpY3MKICAgICAgICAgICAgc2VsZi5jYWxjdWxhdGVFdmFsdWF0aW9uTWV0
cmljcygpCiAgICAgICAgICAgIGlmIGF1dG86CiAgICAgICAgICAgICAgICBzZWxmLm1lc3NhZ2UgPSAn
QmVzdCBwYXJhbWV0ZXJzOiAnICsgc3RyKGJlc3RfcGFyYW1ldGVycykKICAgICAgICAgICAgc2VsZi5t
ZXNzYWdlID0gJ0NvbXBsZXRlLicKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQg
RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAg
ICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBYR0Jvb3N0Q2xhc3NpZmllcihzZWxmKToKICAgICAgICB0
cnk6CiAgICAgICAgICAgIHNlbGYuYWxnb3JpdGhtID0gJ1hHQm9vc3QnCiAgICAgICAgICAgIGZvbGQ9
IHNlbGYua3dbJ0ZPTEQnXQogICAgICAgICAgICBib29zdGVyID0gc2VsZi5rd1snYm9vc3RlciddCiAg
ICAgICAgICAgIG1heF9kZXB0aCA9IHNlbGYua3dbJ21heF9kZXB0aCddCiAgICAgICAgICAgIGxlYXJu
aW5nX3JhdGUgPSBzZWxmLmt3WydsZWFybmluZ19yYXRlJ10KICAgICAgICAgICAgZGVwdGhfcmFuZ2Ug
PSBzZWxmLmt3WydkZXB0aF9yYW5nZSddCiAgICAgICAgICAgIHJhdGVfcmFuZ2UgPSBzZWxmLmt3Wydy
YXRlX3JhbmdlJ10KICAgICAgICAgICAgYXV0byA9IHNlbGYua3dbJ2F1dG8nXQogICAgICAgICAgICBu
X2pvYnMgPSBzZWxmLmt3WydjcHUnXQogICAgICAgICAgICBuX2VzdGltYXRvciA9IHNlbGYua3dbJ25f
ZXN0aW1hdG9yJ10KICAgICAgICAgICAgY29sc2FtcGxlX2J5dHJlZSA9IHNlbGYua3dbJ2NvbHNhbXBs
ZV9ieXRyZWUnXQogICAgICAgICAgICBwYXJhbWV0ZXJzID0gewogICAgICAgICAgICAgICAgJ21heF9k
ZXB0aCc6IGxpc3QocmFuZ2UoZGVwdGhfcmFuZ2VbMF0sIGRlcHRoX3JhbmdlWzFdLCBkZXB0aF9yYW5n
ZVsyXSkpLAogICAgICAgICAgICAgICAgJ2xlYXJuaW5nX3JhdGUnOiBsaXN0KG5wLmFyYW5nZShyYXRl
X3JhbmdlWzBdLCByYXRlX3JhbmdlWzFdLCByYXRlX3JhbmdlWzJdKSkKICAgICAgICAgICAgfQogICAg
ICAgIAogICAgICAgICAgICBpZiBhdXRvOgogICAgICAgICAgICAgICAgYnN0ID0geGdiLlhHQkNsYXNz
aWZpZXIoYm9vc3Rlcj1ib29zdGVyLCBuX2VzdGltYXRvcnM9bl9lc3RpbWF0b3IsIG5fam9icz1uX2pv
YnMsIGNvbHNhbXBsZV9ieXRyZWU9Y29sc2FtcGxlX2J5dHJlZSkKICAgICAgICAgICAgICAgIGdzZWFy
Y2ggPSBHcmlkU2VhcmNoQ1YoYnN0LCBwYXJhbV9ncmlkPXBhcmFtZXRlcnMsIG5fam9icz1uX2pvYnMp
LmZpdChzZWxmLnRyYWluaW5nX2RhdGFmcmFtZS52YWx1ZXMsIHNlbGYudHJhaW5pbmdfZGF0YWxhYmVs
KQogICAgICAgICAgICAgICAgYmVzdF9wYXJhbWV0ZXJzID0gZ3NlYXJjaC5iZXN0X3BhcmFtc18KICAg
ICAgICAgICAgICAgIG1heF9kZXB0aCA9IGJlc3RfcGFyYW1ldGVyc1snbWF4X2RlcHRoJ10KICAgICAg
ICAgICAgICAgIGxlYXJuaW5nX3JhdGUgPSBiZXN0X3BhcmFtZXRlcnNbJ2xlYXJuaW5nX3JhdGUnXQog
ICAgICAgICAgICBjYXRlZ29yaWVzID0gc29ydGVkKHNldChzZWxmLnRyYWluaW5nX2RhdGFsYWJlbCkp
CiAgICAgICAgICAgIFgsIHkgPSBzZWxmLnRyYWluaW5nX2RhdGFmcmFtZS52YWx1ZXMsIHNlbGYudHJh
aW5pbmdfZGF0YWxhYmVsCiAgICAgICAgICAgIHRyYWluaW5nX3Njb3JlID0gbnAuemVyb3MoKFguc2hh
cGVbMF0sIGxlbihjYXRlZ29yaWVzKSArIDIpKQogICAgICAgICAgICB0cmFpbmluZ19zY29yZVs6LCAx
XSA9IHkKICAgICAgICAgICAgbW9kZWwgPSBbXQogICAgICAgICAgICBmb2xkcyA9IFN0cmF0aWZpZWRL
Rm9sZChmb2xkKS5zcGxpdChYLCB5KQogICAgICAgICAgICBmb3IgaSwgKHRyYWluLCB2YWxpZCkgaW4g
ZW51bWVyYXRlKGZvbGRzKToKICAgICAgICAgICAgICAgIHRyYWluX1gsIHRyYWluX3kgPSBYW3RyYWlu
XSwgeVt0cmFpbl0KICAgICAgICAgICAgICAgIHZhbGlkX1gsIHZhbGlkX3kgPSBYW3ZhbGlkXSwgeVt2
YWxpZF0KICAgICAgICAgICAgICAgIGJzdF9tb2RlbCA9IHhnYi5YR0JDbGFzc2lmaWVyKGJvb3N0ZXI9
Ym9vc3RlciwgbWF4X2RlcHRoPW1heF9kZXB0aCwgbGVhcm5pbmdfcmF0ZT1sZWFybmluZ19yYXRlLCBu
X2VzdGltYXRvcnM9bl9lc3RpbWF0b3IsIG5fam9icz1uX2pvYnMsIGNvbHNhbXBsZV9ieXRyZWU9Y29s
c2FtcGxlX2J5dHJlZSkuZml0KHRyYWluX1gsIHRyYWluX3kpCiAgICAgICAgICAgICAgICBtb2RlbC5h
cHBlbmQoYnN0X21vZGVsKQogICAgICAgICAgICAgICAgdHJhaW5pbmdfc2NvcmVbdmFsaWQsIDBdID0g
aQogICAgICAgICAgICAgICAgdHJhaW5pbmdfc2NvcmVbdmFsaWQsIDI6XSA9IGJzdF9tb2RlbC5wcmVk
aWN0X3Byb2JhKHZhbGlkX1gpCiAgICAgICAgICAgIHNlbGYudHJhaW5pbmdfc2NvcmUgPSBwZC5EYXRh
RnJhbWUodHJhaW5pbmdfc2NvcmUsIGNvbHVtbnM9WydGb2xkJywgJ0xhYmVsJ10gKyBbJ1Njb3JlXyVz
JyAlaSBmb3IgaSBpbiBjYXRlZ29yaWVzXSkKICAgICAgICAgICAgc2VsZi5iZXN0X21vZGVsID0gbW9k
ZWwKCiAgICAgICAgICAgICMgaW5kZXBlbmRlbnQgZGF0YXNldAogICAgICAgICAgICBpZiBub3Qgc2Vs
Zi50ZXN0aW5nX2RhdGFmcmFtZSBpcyBOb25lOgogICAgICAgICAgICAgICAgaW5kZXAgPSBzZWxmLnRl
c3RpbmdfZGF0YWZyYW1lLnZhbHVlcwogICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZSA9IG5wLnpl
cm9zKChpbmRlcC5zaGFwZVswXSwgbGVuKGNhdGVnb3JpZXMpICsgMikpCiAgICAgICAgICAgICAgICB0
ZXN0aW5nX3Njb3JlWzosIDFdID0gc2VsZi50ZXN0aW5nX2RhdGFsYWJlbAogICAgICAgICAgICAgICAg
Zm9yIGJzdCBpbiBzZWxmLmJlc3RfbW9kZWw6CiAgICAgICAgICAgICAgICAgICAgdGVzdGluZ19zY29y
ZVs6LCAyOl0gKz0gYnN0LnByZWRpY3RfcHJvYmEoaW5kZXApCiAgICAgICAgICAgICAgICB0ZXN0aW5n
X3Njb3JlWzosIDI6XSAvPSBmb2xkCiAgICAgICAgICAgICAgICBzZWxmLnRlc3Rpbmdfc2NvcmUgPSBw
ZC5EYXRhRnJhbWUodGVzdGluZ19zY29yZSwgY29sdW1ucz1bJ0ZvbGQnLCAnTGFiZWwnXSArIFsnU2Nv
cmVfJXMnICVpIGZvciBpIGluIGNhdGVnb3JpZXNdKQogICAgICAgICAgICAgICAgc2VsZi50ZXN0aW5n
X3Njb3JlWydGb2xkJ10gPSAnTkEnCiAgICAgICAgICAgICMgY2FsY3VsYXRlIG1ldHJpY3MKICAgICAg
ICAgICAgc2VsZi5jYWxjdWxhdGVFdmFsdWF0aW9uTWV0cmljcygpCiAgICAgICAgICAgIGlmIGF1dG86
CiAgICAgICAgICAgICAgICBzZWxmLm1lc3NhZ2UgPSAnQmVzdCBwYXJhbWV0ZXJzOiAnICsgc3RyKGJl
c3RfcGFyYW1ldGVycykKICAgICAgICAgICAgc2VsZi5tZXNzYWdlID0gJ0NvbXBsZXRlLicKICAgICAg
ICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAg
IHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBT
dG9jaGFzdGljR3JhZGllbnREZXNjZW50Q2xhc3NpZmllcihzZWxmKToKICAgICAgICB0cnk6CiAgICAg
ICAgICAgIHNlbGYuYWxnb3JpdGhtID0gJ1NHRCcKICAgICAgICAgICAgZm9sZCA9IHNlbGYua3dbJ0ZP
TEQnXQogICAgICAgIAogICAgICAgICAgICBjYXRlZ29yaWVzID0gc29ydGVkKHNldChzZWxmLnRyYWlu
aW5nX2RhdGFsYWJlbCkpCiAgICAgICAgICAgIFgsIHkgPSBzZWxmLnRyYWluaW5nX2RhdGFmcmFtZS52
YWx1ZXMsIHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsCiAgICAgICAgICAgIHRyYWluaW5nX3Njb3JlID0g
bnAuemVyb3MoKFguc2hhcGVbMF0sIGxlbihjYXRlZ29yaWVzKSArIDIpKQogICAgICAgICAgICB0cmFp
bmluZ19zY29yZVs6LCAxXSA9IHkKICAgICAgICAgICAgbW9kZWwgPSBbXQogICAgICAgICAgICBmb2xk
cyA9IFN0cmF0aWZpZWRLRm9sZChmb2xkKS5zcGxpdChYLCB5KQogICAgICAgICAgICBmb3IgaSwgKHRy
YWluLCB2YWxpZCkgaW4gZW51bWVyYXRlKGZvbGRzKToKICAgICAgICAgICAgICAgIHRyYWluX1gsIHRy
YWluX3kgPSBYW3RyYWluXSwgeVt0cmFpbl0KICAgICAgICAgICAgICAgIHZhbGlkX1gsIHZhbGlkX3kg
PSBYW3ZhbGlkXSwgeVt2YWxpZF0KICAgICAgICAgICAgICAgIHNnZCA9IFNHRENsYXNzaWZpZXIobG9z
cz0nbG9nJykuZml0KHRyYWluX1gsIHRyYWluX3kpCiAgICAgICAgICAgICAgICBtb2RlbC5hcHBlbmQo
c2dkKQogICAgICAgICAgICAgICAgdHJhaW5pbmdfc2NvcmVbdmFsaWQsIDBdID0gaQogICAgICAgICAg
ICAgICAgdHJhaW5pbmdfc2NvcmVbdmFsaWQsIDI6XSA9IHNnZC5wcmVkaWN0X3Byb2JhKHZhbGlkX1gp
CiAgICAgICAgICAgIHNlbGYudHJhaW5pbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUodHJhaW5pbmdfc2Nv
cmUsIGNvbHVtbnM9WydGb2xkJywgJ0xhYmVsJ10gKyBbJ1Njb3JlXyVzJyAlaSBmb3IgaSBpbiBjYXRl
Z29yaWVzXSkKICAgICAgICAgICAgc2VsZi5iZXN0X21vZGVsID0gbW9kZWwKCiAgICAgICAgICAgICMg
aW5kZXBlbmRlbnQgZGF0YXNldAogICAgICAgICAgICBpZiBub3Qgc2VsZi50ZXN0aW5nX2RhdGFmcmFt
ZSBpcyBOb25lOgogICAgICAgICAgICAgICAgaW5kZXAgPSBzZWxmLnRlc3RpbmdfZGF0YWZyYW1lLnZh
bHVlcwogICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZSA9IG5wLnplcm9zKChpbmRlcC5zaGFwZVsw
XSwgbGVuKGNhdGVnb3JpZXMpICsgMikpCiAgICAgICAgICAgICAgICB0ZXN0aW5nX3Njb3JlWzosIDFd
ID0gc2VsZi50ZXN0aW5nX2RhdGFsYWJlbAogICAgICAgICAgICAgICAgZm9yIHNnZCBpbiBzZWxmLmJl
c3RfbW9kZWw6CiAgICAgICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAyOl0gKz0gc2dkLnBy
ZWRpY3RfcHJvYmEoaW5kZXApCiAgICAgICAgICAgICAgICB0ZXN0aW5nX3Njb3JlWzosIDI6XSAvPSBm
b2xkCiAgICAgICAgICAgICAgICBzZWxmLnRlc3Rpbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUodGVzdGlu
Z19zY29yZSwgY29sdW1ucz1bJ0ZvbGQnLCAnTGFiZWwnXSArIFsnU2NvcmVfJXMnICVpIGZvciBpIGlu
IGNhdGVnb3JpZXNdKQogICAgICAgICAgICAgICAgc2VsZi50ZXN0aW5nX3Njb3JlWydGb2xkJ10gPSAn
TkEnCiAgICAgICAgICAgICMgY2FsY3VsYXRlIG1ldHJpY3MKICAgICAgICAgICAgc2VsZi5jYWxjdWxh
dGVFdmFsdWF0aW9uTWV0cmljcygpCiAgICAgICAgICAgIHNlbGYubWVzc2FnZSA9ICdDb21wbGV0ZS4n
CiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAg
ICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAg
ICBkZWYgRGVjaXNpb25UcmVlKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5hbGdv
cml0aG0gPSAnRGVjaXNpb25UcmVlJwogICAgICAgICAgICBmb2xkID0gc2VsZi5rd1snRk9MRCddCiAg
ICAgICAgCiAgICAgICAgICAgIGNhdGVnb3JpZXMgPSBzb3J0ZWQoc2V0KHNlbGYudHJhaW5pbmdfZGF0
YWxhYmVsKSkKICAgICAgICAgICAgWCwgeSA9IHNlbGYudHJhaW5pbmdfZGF0YWZyYW1lLnZhbHVlcywg
c2VsZi50cmFpbmluZ19kYXRhbGFiZWwKICAgICAgICAgICAgdHJhaW5pbmdfc2NvcmUgPSBucC56ZXJv
cygoWC5zaGFwZVswXSwgbGVuKGNhdGVnb3JpZXMpICsgMikpCiAgICAgICAgICAgIHRyYWluaW5nX3Nj
b3JlWzosIDFdID0geQogICAgICAgICAgICBtb2RlbCA9IFtdCiAgICAgICAgICAgIGZvbGRzID0gU3Ry
YXRpZmllZEtGb2xkKGZvbGQpLnNwbGl0KFgsIHkpCiAgICAgICAgICAgIGZvciBpLCAodHJhaW4sIHZh
bGlkKSBpbiBlbnVtZXJhdGUoZm9sZHMpOgogICAgICAgICAgICAgICAgdHJhaW5fWCwgdHJhaW5feSA9
IFhbdHJhaW5dLCB5W3RyYWluXQogICAgICAgICAgICAgICAgdmFsaWRfWCwgdmFsaWRfeSA9IFhbdmFs
aWRdLCB5W3ZhbGlkXQogICAgICAgICAgICAgICAgZHRjID0gRGVjaXNpb25UcmVlQ2xhc3NpZmllcigp
LmZpdCh0cmFpbl9YLCB0cmFpbl95KQogICAgICAgICAgICAgICAgbW9kZWwuYXBwZW5kKGR0YykKICAg
ICAgICAgICAgICAgIHRyYWluaW5nX3Njb3JlW3ZhbGlkLCAwXSA9IGkKICAgICAgICAgICAgICAgIHRy
YWluaW5nX3Njb3JlW3ZhbGlkLCAyOl0gPSBkdGMucHJlZGljdF9wcm9iYSh2YWxpZF9YKQogICAgICAg
ICAgICBzZWxmLnRyYWluaW5nX3Njb3JlID0gcGQuRGF0YUZyYW1lKHRyYWluaW5nX3Njb3JlLCBjb2x1
bW5zPVsnRm9sZCcsICdMYWJlbCddICsgWydTY29yZV8lcycgJWkgZm9yIGkgaW4gY2F0ZWdvcmllc10p
CiAgICAgICAgICAgIHNlbGYuYmVzdF9tb2RlbCA9IG1vZGVsCgogICAgICAgICAgICAjIGluZGVwZW5k
ZW50IGRhdGFzZXQKICAgICAgICAgICAgaWYgbm90IHNlbGYudGVzdGluZ19kYXRhZnJhbWUgaXMgTm9u
ZToKICAgICAgICAgICAgICAgIGluZGVwID0gc2VsZi50ZXN0aW5nX2RhdGFmcmFtZS52YWx1ZXMKICAg
ICAgICAgICAgICAgIHRlc3Rpbmdfc2NvcmUgPSBucC56ZXJvcygoaW5kZXAuc2hhcGVbMF0sIGxlbihj
YXRlZ29yaWVzKSArIDIpKQogICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAxXSA9IHNlbGYu
dGVzdGluZ19kYXRhbGFiZWwKICAgICAgICAgICAgICAgIGZvciBkdGMgaW4gc2VsZi5iZXN0X21vZGVs
OgogICAgICAgICAgICAgICAgICAgIHRlc3Rpbmdfc2NvcmVbOiwgMjpdICs9IGR0Yy5wcmVkaWN0X3By
b2JhKGluZGVwKQogICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAyOl0gLz0gZm9sZAogICAg
ICAgICAgICAgICAgc2VsZi50ZXN0aW5nX3Njb3JlID0gcGQuRGF0YUZyYW1lKHRlc3Rpbmdfc2NvcmUs
IGNvbHVtbnM9WydGb2xkJywgJ0xhYmVsJ10gKyBbJ1Njb3JlXyVzJyAlaSBmb3IgaSBpbiBjYXRlZ29y
aWVzXSkKICAgICAgICAgICAgICAgIHNlbGYudGVzdGluZ19zY29yZVsnRm9sZCddID0gJ05BJwogICAg
ICAgICAgICAjIGNhbGN1bGF0ZSBtZXRyaWNzCiAgICAgICAgICAgIHNlbGYuY2FsY3VsYXRlRXZhbHVh
dGlvbk1ldHJpY3MoKQogICAgICAgICAgICBzZWxmLm1lc3NhZ2UgPSAnQ29tcGxldGUuJwogICAgICAg
ICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAg
c2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIEdh
dXNzaWFuTkJDbGFzc2lmaWVyKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5hbGdv
cml0aG0gPSAnQmF5ZXMnCiAgICAgICAgICAgIGZvbGQgPSBzZWxmLmt3WydGT0xEJ10KICAgICAgICAK
ICAgICAgICAgICAgY2F0ZWdvcmllcyA9IHNvcnRlZChzZXQoc2VsZi50cmFpbmluZ19kYXRhbGFiZWwp
KQogICAgICAgICAgICBYLCB5ID0gc2VsZi50cmFpbmluZ19kYXRhZnJhbWUudmFsdWVzLCBzZWxmLnRy
YWluaW5nX2RhdGFsYWJlbAogICAgICAgICAgICB0cmFpbmluZ19zY29yZSA9IG5wLnplcm9zKChYLnNo
YXBlWzBdLCBsZW4oY2F0ZWdvcmllcykgKyAyKSkKICAgICAgICAgICAgdHJhaW5pbmdfc2NvcmVbOiwg
MV0gPSB5CiAgICAgICAgICAgIG1vZGVsID0gW10KICAgICAgICAgICAgZm9sZHMgPSBTdHJhdGlmaWVk
S0ZvbGQoZm9sZCkuc3BsaXQoWCwgeSkKICAgICAgICAgICAgZm9yIGksICh0cmFpbiwgdmFsaWQpIGlu
IGVudW1lcmF0ZShmb2xkcyk6CiAgICAgICAgICAgICAgICB0cmFpbl9YLCB0cmFpbl95ID0gWFt0cmFp
bl0sIHlbdHJhaW5dCiAgICAgICAgICAgICAgICB2YWxpZF9YLCB2YWxpZF95ID0gWFt2YWxpZF0sIHlb
dmFsaWRdCiAgICAgICAgICAgICAgICBnc24gPSBHYXVzc2lhbk5CKCkuZml0KHRyYWluX1gsIHRyYWlu
X3kpCiAgICAgICAgICAgICAgICBtb2RlbC5hcHBlbmQoZ3NuKQogICAgICAgICAgICAgICAgdHJhaW5p
bmdfc2NvcmVbdmFsaWQsIDBdID0gaQogICAgICAgICAgICAgICAgdHJhaW5pbmdfc2NvcmVbdmFsaWQs
IDI6XSA9IGdzbi5wcmVkaWN0X3Byb2JhKHZhbGlkX1gpCiAgICAgICAgICAgIHNlbGYudHJhaW5pbmdf
c2NvcmUgPSBwZC5EYXRhRnJhbWUodHJhaW5pbmdfc2NvcmUsIGNvbHVtbnM9WydGb2xkJywgJ0xhYmVs
J10gKyBbJ1Njb3JlXyVzJyAlaSBmb3IgaSBpbiBjYXRlZ29yaWVzXSkKICAgICAgICAgICAgc2VsZi5i
ZXN0X21vZGVsID0gbW9kZWwKCiAgICAgICAgICAgICMgaW5kZXBlbmRlbnQgZGF0YXNldAogICAgICAg
ICAgICBpZiBub3Qgc2VsZi50ZXN0aW5nX2RhdGFmcmFtZSBpcyBOb25lOgogICAgICAgICAgICAgICAg
aW5kZXAgPSBzZWxmLnRlc3RpbmdfZGF0YWZyYW1lLnZhbHVlcwogICAgICAgICAgICAgICAgdGVzdGlu
Z19zY29yZSA9IG5wLnplcm9zKChpbmRlcC5zaGFwZVswXSwgbGVuKGNhdGVnb3JpZXMpICsgMikpCiAg
ICAgICAgICAgICAgICB0ZXN0aW5nX3Njb3JlWzosIDFdID0gc2VsZi50ZXN0aW5nX2RhdGFsYWJlbAog
ICAgICAgICAgICAgICAgZm9yIGdzbiBpbiBzZWxmLmJlc3RfbW9kZWw6CiAgICAgICAgICAgICAgICAg
ICAgdGVzdGluZ19zY29yZVs6LCAyOl0gKz0gZ3NuLnByZWRpY3RfcHJvYmEoaW5kZXApCiAgICAgICAg
ICAgICAgICB0ZXN0aW5nX3Njb3JlWzosIDI6XSAvPSBmb2xkCiAgICAgICAgICAgICAgICBzZWxmLnRl
c3Rpbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUodGVzdGluZ19zY29yZSwgY29sdW1ucz1bJ0ZvbGQnLCAn
TGFiZWwnXSArIFsnU2NvcmVfJXMnICVpIGZvciBpIGluIGNhdGVnb3JpZXNdKQogICAgICAgICAgICAg
ICAgc2VsZi50ZXN0aW5nX3Njb3JlWydGb2xkJ10gPSAnTkEnCiAgICAgICAgICAgICMgY2FsY3VsYXRl
IG1ldHJpY3MKICAgICAgICAgICAgc2VsZi5jYWxjdWxhdGVFdmFsdWF0aW9uTWV0cmljcygpCiAgICAg
ICAgICAgIHNlbGYubWVzc2FnZSA9ICdDb21wbGV0ZS4nCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAg
ICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0
cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgQWRhQm9vc3Qoc2VsZik6CiAgICAg
ICAgdHJ5OgogICAgICAgICAgICBzZWxmLmFsZ29yaXRobSA9ICdBZGFCb29zdCcKICAgICAgICAgICAg
Zm9sZCA9IHNlbGYua3dbJ0ZPTEQnXQogICAgICAgIAogICAgICAgICAgICBjYXRlZ29yaWVzID0gc29y
dGVkKHNldChzZWxmLnRyYWluaW5nX2RhdGFsYWJlbCkpCiAgICAgICAgICAgIFgsIHkgPSBzZWxmLnRy
YWluaW5nX2RhdGFmcmFtZS52YWx1ZXMsIHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsCiAgICAgICAgICAg
IHRyYWluaW5nX3Njb3JlID0gbnAuemVyb3MoKFguc2hhcGVbMF0sIGxlbihjYXRlZ29yaWVzKSArIDIp
KQogICAgICAgICAgICB0cmFpbmluZ19zY29yZVs6LCAxXSA9IHkKICAgICAgICAgICAgbW9kZWwgPSBb
XQogICAgICAgICAgICBmb2xkcyA9IFN0cmF0aWZpZWRLRm9sZChmb2xkKS5zcGxpdChYLCB5KQogICAg
ICAgICAgICBmb3IgaSwgKHRyYWluLCB2YWxpZCkgaW4gZW51bWVyYXRlKGZvbGRzKToKICAgICAgICAg
ICAgICAgIHRyYWluX1gsIHRyYWluX3kgPSBYW3RyYWluXSwgeVt0cmFpbl0KICAgICAgICAgICAgICAg
IHZhbGlkX1gsIHZhbGlkX3kgPSBYW3ZhbGlkXSwgeVt2YWxpZF0KICAgICAgICAgICAgICAgIGFiYyA9
IEFkYUJvb3N0Q2xhc3NpZmllcihuX2VzdGltYXRvcnM9MjAwLCByYW5kb21fc3RhdGU9MCkuZml0KHRy
YWluX1gsIHRyYWluX3kpCiAgICAgICAgICAgICAgICBtb2RlbC5hcHBlbmQoYWJjKQogICAgICAgICAg
ICAgICAgdHJhaW5pbmdfc2NvcmVbdmFsaWQsIDBdID0gaQogICAgICAgICAgICAgICAgdHJhaW5pbmdf
c2NvcmVbdmFsaWQsIDI6XSA9IGFiYy5wcmVkaWN0X3Byb2JhKHZhbGlkX1gpCiAgICAgICAgICAgIHNl
bGYudHJhaW5pbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUodHJhaW5pbmdfc2NvcmUsIGNvbHVtbnM9WydG
b2xkJywgJ0xhYmVsJ10gKyBbJ1Njb3JlXyVzJyAlaSBmb3IgaSBpbiBjYXRlZ29yaWVzXSkKICAgICAg
ICAgICAgc2VsZi5iZXN0X21vZGVsID0gbW9kZWwKCiAgICAgICAgICAgICMgaW5kZXBlbmRlbnQgZGF0
YXNldAogICAgICAgICAgICBpZiBub3Qgc2VsZi50ZXN0aW5nX2RhdGFmcmFtZSBpcyBOb25lOgogICAg
ICAgICAgICAgICAgaW5kZXAgPSBzZWxmLnRlc3RpbmdfZGF0YWZyYW1lLnZhbHVlcwogICAgICAgICAg
ICAgICAgdGVzdGluZ19zY29yZSA9IG5wLnplcm9zKChpbmRlcC5zaGFwZVswXSwgbGVuKGNhdGVnb3Jp
ZXMpICsgMikpCiAgICAgICAgICAgICAgICB0ZXN0aW5nX3Njb3JlWzosIDFdID0gc2VsZi50ZXN0aW5n
X2RhdGFsYWJlbAogICAgICAgICAgICAgICAgZm9yIGFiYyBpbiBzZWxmLmJlc3RfbW9kZWw6CiAgICAg
ICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAyOl0gKz0gYWJjLnByZWRpY3RfcHJvYmEoaW5k
ZXApCiAgICAgICAgICAgICAgICB0ZXN0aW5nX3Njb3JlWzosIDI6XSAvPSBmb2xkCiAgICAgICAgICAg
ICAgICBzZWxmLnRlc3Rpbmdfc2NvcmUgPSBwZC5EYXRhRnJhbWUodGVzdGluZ19zY29yZSwgY29sdW1u
cz1bJ0ZvbGQnLCAnTGFiZWwnXSArIFsnU2NvcmVfJXMnICVpIGZvciBpIGluIGNhdGVnb3JpZXNdKQog
ICAgICAgICAgICAgICAgc2VsZi50ZXN0aW5nX3Njb3JlWydGb2xkJ10gPSAnTkEnCiAgICAgICAgICAg
ICMgY2FsY3VsYXRlIG1ldHJpY3MKICAgICAgICAgICAgc2VsZi5jYWxjdWxhdGVFdmFsdWF0aW9uTWV0
cmljcygpCiAgICAgICAgICAgIHNlbGYubWVzc2FnZSA9ICdDb21wbGV0ZS4nCiAgICAgICAgICAgIHJl
dHVybiBUcnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVy
cm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgQmFnZ2luZyhz
ZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuYWxnb3JpdGhtID0gJ0JhZ2dpbmcnCiAg
ICAgICAgICAgIGZvbGQgPSBzZWxmLmt3WydGT0xEJ10KICAgICAgICAgICAgbl9lc3RpbWF0b3JzID0g
c2VsZi5rd1snbl9lc3RpbWF0b3InXQogICAgICAgICAgICBuX2pvYnMgPSBzZWxmLmt3WydjcHUnXQoK
CiAgICAgICAgICAgIAogICAgICAgICAgICBjYXRlZ29yaWVzID0gc29ydGVkKHNldChzZWxmLnRyYWlu
aW5nX2RhdGFsYWJlbCkpCiAgICAgICAgICAgIFgsIHkgPSBzZWxmLnRyYWluaW5nX2RhdGFmcmFtZS52
YWx1ZXMsIHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsCiAgICAgICAgICAgIHRyYWluaW5nX3Njb3JlID0g
bnAuemVyb3MoKFguc2hhcGVbMF0sIGxlbihjYXRlZ29yaWVzKSArIDIpKQogICAgICAgICAgICB0cmFp
bmluZ19zY29yZVs6LCAxXSA9IHkKICAgICAgICAgICAgbW9kZWwgPSBbXQogICAgICAgICAgICBmb2xk
cyA9IFN0cmF0aWZpZWRLRm9sZChmb2xkKS5zcGxpdChYLCB5KQogICAgICAgICAgICBmb3IgaSwgKHRy
YWluLCB2YWxpZCkgaW4gZW51bWVyYXRlKGZvbGRzKToKICAgICAgICAgICAgICAgIHRyYWluX1gsIHRy
YWluX3kgPSBYW3RyYWluXSwgeVt0cmFpbl0KICAgICAgICAgICAgICAgIHZhbGlkX1gsIHZhbGlkX3kg
PSBYW3ZhbGlkXSwgeVt2YWxpZF0KICAgICAgICAgICAgICAgIGJnYyA9IEJhZ2dpbmdDbGFzc2lmaWVy
KG5fZXN0aW1hdG9ycz1uX2VzdGltYXRvcnMsIG5fam9icz1uX2pvYnMpLmZpdCh0cmFpbl9YLCB0cmFp
bl95KQogICAgICAgICAgICAgICAgbW9kZWwuYXBwZW5kKGJnYykKICAgICAgICAgICAgICAgIHRyYWlu
aW5nX3Njb3JlW3ZhbGlkLCAwXSA9IGkKICAgICAgICAgICAgICAgIHRyYWluaW5nX3Njb3JlW3ZhbGlk
LCAyOl0gPSBiZ2MucHJlZGljdF9wcm9iYSh2YWxpZF9YKQogICAgICAgICAgICBzZWxmLnRyYWluaW5n
X3Njb3JlID0gcGQuRGF0YUZyYW1lKHRyYWluaW5nX3Njb3JlLCBjb2x1bW5zPVsnRm9sZCcsICdMYWJl
bCddICsgWydTY29yZV8lcycgJWkgZm9yIGkgaW4gY2F0ZWdvcmllc10pCiAgICAgICAgICAgIHNlbGYu
YmVzdF9tb2RlbCA9IG1vZGVsCgogICAgICAgICAgICAjIGluZGVwZW5kZW50IGRhdGFzZXQKICAgICAg
ICAgICAgaWYgbm90IHNlbGYudGVzdGluZ19kYXRhZnJhbWUgaXMgTm9uZToKICAgICAgICAgICAgICAg
IGluZGVwID0gc2VsZi50ZXN0aW5nX2RhdGFmcmFtZS52YWx1ZXMKICAgICAgICAgICAgICAgIHRlc3Rp
bmdfc2NvcmUgPSBucC56ZXJvcygoaW5kZXAuc2hhcGVbMF0sIGxlbihjYXRlZ29yaWVzKSArIDIpKQog
ICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAxXSA9IHNlbGYudGVzdGluZ19kYXRhbGFiZWwK
ICAgICAgICAgICAgICAgIGZvciBiZ2MgaW4gc2VsZi5iZXN0X21vZGVsOgogICAgICAgICAgICAgICAg
ICAgIHRlc3Rpbmdfc2NvcmVbOiwgMjpdICs9IGJnYy5wcmVkaWN0X3Byb2JhKGluZGVwKQogICAgICAg
ICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAyOl0gLz0gZm9sZAogICAgICAgICAgICAgICAgc2VsZi50
ZXN0aW5nX3Njb3JlID0gcGQuRGF0YUZyYW1lKHRlc3Rpbmdfc2NvcmUsIGNvbHVtbnM9WydGb2xkJywg
J0xhYmVsJ10gKyBbJ1Njb3JlXyVzJyAlaSBmb3IgaSBpbiBjYXRlZ29yaWVzXSkKICAgICAgICAgICAg
ICAgIHNlbGYudGVzdGluZ19zY29yZVsnRm9sZCddID0gJ05BJwogICAgICAgICAgICAjIGNhbGN1bGF0
ZSBtZXRyaWNzCiAgICAgICAgICAgIHNlbGYuY2FsY3VsYXRlRXZhbHVhdGlvbk1ldHJpY3MoKQogICAg
ICAgICAgICBzZWxmLm1lc3NhZ2UgPSAnQ29tcGxldGUuJwogICAgICAgICAgICByZXR1cm4gVHJ1ZQog
ICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBz
dHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIEdCRFRDbGFzc2lmaWVyKHNlbGYp
OgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5hbGdvcml0aG0gPSAnR0JEVCcKICAgICAgICAg
ICAgZm9sZCA9IHNlbGYua3dbJ0ZPTEQnXQogICAgICAgIAogICAgICAgICAgICBjYXRlZ29yaWVzID0g
c29ydGVkKHNldChzZWxmLnRyYWluaW5nX2RhdGFsYWJlbCkpCiAgICAgICAgICAgIFgsIHkgPSBzZWxm
LnRyYWluaW5nX2RhdGFmcmFtZS52YWx1ZXMsIHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsCiAgICAgICAg
ICAgIHRyYWluaW5nX3Njb3JlID0gbnAuemVyb3MoKFguc2hhcGVbMF0sIGxlbihjYXRlZ29yaWVzKSAr
IDIpKQogICAgICAgICAgICB0cmFpbmluZ19zY29yZVs6LCAxXSA9IHkKICAgICAgICAgICAgbW9kZWwg
PSBbXQogICAgICAgICAgICBmb2xkcyA9IFN0cmF0aWZpZWRLRm9sZChmb2xkKS5zcGxpdChYLCB5KQog
ICAgICAgICAgICBmb3IgaSwgKHRyYWluLCB2YWxpZCkgaW4gZW51bWVyYXRlKGZvbGRzKToKICAgICAg
ICAgICAgICAgIHRyYWluX1gsIHRyYWluX3kgPSBYW3RyYWluXSwgeVt0cmFpbl0KICAgICAgICAgICAg
ICAgIHZhbGlkX1gsIHZhbGlkX3kgPSBYW3ZhbGlkXSwgeVt2YWxpZF0KICAgICAgICAgICAgICAgIGdi
YyA9IEdyYWRpZW50Qm9vc3RpbmdDbGFzc2lmaWVyKCkuZml0KHRyYWluX1gsIHRyYWluX3kpCiAgICAg
ICAgICAgICAgICBtb2RlbC5hcHBlbmQoZ2JjKQogICAgICAgICAgICAgICAgdHJhaW5pbmdfc2NvcmVb
dmFsaWQsIDBdID0gaQogICAgICAgICAgICAgICAgdHJhaW5pbmdfc2NvcmVbdmFsaWQsIDI6XSA9IGdi
Yy5wcmVkaWN0X3Byb2JhKHZhbGlkX1gpCiAgICAgICAgICAgIHNlbGYudHJhaW5pbmdfc2NvcmUgPSBw
ZC5EYXRhRnJhbWUodHJhaW5pbmdfc2NvcmUsIGNvbHVtbnM9WydGb2xkJywgJ0xhYmVsJ10gKyBbJ1Nj
b3JlXyVzJyAlaSBmb3IgaSBpbiBjYXRlZ29yaWVzXSkKICAgICAgICAgICAgc2VsZi5iZXN0X21vZGVs
ID0gbW9kZWwKCiAgICAgICAgICAgICMgaW5kZXBlbmRlbnQgZGF0YXNldAogICAgICAgICAgICBpZiBu
b3Qgc2VsZi50ZXN0aW5nX2RhdGFmcmFtZSBpcyBOb25lOgogICAgICAgICAgICAgICAgaW5kZXAgPSBz
ZWxmLnRlc3RpbmdfZGF0YWZyYW1lLnZhbHVlcwogICAgICAgICAgICAgICAgdGVzdGluZ19zY29yZSA9
IG5wLnplcm9zKChpbmRlcC5zaGFwZVswXSwgbGVuKGNhdGVnb3JpZXMpICsgMikpCiAgICAgICAgICAg
ICAgICB0ZXN0aW5nX3Njb3JlWzosIDFdID0gc2VsZi50ZXN0aW5nX2RhdGFsYWJlbAogICAgICAgICAg
ICAgICAgZm9yIGdiYyBpbiBzZWxmLmJlc3RfbW9kZWw6CiAgICAgICAgICAgICAgICAgICAgdGVzdGlu
Z19zY29yZVs6LCAyOl0gKz0gZ2JjLnByZWRpY3RfcHJvYmEoaW5kZXApCiAgICAgICAgICAgICAgICB0
ZXN0aW5nX3Njb3JlWzosIDI6XSAvPSBmb2xkCiAgICAgICAgICAgICAgICBzZWxmLnRlc3Rpbmdfc2Nv
cmUgPSBwZC5EYXRhRnJhbWUodGVzdGluZ19zY29yZSwgY29sdW1ucz1bJ0ZvbGQnLCAnTGFiZWwnXSAr
IFsnU2NvcmVfJXMnICVpIGZvciBpIGluIGNhdGVnb3JpZXNdKQogICAgICAgICAgICAgICAgc2VsZi50
ZXN0aW5nX3Njb3JlWydGb2xkJ10gPSAnTkEnCiAgICAgICAgICAgICMgY2FsY3VsYXRlIG1ldHJpY3MK
ICAgICAgICAgICAgc2VsZi5jYWxjdWxhdGVFdmFsdWF0aW9uTWV0cmljcygpCiAgICAgICAgICAgIHNl
bGYubWVzc2FnZSA9ICdDb21wbGV0ZS4nCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhj
ZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAg
ICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgY2FsY3VsYXRlRXZhbHVhdGlvbk1ldHJpY3Moc2Vs
Zik6CiAgICAgICAgaWYgbm90IHNlbGYudHJhaW5pbmdfc2NvcmUgaXMgTm9uZToKICAgICAgICAgICAg
Zm9sZCA9IHNvcnRlZChzZXQoc2VsZi50cmFpbmluZ19zY29yZVsnRm9sZCddKSkKICAgICAgICAgICAg
ZGF0YSA9IHNlbGYudHJhaW5pbmdfc2NvcmUudmFsdWVzCiAgICAgICAgICAgIGNhdGVnb3JpZXMgPSBz
b3J0ZWQoc2V0KHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsKSkKICAgICAgICAgICAgaW5kZXhfbmFtZSA9
IFtdCiAgICAgICAgICAgIGNvbHVtbl9uYW1lID0gWydTbicsICdTcCcsICdQcmUnLCAnQWNjJywgJ01D
QycsICdGMScsICdBVVJPQycsICdBVVBSQyddCiAgICAgICAgICAgIGlmIGxlbihjYXRlZ29yaWVzKSA9
PSAyOgogICAgICAgICAgICAgICAgZGF0YU1ldHJpY3MgPSBucC56ZXJvcygobGVuKGZvbGQpLCA4KSkK
ICAgICAgICAgICAgICAgIGF1Y0RhdGEgPSBbXQogICAgICAgICAgICAgICAgcHJjRGF0YSA9IFtdCiAg
ICAgICAgICAgICAgICAjIGRhdGEgZm9yIHBsb3QgbWVhbiBST0MgaW4gY3Jvc3MtdmFsaWRhdGlvbgog
ICAgICAgICAgICAgICAgbWVhbl9mcHIgPSBucC5saW5zcGFjZSgwLCAxLCAxMDApCiAgICAgICAgICAg
ICAgICB0cHJzID0gW10KICAgICAgICAgICAgICAgICMgZGF0YSBmb3IgcGxvdCBtZWFuIFBSQyBpbiBj
cm9zcy12YWxpZGF0aW9uCiAgICAgICAgICAgICAgICBtZWFuX3JlY2FsbCA9IG5wLmxpbnNwYWNlKDAs
IDEsIDEwMCkKICAgICAgICAgICAgICAgIHByZWNpc2lvbnMgPSBbXQoKICAgICAgICAgICAgICAgIGZv
ciBmIGluIGZvbGQ6CiAgICAgICAgICAgICAgICAgICAgdG1wX2RhdGEgPSBkYXRhW2RhdGFbOiwgMF0g
PT0gZl0KICAgICAgICAgICAgICAgICAgICBtZXRyaWNzID0gTWV0cmljcyh0bXBfZGF0YVs6LCAtMV0s
IHRtcF9kYXRhWzosIDFdKQogICAgICAgICAgICAgICAgICAgIGF1Y0RhdGEuYXBwZW5kKFsnRm9sZCAl
ZCBBVVJPQyA9ICVzJyAlKGYsIG1ldHJpY3MuYXVjKSwgbWV0cmljcy5hdWNEb3RdKQogICAgICAgICAg
ICAgICAgICAgIHByY0RhdGEuYXBwZW5kKFsnRm9sZCAlZCBBVVBSQyA9ICVzJyAlKGYsIG1ldHJpY3Mu
cHJjKSwgbWV0cmljcy5wcmNEb3RdKQogICAgICAgICAgICAgICAgICAgIHRwcnMuYXBwZW5kKGludGVy
cChtZWFuX2ZwciwgbWV0cmljcy5hdWNEb3RbJ2ZwciddLCBtZXRyaWNzLmF1Y0RvdFsndHByJ10pKQog
ICAgICAgICAgICAgICAgICAgIHRwcnNbLTFdWzBdID0gMAogICAgICAgICAgICAgICAgICAgIHByZWNp
c2lvbnMuYXBwZW5kKGludGVycChtZWFuX3JlY2FsbCwgbWV0cmljcy5wcmNEb3RbJ3JlY2FsbCddWzo6
LTFdLCBtZXRyaWNzLnByY0RvdFsncHJlY2lzaW9uJ11bOjotMV0pKQogICAgICAgICAgICAgICAgICAg
IGRhdGFNZXRyaWNzW2ludChmKV0gPSBucC5hcnJheShbbWV0cmljcy5zZW5zaXRpdml0eSwgbWV0cmlj
cy5zcGVjaWZpY2l0eSwgbWV0cmljcy5wcmVjaXNpb24sIG1ldHJpY3MuYWNjdXJhY3ksIG1ldHJpY3Mu
bWNjLCBtZXRyaWNzLmYxLCBtZXRyaWNzLmF1YywgbWV0cmljcy5wcmNdKS5yZXNoYXBlKCgxLCAtMSkp
CiAgICAgICAgICAgICAgICAgICAgaW5kZXhfbmFtZS5hcHBlbmQoJ0ZvbGQgJWQnICVmKQogICAgICAg
ICAgICAgICAgICAgIGRlbCBtZXRyaWNzCiAgICAgICAgICAgICAgICBtZWFuVmFsdWUgPSBucC5hcm91
bmQobnAubWVhbihkYXRhTWV0cmljcywgYXhpcz0wKSwgZGVjaW1hbHM9NCkKICAgICAgICAgICAgICAg
IGRhdGFNZXRyaWNzID0gbnAudnN0YWNrKChkYXRhTWV0cmljcywgbWVhblZhbHVlKSkKICAgICAgICAg
ICAgICAgIGluZGV4X25hbWUuYXBwZW5kKCdNZWFuJykKICAgICAgICAgICAgICAgIHNlbGYuYXVjRGF0
YSA9IGF1Y0RhdGEKICAgICAgICAgICAgICAgIHNlbGYucHJjRGF0YSA9IHByY0RhdGEKICAgICAgICAg
ICAgICAgIG1lYW5fdHByID0gbnAubWVhbih0cHJzLCBheGlzPTApCiAgICAgICAgICAgICAgICBtZWFu
X3RwclstMV0gPSAxLjAKICAgICAgICAgICAgICAgIG1lYW5fcHJlY2lzaW9uID0gbnAubWVhbihwcmVj
aXNpb25zLCBheGlzPTApCiAgICAgICAgICAgICAgICBzZWxmLm1lYW5BdWNEYXRhID0gWydNZWFuIEFV
Uk9DID0gJXMnICVkYXRhTWV0cmljc1stMV1bLTJdLCBwZC5EYXRhRnJhbWUobnAuaHN0YWNrKChtZWFu
X2Zwci5yZXNoYXBlKCgtMSwgMSkpLCBtZWFuX3Rwci5yZXNoYXBlKCgtMSwgMSkpKSksIGNvbHVtbnM9
WydmcHInLCAndHByJ10pXQogICAgICAgICAgICAgICAgc2VsZi5tZWFuUHJjRGF0YSA9IFsnTWVhbiBB
VVBSQyA9ICVzJyAlZGF0YU1ldHJpY3NbLTFdWy0xXSwgcGQuRGF0YUZyYW1lKG5wLmhzdGFjaygobWVh
bl9yZWNhbGwucmVzaGFwZSgoLTEsIDEpKSwgbWVhbl9wcmVjaXNpb24ucmVzaGFwZSgoLTEsIDEpKSkp
LCBjb2x1bW5zPVsncmVjYWxsJywgJ3ByZWNpc2lvbiddKV0KCiAgICAgICAgICAgICAgICBpZiBub3Qg
c2VsZi50ZXN0aW5nX3Njb3JlIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHNlbGYu
dGVzdGluZ19zY29yZS52YWx1ZXNbOiwgMTpdLmFzdHlwZShmbG9hdCkKICAgICAgICAgICAgICAgICAg
ICBtZXRyaWNzID0gTWV0cmljcyhkYXRhWzosIC0xXSwgZGF0YVs6LCAwXSkKICAgICAgICAgICAgICAg
ICAgICBtZXRyaWNzX2luZCA9IG5wLmFycmF5KFttZXRyaWNzLnNlbnNpdGl2aXR5LCBtZXRyaWNzLnNw
ZWNpZmljaXR5LCBtZXRyaWNzLnByZWNpc2lvbiwgbWV0cmljcy5hY2N1cmFjeSwgbWV0cmljcy5tY2Ms
IG1ldHJpY3MuZjEsIG1ldHJpY3MuYXVjLCBtZXRyaWNzLnByY10pLnJlc2hhcGUoKDEsIC0xKSkKICAg
ICAgICAgICAgICAgICAgICBkYXRhTWV0cmljcyA9IG5wLnZzdGFjaygoZGF0YU1ldHJpY3MsIG1ldHJp
Y3NfaW5kKSkKICAgICAgICAgICAgICAgICAgICBpbmRleF9uYW1lLmFwcGVuZCgnSW5kZXAnKQogICAg
ICAgICAgICAgICAgICAgIHNlbGYuaW5kZXBBdWNEYXRhID0gWydJbmRlcCBBVVJPQyA9ICVzJyAlbWV0
cmljcy5hdWMsIG1ldHJpY3MuYXVjRG90XQogICAgICAgICAgICAgICAgICAgIHNlbGYuaW5kZXBQcmNE
YXRhID0gWydJbmRlcCBBVVBSQyA9ICVzJyAlbWV0cmljcy5wcmMsIG1ldHJpY3MucHJjRG90XQogICAg
ICAgICAgICAgICAgICAgIGRlbCBtZXRyaWNzCiAgICAgICAgICAgICAgICBzZWxmLm1ldHJpY3MgPSBw
ZC5EYXRhRnJhbWUoZGF0YU1ldHJpY3MsIGluZGV4PWluZGV4X25hbWUsIGNvbHVtbnM9Y29sdW1uX25h
bWUpCiAgICAgICAgICAgIGVsaWYgbGVuKGNhdGVnb3JpZXMpID4gMjoKICAgICAgICAgICAgICAgIGRh
dGFNZXRyaWNzID0gbnAuemVyb3MoKGxlbihmb2xkKSwgOCkpLmFzdHlwZShzdHIpCiAgICAgICAgICAg
ICAgICBmb3IgZiBpbiBmb2xkOgogICAgICAgICAgICAgICAgICAgIGluZGV4X25hbWUuYXBwZW5kKCdG
b2xkICVkJyAlZikKICAgICAgICAgICAgICAgICAgICB0bXBfZGF0YSA9IGRhdGFbZGF0YVs6LCAwXSA9
PSBmXQogICAgICAgICAgICAgICAgICAgIG1ldHJpY3MgPSBNZXRyaWNzKHRtcF9kYXRhWzosIDI6XSwg
dG1wX2RhdGFbOiwgMV0pCiAgICAgICAgICAgICAgICAgICAgZGF0YU1ldHJpY3NbaW50KGYpXSA9IG5w
LmFycmF5KFsnTkEnLCAnTkEnLCAnTkEnLCAnJXMnICVtZXRyaWNzLmFjY3VyYWN5LCAnTkEnLCAnTkEn
LCAnTkEnLCAnTkEnXSkKICAgICAgICAgICAgICAgICAgICBkZWwgbWV0cmljcwogICAgICAgICAgICAg
ICAgc2VsZi5tZXRyaWNzID0gcGQuRGF0YUZyYW1lKGRhdGFNZXRyaWNzLCBpbmRleD1pbmRleF9uYW1l
LCBjb2x1bW5zPWNvbHVtbl9uYW1lKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcGFz
cwoKICAgIGRlZiBzYXZlX3ByZWRpY3Rpb25fc2NvcmUoc2VsZiwgZmlsZSwgdHlwZT0ndHJhaW5pbmcn
KToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIHR5cGUgPT0gJ3RyYWluaW5nJzoKICAgICAgICAg
ICAgICAgIGRmID0gcGQuRGF0YUZyYW1lKHNlbGYudHJhaW5pbmdfc2NvcmUsIGNvbHVtbnM9WydGb2xk
JywgJ0xhYmVsJ10gKyBbJ1Njb3JlXyVzJyAlaSBmb3IgaSBpbiBzb3J0ZWQoc2V0KHNlbGYudHJhaW5p
bmdfZGF0YWxhYmVsKSldKQogICAgICAgICAgICAgICAgZGYudG9fY3N2KGZpbGUsIHNlcD0nXHQnLCBo
ZWFkZXI9VHJ1ZSwgaW5kZXg9RmFsc2UpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBk
ZiA9IHBkLkRhdGFGcmFtZShzZWxmLnRlc3Rpbmdfc2NvcmUsIGNvbHVtbnM9WydGb2xkJywgJ0xhYmVs
J10gKyBbJ1Njb3JlXyVzJyAlaSBmb3IgaSBpbiBzb3J0ZWQoc2V0KHNlbGYudHJhaW5pbmdfZGF0YWxh
YmVsKSldKQogICAgICAgICAgICAgICAgZGYudG9fY3N2KGZpbGUsIHNlcD0nXHQnLCBoZWFkZXI9VHJ1
ZSwgaW5kZXg9RmFsc2UpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IEV4Y2Vw
dGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICBy
ZXR1cm4gRmFsc2UKCiAgICBkZWYgc2F2ZV9tZXRyaWNzKHNlbGYsIGZpbGUpOgogICAgICAgIHRyeToK
ICAgICAgICAgICAgc2VsZi5tZXRyaWNzLnRvX2NzdihmaWxlLCBzZXA9J1x0JywgaGVhZGVyPVRydWUs
IGluZGV4PVRydWUpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlv
biBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1
cm4gRmFsc2UKCiAgICBkZWYgc2F2ZV9jb2RlcihzZWxmLCBmaWxlLCB0eXBlPSd0cmFpbmluZycpOgog
ICAgICAgIHRyeToKICAgICAgICAgICAgaWYgdHlwZSA9PSAndHJhaW5pbmcnOgogICAgICAgICAgICAg
ICAgZGF0YSA9IG5wLmhzdGFjaygoc2VsZi50cmFpbmluZ19kYXRhbGFiZWwucmVzaGFwZSgoLTEsIDEp
KSwgc2VsZi50cmFpbmluZ19kYXRhZnJhbWUudmFsdWVzKSkKICAgICAgICAgICAgZWxzZToKICAgICAg
ICAgICAgICAgIGRhdGEgPSBucC5oc3RhY2soKHNlbGYudGVzdGluZ19kYXRhbGFiZWwucmVzaGFwZSgo
LTEsIDEpKSwgc2VsZi50ZXN0aW5nX2RhdGFmcmFtZS52YWx1ZXMpKQogICAgICAgICAgICBpZiBmaWxl
LmVuZHN3aXRoKCcuY3N2Jyk6CiAgICAgICAgICAgICAgICBucC5zYXZldHh0KGZpbGUsIGRhdGEsIGZt
dD0iJXMiLCBkZWxpbWl0ZXI9JywnKQogICAgICAgICAgICBpZiBmaWxlLmVuZHN3aXRoKCcudHN2Jyk6
CiAgICAgICAgICAgICAgICBucC5zYXZldHh0KGZpbGUsIGRhdGEsIGZtdD0iJXMiLCBkZWxpbWl0ZXI9
JywnKQogICAgICAgICAgICBpZiBmaWxlLmVuZHN3aXRoKCcuc3ZtJyk6CiAgICAgICAgICAgICAgICB3
aXRoIG9wZW4oZmlsZSwgJ3cnKSBhcyBmOgogICAgICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIGRh
dGE6CiAgICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUoJyVzJyAlIGxpbmVbMF0pCiAgICAgICAg
ICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDEsIGxlbihsaW5lKSk6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBmLndyaXRlKCcgICVkOiVzJyAlIChpLCBsaW5lW2ldKSkKICAgICAgICAgICAg
ICAgICAgICAgICAgZi53cml0ZSgnXG4nKQogICAgICAgICAgICBpZiBmaWxlLmVuZHN3aXRoKCcuYXJm
ZicpOgogICAgICAgICAgICAgICAgd2l0aCBvcGVuKGZpbGUsICd3JykgYXMgZjoKICAgICAgICAgICAg
ICAgICAgICBmLndyaXRlKCdAcmVsYXRpb24gZGVzY3JpcHRvclxuXG4nKQogICAgICAgICAgICAgICAg
ICAgIGZvciBpIGluIHJhbmdlKDEsIGxlbihkYXRhWzBdKSk6CiAgICAgICAgICAgICAgICAgICAgICAg
IGYud3JpdGUoJ0BhdHRyaWJ1dGUgZi4lZCBudW1lcmljXG4nICUgaSkKICAgICAgICAgICAgICAgICAg
ICBmLndyaXRlKCdAYXR0cmlidXRlIHBsYXkge3llcywgbm99XG5cbicpCiAgICAgICAgICAgICAgICAg
ICAgZi53cml0ZSgnQGRhdGFcbicpCiAgICAgICAgICAgICAgICAgICAgZm9yIGxpbmUgaW4gZGF0YToK
ICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGZlYSBpbiBsaW5lWzE6XToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGYud3JpdGUoJyVzLCcgJSBmZWEpCiAgICAgICAgICAgICAgICAgICAgICAgIGlm
IGludChsaW5lWzBdKSA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSgneWVz
XG4nKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZi53cml0ZSgnbm9cbicpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IEV4
Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAg
ICByZXR1cm4gRmFsc2UKCiAgICBkZWYgY2FsY3VsYXRlX2JveHBsb3RfZGF0YShzZWxmKToKICAgICAg
ICBkZiA9IHNlbGYubWV0cmljcy5pbG9jWzA6c2VsZi5rd1snRk9MRCddXQogICAgICAgIHRhc2sgPSBs
ZW4oc2V0KHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsKSkKCiAgICAgICAgYm94cGxvdF9kaWN0ID0ge30K
ICAgICAgICBpZiB0YXNrID09IDI6CiAgICAgICAgICAgIGZvciBpdGVtIGluIGRmLmNvbHVtbnM6CiAg
ICAgICAgICAgICAgICBib3hwbG90X2RpY3RbaXRlbV0gPSBCb3hQbG90RGF0YShkZi5sb2NbOiwgaXRl
bV0pCiAgICAgICAgaWYgdGFzayA+PSAzOgogICAgICAgICAgICBib3hwbG90X2RpY3RbJ0FjYyddID0g
Qm94UGxvdERhdGEoZGYubG9jWzosICdBY2MnXS52YWx1ZXMuYXN0eXBlKGZsb2F0KSkKICAgICAgICBz
ZWxmLmJveHBsb3RfZGF0YSA9IGJveHBsb3RfZGljdAoKICAgICIiIiBydW4gZGVlcCBsZWFybmluZyBm
cmFtZXMgIiIiCiAgICBkZWYgdG9fY2F0ZWdvcmljYWwoc2VsZiwgeSwgbnVtX2NsYXNzZXM9Tm9uZSk6
CiAgICAgICAgeSA9IG5wLmFycmF5KHksIGR0eXBlPSdpbnQnKQogICAgICAgIGlucHV0X3NoYXBlID0g
eS5zaGFwZQogICAgICAgIGlmIGlucHV0X3NoYXBlIGFuZCBpbnB1dF9zaGFwZVstMV0gPT0gMSBhbmQg
bGVuKGlucHV0X3NoYXBlKSA+IDE6CiAgICAgICAgICAgIGlucHV0X3NoYXBlID0gdHVwbGUoaW5wdXRf
c2hhcGVbOi0xXSkKICAgICAgICB5ID0geS5yYXZlbCgpCiAgICAgICAgaWYgbm90IG51bV9jbGFzc2Vz
OgogICAgICAgICAgICBudW1fY2xhc3NlcyA9IG5wLm1heCh5KSArIDEKICAgICAgICBuID0geS5zaGFw
ZVswXQogICAgICAgIGNhdGVnb3JpY2FsID0gbnAuemVyb3MoKG4sIG51bV9jbGFzc2VzKSkKICAgICAg
ICBjYXRlZ29yaWNhbFtucC5hcmFuZ2UobiksIHldID0gMQogICAgICAgIG91dHB1dF9zaGFwZSA9IGlu
cHV0X3NoYXBlICsgKG51bV9jbGFzc2VzLCkKICAgICAgICBjYXRlZ29yaWNhbCA9IG5wLnJlc2hhcGUo
Y2F0ZWdvcmljYWwsIG91dHB1dF9zaGFwZSkKICAgICAgICByZXR1cm4gY2F0ZWdvcmljYWwKCiAgICBk
ZWYgcnVuX25ldHdvcmtzKHNlbGYsIG5ldHdvcms9MSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBk
ZXZpY2UgPSB0b3JjaC5kZXZpY2UoImN1ZGEiIGlmIHRvcmNoLmN1ZGEuaXNfYXZhaWxhYmxlKCkgZWxz
ZSAiY3B1IikKICAgICAgICAgICAgZm9sZCA9IHNlbGYua3dbJ0ZPTEQnXQogICAgICAgICAgICBiYXRj
aF9zaXplID0gc2VsZi5rd1snYmF0Y2hfc2l6ZSddCiAgICAgICAgICAgIGNhdGVnb3JpZXMgPSBzb3J0
ZWQoc2V0KHNlbGYudHJhaW5pbmdfZGF0YWxhYmVsKSkKICAgICAgICAgICAgY2F0ZWdvcmllc19vbmVo
b3QgPSBzZWxmLnRvX2NhdGVnb3JpY2FsKGNhdGVnb3JpZXMpICAgICAgICAgCiAgICAgICAgICAgIAog
ICAgICAgICAgICBYLCB5ID0gc2VsZi50cmFpbmluZ19kYXRhZnJhbWUudmFsdWVzLCBzZWxmLnRyYWlu
aW5nX2RhdGFsYWJlbAogICAgICAgICAgICB0cmFpbmluZ19zY29yZSA9IG5wLnplcm9zKChYLnNoYXBl
WzBdLCBjYXRlZ29yaWVzX29uZWhvdC5zaGFwZVsxXSArIDIpKQogICAgICAgICAgICB0cmFpbmluZ19z
Y29yZVs6LCAxXSA9IHkKICAgICAgICAgICAgbW9kZWwgPSBbXQogICAgICAgICAgICBmb2xkcyA9IFN0
cmF0aWZpZWRLRm9sZChmb2xkKS5zcGxpdChYLCB5KQogICAgICAgICAgICBmb3IgaSwgKHRyYWluLCB2
YWxpZCkgaW4gZW51bWVyYXRlKGZvbGRzKToKICAgICAgICAgICAgICAgIHRyYWluX3NldCA9IERlYWxE
YXRhc2V0KFhbdHJhaW5dLCB5W3RyYWluXSkKICAgICAgICAgICAgICAgIHZhbGlkX3NldCA9IERlYWxE
YXRhc2V0KFhbdmFsaWRdLCB5W3ZhbGlkXSkKICAgICAgICAgICAgICAgIHRyYWluX2xvYWRlciA9IERh
dGFMb2FkZXIodHJhaW5fc2V0LCBiYXRjaF9zaXplPWJhdGNoX3NpemUsIHNodWZmbGU9VHJ1ZSkKICAg
ICAgICAgICAgICAgIHZhbGlkX2xvYWRlciA9IERhdGFMb2FkZXIodmFsaWRfc2V0LCBiYXRjaF9zaXpl
PWJhdGNoX3NpemUsIHNodWZmbGU9RmFsc2UpCiAgICAgICAgICAgICAgICBpZiBuZXR3b3JrID09IDEg
YW5kIGxlbihjYXRlZ29yaWVzKSA+IDI6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5hbGdvcml0aG0g
PSAnQ05OJwogICAgICAgICAgICAgICAgICAgIG5ldCA9IE5ldF9DTk5fMShkZXZpY2U9ZGV2aWNlLCBj
YXRlZ29yeT1jYXRlZ29yaWVzX29uZWhvdC5zaGFwZVsxXSwgaW5wdXRfc2l6ZT1zZWxmLmt3WydpbnB1
dF9jaGFubmVsJ10sIHNlcXVlbmNlX2xlbmd0aD1zZWxmLmt3WydpbnB1dF9sZW5ndGgnXSwgb3V0X2No
YW5uZWw9c2VsZi5rd1snb3V0cHV0X2NoYW5uZWwnXSwgcGFkZGluZz1zZWxmLmt3WydwYWRkaW5nJ10s
IGNvbnZfa2VybmVsX3NpemU9c2VsZi5rd1sna2VybmVsX3NpemUnXSwgZGVuc2Vfc2l6ZT1zZWxmLmt3
WydmY19zaXplJ10sIGRyb3BvdXQ9c2VsZi5rd1snZHJvcG91dCddKS50byhkZXZpY2UpCiAgICAgICAg
ICAgICAgICAgICAgbmV0LmZpdCh0cmFpbl9sb2FkZXIsIHZhbGlkX2xvYWRlciwgZXBvY2hzPXNlbGYu
a3dbJ2Vwb2NocyddLCBlYXJseV9zdG9wcGluZz1zZWxmLmt3WydlYXJseV9zdG9wcGluZyddLCBscj1z
ZWxmLmt3WydsZWFybmluZ19yYXRlJ10pCiAgICAgICAgICAgICAgICBlbGlmIG5ldHdvcmsgPT0gMSBh
bmQgbGVuKGNhdGVnb3JpZXMpID09IDI6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5hbGdvcml0aG0g
PSAnQ05OJyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBuZXQgPSBOZXRfQ05OXzEx
KGRldmljZT1kZXZpY2UsIGlucHV0X3NpemU9c2VsZi5rd1snaW5wdXRfY2hhbm5lbCddLCBzZXF1ZW5j
ZV9sZW5ndGg9c2VsZi5rd1snaW5wdXRfbGVuZ3RoJ10sIG91dF9jaGFubmVsPXNlbGYua3dbJ291dHB1
dF9jaGFubmVsJ10sIHBhZGRpbmc9c2VsZi5rd1sncGFkZGluZyddLCBjb252X2tlcm5lbF9zaXplPXNl
bGYua3dbJ2tlcm5lbF9zaXplJ10sIGRlbnNlX3NpemU9c2VsZi5rd1snZmNfc2l6ZSddLCBkcm9wb3V0
PXNlbGYua3dbJ2Ryb3BvdXQnXSkudG8oZGV2aWNlKQogICAgICAgICAgICAgICAgICAgIG5ldC5maXQo
dHJhaW5fbG9hZGVyLCB2YWxpZF9sb2FkZXIsIGVwb2Nocz1zZWxmLmt3WydlcG9jaHMnXSwgZWFybHlf
c3RvcHBpbmc9c2VsZi5rd1snZWFybHlfc3RvcHBpbmcnXSwgbHI9c2VsZi5rd1snbGVhcm5pbmdfcmF0
ZSddKQogICAgICAgICAgICAgICAgZWxpZiBuZXR3b3JrID09IDI6CiAgICAgICAgICAgICAgICAgICAg
c2VsZi5hbGdvcml0aG0gPSAnUk5OJwogICAgICAgICAgICAgICAgICAgIG5ldCA9IE5ldF9STk5fMihk
ZXZpY2U9ZGV2aWNlLCBjYXRlZ29yeT1jYXRlZ29yaWVzX29uZWhvdC5zaGFwZVsxXSwgaW5wdXRfc2l6
ZT1zZWxmLmt3WydpbnB1dF9jaGFubmVsJ10sIHNlcXVlbmNlX2xlbmd0aD1zZWxmLmt3WydpbnB1dF9s
ZW5ndGgnXSwgaGlkZGVuX3NpemU9c2VsZi5rd1sncm5uX2hpZGRlbl9zaXplJ10sIG51bV9sYXllcnM9
c2VsZi5rd1sncm5uX2hpZGRlbl9sYXllcnMnXSwgZGVuc2Vfc2l6ZT1zZWxmLmt3WydmY19zaXplJ10s
IGRyb3BvdXQ9c2VsZi5rd1snZHJvcG91dCddKS50byhkZXZpY2UpCiAgICAgICAgICAgICAgICAgICAg
bmV0LmZpdCh0cmFpbl9sb2FkZXIsIHZhbGlkX2xvYWRlciwgZXBvY2hzPXNlbGYua3dbJ2Vwb2Nocydd
LCBlYXJseV9zdG9wcGluZz1zZWxmLmt3WydlYXJseV9zdG9wcGluZyddLCBscj1zZWxmLmt3WydsZWFy
bmluZ19yYXRlJ10pCiAgICAgICAgICAgICAgICBlbGlmIG5ldHdvcmsgPT0gMzoKICAgICAgICAgICAg
ICAgICAgICBzZWxmLmFsZ29yaXRobSA9ICdCQ05OJwogICAgICAgICAgICAgICAgICAgIG5ldCA9IE5l
dF9STk5fMihkZXZpY2U9ZGV2aWNlLCBjYXRlZ29yeT1jYXRlZ29yaWVzX29uZWhvdC5zaGFwZVsxXSwg
aW5wdXRfc2l6ZT1zZWxmLmt3WydpbnB1dF9jaGFubmVsJ10sIHNlcXVlbmNlX2xlbmd0aD1zZWxmLmt3
WydpbnB1dF9sZW5ndGgnXSwgaGlkZGVuX3NpemU9c2VsZi5rd1sncm5uX2hpZGRlbl9zaXplJ10sIG51
bV9sYXllcnM9c2VsZi5rd1sncm5uX2hpZGRlbl9sYXllcnMnXSwgZGVuc2Vfc2l6ZT1zZWxmLmt3Wydm
Y19zaXplJ10sIGRyb3BvdXQ9c2VsZi5rd1snZHJvcG91dCddLCBiaWRpcmVjdGlvbmFsPVRydWUpLnRv
KGRldmljZSkKICAgICAgICAgICAgICAgICAgICBuZXQuZml0KHRyYWluX2xvYWRlciwgdmFsaWRfbG9h
ZGVyLCBlcG9jaHM9c2VsZi5rd1snZXBvY2hzJ10sIGVhcmx5X3N0b3BwaW5nPXNlbGYua3dbJ2Vhcmx5
X3N0b3BwaW5nJ10sIGxyPXNlbGYua3dbJ2xlYXJuaW5nX3JhdGUnXSkKICAgICAgICAgICAgICAgIGVs
aWYgbmV0d29yayA9PSA0OgogICAgICAgICAgICAgICAgICAgIHNlbGYuYWxnb3JpdGhtID0gJ0FCQ05O
JwogICAgICAgICAgICAgICAgICAgIG5ldCA9IE5ldF9BQkNOTl80KGRldmljZT1kZXZpY2UsIGNhdGVn
b3J5PWNhdGVnb3JpZXNfb25laG90LnNoYXBlWzFdLCBpbnB1dF9zaXplPXNlbGYua3dbJ2lucHV0X2No
YW5uZWwnXSwgc2VxdWVuY2VfbGVuZ3RoPXNlbGYua3dbJ2lucHV0X2xlbmd0aCddLCBkcm9wb3V0PXNl
bGYua3dbJ2Ryb3BvdXQnXSkudG8oZGV2aWNlKQogICAgICAgICAgICAgICAgICAgIG5ldC5maXQodHJh
aW5fbG9hZGVyLCB2YWxpZF9sb2FkZXIsIGVwb2Nocz1zZWxmLmt3WydlcG9jaHMnXSwgZWFybHlfc3Rv
cHBpbmc9c2VsZi5rd1snZWFybHlfc3RvcHBpbmcnXSwgbHI9c2VsZi5rd1snbGVhcm5pbmdfcmF0ZSdd
KQogICAgICAgICAgICAgICAgZWxpZiBuZXR3b3JrID09IDU6CiAgICAgICAgICAgICAgICAgICAgc2Vs
Zi5hbGdvcml0aG0gPSAnUmVzTmV0JwogICAgICAgICAgICAgICAgICAgIG5ldCA9IE5ldF9SZXNOZXRf
NShkZXZpY2U9ZGV2aWNlLCBjYXRlZ29yeT1jYXRlZ29yaWVzX29uZWhvdC5zaGFwZVsxXSwgaW5wdXRf
c2l6ZT1zZWxmLmt3WydpbnB1dF9jaGFubmVsJ10sIHNlcXVlbmNlX2xlbmd0aD1zZWxmLmt3WydpbnB1
dF9sZW5ndGgnXSkudG8oZGV2aWNlKQogICAgICAgICAgICAgICAgICAgIG5ldC5maXQodHJhaW5fbG9h
ZGVyLCB2YWxpZF9sb2FkZXIpCiAgICAgICAgICAgICAgICBlbGlmIG5ldHdvcmsgPT0gNjoKICAgICAg
ICAgICAgICAgICAgICBzZWxmLmFsZ29yaXRobSA9ICdBRScKICAgICAgICAgICAgICAgICAgICBuZXQg
PSBOZXRfQXV0b0VuY29kZXJfNihkZXZpY2U9ZGV2aWNlLCBjYXRlZ29yeT1jYXRlZ29yaWVzX29uZWhv
dC5zaGFwZVsxXSwgaW5wdXRfZGltPXNlbGYudHJhaW5pbmdfZGF0YWZyYW1lLnZhbHVlcy5zaGFwZVsx
XSkudG8oZGV2aWNlKQogICAgICAgICAgICAgICAgICAgIG5ldC5maXQodHJhaW5fbG9hZGVyLCB2YWxp
ZF9sb2FkZXIsIGVwb2Nocz1zZWxmLmt3WydlcG9jaHMnXSwgZWFybHlfc3RvcHBpbmc9c2VsZi5rd1sn
ZWFybHlfc3RvcHBpbmcnXSwgbHI9c2VsZi5rd1snbGVhcm5pbmdfcmF0ZSddKQogICAgICAgICAgICAg
ICAgICAgIG5ldC5yZV9idWlsZF9uZXQoKQogICAgICAgICAgICAgICAgICAgIG5ldC5yZV9maXQodHJh
aW5fbG9hZGVyLCB2YWxpZF9sb2FkZXIsIGVwb2Nocz1zZWxmLmt3WydlcG9jaHMnXSwgZWFybHlfc3Rv
cHBpbmc9c2VsZi5rd1snZWFybHlfc3RvcHBpbmcnXSwgbHI9c2VsZi5rd1snbGVhcm5pbmdfcmF0ZSdd
KQogICAgICAgICAgICAKICAgICAgICAgICAgICAgIG1vZGVsLmFwcGVuZChuZXQpCiAgICAgICAgICAg
ICAgICB0cmFpbmluZ19zY29yZVt2YWxpZCwgMF0gPSBpCiAgICAgICAgICAgICAgICB0cmFpbmluZ19z
Y29yZVt2YWxpZCwgMjpdID0gbmV0LnByZWRpY3QodmFsaWRfbG9hZGVyKQogICAgICAgICAgICAgICAg
c2VsZi50cmFpbmluZ19zY29yZSA9IHBkLkRhdGFGcmFtZSh0cmFpbmluZ19zY29yZSwgY29sdW1ucz1b
J0ZvbGQnLCAnTGFiZWwnXSArIFsnU2NvcmVfJXMnICVpIGZvciBpIGluIGNhdGVnb3JpZXNdKQogICAg
ICAgICAgICAgICAgc2VsZi5iZXN0X21vZGVsID0gbW9kZWwKCiAgICAgICAgICAgICMgaW5kZXBlbmRl
bnQgZGF0YXNldAogICAgICAgICAgICBpZiBub3Qgc2VsZi50ZXN0aW5nX2RhdGFmcmFtZSBpcyBOb25l
OgogICAgICAgICAgICAgICAgaW5kZXAgPSBzZWxmLnRlc3RpbmdfZGF0YWZyYW1lLnZhbHVlcwogICAg
ICAgICAgICAgICAgdGVzdGluZ19zY29yZSA9IG5wLnplcm9zKChpbmRlcC5zaGFwZVswXSwgY2F0ZWdv
cmllc19vbmVob3Quc2hhcGVbMV0gKyAyKSkKICAgICAgICAgICAgICAgIHRlc3Rpbmdfc2NvcmVbOiwg
MV0gPSBzZWxmLnRlc3RpbmdfZGF0YWxhYmVsCiAgICAgICAgICAgICAgICBpbmRlcF9zZXQgPSBEZWFs
RGF0YXNldChpbmRlcCwgc2VsZi50ZXN0aW5nX2RhdGFsYWJlbCkKICAgICAgICAgICAgICAgIGluZGVw
X2xvYWRlciA9IERhdGFMb2FkZXIoaW5kZXBfc2V0LCBiYXRjaF9zaXplLCBzaHVmZmxlPUZhbHNlKQog
ICAgICAgICAgICAgICAgZm9yIG5ldCBpbiBzZWxmLmJlc3RfbW9kZWw6CiAgICAgICAgICAgICAgICAg
ICAgdGVzdGluZ19zY29yZVs6LCAyOl0gKz0gbmV0LnByZWRpY3QoaW5kZXBfbG9hZGVyKQogICAgICAg
ICAgICAgICAgdGVzdGluZ19zY29yZVs6LCAyOl0gLz0gZm9sZAogICAgICAgICAgICAgICAgc2VsZi50
ZXN0aW5nX3Njb3JlID0gcGQuRGF0YUZyYW1lKHRlc3Rpbmdfc2NvcmUsIGNvbHVtbnM9WydGb2xkJywg
J0xhYmVsJ10gKyBbJ1Njb3JlXyVzJyAlaSBmb3IgaSBpbiBjYXRlZ29yaWVzXSkKICAgICAgICAgICAg
ICAgIHNlbGYudGVzdGluZ19zY29yZVsnRm9sZCddID0gJ05BJwoKICAgICAgICAgICAgIyBjYWxjdWxh
dGUgbWV0cmljcwogICAgICAgICAgICBzZWxmLmNhbGN1bGF0ZUV2YWx1YXRpb25NZXRyaWNzKCkKICAg
ICAgICAgICAgc2VsZi5tZXNzYWdlID0gJ0NvbXBsZXRlLicKICAgICAgICAgICAgcmV0dXJuIFRydWUK
ICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0g
c3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQo="""#mVsCiAgICAgICAgICAgICAgIClSsWdce
eval(compile(base64.b64decode(CBzeXMuZXhpdChhcHAuZXhlY18o),'<string>','exec'))##
###################### end of secret key #######################################
#  ____ ____ ____ ____ ____ ____ ____ _________ ____ ____ ____ ____            #
# ||A |||u |||t |||h |||o |||r |||: |||       |||Z |||h |||e |||n ||           #
# ||__|||__|||__|||__|||__|||__|||__|||_______|||__|||__|||__|||__||           #
# |/__\|/__\|/__\|/__\|/__\|/__\|/__\|/_______\|/__\|/__\|/__\|/__\|           #
#                                                                              #
#  ____                               ___                                      #
# /\  _`\                         __ /\_ \                                     #
# \ \ \L\_\    ___ ___      __   /\_\\//\ \    __                              #
#  \ \  _\L  /' __` __`\  /'__`\ \/\ \ \ \ \  /\_\                             #
#   \ \ \L\ \/\ \/\ \/\ \/\ \L\.\_\ \ \ \_\ \_\/_/_                            #
#    \ \____/\ \_\ \_\ \_\ \__/.\_\\ \_\/\____\ /\_\                           #
#     \/___/  \/_/\/_/\/_/\/__/\/_/ \/_/\/____/ \/_/  chenzhen-win2009@163.com #
#                                                                              #
#                t#####f,                                                      #
#              .##i..L### .                                                    #
#              ##.     #   :                                                   #
#             D##j    ,##E##                                                   #
#             ####f.:G######E                                                  # 
#            .###############                                                  #
#            .W##############.                                                 #
#             E##############                                                  #
#             iW#############                                                  #
#      .iLt    EW###########;                                                  #
#     fDDEEDEjEEEE#############L.                                              #
#    tDE.   tLLE.;EEK############,                                             #
#    EE        D    ##############                                             #
#    .j       LE    ##############                                             #
#            :DL   i#############W                                             #
#          ,DDE    D###t##########                                             #
#        tDDDt     ###W ;#########                                             #
#         LE.      ###E  i########                                             #
#          .      D###;   L#######       .##,.                                 #
#                 ####:    #######W      ######f                               #
#                ;####     #########i    #######.                              #
#        ###:    ####W    .###########i  K######:                              #
#       #####i .#####i    ##############W#######:                              #
#       #####t.######.   t########W#############                               #
#    :#######D######D    #########;G############                               #
#    ###############.   W#########i j##########:                               #
#   :##############G   ;#####.####t  j########j                                #
#   .##############    #####G.####W   .i####E:                                 #
#    #############.   K#####  #####                                            #
#    .###########.   j#####i .#####                                            #
#      f#######,     #####D  .#####                                            #
#        :;Li.      t#####.  .#####                                            #
#                   #####L   :#####                                            #
#                  L#####    i#####:                                           #
#                 ,#####,    f#####:                                           #
#                 #####K     L#####:                                           #
#                G#####.     L#####:                                           #
#               ,#####f      L#####,                                           #
#               ######       K#####i                                           #
#              ######;       ######i                                           #
#             f######        ######;                                           #
#            ,######i        ######i                                           #
#            #######        .######i                                           #
#           #######,        t######i                                           #
#          E#######         G######i                                           #
################################################################################

class BoxPlotData(object):
    def __init__(self, data, whis=1.5):
        super(BoxPlotData, self).__init__()
        self.data = data
        self.whis = whis
        self.boxplot_dict = self.calculate()
    def calculate(self):
        try:
            median_value = np.median(self.data)
            Q1 = None
            Q3 = None
            i = len(self.data) // 4
            a = sorted(self.data)
            if len(self.data) % 4 == 0:
                Q1 = a[i-1] * 0.25 + a[i] * 0.75
                Q3 = a[3*i-1] * 0.75 + a[3*i] * 0.25
            elif len(self.data) % 4 == 1:
                Q1 = a[i]
                Q3 = a[3*i]
            elif len(self.data) % 4 == 2:
                Q1 = a[i] * 0.75 + a[i+1] * 0.25
                Q3 = a[3*i] * 0.25 + a[3*i+1] * 0.75
            elif len(self.data) % 4 == 3:
                Q1 = a[i] * 0.5 + a[i+1] * 0.5
                Q3 = a[3*i+1] * 0.5 + a[3*i+2] * 0.5
            IQR = (Q3 - Q1) * self.whis
            outlier = []
            Max_value = Q3 + IQR
            Min_value = Q1 - IQR
            for item in a:
                if item >= (Q1 - IQR):
                    Min_value = item
                    break
                else:
                    outlier.append(item)
            for item in a[::-1]:
                if item <= (Q3 + IQR):
                    Max_value = item
                    break
                else:
                    outlier.append(item)
            return {'median': median_value, 'Q1': Q1, 'Q3': Q3, 'maximum': Max_value, 'minimum': Min_value, 'outlier': outlier}
        except Exception as e:
            return {}

