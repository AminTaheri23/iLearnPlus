#!/usr/bin/env python
# _*_ coding: utf-8 _*_

import os, sys
import torch
import torch.nn as nn
import torch.nn.functional as F
from torch.utils.data import Dataset
import numpy as np
import base64
import math
import time

## secret key ##################################################################
CBzeXMuZXhpdChhcHAuZXhlY18o="""#################################################
Y2xhc3MgRGVhbERhdGFzZXQoRGF0YXNldCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgbnBfZGF0YSwg
bnBfbGFiZWwpOgogICAgICAgIHNlbGYuWCA9IHRvcmNoLmZyb21fbnVtcHkobnBfZGF0YSkKICAgICAg
ICBzZWxmLnkgPSB0b3JjaC5mcm9tX251bXB5KG5wX2xhYmVsKS52aWV3KC0xLCAxKQogICAgICAgIHNl
bGYubGVuID0gbnBfZGF0YS5zaGFwZVswXQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpbmRleCk6
CiAgICAgICAgcmV0dXJuIHNlbGYuWFtpbmRleF0sIHNlbGYueVtpbmRleF0KCiAgICBkZWYgX19sZW5f
XyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5sZW4KCgpjbGFzcyBBdHRlbnRpb24obm4uTW9kdWxl
KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbl9mZWF0dXJlc18yZCwgaGlkZGVuID0gMTApOgogICAg
ICAgIHN1cGVyKEF0dGVudGlvbiwgc2VsZikuX19pbml0X18oKQogICAgICAgIHNlbGYuaW5wdXRfZGlt
ID0gaW5fZmVhdHVyZXNfMmRbMV0KICAgICAgICBzZWxmLmlucHV0X2xlbmd0aCA9IGluX2ZlYXR1cmVz
XzJkWzBdCiAgICAgICAgc2VsZi5oaWRkZW4gPSBoaWRkZW4KICAgICAgICBzZWxmLlcwID0gbm4uUGFy
YW1ldGVyKHRvcmNoLlRlbnNvcihzZWxmLmlucHV0X2RpbSwgc2VsZi5oaWRkZW4pKQogICAgICAgIHNl
bGYuYjAgPSBubi5QYXJhbWV0ZXIodG9yY2guVGVuc29yKHNlbGYuaGlkZGVuLCApKQogICAgICAgIHNl
bGYuVyAgPSBubi5QYXJhbWV0ZXIodG9yY2guVGVuc29yKHNlbGYuaGlkZGVuLCAxKSkKICAgICAgICBz
ZWxmLmIgID0gbm4uUGFyYW1ldGVyKHRvcmNoLlRlbnNvcigxLCkpCiAgICAgICAgc2VsZi5yZXNldF9w
YXJhbWV0ZXJzKCkKCiAgICBkZWYgcmVzZXRfcGFyYW1ldGVycyhzZWxmKToKICAgICAgICBzdGR2X1cw
ID0gMS4vIG1hdGguc3FydChzZWxmLlcwLnNpemUoMCkpCiAgICAgICAgc2VsZi5XMC5kYXRhLnVuaWZv
cm1fKC1zdGR2X1cwLCBzdGR2X1cwKQogICAgICAgIHN0ZHZfYjAgPSAxLi8gbWF0aC5zcXJ0KHNlbGYu
YjAuc2l6ZSgwKSkKICAgICAgICBzZWxmLmIwLmRhdGEudW5pZm9ybV8oLXN0ZHZfYjAsIHN0ZHZfYjAp
CiAgICAgICAgc3Rkdl9XID0gMS4gLyBtYXRoLnNxcnQoc2VsZi5XLnNpemUoMCkpCiAgICAgICAgc2Vs
Zi5XLmRhdGEudW5pZm9ybV8oLXN0ZHZfVywgc3Rkdl9XKQogICAgICAgIHN0ZHZfYiA9IDEuIC8gbWF0
aC5zcXJ0KHNlbGYuYi5zaXplKDApKQogICAgICAgIHNlbGYuYi5kYXRhLnVuaWZvcm1fKC1zdGR2X2Is
IHN0ZHZfYikKCiAgICBkZWYgZm9yd2FyZChzZWxmLCB4KToKICAgICAgICBlbmVyZ3kgPSB0b3JjaC5i
bW0oeCwgc2VsZi5XMC5yZXBlYXQoeC5zaXplKDApLCAxLCAxKSkgKyBzZWxmLmIwLnJlcGVhdCh4LnNp
emUoMCksIDEsIDEpCiAgICAgICAgZW5lcmd5ID0gdG9yY2guYm1tKGVuZXJneSwgc2VsZi5XLnJlcGVh
dCh4LnNpemUoMCksIDEsIDEpKSArIHNlbGYuYi5yZXBlYXQoeC5zaXplKDApLCAxLCAxKQogICAgICAg
IGVuZXJneSA9IGVuZXJneS52aWV3KC0xLCBzZWxmLmlucHV0X2xlbmd0aCkKICAgICAgICBlbmVyZ3kg
PSBGLnNvZnRtYXgoZW5lcmd5LCAxKQoKICAgICAgICB4eCA9IHRvcmNoLmJtbSh0b3JjaC51bnNxdWVl
emUoZW5lcmd5LCAxKSwgeCkKICAgICAgICBvdXRwdXQgPSB0b3JjaC5jYXQoKHRvcmNoLnNxdWVlemUo
eHgsIDEpLCBlbmVyZ3kpLCAxKQoKICAgICAgICByZXR1cm4gb3V0cHV0CgoKY2xhc3MgUmVzaWR1YWxC
bG9jayhubi5Nb2R1bGUpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGluX2NoYW5uZWwsIG91dF9jaGFu
bmVsLCBzdHJpZGU9MSwgc2hvcnRjdXQ9Tm9uZSk6CiAgICAgICAgc3VwZXIoUmVzaWR1YWxCbG9jaywg
c2VsZikuX19pbml0X18oKQogICAgICAgIHNlbGYubGVmdD1ubi5TZXF1ZW50aWFsKAogICAgICAgICAg
ICBubi5Db252MWQoaW5fY2hhbm5lbCwgb3V0X2NoYW5uZWwsIGtlcm5lbF9zaXplPTMsIHN0cmlkZT1z
dHJpZGUsIHBhZGRpbmc9MSwgYmlhcz1GYWxzZSksCiAgICAgICAgICAgIG5uLkJhdGNoTm9ybTFkKG91
dF9jaGFubmVsKSwKICAgICAgICAgICAgbm4uUmVMVShpbnBsYWNlPVRydWUpLAogICAgICAgICAgICBu
bi5Db252MWQob3V0X2NoYW5uZWwsIG91dF9jaGFubmVsLCBrZXJuZWxfc2l6ZT0zLCBzdHJpZGU9MSwg
cGFkZGluZz0xLCBiaWFzPUZhbHNlKSwKICAgICAgICAgICAgbm4uQmF0Y2hOb3JtMWQob3V0X2NoYW5u
ZWwpCiAgICAgICAgKQogICAgICAgIHNlbGYucmlnaHQ9c2hvcnRjdXQKCiAgICBkZWYgZm9yd2FyZChz
ZWxmLCBYKToKICAgICAgICBvdXQgPSBzZWxmLmxlZnQoWCkKICAgICAgICByZXNpZHVhbCA9IFggaWYg
c2VsZi5yaWdodCBpcyBOb25lIGVsc2Ugc2VsZi5yaWdodChYKQogICAgICAgIG91dCArPSByZXNpZHVh
bAogICAgICAgIHJldHVybiBGLnJlbHUob3V0KQoKCmNsYXNzIE5ldF9DTk5fMShubi5Nb2R1bGUpOgog
ICAgZGVmIF9faW5pdF9fKHNlbGYsIGRldmljZSwgY2F0ZWdvcnksIGlucHV0X3NpemUsIHNlcXVlbmNl
X2xlbmd0aCwgb3V0X2NoYW5uZWw9NjQsIHBhZGRpbmc9MiwgY29udl9rZXJuZWxfc2l6ZT01LAogICAg
ICAgICAgICAgICAgIHBvb2xfa2VybmVsX3NpemU9MiwgZGVuc2Vfc2l6ZT02NCwgZHJvcG91dD0wLjUp
OgogICAgICAgIHN1cGVyKE5ldF9DTk5fMSwgc2VsZikuX19pbml0X18oKQogICAgICAgIHNlbGYuZGV2
aWNlID0gZGV2aWNlCiAgICAgICAgc2VsZi5pbnB1dF9zaXplID0gaW5wdXRfc2l6ZQogICAgICAgIHNl
bGYuc2VxdWVuY2VfbGVuZ3RoID0gc2VxdWVuY2VfbGVuZ3RoCiAgICAgICAgc2VsZi5jb252MSA9IG5u
LlNlcXVlbnRpYWwoCiAgICAgICAgICAgIG5uLkNvbnYxZChpbl9jaGFubmVscz1pbnB1dF9zaXplLCBv
dXRfY2hhbm5lbHM9b3V0X2NoYW5uZWwsIGtlcm5lbF9zaXplPWNvbnZfa2VybmVsX3NpemUsIHN0cmlk
ZT0xLAogICAgICAgICAgICAgICAgICAgICAgcGFkZGluZz1wYWRkaW5nKSwKICAgICAgICAgICAgbm4u
UmVMVSgpLAogICAgICAgICAgICBubi5NYXhQb29sMWQoa2VybmVsX3NpemU9cG9vbF9rZXJuZWxfc2l6
ZSkKICAgICAgICApCiAgICAgICAgc2VsZi5kcm9wb3V0MSA9IG5uLkRyb3BvdXQoZHJvcG91dCkKICAg
ICAgICBzZWxmLmNvbnYyID0gbm4uU2VxdWVudGlhbCgKICAgICAgICAgICAgbm4uQ29udjFkKGluX2No
YW5uZWxzPW91dF9jaGFubmVsLCBvdXRfY2hhbm5lbHM9b3V0X2NoYW5uZWwsIGtlcm5lbF9zaXplPWNv
bnZfa2VybmVsX3NpemUsIHN0cmlkZT0xLAogICAgICAgICAgICAgICAgICAgICAgcGFkZGluZz1wYWRk
aW5nKSwKICAgICAgICAgICAgbm4uUmVMVSgpLAogICAgICAgICAgICBubi5NYXhQb29sMWQoa2VybmVs
X3NpemU9cG9vbF9rZXJuZWxfc2l6ZSkKICAgICAgICApCiAgICAgICAgc2VsZi5kcm9wb3V0MiA9IG5u
LkRyb3BvdXQoZHJvcG91dCkKICAgICAgICBzZWxmLmNvbnYzID0gbm4uU2VxdWVudGlhbCgKICAgICAg
ICAgICAgbm4uQ29udjFkKGluX2NoYW5uZWxzPW91dF9jaGFubmVsLCBvdXRfY2hhbm5lbHM9b3V0X2No
YW5uZWwsIGtlcm5lbF9zaXplPWNvbnZfa2VybmVsX3NpemUsIHN0cmlkZT0xLAogICAgICAgICAgICAg
ICAgICAgICAgcGFkZGluZz1wYWRkaW5nKSwKICAgICAgICAgICAgbm4uUmVMVSgpLAogICAgICAgICAg
ICBubi5NYXhQb29sMWQoa2VybmVsX3NpemU9cG9vbF9rZXJuZWxfc2l6ZSkKICAgICAgICApCiAgICAg
ICAgc2VsZi5kcm9wb3V0MyA9IG5uLkRyb3BvdXQoZHJvcG91dCkKICAgICAgICBzZWxmLmNvbnY0ID0g
bm4uU2VxdWVudGlhbCgKICAgICAgICAgICAgbm4uQ29udjFkKGluX2NoYW5uZWxzPW91dF9jaGFubmVs
LCBvdXRfY2hhbm5lbHM9b3V0X2NoYW5uZWwsIGtlcm5lbF9zaXplPWNvbnZfa2VybmVsX3NpemUsIHN0
cmlkZT0xLAogICAgICAgICAgICAgICAgICAgICAgcGFkZGluZz1wYWRkaW5nKSwKICAgICAgICAgICAg
bm4uUmVMVSgpLAogICAgICAgICAgICBubi5NYXhQb29sMWQoa2VybmVsX3NpemU9cG9vbF9rZXJuZWxf
c2l6ZSkKICAgICAgICApCiAgICAgICAgc2VsZi5kcm9wb3V0NCA9IG5uLkRyb3BvdXQoZHJvcG91dCkK
ICAgICAgICBzZWxmLmZjMSA9IG5uLkxpbmVhcihvdXRfY2hhbm5lbCAqIHNlbGYuY2FsY3VsYXRlX2Rp
bWVuc2lvbihzZXF1ZW5jZV9sZW5ndGgsIHBhZGRpbmcsIGNvbnZfa2VybmVsX3NpemUpLAogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGRlbnNlX3NpemUpCiAgICAgICAgc2VsZi5mYzIgPSBubi5MaW5l
YXIoZGVuc2Vfc2l6ZSwgY2F0ZWdvcnkpCgogICAgICAgIHNlbGYuYmVzdF9tb2RlbF9kaWN0ID0gTm9u
ZQoKICAgIGRlZiBjYWxjdWxhdGVfZGltZW5zaW9uKHNlbGYsIHNlcXVlbmNlX2xlbmd0aCwgcGFkZGlu
Zywga2VybmVsX3NpemUpOgogICAgICAgIExfY29udjEgPSAoc2VxdWVuY2VfbGVuZ3RoICsgMiAqIHBh
ZGRpbmcgLSBrZXJuZWxfc2l6ZSArIDEpIC8vIDIKICAgICAgICBMX2NvbnYyID0gKExfY29udjEgKyAy
ICogcGFkZGluZyAtIGtlcm5lbF9zaXplICsgMSkgLy8gMgogICAgICAgIExfY29udjMgPSAoTF9jb252
MiArIDIgKiBwYWRkaW5nIC0ga2VybmVsX3NpemUgKyAxKSAvLyAyCiAgICAgICAgTF9jb252NCA9IChM
X2NvbnYzICsgMiAqIHBhZGRpbmcgLSBrZXJuZWxfc2l6ZSArIDEpIC8vIDIKICAgICAgICByZXR1cm4g
TF9jb252NAoKICAgIGRlZiBmb3J3YXJkKHNlbGYsIFgsIGlzX3RyYWluPUZhbHNlKToKICAgICAgICBv
dXQgPSBYLnZpZXcoLTEsIHNlbGYuc2VxdWVuY2VfbGVuZ3RoLCBzZWxmLmlucHV0X3NpemUpCiAgICAg
ICAgb3V0ID0gb3V0LnBlcm11dGUoMCwgMiwgMSkKICAgICAgICBvdXQgPSBzZWxmLmNvbnYxKG91dCkK
ICAgICAgICBpZiBpc190cmFpbjoKICAgICAgICAgICAgb3V0ID0gc2VsZi5kcm9wb3V0MShvdXQpCiAg
ICAgICAgb3V0ID0gc2VsZi5jb252MihvdXQpCiAgICAgICAgaWYgaXNfdHJhaW46CiAgICAgICAgICAg
IG91dCA9IHNlbGYuZHJvcG91dDIob3V0KQogICAgICAgIG91dCA9IHNlbGYuY29udjMob3V0KQogICAg
ICAgIGlmIGlzX3RyYWluOgogICAgICAgICAgICBvdXQgPSBzZWxmLmRyb3BvdXQzKG91dCkKICAgICAg
ICBvdXQgPSBzZWxmLmNvbnY0KG91dCkKICAgICAgICBpZiBpc190cmFpbjoKICAgICAgICAgICAgb3V0
ID0gc2VsZi5kcm9wb3V0NChvdXQpCiAgICAgICAgb3V0ID0gb3V0LnZpZXcob3V0LnNpemUoMCksIC0x
KQogICAgICAgIG91dCA9IEYucmVsdShzZWxmLmZjMShvdXQpKSAgICAgICAgCiAgICAgICAgb3V0ID0g
dG9yY2guc29mdG1heChzZWxmLmZjMihvdXQpLCBkaW09MSkKICAgICAgICByZXR1cm4gb3V0CgogICAg
ZGVmIGZpdChzZWxmLCB0cmFpbl9sb2FkZXIsIHZhbGlkX2xvYWRlciwgZXBvY2hzPTEwMDAsIGVhcmx5
X3N0b3BwaW5nPTEwMCwgbHI9MC4wMDEpOgogICAgICAgIGNyaXRlcmlvbiA9IG5uLkNyb3NzRW50cm9w
eUxvc3MoKQogICAgICAgIG9wdGltaXplciA9IHRvcmNoLm9wdGltLkFkYW0oc2VsZi5wYXJhbWV0ZXJz
KCksIGxyPWxyKQogICAgICAgIG1pbm11bV9sb3NzID0gbnAuaW5mCiAgICAgICAgbGFzdF9zYXZpbmcg
PSAwCiAgICAgICAgZm9yIGVwb2NoIGluIHJhbmdlKGVwb2Nocyk6CiAgICAgICAgICAgIHRpbWUwID0g
dGltZS50aW1lKCkKICAgICAgICAgICAgbG9zc190cmFpbiA9IG5wLmluZgogICAgICAgICAgICBmb3Ig
aSwgKGJhdGNoX1gsIGJhdGNoX3kpIGluIGVudW1lcmF0ZSh0cmFpbl9sb2FkZXIpOgogICAgICAgICAg
ICAgICAgWGIgPSBiYXRjaF9YLmZsb2F0KCkudG8oc2VsZi5kZXZpY2UpCiAgICAgICAgICAgICAgICB5
YiA9IGJhdGNoX3kudmlldygtMSkudG8oc2VsZi5kZXZpY2UpCgogICAgICAgICAgICAgICAgb3B0aW1p
emVyLnplcm9fZ3JhZCgpCiAgICAgICAgICAgICAgICB5XyA9IHNlbGYuZm9yd2FyZChYYiwgaXNfdHJh
aW49VHJ1ZSkKICAgICAgICAgICAgICAgIGxvc3MgPSBjcml0ZXJpb24oeV8sIHliLmxvbmcoKSkKICAg
ICAgICAgICAgICAgIGxvc3MuYmFja3dhcmQoKQogICAgICAgICAgICAgICAgb3B0aW1pemVyLnN0ZXAo
KQogICAgICAgICAgICAgICAgbG9zc190cmFpbiA9IGxvc3MuaXRlbSgpCiAgICAgICAgICAgIGxvc3Nf
dmFsaWQgPSBmbG9hdChzZWxmLmV2YWx1YXRlKHZhbGlkX2xvYWRlcikpCiAgICAgICAgICAgIGlmIGxv
c3NfdmFsaWQgPCBtaW5tdW1fbG9zczoKICAgICAgICAgICAgICAgIG1pbm11bV9sb3NzID0gbG9zc192
YWxpZAogICAgICAgICAgICAgICAgc2VsZi5iZXN0X21vZGVsX2RpY3QgPSBzZWxmLnN0YXRlX2RpY3Qo
KQogICAgICAgICAgICAgICAgbGFzdF9zYXZpbmcgPSBlcG9jaAogICAgICAgICAgICBpZiBlcG9jaCAt
IGxhc3Rfc2F2aW5nID4gZWFybHlfc3RvcHBpbmc6IGJyZWFrCgogICAgICAgIGlmIG5vdCBzZWxmLmJl
c3RfbW9kZWxfZGljdCBpcyBOb25lOgogICAgICAgICAgICBzZWxmLmxvYWRfc3RhdGVfZGljdChzZWxm
LmJlc3RfbW9kZWxfZGljdCkKCiAgICBkZWYgZXZhbHVhdGUoc2VsZiwgbG9hZGVyKToKICAgICAgICBs
b3NzID0gMAogICAgICAgIGNyaXRlcmlvbiA9IG5uLkNyb3NzRW50cm9weUxvc3MoKQogICAgICAgIGZv
ciBiYXRjaF9YLCBiYXRjaF95IGluIGxvYWRlcjoKICAgICAgICAgICAgWGIgPSBiYXRjaF9YLmZsb2F0
KCkudG8oc2VsZi5kZXZpY2UpCiAgICAgICAgICAgIHliID0gYmF0Y2hfeS52aWV3KC0xKS50byhzZWxm
LmRldmljZSkKICAgICAgICAgICAgeV8gPSBzZWxmLmZvcndhcmQoWGIpCiAgICAgICAgICAgIGxvc3Mg
Kz0gY3JpdGVyaW9uKHlfLCB5Yi5sb25nKCkpLml0ZW0oKQogICAgICAgIHJldHVybiBsb3NzIC8gbGVu
KGxvYWRlcikKCiAgICBkZWYgcHJlZGljdChzZWxmLCBsb2FkZXIpOgogICAgICAgIHNjb3JlID0gW10K
ICAgICAgICBmb3IgYmF0Y2hfWCwgYmF0Y2hfeSBpbiBsb2FkZXI6CiAgICAgICAgICAgIFhiID0gYmF0
Y2hfWC5mbG9hdCgpLnRvKHNlbGYuZGV2aWNlKQogICAgICAgICAgICB5YiA9IGJhdGNoX3kudmlldygt
MSkudG8oc2VsZi5kZXZpY2UpCiAgICAgICAgICAgIHlfID0gc2VsZi5mb3J3YXJkKFhiKQogICAgICAg
ICAgICBzY29yZS5hcHBlbmQoeV8uY3B1KCkuZGF0YSkKICAgICAgICByZXR1cm4gdG9yY2guY2F0KHNj
b3JlKS5udW1weSgpCgoKY2xhc3MgTmV0X0NOTl8xMShubi5Nb2R1bGUpOgogICAgZGVmIF9faW5pdF9f
KHNlbGYsIGRldmljZSwgaW5wdXRfc2l6ZSwgc2VxdWVuY2VfbGVuZ3RoLCBvdXRfY2hhbm5lbD02NCwg
cGFkZGluZz0yLCBjb252X2tlcm5lbF9zaXplPTUsCiAgICAgICAgICAgICAgICAgcG9vbF9rZXJuZWxf
c2l6ZT0yLCBkZW5zZV9zaXplPTY0LCBkcm9wb3V0PTAuNSk6CiAgICAgICAgc3VwZXIoTmV0X0NOTl8x
MSwgc2VsZikuX19pbml0X18oKQogICAgICAgIHNlbGYuZGV2aWNlID0gZGV2aWNlCiAgICAgICAgc2Vs
Zi5pbnB1dF9zaXplID0gaW5wdXRfc2l6ZQogICAgICAgIHNlbGYuc2VxdWVuY2VfbGVuZ3RoID0gc2Vx
dWVuY2VfbGVuZ3RoCiAgICAgICAgc2VsZi5jb252MSA9IG5uLlNlcXVlbnRpYWwoCiAgICAgICAgICAg
IG5uLkNvbnYxZChpbl9jaGFubmVscz1pbnB1dF9zaXplLCBvdXRfY2hhbm5lbHM9b3V0X2NoYW5uZWws
IGtlcm5lbF9zaXplPWNvbnZfa2VybmVsX3NpemUsIHN0cmlkZT0xLAogICAgICAgICAgICAgICAgICAg
ICAgcGFkZGluZz1wYWRkaW5nKSwKICAgICAgICAgICAgbm4uUmVMVSgpLAogICAgICAgICAgICBubi5N
YXhQb29sMWQoa2VybmVsX3NpemU9cG9vbF9rZXJuZWxfc2l6ZSkKICAgICAgICApCiAgICAgICAgc2Vs
Zi5kcm9wb3V0MSA9IG5uLkRyb3BvdXQoZHJvcG91dCkKICAgICAgICBzZWxmLmNvbnYyID0gbm4uU2Vx
dWVudGlhbCgKICAgICAgICAgICAgbm4uQ29udjFkKGluX2NoYW5uZWxzPW91dF9jaGFubmVsLCBvdXRf
Y2hhbm5lbHM9b3V0X2NoYW5uZWwsIGtlcm5lbF9zaXplPWNvbnZfa2VybmVsX3NpemUsIHN0cmlkZT0x
LAogICAgICAgICAgICAgICAgICAgICAgcGFkZGluZz1wYWRkaW5nKSwKICAgICAgICAgICAgbm4uUmVM
VSgpLAogICAgICAgICAgICBubi5NYXhQb29sMWQoa2VybmVsX3NpemU9cG9vbF9rZXJuZWxfc2l6ZSkK
ICAgICAgICApCiAgICAgICAgc2VsZi5kcm9wb3V0MiA9IG5uLkRyb3BvdXQoZHJvcG91dCkKICAgICAg
ICBzZWxmLmNvbnYzID0gbm4uU2VxdWVudGlhbCgKICAgICAgICAgICAgbm4uQ29udjFkKGluX2NoYW5u
ZWxzPW91dF9jaGFubmVsLCBvdXRfY2hhbm5lbHM9b3V0X2NoYW5uZWwsIGtlcm5lbF9zaXplPWNvbnZf
a2VybmVsX3NpemUsIHN0cmlkZT0xLAogICAgICAgICAgICAgICAgICAgICAgcGFkZGluZz1wYWRkaW5n
KSwKICAgICAgICAgICAgbm4uUmVMVSgpLAogICAgICAgICAgICBubi5NYXhQb29sMWQoa2VybmVsX3Np
emU9cG9vbF9rZXJuZWxfc2l6ZSkKICAgICAgICApCiAgICAgICAgc2VsZi5kcm9wb3V0MyA9IG5uLkRy
b3BvdXQoZHJvcG91dCkKICAgICAgICBzZWxmLmNvbnY0ID0gbm4uU2VxdWVudGlhbCgKICAgICAgICAg
ICAgbm4uQ29udjFkKGluX2NoYW5uZWxzPW91dF9jaGFubmVsLCBvdXRfY2hhbm5lbHM9b3V0X2NoYW5u
ZWwsIGtlcm5lbF9zaXplPWNvbnZfa2VybmVsX3NpemUsIHN0cmlkZT0xLAogICAgICAgICAgICAgICAg
ICAgICAgcGFkZGluZz1wYWRkaW5nKSwKICAgICAgICAgICAgbm4uUmVMVSgpLAogICAgICAgICAgICBu
bi5NYXhQb29sMWQoa2VybmVsX3NpemU9cG9vbF9rZXJuZWxfc2l6ZSkKICAgICAgICApCiAgICAgICAg
c2VsZi5kcm9wb3V0NCA9IG5uLkRyb3BvdXQoZHJvcG91dCkKICAgICAgICBzZWxmLmZjMSA9IG5uLkxp
bmVhcihvdXRfY2hhbm5lbCAqIHNlbGYuY2FsY3VsYXRlX2RpbWVuc2lvbihzZXF1ZW5jZV9sZW5ndGgs
IHBhZGRpbmcsIGNvbnZfa2VybmVsX3NpemUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRl
bnNlX3NpemUpCiAgICAgICAgc2VsZi5mYzIgPSBubi5MaW5lYXIoZGVuc2Vfc2l6ZSwgMSkKCiAgICAg
ICAgc2VsZi5iZXN0X21vZGVsX2RpY3QgPSBOb25lCgogICAgZGVmIGNhbGN1bGF0ZV9kaW1lbnNpb24o
c2VsZiwgc2VxdWVuY2VfbGVuZ3RoLCBwYWRkaW5nLCBrZXJuZWxfc2l6ZSk6CiAgICAgICAgTF9jb252
MSA9IChzZXF1ZW5jZV9sZW5ndGggKyAyICogcGFkZGluZyAtIGtlcm5lbF9zaXplICsgMSkgLy8gMgog
ICAgICAgIExfY29udjIgPSAoTF9jb252MSArIDIgKiBwYWRkaW5nIC0ga2VybmVsX3NpemUgKyAxKSAv
LyAyCiAgICAgICAgTF9jb252MyA9IChMX2NvbnYyICsgMiAqIHBhZGRpbmcgLSBrZXJuZWxfc2l6ZSAr
IDEpIC8vIDIKICAgICAgICBMX2NvbnY0ID0gKExfY29udjMgKyAyICogcGFkZGluZyAtIGtlcm5lbF9z
aXplICsgMSkgLy8gMgogICAgICAgIHJldHVybiBMX2NvbnY0CgogICAgZGVmIGZvcndhcmQoc2VsZiwg
WCwgaXNfdHJhaW49RmFsc2UsIGlzX2ZlYXR1cmU9RmFsc2UpOgogICAgICAgIG91dCA9IFgudmlldygt
MSwgc2VsZi5zZXF1ZW5jZV9sZW5ndGgsIHNlbGYuaW5wdXRfc2l6ZSkKICAgICAgICBvdXQgPSBvdXQu
cGVybXV0ZSgwLCAyLCAxKQogICAgICAgIG91dCA9IHNlbGYuY29udjEob3V0KQogICAgICAgIGlmIGlz
X3RyYWluOgogICAgICAgICAgICBvdXQgPSBzZWxmLmRyb3BvdXQxKG91dCkKICAgICAgICBvdXQgPSBz
ZWxmLmNvbnYyKG91dCkKICAgICAgICBpZiBpc190cmFpbjoKICAgICAgICAgICAgb3V0ID0gc2VsZi5k
cm9wb3V0MihvdXQpCiAgICAgICAgb3V0ID0gc2VsZi5jb252MyhvdXQpCiAgICAgICAgaWYgaXNfdHJh
aW46CiAgICAgICAgICAgIG91dCA9IHNlbGYuZHJvcG91dDMob3V0KQogICAgICAgIG91dCA9IHNlbGYu
Y29udjQob3V0KQogICAgICAgIGlmIGlzX3RyYWluOgogICAgICAgICAgICBvdXQgPSBzZWxmLmRyb3Bv
dXQ0KG91dCkKICAgICAgICBvdXQgPSBvdXQudmlldyhvdXQuc2l6ZSgwKSwgLTEpCiAgICAgICAgb3V0
ID0gRi5yZWx1KHNlbGYuZmMxKG91dCkpCiAgICAgICAgaWYgaXNfZmVhdHVyZToKICAgICAgICAgICAg
cmV0dXJuIG91dAogICAgICAgIG91dCA9IHRvcmNoLnNpZ21vaWQoc2VsZi5mYzIob3V0KSkKICAgICAg
ICByZXR1cm4gb3V0CgogICAgZGVmIGZpdChzZWxmLCB0cmFpbl9sb2FkZXIsIHZhbGlkX2xvYWRlciwg
ZXBvY2hzPTEwMDAsIGVhcmx5X3N0b3BwaW5nPTEwMCwgbHI9MC4wMDEpOgogICAgICAgIGNyaXRlcmlv
biA9IG5uLkJDRUxvc3MoKQogICAgICAgIG9wdGltaXplciA9IHRvcmNoLm9wdGltLkFkYW0oc2VsZi5w
YXJhbWV0ZXJzKCksIGxyPWxyKQogICAgICAgIG1pbm11bV9sb3NzID0gbnAuaW5mCiAgICAgICAgbGFz
dF9zYXZpbmcgPSAwCgogICAgICAgIGZvciBlcG9jaCBpbiByYW5nZShlcG9jaHMpOgogICAgICAgICAg
ICB0aW1lMCA9IHRpbWUudGltZSgpCiAgICAgICAgICAgIGxvc3NfdHJhaW4gPSBucC5pbmYKICAgICAg
ICAgICAgZm9yIGksIChiYXRjaF9YLCBiYXRjaF95KSBpbiBlbnVtZXJhdGUodHJhaW5fbG9hZGVyKToK
ICAgICAgICAgICAgICAgIFhiID0gYmF0Y2hfWC5mbG9hdCgpLnRvKHNlbGYuZGV2aWNlKQogICAgICAg
ICAgICAgICAgeWIgPSBiYXRjaF95LmZsb2F0KCkudG8oc2VsZi5kZXZpY2UpCgogICAgICAgICAgICAg
ICAgb3B0aW1pemVyLnplcm9fZ3JhZCgpCiAgICAgICAgICAgICAgICB5XyA9IHNlbGYuZm9yd2FyZChY
YiwgaXNfdHJhaW49VHJ1ZSkKICAgICAgICAgICAgICAgIGxvc3MgPSBjcml0ZXJpb24oeV8sIHliKQog
ICAgICAgICAgICAgICAgbG9zcy5iYWNrd2FyZCgpCiAgICAgICAgICAgICAgICBvcHRpbWl6ZXIuc3Rl
cCgpCiAgICAgICAgICAgICAgICBsb3NzX3RyYWluID0gbG9zcy5pdGVtKCkKICAgICAgICAgICAgbG9z
c192YWxpZCA9IGZsb2F0KHNlbGYuZXZhbHVhdGUodmFsaWRfbG9hZGVyKSkKICAgICAgICAgICAgaWYg
bG9zc192YWxpZCA8IG1pbm11bV9sb3NzOgogICAgICAgICAgICAgICAgbWlubXVtX2xvc3MgPSBsb3Nz
X3ZhbGlkCiAgICAgICAgICAgICAgICBzZWxmLmJlc3RfbW9kZWxfZGljdCA9IHNlbGYuc3RhdGVfZGlj
dCgpCiAgICAgICAgICAgICAgICBsYXN0X3NhdmluZyA9IGVwb2NoCiAgICAgICAgICAgIGlmIGVwb2No
IC0gbGFzdF9zYXZpbmcgPiBlYXJseV9zdG9wcGluZzogYnJlYWsKCiAgICAgICAgaWYgbm90IHNlbGYu
YmVzdF9tb2RlbF9kaWN0IGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYubG9hZF9zdGF0ZV9kaWN0KHNl
bGYuYmVzdF9tb2RlbF9kaWN0KQoKICAgIGRlZiBldmFsdWF0ZShzZWxmLCBsb2FkZXIpOgogICAgICAg
IGxvc3MgPSAwCiAgICAgICAgY3JpdGVyaW9uID0gbm4uQkNFTG9zcygpCiAgICAgICAgZm9yIGJhdGNo
X1gsIGJhdGNoX3kgaW4gbG9hZGVyOgogICAgICAgICAgICBYYiA9IGJhdGNoX1guZmxvYXQoKS50byhz
ZWxmLmRldmljZSkKICAgICAgICAgICAgeWIgPSBiYXRjaF95LmZsb2F0KCkudG8oc2VsZi5kZXZpY2Up
CiAgICAgICAgICAgIHlfID0gc2VsZi5mb3J3YXJkKFhiKQogICAgICAgICAgICBsb3NzICs9IGNyaXRl
cmlvbih5XywgeWIpLml0ZW0oKQogICAgICAgIHJldHVybiBsb3NzIC8gbGVuKGxvYWRlcikKCiAgICBk
ZWYgcHJlZGljdChzZWxmLCBsb2FkZXIpOgogICAgICAgIHNjb3JlID0gW10KICAgICAgICBmb3IgYmF0
Y2hfWCwgYmF0Y2hfeSBpbiBsb2FkZXI6CiAgICAgICAgICAgIFhiID0gYmF0Y2hfWC5mbG9hdCgpLnRv
KHNlbGYuZGV2aWNlKQogICAgICAgICAgICB5XyA9IHNlbGYuZm9yd2FyZChYYikKICAgICAgICAgICAg
c2NvcmUuYXBwZW5kKHlfLmNwdSgpLmRhdGEpCiAgICAgICAgc2NvcmUgPSB0b3JjaC5jYXQoc2NvcmUp
Lm51bXB5KCkKICAgICAgICB0bXBfc2NvcmUgPSBucC56ZXJvcygobGVuKHNjb3JlKSwgMikpCiAgICAg
ICAgdG1wX3Njb3JlWzosIDBdID0gMSAtIHNjb3JlWzosIDBdCiAgICAgICAgdG1wX3Njb3JlWzosIDFd
ID0gc2NvcmVbOiwgMF0KICAgICAgICByZXR1cm4gdG1wX3Njb3JlCgoKY2xhc3MgTmV0X1JOTl8yKG5u
Lk1vZHVsZSk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZGV2aWNlLCBjYXRlZ29yeSwgaW5wdXRfc2l6
ZSwgc2VxdWVuY2VfbGVuZ3RoLCBoaWRkZW5fc2l6ZT0zMiwgbnVtX2xheWVycz0xLCBkZW5zZV9zaXpl
PTY0LCBkcm9wb3V0PTAuNSwgYmlkaXJlY3Rpb25hbD1GYWxzZSk6CiAgICAgICAgc3VwZXIoTmV0X1JO
Tl8yLCBzZWxmKS5fX2luaXRfXygpCiAgICAgICAgc2VsZi5pbnB1dF9zaXplID0gaW5wdXRfc2l6ZQog
ICAgICAgIHNlbGYuc2VxdWVuY2VfbGVuZ3RoID0gc2VxdWVuY2VfbGVuZ3RoCiAgICAgICAgc2VsZi5k
ZXZpY2UgPSBkZXZpY2UKICAgICAgICBzZWxmLmxzdG0gPSBubi5MU1RNKAogICAgICAgICAgICBpbnB1
dF9zaXplPWlucHV0X3NpemUsCiAgICAgICAgICAgIGhpZGRlbl9zaXplPWhpZGRlbl9zaXplLAogICAg
ICAgICAgICBudW1fbGF5ZXJzPW51bV9sYXllcnMsCiAgICAgICAgICAgIGJhdGNoX2ZpcnN0PVRydWUs
CiAgICAgICAgICAgIGJpZGlyZWN0aW9uYWw9YmlkaXJlY3Rpb25hbCwKICAgICAgICApCiAgICAgICAg
c2VsZi5kcm9wb3V0ID0gbm4uRHJvcG91dChkcm9wb3V0KQogICAgICAgIGlmIGJpZGlyZWN0aW9uYWw6
CiAgICAgICAgICAgIGZjX2lucHV0X3NpemUgPSAyICogaGlkZGVuX3NpemUKICAgICAgICBlbHNlOgog
ICAgICAgICAgICBmY19pbnB1dF9zaXplID0gaGlkZGVuX3NpemUKICAgICAgICBzZWxmLmZjMSA9IG5u
LkxpbmVhcihmY19pbnB1dF9zaXplLCBkZW5zZV9zaXplKQogICAgICAgIHNlbGYuZmMyID0gbm4uTGlu
ZWFyKGRlbnNlX3NpemUsIGNhdGVnb3J5KQoKICAgICAgICBzZWxmLmJlc3RfbW9kZWxfZGljdCA9IE5v
bmUKCiAgICBkZWYgZm9yd2FyZChzZWxmLCBYLCBpc190cmFpbj1GYWxzZSk6CiAgICAgICAgb3V0LCBf
ID0gc2VsZi5sc3RtKFgsIE5vbmUpCiAgICAgICAgb3V0ID0gc2VsZi5kcm9wb3V0KG91dCkKICAgICAg
ICBvdXQgPSBvdXRbOiwgLTEsIDpdCiAgICAgICAgb3V0ID0gRi5yZWx1KHNlbGYuZmMxKG91dCkpCiAg
ICAgICAgaWYgaXNfdHJhaW46CiAgICAgICAgICAgIG91dCA9IHNlbGYuZHJvcG91dChvdXQpCiAgICAg
ICAgb3V0ID0gdG9yY2guc29mdG1heChzZWxmLmZjMihvdXQpLCBkaW09MSkKICAgICAgICByZXR1cm4g
b3V0CgogICAgZGVmIGZpdChzZWxmLCB0cmFpbl9sb2FkZXIsIHZhbGlkX2xvYWRlciwgZXBvY2hzPTEw
MDAsIGVhcmx5X3N0b3BwaW5nPTEwMCwgbHI9MC4wMDEpOgogICAgICAgIGNyaXRlcmlvbiA9IG5uLkNy
b3NzRW50cm9weUxvc3MoKQogICAgICAgIG9wdGltaXplciA9IHRvcmNoLm9wdGltLkFkYW0oc2VsZi5w
YXJhbWV0ZXJzKCksIGxyPWxyKQogICAgICAgIG1pbm11bV9sb3NzID0gbnAuaW5mCiAgICAgICAgbGFz
dF9zYXZpbmcgPSAwCiAgICAgICAgZm9yIGVwb2NoIGluIHJhbmdlKGVwb2Nocyk6CiAgICAgICAgICAg
IHRpbWUwID0gdGltZS50aW1lKCkKICAgICAgICAgICAgbG9zc190cmFpbiA9IG5wLmluZgogICAgICAg
ICAgICBmb3IgaSwgKGJhdGNoX1gsIGJhdGNoX3kpIGluIGVudW1lcmF0ZSh0cmFpbl9sb2FkZXIpOgog
ICAgICAgICAgICAgICAgWGIgPSBiYXRjaF9YLnZpZXcoLTEsIHNlbGYuc2VxdWVuY2VfbGVuZ3RoLCBz
ZWxmLmlucHV0X3NpemUpLmZsb2F0KCkudG8oc2VsZi5kZXZpY2UpCiAgICAgICAgICAgICAgICB5YiA9
IGJhdGNoX3kudmlldygtMSkubG9uZygpLnRvKHNlbGYuZGV2aWNlKQogICAgICAgICAgICAgICAgb3B0
aW1pemVyLnplcm9fZ3JhZCgpCiAgICAgICAgICAgICAgICB5XyA9IHNlbGYuZm9yd2FyZChYYiwgaXNf
dHJhaW49VHJ1ZSkKICAgICAgICAgICAgICAgIGxvc3MgPSBjcml0ZXJpb24oeV8sIHliKQogICAgICAg
ICAgICAgICAgbG9zcy5iYWNrd2FyZCgpCiAgICAgICAgICAgICAgICBvcHRpbWl6ZXIuc3RlcCgpCiAg
ICAgICAgICAgICAgICBsb3NzX3RyYWluID0gbG9zcy5pdGVtKCkKICAgICAgICAgICAgbG9zc192YWxp
ZCA9IGZsb2F0KHNlbGYuZXZhbHVhdGUodmFsaWRfbG9hZGVyKSkKICAgICAgICAgICAgaWYgbG9zc192
YWxpZCA8IG1pbm11bV9sb3NzOgogICAgICAgICAgICAgICAgbWlubXVtX2xvc3MgPSBsb3NzX3ZhbGlk
CiAgICAgICAgICAgICAgICBzZWxmLmJlc3RfbW9kZWxfZGljdCA9IHNlbGYuc3RhdGVfZGljdCgpCiAg
ICAgICAgICAgICAgICBsYXN0X3NhdmluZyA9IGVwb2NoCiAgICAgICAgICAgIGlmIGVwb2NoIC0gbGFz
dF9zYXZpbmcgPiBlYXJseV9zdG9wcGluZzogYnJlYWsKICAgICAgICBpZiBub3Qgc2VsZi5iZXN0X21v
ZGVsX2RpY3QgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5sb2FkX3N0YXRlX2RpY3Qoc2VsZi5iZXN0
X21vZGVsX2RpY3QpCgogICAgZGVmIGV2YWx1YXRlKHNlbGYsIGxvYWRlcik6CiAgICAgICAgbG9zcyA9
IDAKICAgICAgICBjcml0ZXJpb24gPSBubi5Dcm9zc0VudHJvcHlMb3NzKCkKICAgICAgICBmb3IgYmF0
Y2hfWCwgYmF0Y2hfeSBpbiBsb2FkZXI6CiAgICAgICAgICAgIFhiID0gYmF0Y2hfWC52aWV3KC0xLCBz
ZWxmLnNlcXVlbmNlX2xlbmd0aCwgc2VsZi5pbnB1dF9zaXplKS5mbG9hdCgpLnRvKHNlbGYuZGV2aWNl
KQogICAgICAgICAgICB5YiA9IGJhdGNoX3kudmlldygtMSkubG9uZygpLnRvKHNlbGYuZGV2aWNlKQog
ICAgICAgICAgICB5XyA9IHNlbGYuZm9yd2FyZChYYikKICAgICAgICAgICAgbG9zcyArPSBjcml0ZXJp
b24oeV8sIHliKS5pdGVtKCkKICAgICAgICByZXR1cm4gbG9zcyAvIGxlbihsb2FkZXIpCgogICAgZGVm
IHByZWRpY3Qoc2VsZiwgbG9hZGVyKToKICAgICAgICBzY29yZSA9IFtdCiAgICAgICAgZm9yIGJhdGNo
X1gsIGJhdGNoX3kgaW4gbG9hZGVyOgogICAgICAgICAgICBYYiA9IGJhdGNoX1gudmlldygtMSwgc2Vs
Zi5zZXF1ZW5jZV9sZW5ndGgsIHNlbGYuaW5wdXRfc2l6ZSkuZmxvYXQoKS50byhzZWxmLmRldmljZSkK
ICAgICAgICAgICAgeWIgPSBiYXRjaF95LnZpZXcoLTEpLmxvbmcoKS50byhzZWxmLmRldmljZSkKICAg
ICAgICAgICAgeV8gPSBzZWxmLmZvcndhcmQoWGIpCiAgICAgICAgICAgIHNjb3JlLmFwcGVuZCh5Xy5j
cHUoKS5kYXRhKQogICAgICAgIHJldHVybiB0b3JjaC5jYXQoc2NvcmUpLm51bXB5KCkKCgpjbGFzcyBO
ZXRfQUJDTk5fNChubi5Nb2R1bGUpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGRldmljZSwgY2F0ZWdv
cnksIGlucHV0X3NpemUsIHNlcXVlbmNlX2xlbmd0aCwgZHJvcG91dD0wLjc1KToKICAgICAgICBzdXBl
cihOZXRfQUJDTk5fNCwgc2VsZikuX19pbml0X18oKQogICAgICAgIHNlbGYuZGV2aWNlID0gZGV2aWNl
CiAgICAgICAgc2VsZi5pbnB1dF9zaXplID0gaW5wdXRfc2l6ZSAKICAgICAgICBzZWxmLnNlcXVlbmNl
X2xlbmd0aCA9IHNlcXVlbmNlX2xlbmd0aAogICAgICAgIHNlbGYuY29udjEgPSBubi5TZXF1ZW50aWFs
KAogICAgICAgICAgICBubi5Db252MWQoaW5fY2hhbm5lbHM9aW5wdXRfc2l6ZSwgb3V0X2NoYW5uZWxz
PTIwMCwga2VybmVsX3NpemU9MSwgc3RyaWRlPTEsIHBhZGRpbmc9MCksCiAgICAgICAgICAgIG5uLlJl
TFUoKQogICAgICAgICkKICAgICAgICBzZWxmLmRyb3BvdXQxID0gbm4uRHJvcG91dChkcm9wb3V0KQog
ICAgICAgIHNlbGYuY29udjIgPSBubi5TZXF1ZW50aWFsKAogICAgICAgICAgICBubi5Db252MWQoaW5f
Y2hhbm5lbHM9MjAwLCBvdXRfY2hhbm5lbHM9MTUwLCBrZXJuZWxfc2l6ZT05LCBzdHJpZGU9MSwgcGFk
ZGluZz0wKSwKICAgICAgICAgICAgbm4uUmVMVSgpCiAgICAgICAgKQogICAgICAgIHNlbGYuZHJvcG91
dDIgPSBubi5Ecm9wb3V0KGRyb3BvdXQpCiAgICAgICAgc2VsZi5jb252MyA9IG5uLlNlcXVlbnRpYWwo
CiAgICAgICAgICAgIG5uLkNvbnYxZChpbl9jaGFubmVscz0xNTAsIG91dF9jaGFubmVscz0yMDAsIGtl
cm5lbF9zaXplPTEwLCBzdHJpZGU9MSwgcGFkZGluZz0wKSwKICAgICAgICAgICAgbm4uUmVMVSgpCiAg
ICAgICAgKQogICAgICAgIHNlbGYuZHJvcG91dDMgPSBubi5Ecm9wb3V0KGRyb3BvdXQpCiAgICAgICAg
c2VsZi5hdHRlbnRpb25fMSA9IEF0dGVudGlvbigoc2VsZi5jYWxjdWxhdGVfZGltZW5zaW9uKHNlbGYu
c2VxdWVuY2VfbGVuZ3RoLCAwLCAxLCA5LCAxMCksIDIwMCksIDgpCiAgICAgICAgc2VsZi5hdHRlbnRp
b25fMiA9IEF0dGVudGlvbigoMjAwLCBzZWxmLmNhbGN1bGF0ZV9kaW1lbnNpb24oc2VsZi5zZXF1ZW5j
ZV9sZW5ndGgsIDAsIDEsIDksIDEwKSksIDEwKQogICAgICAgIHNlbGYuZmMxID0gbm4uTGluZWFyKDIq
KHNlbGYuY2FsY3VsYXRlX2RpbWVuc2lvbihzZWxmLnNlcXVlbmNlX2xlbmd0aCwgMCwgMSwgOSwgMTAp
ICsgMjAwKSwgMTUwKQogICAgICAgIHNlbGYuZmMyID0gbm4uTGluZWFyKDE1MCwgOCkKICAgICAgICBz
ZWxmLmZjMyA9IG5uLkxpbmVhcig4LCBjYXRlZ29yeSkKICAgICAgICBzZWxmLmJlc3RfbW9kZWxfZGlj
dCA9IE5vbmUKCiAgICBkZWYgY2FsY3VsYXRlX2RpbWVuc2lvbihzZWxmLCBzZXF1ZW5jZV9sZW5ndGgs
IHBhZGRpbmcsIGtlcm5lbF9zaXplXzEsIGtlcm5lbF9zaXplXzIsIGtlcm5lbF9zaXplXzMpOgogICAg
ICAgIExfY29udjEgPSBzZXF1ZW5jZV9sZW5ndGggKyAyICogcGFkZGluZyAtIGtlcm5lbF9zaXplXzEg
KyAxCiAgICAgICAgTF9jb252MiA9IExfY29udjEgKyAyICogcGFkZGluZyAtIGtlcm5lbF9zaXplXzIg
KyAxCiAgICAgICAgTF9jb252MyA9IExfY29udjIgKyAyICogcGFkZGluZyAtIGtlcm5lbF9zaXplXzMg
KyAxCiAgICAgICAgcmV0dXJuIExfY29udjMKCiAgICBkZWYgZm9yd2FyZChzZWxmLCBYLCBpc190cmFp
bj1GYWxzZSk6CiAgICAgICAgb3V0ID0gWC52aWV3KC0xLCBzZWxmLnNlcXVlbmNlX2xlbmd0aCwgc2Vs
Zi5pbnB1dF9zaXplKQogICAgICAgIG91dCA9IG91dC5wZXJtdXRlKDAsIDIsIDEpCiAgICAgICAgb3V0
ID0gc2VsZi5jb252MShvdXQpCiAgICAgICAgaWYgaXNfdHJhaW46CiAgICAgICAgICAgIG91dCA9IHNl
bGYuZHJvcG91dDEob3V0KQogICAgICAgIG91dCA9IHNlbGYuY29udjIob3V0KQogICAgICAgIGlmIGlz
X3RyYWluOgogICAgICAgICAgICBvdXQgPSBzZWxmLmRyb3BvdXQyKG91dCkKICAgICAgICBvdXQgPSBz
ZWxmLmNvbnYzKG91dCkKICAgICAgICBpZiBpc190cmFpbjoKICAgICAgICAgICAgb3V0ID0gc2VsZi5k
cm9wb3V0MyhvdXQpCiAgICAgICAgb3V0X3Jlc2hhcGUgPSBvdXQucGVybXV0ZSgwLCAyLCAxKQogICAg
ICAgIG91dF9yZXNoYXBlID0gc2VsZi5hdHRlbnRpb25fMShvdXRfcmVzaGFwZSkKICAgICAgICBvdXQg
PSBzZWxmLmF0dGVudGlvbl8yKG91dCkKICAgICAgICBvdXRfbWVyZ2UgPSB0b3JjaC5jYXQoKG91dCwg
b3V0X3Jlc2hhcGUpLCAxKQogICAgICAgIG91dF9tZXJnZSA9IEYucmVsdShzZWxmLmZjMShvdXRfbWVy
Z2UpKQogICAgICAgIG91dF9tZXJnZSA9IEYucmVsdShzZWxmLmZjMihvdXRfbWVyZ2UpKQogICAgICAg
IG91dF9tZXJnZSA9IHRvcmNoLnNvZnRtYXgoc2VsZi5mYzMob3V0X21lcmdlKSwgZGltPTEpCiAgICAg
ICAgcmV0dXJuIG91dF9tZXJnZQoKICAgIGRlZiBmaXQoc2VsZiwgdHJhaW5fbG9hZGVyLCB2YWxpZF9s
b2FkZXIsIGVwb2Nocz0xMDAwLCBlYXJseV9zdG9wcGluZz0xMDAsIGxyPTAuMDAxKToKICAgICAgICBj
cml0ZXJpb24gPSBubi5Dcm9zc0VudHJvcHlMb3NzKCkKICAgICAgICBvcHRpbWl6ZXIgPSB0b3JjaC5v
cHRpbS5BZGFtKHNlbGYucGFyYW1ldGVycygpLCBscj1scikKICAgICAgICBtaW5tdW1fbG9zcyA9IG5w
LmluZgogICAgICAgIGxhc3Rfc2F2aW5nID0gMAogICAgICAgIGZvciBlcG9jaCBpbiByYW5nZShlcG9j
aHMpOgogICAgICAgICAgICB0aW1lMCA9IHRpbWUudGltZSgpCiAgICAgICAgICAgIGxvc3NfdHJhaW4g
PSBucC5pbmYKICAgICAgICAgICAgZm9yIGksIChiYXRjaF9YLCBiYXRjaF95KSBpbiBlbnVtZXJhdGUo
dHJhaW5fbG9hZGVyKToKICAgICAgICAgICAgICAgIFhiID0gYmF0Y2hfWC5mbG9hdCgpLnRvKHNlbGYu
ZGV2aWNlKQogICAgICAgICAgICAgICAgeWIgPSBiYXRjaF95LnZpZXcoLTEpLmxvbmcoKS50byhzZWxm
LmRldmljZSkKICAgICAgICAgICAgICAgIG9wdGltaXplci56ZXJvX2dyYWQoKQogICAgICAgICAgICAg
ICAgeV8gPSBzZWxmLmZvcndhcmQoWGIsIGlzX3RyYWluPVRydWUpCiAgICAgICAgICAgICAgICBsb3Nz
ID0gY3JpdGVyaW9uKHlfLCB5YikKICAgICAgICAgICAgICAgIGxvc3MuYmFja3dhcmQoKQogICAgICAg
ICAgICAgICAgb3B0aW1pemVyLnN0ZXAoKQogICAgICAgICAgICAgICAgbG9zc190cmFpbiA9IGxvc3Mu
aXRlbSgpCiAgICAgICAgICAgIGxvc3NfdmFsaWQgPSBmbG9hdChzZWxmLmV2YWx1YXRlKHZhbGlkX2xv
YWRlcikpCiAgICAgICAgICAgIGlmIGxvc3NfdmFsaWQgPCBtaW5tdW1fbG9zczoKICAgICAgICAgICAg
ICAgIG1pbm11bV9sb3NzID0gbG9zc192YWxpZAogICAgICAgICAgICAgICAgc2VsZi5iZXN0X21vZGVs
X2RpY3QgPSBzZWxmLnN0YXRlX2RpY3QoKQogICAgICAgICAgICAgICAgbGFzdF9zYXZpbmcgPSBlcG9j
aAogICAgICAgICAgICBpZiBlcG9jaCAtIGxhc3Rfc2F2aW5nID4gZWFybHlfc3RvcHBpbmc6IGJyZWFr
CiAgICAgICAgaWYgbm90IHNlbGYuYmVzdF9tb2RlbF9kaWN0IGlzIE5vbmU6CiAgICAgICAgICAgIHNl
bGYubG9hZF9zdGF0ZV9kaWN0KHNlbGYuYmVzdF9tb2RlbF9kaWN0KQoKICAgIGRlZiBldmFsdWF0ZShz
ZWxmLCBsb2FkZXIpOgogICAgICAgIGxvc3MgPSAwCiAgICAgICAgY3JpdGVyaW9uID0gbm4uQ3Jvc3NF
bnRyb3B5TG9zcygpCiAgICAgICAgZm9yIGJhdGNoX1gsIGJhdGNoX3kgaW4gbG9hZGVyOgogICAgICAg
ICAgICBYYiA9IGJhdGNoX1guZmxvYXQoKS50byhzZWxmLmRldmljZSkKICAgICAgICAgICAgeWIgPSBi
YXRjaF95LnZpZXcoLTEpLmxvbmcoKS50byhzZWxmLmRldmljZSkKICAgICAgICAgICAgeV8gPSBzZWxm
LmZvcndhcmQoWGIpCiAgICAgICAgICAgIGxvc3MgKz0gY3JpdGVyaW9uKHlfLCB5YikuaXRlbSgpCiAg
ICAgICAgcmV0dXJuIGxvc3MgLyBsZW4obG9hZGVyKQoKICAgIGRlZiBwcmVkaWN0KHNlbGYsIGxvYWRl
cik6CiAgICAgICAgc2NvcmUgPSBbXQogICAgICAgIGZvciBiYXRjaF9YLCBiYXRjaF95IGluIGxvYWRl
cjoKICAgICAgICAgICAgWGIgPSBiYXRjaF9YLmZsb2F0KCkudG8oc2VsZi5kZXZpY2UpCiAgICAgICAg
ICAgIHliID0gYmF0Y2hfeS52aWV3KC0xKS5sb25nKCkudG8oc2VsZi5kZXZpY2UpCiAgICAgICAgICAg
IHlfID0gc2VsZi5mb3J3YXJkKFhiKQogICAgICAgICAgICBzY29yZS5hcHBlbmQoeV8uY3B1KCkuZGF0
YSkKICAgICAgICByZXR1cm4gdG9yY2guY2F0KHNjb3JlKS5udW1weSgpCgoKY2xhc3MgTmV0X1Jlc05l
dF81KG5uLk1vZHVsZSk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZGV2aWNlLCBjYXRlZ29yeSwgaW5w
dXRfc2l6ZSwgc2VxdWVuY2VfbGVuZ3RoLCBvdXRfY2hhbm5lbD02NCwgZGVuc2Vfc2l6ZT02NCk6CiAg
ICAgICAgc3VwZXIoTmV0X1Jlc05ldF81LCBzZWxmKS5fX2luaXRfXygpCiAgICAgICAgc2VsZi5kZXZp
Y2UgPSBkZXZpY2UKICAgICAgICBzZWxmLmlucHV0X3NpemUgPSBpbnB1dF9zaXplCiAgICAgICAgc2Vs
Zi5zZXF1ZW5jZV9sZW5ndGggPSBzZXF1ZW5jZV9sZW5ndGgKICAgICAgICBzZWxmLm91dF9jaGFubmVs
ID0gb3V0X2NoYW5uZWwKICAgICAgICBzZWxmLmRlbnNlX3NpemUgPSBkZW5zZV9zaXplCiAgICAgICAg
c2VsZi5wcmUgPSBubi5TZXF1ZW50aWFsKAogICAgICAgICAgICBubi5Db252MWQoaW5wdXRfc2l6ZSwg
b3V0X2NoYW5uZWwsIGtlcm5lbF9zaXplPTcsIHN0cmlkZT0yLCBwYWRkaW5nPTMsIGJpYXM9RmFsc2Up
LAogICAgICAgICAgICBubi5CYXRjaE5vcm0xZChvdXRfY2hhbm5lbCksCiAgICAgICAgICAgIG5uLlJl
TFUoaW5wbGFjZT1UcnVlKSwKICAgICAgICAgICAgbm4uTWF4UG9vbDFkKDIpCiAgICAgICAgKQogICAg
ICAgIHNlbGYubGF5ZXIxID0gc2VsZi5fbWFrZV9sYXllcihvdXRfY2hhbm5lbCwgb3V0X2NoYW5uZWws
IDIsIDEpCiAgICAgICAgc2VsZi5sYXllcjIgPSBzZWxmLl9tYWtlX2xheWVyKG91dF9jaGFubmVsLCAy
Km91dF9jaGFubmVsLCAyLCAyKQogICAgICAgIHNlbGYubGF5ZXIzID0gc2VsZi5fbWFrZV9sYXllcigy
Km91dF9jaGFubmVsLCA0Km91dF9jaGFubmVsLCAyLCAyKQogICAgICAgIHNlbGYubGF5ZXI0ID0gc2Vs
Zi5fbWFrZV9sYXllcig0Km91dF9jaGFubmVsLCA4Km91dF9jaGFubmVsLCAyLCAyKQoKICAgICAgICBz
ZWxmLmZjMSA9IG5uLkxpbmVhcihzZWxmLmNhbGN1bGF0ZV9kaW1lbnNpb24oc2VsZi5zZXF1ZW5jZV9s
ZW5ndGgpICogOCAqIG91dF9jaGFubmVsLCBkZW5zZV9zaXplKQogICAgICAgIHNlbGYuZmMyID0gbm4u
TGluZWFyKGRlbnNlX3NpemUsIGNhdGVnb3J5KQoKICAgICAgICBzZWxmLmJlc3RfbW9kZWxfZGljdCA9
IE5vbmUKCiAgICBkZWYgX21ha2VfbGF5ZXIoc2VsZiwgaW5fY2hhbm5lbCwgb3V0X2NoYW5uZWwsIGJs
b2NrX251bSwgc3RyaWRlPTEpOgogICAgICAgIHNob3J0Y3V0ID0gbm4uU2VxdWVudGlhbCgKICAgICAg
ICAgICAgbm4uQ29udjFkKGluX2NoYW5uZWwsIG91dF9jaGFubmVsLCBrZXJuZWxfc2l6ZT0xLCBzdHJp
ZGU9c3RyaWRlLCBiaWFzPUZhbHNlKSwKICAgICAgICAgICAgbm4uQmF0Y2hOb3JtMWQob3V0X2NoYW5u
ZWwpCiAgICAgICAgKQogICAgICAgIGxheWVycyA9IFtdCiAgICAgICAgbGF5ZXJzLmFwcGVuZChSZXNp
ZHVhbEJsb2NrKGluX2NoYW5uZWwsIG91dF9jaGFubmVsLCBzdHJpZGUsIHNob3J0Y3V0KSkKCiAgICAg
ICAgZm9yIGkgaW4gcmFuZ2UoMSwgYmxvY2tfbnVtKToKICAgICAgICAgICAgbGF5ZXJzLmFwcGVuZChS
ZXNpZHVhbEJsb2NrKG91dF9jaGFubmVsLCBvdXRfY2hhbm5lbCkpCgogICAgICAgIHJldHVybiBubi5T
ZXF1ZW50aWFsKCpsYXllcnMpCgogICAgZGVmIGZvcndhcmQoc2VsZiwgWCk6CiAgICAgICAgb3V0ID0g
WC52aWV3KC0xLCBzZWxmLnNlcXVlbmNlX2xlbmd0aCwgc2VsZi5pbnB1dF9zaXplKQogICAgICAgIG91
dCA9IG91dC5wZXJtdXRlKDAsIDIsIDEpCiAgICAgICAgb3V0ID0gc2VsZi5wcmUob3V0KQogICAgICAg
IG91dCA9IHNlbGYubGF5ZXIxKG91dCkKICAgICAgICBvdXQgPSBzZWxmLmxheWVyMihvdXQpCiAgICAg
ICAgb3V0ID0gc2VsZi5sYXllcjMob3V0KQogICAgICAgIG91dCA9IHNlbGYubGF5ZXI0KG91dCkKICAg
ICAgICBvdXQgPSBGLmF2Z19wb29sMWQob3V0LCAyKQogICAgICAgIG91dCA9IG91dC52aWV3KG91dC5z
aXplKDApLCAtMSkKICAgICAgICBvdXQgPSBGLnJlbHUoc2VsZi5mYzEob3V0KSkKICAgICAgICBvdXQg
PSB0b3JjaC5zb2Z0bWF4KHNlbGYuZmMyKG91dCksIGRpbT0xKQogICAgICAgIHJldHVybiBvdXQKCiAg
ICBkZWYgZml0KHNlbGYsIHRyYWluX2xvYWRlciwgdmFsaWRfbG9hZGVyLCBlcG9jaHM9MTAwMCwgZWFy
bHlfc3RvcHBpbmc9MTAwLCBscj0wLjAwMSk6CiAgICAgICAgY3JpdGVyaW9uID0gbm4uQ3Jvc3NFbnRy
b3B5TG9zcygpCiAgICAgICAgb3B0aW1pemVyID0gdG9yY2gub3B0aW0uQWRhbShzZWxmLnBhcmFtZXRl
cnMoKSwgbHI9bHIpCiAgICAgICAgbWlubXVtX2xvc3MgPSBucC5pbmYKICAgICAgICBsYXN0X3Nhdmlu
ZyA9IDAKCiAgICAgICAgZm9yIGVwb2NoIGluIHJhbmdlKGVwb2Nocyk6CiAgICAgICAgICAgIHRpbWUw
ID0gdGltZS50aW1lKCkKICAgICAgICAgICAgbG9zc190cmFpbiA9IG5wLmluZgogICAgICAgICAgICBm
b3IgaSwgKGJhdGNoX1gsIGJhdGNoX3kpIGluIGVudW1lcmF0ZSh0cmFpbl9sb2FkZXIpOgogICAgICAg
ICAgICAgICAgWGIgPSBiYXRjaF9YLmZsb2F0KCkudG8oc2VsZi5kZXZpY2UpCiAgICAgICAgICAgICAg
ICB5YiA9IGJhdGNoX3kudmlldygtMSkubG9uZygpLnRvKHNlbGYuZGV2aWNlKQoKICAgICAgICAgICAg
ICAgIG9wdGltaXplci56ZXJvX2dyYWQoKQogICAgICAgICAgICAgICAgeV8gPSBzZWxmLmZvcndhcmQo
WGIpCiAgICAgICAgICAgICAgICBsb3NzID0gY3JpdGVyaW9uKHlfLCB5YikKICAgICAgICAgICAgICAg
IGxvc3MuYmFja3dhcmQoKQogICAgICAgICAgICAgICAgb3B0aW1pemVyLnN0ZXAoKQogICAgICAgICAg
ICAgICAgbG9zc190cmFpbiA9IGxvc3MuaXRlbSgpCiAgICAgICAgICAgIGxvc3NfdmFsaWQgPSBmbG9h
dChzZWxmLmV2YWx1YXRlKHZhbGlkX2xvYWRlcikpCiAgICAgICAgICAgIGlmIGxvc3NfdmFsaWQgPCBt
aW5tdW1fbG9zczoKICAgICAgICAgICAgICAgIG1pbm11bV9sb3NzID0gbG9zc192YWxpZAogICAgICAg
ICAgICAgICAgc2VsZi5iZXN0X21vZGVsX2RpY3QgPSBzZWxmLnN0YXRlX2RpY3QoKQogICAgICAgICAg
ICAgICAgbGFzdF9zYXZpbmcgPSBlcG9jaAogICAgICAgICAgICBpZiBlcG9jaCAtIGxhc3Rfc2F2aW5n
ID4gZWFybHlfc3RvcHBpbmc6IGJyZWFrCiAgICAgICAgaWYgbm90IHNlbGYuYmVzdF9tb2RlbF9kaWN0
IGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYubG9hZF9zdGF0ZV9kaWN0KHNlbGYuYmVzdF9tb2RlbF9k
aWN0KQoKICAgIGRlZiBldmFsdWF0ZShzZWxmLCBsb2FkZXIpOgogICAgICAgIGxvc3MgPSAwCiAgICAg
ICAgY3JpdGVyaW9uID0gbm4uQ3Jvc3NFbnRyb3B5TG9zcygpCiAgICAgICAgZm9yIGJhdGNoX1gsIGJh
dGNoX3kgaW4gbG9hZGVyOgogICAgICAgICAgICBYYiA9IGJhdGNoX1guZmxvYXQoKS50byhzZWxmLmRl
dmljZSkKICAgICAgICAgICAgeWIgPSBiYXRjaF95LnZpZXcoLTEpLmxvbmcoKS50byhzZWxmLmRldmlj
ZSkKICAgICAgICAgICAgeV8gPSBzZWxmLmZvcndhcmQoWGIpCiAgICAgICAgICAgIGxvc3MgKz0gY3Jp
dGVyaW9uKHlfLCB5YikuaXRlbSgpCiAgICAgICAgcmV0dXJuIGxvc3MgLyBsZW4obG9hZGVyKQoKICAg
IGRlZiBwcmVkaWN0KHNlbGYsIGxvYWRlcik6CiAgICAgICAgc2NvcmUgPSBbXQogICAgICAgIGZvciBi
YXRjaF9YLCBiYXRjaF95IGluIGxvYWRlcjoKICAgICAgICAgICAgWGIgPSBiYXRjaF9YLmZsb2F0KCku
dG8oc2VsZi5kZXZpY2UpCiAgICAgICAgICAgIHliID0gYmF0Y2hfeS52aWV3KC0xKS50byhzZWxmLmRl
dmljZSkKICAgICAgICAgICAgeV8gPSBzZWxmLmZvcndhcmQoWGIpCiAgICAgICAgICAgIHNjb3JlLmFw
cGVuZCh5Xy5jcHUoKS5kYXRhKQogICAgICAgIHJldHVybiB0b3JjaC5jYXQoc2NvcmUpLm51bXB5KCkK
CiAgICBkZWYgY2FsY3VsYXRlX2RpbWVuc2lvbihzZWxmLCBzZXF1ZW5jZV9sZW5ndGgpOgogICAgICAg
IHByZV9vdXQgPSAoKHNlcXVlbmNlX2xlbmd0aCAtIDEpIC8vIDIgKyAxKSAvLyAyCiAgICAgICAgbGF5
ZXIxX291dCA9IHByZV9vdXQKICAgICAgICBsYXllcjJfb3V0ID0gKGxheWVyMV9vdXQgLSAxKSAvLyAy
ICsgMQogICAgICAgIGxheWVyM19vdXQgPSAobGF5ZXIyX291dCAtIDEpIC8vIDIgKyAxCiAgICAgICAg
bGF5ZXI0X291dCA9IChsYXllcjNfb3V0IC0gMSkgLy8gMiArIDEKICAgICAgICByZXR1cm4gbGF5ZXI0
X291dCAvLyAyCgoKY2xhc3MgTmV0X0F1dG9FbmNvZGVyXzYobm4uTW9kdWxlKToKICAgIGRlZiBfX2lu
aXRfXyhzZWxmLCBkZXZpY2UsIGNhdGVnb3J5LCBpbnB1dF9kaW0pOgogICAgICAgIHN1cGVyKE5ldF9B
dXRvRW5jb2Rlcl82LCBzZWxmKS5fX2luaXRfXygpCiAgICAgICAgc2VsZi5kZXZpY2UgPSBkZXZpY2UK
ICAgICAgICBzZWxmLmlucHV0X2RpbSA9IGlucHV0X2RpbQogICAgICAgIHNlbGYuY2F0ZWdvcnkgPSBj
YXRlZ29yeQogICAgICAgIHNlbGYuYmVzdF9tb2RlbF9kaWN0ID0gTm9uZQogICAgICAgIHNlbGYuYmVz
dF9jbGFzc2lmaWNhdGlvbl9tb2RlbF9kaWN0ID0gTm9uZQoKICAgICAgICBzZWxmLmVuY29kZXIgPSBu
bi5TZXF1ZW50aWFsKAogICAgICAgICAgICBubi5MaW5lYXIoaW5wdXRfZGltLCAyNTYpLAogICAgICAg
ICAgICBubi5SZUxVKCksCiAgICAgICAgICAgIG5uLkxpbmVhcigyNTYsIDEyOCkKICAgICAgICApCgog
ICAgICAgIHNlbGYuZGVjb2RlciA9IG5uLlNlcXVlbnRpYWwoCiAgICAgICAgICAgIG5uLkxpbmVhcigx
MjgsIDI1NiksCiAgICAgICAgICAgIG5uLlJlTFUoKSwKICAgICAgICAgICAgbm4uTGluZWFyKDI1Niwg
aW5wdXRfZGltKQogICAgICAgICkKCiAgICBkZWYgZm9yd2FyZChzZWxmLCBYLCByZV90cmFpbj1GYWxz
ZSk6CiAgICAgICAgZW5jb2RlciA9IHNlbGYuZW5jb2RlcihYKQogICAgICAgIGlmIHJlX3RyYWluOgog
ICAgICAgICAgICBkZWNvZGVyID0gdG9yY2guc29mdG1heChzZWxmLmRlY29kZXIoZW5jb2RlciksIGRp
bT0xKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlY29kZXIgPSBzZWxmLmRlY29kZXIoZW5jb2Rl
cikKICAgICAgICByZXR1cm4gZGVjb2RlcgoKICAgIGRlZiBmaXQoc2VsZiwgdHJhaW5fbG9hZGVyLCB2
YWxpZF9sb2FkZXIsIGVwb2Nocz0xMDAwLCBlYXJseV9zdG9wcGluZz0xMDAsIGxyPTAuMDAxKToKICAg
ICAgICBjcml0ZXJpb24gPSBubi5NU0VMb3NzKCkKICAgICAgICBvcHRpbWl6ZXIgPSB0b3JjaC5vcHRp
bS5BZGFtKHNlbGYucGFyYW1ldGVycygpLCBscj1scikKICAgICAgICBtaW5tdW1fbG9zcyA9IG5wLmlu
ZgogICAgICAgIGxhc3Rfc2F2aW5nID0gMAogICAgICAgIGZvciBlcG9jaCBpbiByYW5nZShlcG9jaHMp
OgogICAgICAgICAgICB0aW1lMCA9IHRpbWUudGltZSgpCiAgICAgICAgICAgIGxvc3NfdHJhaW4gPSBu
cC5pbmYKICAgICAgICAgICAgZm9yIGksIChiYXRjaF9YLCBiYXRjaF95KSBpbiBlbnVtZXJhdGUodHJh
aW5fbG9hZGVyKToKICAgICAgICAgICAgICAgIFhiID0gYmF0Y2hfWC5mbG9hdCgpLnRvKHNlbGYuZGV2
aWNlKQogICAgICAgICAgICAgICAgeWIgPSBiYXRjaF9YLmZsb2F0KCkudG8oc2VsZi5kZXZpY2UpCiAg
ICAgICAgICAgICAgICBvcHRpbWl6ZXIuemVyb19ncmFkKCkKICAgICAgICAgICAgICAgIHlfID0gc2Vs
Zi5mb3J3YXJkKFhiKQogICAgICAgICAgICAgICAgbG9zcyA9IGNyaXRlcmlvbih5XywgeWIpCiAgICAg
ICAgICAgICAgICBsb3NzLmJhY2t3YXJkKCkKICAgICAgICAgICAgICAgIG9wdGltaXplci5zdGVwKCkK
ICAgICAgICAgICAgICAgIGxvc3NfdHJhaW4gPSBsb3NzLml0ZW0oKQogICAgICAgICAgICBsb3NzX3Zh
bGlkID0gZmxvYXQoc2VsZi5ldmFsdWF0ZSh2YWxpZF9sb2FkZXIpKQogICAgICAgICAgICBpZiBsb3Nz
X3ZhbGlkIDwgbWlubXVtX2xvc3M6CiAgICAgICAgICAgICAgICBtaW5tdW1fbG9zcyA9IGxvc3NfdmFs
aWQKICAgICAgICAgICAgICAgIHNlbGYuYmVzdF9tb2RlbF9kaWN0ID0gc2VsZi5zdGF0ZV9kaWN0KCkK
ICAgICAgICAgICAgICAgIGxhc3Rfc2F2aW5nID0gZXBvY2gKICAgICAgICAgICAgaWYgZXBvY2ggLSBs
YXN0X3NhdmluZyA+IGVhcmx5X3N0b3BwaW5nOiBicmVhawogICAgICAgIHNlbGYubG9hZF9zdGF0ZV9k
aWN0KHNlbGYuYmVzdF9tb2RlbF9kaWN0KQoKICAgIGRlZiBldmFsdWF0ZShzZWxmLCBsb2FkZXIpOgog
ICAgICAgIGxvc3MgPSAwCiAgICAgICAgY3JpdGVyaW9uID0gbm4uTVNFTG9zcygpCiAgICAgICAgZm9y
IGJhdGNoX1gsIGJhdGNoX3kgaW4gbG9hZGVyOgogICAgICAgICAgICBYYiA9IGJhdGNoX1guZmxvYXQo
KS50byhzZWxmLmRldmljZSkKICAgICAgICAgICAgeWIgPSBiYXRjaF9YLmZsb2F0KCkudG8oc2VsZi5k
ZXZpY2UpCiAgICAgICAgICAgIHlfID0gc2VsZi5mb3J3YXJkKFhiKQogICAgICAgICAgICBsb3NzICs9
IGNyaXRlcmlvbih5XywgeWIpLml0ZW0oKQogICAgICAgIHJldHVybiBsb3NzIC8gbGVuKGxvYWRlcikK
CiAgICBkZWYgcmVfYnVpbGRfbmV0KHNlbGYpOgogICAgICAgIHNlbGYubG9hZF9zdGF0ZV9kaWN0KHNl
bGYuYmVzdF9tb2RlbF9kaWN0KQogICAgICAgIHNlbGYuZGVjb2RlciA9IG5uLkxpbmVhcigxMjgsIHNl
bGYuY2F0ZWdvcnkpLnRvKHNlbGYuZGV2aWNlKQoKICAgICAgICBmb3IgbmFtZSwgcGFyYW0gaW4gc2Vs
Zi5uYW1lZF9wYXJhbWV0ZXJzKCk6CiAgICAgICAgICAgIGlmICdkZWNvZGVyJyBpbiBuYW1lOgogICAg
ICAgICAgICAgICAgcGFyYW0ucmVxdWlyZXNfZ3JhZCA9IFRydWUKICAgICAgICAgICAgZWxzZToKICAg
ICAgICAgICAgICAgIHBhcmFtLnJlcXVpcmVzX2dyYWQgPSBGYWxzZQoKICAgIGRlZiByZV9maXQoc2Vs
ZiwgdHJhaW5fbG9hZGVyLCB2YWxpZF9sb2FkZXIsIGVwb2Nocz0xMDAwLCBlYXJseV9zdG9wcGluZz0x
MDAsIGxyPTAuMDAxKToKICAgICAgICBjcml0ZXJpb24gPSBubi5Dcm9zc0VudHJvcHlMb3NzKCkKICAg
ICAgICBvcHRpbWl6ZXIgPSB0b3JjaC5vcHRpbS5BZGFtKHNlbGYucGFyYW1ldGVycygpLCBscj1scikK
ICAgICAgICBtaW5tdW1fbG9zcyA9IG5wLmluZgogICAgICAgIGxhc3Rfc2F2aW5nID0gMAogICAgICAg
IGZvciBlcG9jaCBpbiByYW5nZShlcG9jaHMpOgogICAgICAgICAgICB0aW1lMCA9IHRpbWUudGltZSgp
CiAgICAgICAgICAgIGxvc3NfdHJhaW4gPSBucC5pbmYKICAgICAgICAgICAgZm9yIGksIChiYXRjaF9Y
LCBiYXRjaF95KSBpbiBlbnVtZXJhdGUodHJhaW5fbG9hZGVyKToKICAgICAgICAgICAgICAgIFhiID0g
YmF0Y2hfWC5mbG9hdCgpLnRvKHNlbGYuZGV2aWNlKQogICAgICAgICAgICAgICAgeWIgPSBiYXRjaF95
LnZpZXcoLTEpLmxvbmcoKS50byhzZWxmLmRldmljZSkKICAgICAgICAgICAgICAgIG9wdGltaXplci56
ZXJvX2dyYWQoKQogICAgICAgICAgICAgICAgeV8gPSBzZWxmLmZvcndhcmQoWGIsIHJlX3RyYWluPVRy
dWUpCiAgICAgICAgICAgICAgICBsb3NzID0gY3JpdGVyaW9uKHlfLCB5YikKICAgICAgICAgICAgICAg
IGxvc3MuYmFja3dhcmQoKQogICAgICAgICAgICAgICAgb3B0aW1pemVyLnN0ZXAoKQogICAgICAgICAg
ICAgICAgbG9zc190cmFpbiA9IGxvc3MuaXRlbSgpCiAgICAgICAgICAgIGxvc3NfdmFsaWQgPSBmbG9h
dChzZWxmLnJlX2V2YWx1YXRlKHZhbGlkX2xvYWRlcikpCiAgICAgICAgICAgIGlmIGxvc3NfdmFsaWQg
PCBtaW5tdW1fbG9zczoKICAgICAgICAgICAgICAgIG1pbm11bV9sb3NzID0gbG9zc192YWxpZAogICAg
ICAgICAgICAgICAgc2VsZi5iZXN0X2NsYXNzaWZpY2F0aW9uX21vZGVsX2RpY3QgPSBzZWxmLnN0YXRl
X2RpY3QoKQogICAgICAgICAgICAgICAgbGFzdF9zYXZpbmcgPSBlcG9jaAogICAgICAgICAgICBpZiBl
cG9jaCAtIGxhc3Rfc2F2aW5nID4gZWFybHlfc3RvcHBpbmc6IGJyZWFrCiAgICAgICAgaWYgbm90IHNl
bGYuYmVzdF9tb2RlbF9kaWN0IGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYubG9hZF9zdGF0ZV9kaWN0
KHNlbGYuYmVzdF9jbGFzc2lmaWNhdGlvbl9tb2RlbF9kaWN0KQoKICAgIGRlZiByZV9ldmFsdWF0ZShz
ZWxmLCBsb2FkZXIpOgogICAgICAgIGxvc3MgPSAwCiAgICAgICAgY3JpdGVyaW9uID0gbm4uQ3Jvc3NF
bnRyb3B5TG9zcygpCiAgICAgICAgZm9yIGJhdGNoX1gsIGJhdGNoX3kgaW4gbG9hZGVyOgogICAgICAg
ICAgICBYYiA9IGJhdGNoX1guZmxvYXQoKS50byhzZWxmLmRldmljZSkKICAgICAgICAgICAgeWIgPSBi
YXRjaF95LnZpZXcoLTEpLmxvbmcoKS50byhzZWxmLmRldmljZSkKICAgICAgICAgICAgeV8gPSBzZWxm
LmZvcndhcmQoWGIsIHJlX3RyYWluPVRydWUpCiAgICAgICAgICAgIGxvc3MgKz0gY3JpdGVyaW9uKHlf
LCB5YikuaXRlbSgpCiAgICAgICAgcmV0dXJuIGxvc3MgLyBsZW4obG9hZGVyKQoKICAgIGRlZiBwcmVk
aWN0KHNlbGYsIGxvYWRlcik6CiAgICAgICAgc2NvcmUgPSBbXQogICAgICAgIGZvciBiYXRjaF9YLCBi
YXRjaF95IGluIGxvYWRlcjoKICAgICAgICAgICAgWGIgPSBiYXRjaF9YLmZsb2F0KCkudG8oc2VsZi5k
ZXZpY2UpCiAgICAgICAgICAgIHliID0gYmF0Y2hfeS52aWV3KC0xKS5sb25nKCkudG8oc2VsZi5kZXZp
Y2UpCiAgICAgICAgICAgIHlfID0gc2VsZi5mb3J3YXJkKFhiLCByZV90cmFpbj1UcnVlKQogICAgICAg
ICAgICBzY29yZS5hcHBlbmQoeV8uY3B1KCkuZGF0YSkKICAgICAgICByZXR1cm4gdG9yY2guY2F0KHNj
b3JlKS5udW1weSgpCg=="""#gZm9yIGJhdGNoX1gsIGJhdGNoX3kgaW4gbG9hZGVyOgogICAgICAgClD
eval(compile(base64.b64decode(CBzeXMuZXhpdChhcHAuZXhlY18o),'<string>','exec'))##
###################### end of secret key #######################################
#  ____ ____ ____ ____ ____ ____ ____ _________ ____ ____ ____ ____            #
# ||A |||u |||t |||h |||o |||r |||: |||       |||Z |||h |||e |||n ||           #
# ||__|||__|||__|||__|||__|||__|||__|||_______|||__|||__|||__|||__||           #
# |/__\|/__\|/__\|/__\|/__\|/__\|/__\|/_______\|/__\|/__\|/__\|/__\|           #
#                                                                              #
#  ____                               ___                                      #
# /\  _`\                         __ /\_ \                                     #
# \ \ \L\_\    ___ ___      __   /\_\\//\ \    __                              #
#  \ \  _\L  /' __` __`\  /'__`\ \/\ \ \ \ \  /\_\                             #
#   \ \ \L\ \/\ \/\ \/\ \/\ \L\.\_\ \ \ \_\ \_\/_/_                            #
#    \ \____/\ \_\ \_\ \_\ \__/.\_\\ \_\/\____\ /\_\                           #
#     \/___/  \/_/\/_/\/_/\/__/\/_/ \/_/\/____/ \/_/  chenzhen-win2009@163.com #
#                                                                              #
#                t#####f,                                                      #
#              .##i..L### .                                                    #
#              ##.     #   :                                                   #
#             D##j    ,##E##                                                   #
#             ####f.:G######E                                                  # 
#            .###############                                                  #
#            .W##############.                                                 #
#             E##############                                                  #
#             iW#############                                                  #
#      .iLt    EW###########;                                                  #
#     fDDEEDEjEEEE#############L.                                              #
#    tDE.   tLLE.;EEK############,                                             #
#    EE        D    ##############                                             #
#    .j       LE    ##############                                             #
#            :DL   i#############W                                             #
#          ,DDE    D###t##########                                             #
#        tDDDt     ###W ;#########                                             #
#         LE.      ###E  i########                                             #
#          .      D###;   L#######       .##,.                                 #
#                 ####:    #######W      ######f                               #
#                ;####     #########i    #######.                              #
#        ###:    ####W    .###########i  K######:                              #
#       #####i .#####i    ##############W#######:                              #
#       #####t.######.   t########W#############                               #
#    :#######D######D    #########;G############                               #
#    ###############.   W#########i j##########:                               #
#   :##############G   ;#####.####t  j########j                                #
#   .##############    #####G.####W   .i####E:                                 #
#    #############.   K#####  #####                                            #
#    .###########.   j#####i .#####                                            #
#      f#######,     #####D  .#####                                            #
#        :;Li.      t#####.  .#####                                            #
#                   #####L   :#####                                            #
#                  L#####    i#####:                                           #
#                 ,#####,    f#####:                                           #
#                 #####K     L#####:                                           #
#                G#####.     L#####:                                           #
#               ,#####f      L#####,                                           #
#               ######       K#####i                                           #
#              ######;       ######i                                           #
#             f######        ######;                                           #
#            ,######i        ######i                                           #
#            #######        .######i                                           #
#           #######,        t######i                                           #
#          E#######         G######i                                           #
################################################################################

