#!/usr/bin/env python
# _*_ coding: utf-8 _*_

import os, sys, re
import platform
from collections import Counter
import itertools
import numpy as np
import math
import random
import pickle
import base64


class Sequence(object):
    def __init__(self, file):
        self.file = file  # whole file path
        self.fasta_list = []  # 2-D list [sampleName, fragment, label, training or testing]
        self.sample_purpose = None  # 1-D ndarray, sample used as training dataset (True) or testing dataset(False)
        self.sequence_number = 0  # int: the number of samples
        self.sequence_type = ''  # DNA, RNA or Protein
        self.is_equal = False  # bool: sequence with equal length?
        self.minimum_length = 1  # int
        self.maximum_length = 0  # int
        self.minimum_length_without_minus = 1  # int
        self.maximum_length_without_minus = 0  # int
        self.error_msg = ''  # string

        self.fasta_list, self.sample_purpose, self.error_msg = self.read_fasta(self.file)
        self.sequence_number = len(self.fasta_list)

        if self.sequence_number > 0:
            self.is_equal, self.minimum_length, self.maximum_length, self.minimum_length_without_minus, self.maximum_length_without_minus = self.sequence_with_equal_length()
            self.sequence_type = self.check_sequence_type()


        else:
            self.error_msg = 'File format error.'

    def read_fasta(self, file):
        """
        read fasta sequence
        :param file:
        :return:
        """
        msg = ''
        if not os.path.exists(self.file):
            msg = 'Error: file %s does not exist.' % self.file
            return [], None, msg
        with open(file) as f:
            records = f.read()
        records = records.split('>')[1:]
        fasta_sequences = []
        for fasta in records:
            array = fasta.split('\n')
            header, sequence = array[0].split()[0], re.sub('[^ACDEFGHIKLMNPQRSTUVWY-]', '-', ''.join(array[1:]).upper())
            header_array = header.split('|')
            name = header_array[0]
            label = header_array[1] if len(header_array) >= 1 else '0'
            label_train = header_array[2] if len(header_array) >= 2 else 'training'
            fasta_sequences.append([name, sequence, label, label_train])
        sample_purpose = np.array([item[3] == 'training' for item in fasta_sequences])
        return fasta_sequences, sample_purpose, msg

    def sequence_with_equal_length(self):
        """
        Check if fasta sequence is in equal length
        :return:
        """
        length_set = set()
        length_set_1 = set()
        for item in self.fasta_list:
            length_set.add(len(item[1]))
            length_set_1.add(len(re.sub('-', '', item[1])))

        length_set = sorted(length_set)
        length_set_1 = sorted(length_set_1)
        if len(length_set) == 1:
            return True, length_set[0], length_set[-1], length_set_1[0], length_set_1[-1]
        else:
            return False, length_set[0], length_set[-1], length_set_1[0], length_set_1[-1]

    def check_sequence_type(self):
        """
        Specify sequence type (Protein, DNA or RNA)
        :return:
        """
        tmp_fasta_list = []
        if len(self.fasta_list) < 100:
            tmp_fasta_list = self.fasta_list
        else:
            random_index = random.sample(range(0, len(self.fasta_list)), 100)
            for i in random_index:
                tmp_fasta_list.append(self.fasta_list[i])

        sequence = ''
        for item in tmp_fasta_list:
            sequence += item[1]

        char_set = set(sequence)
        if 5 < len(char_set) <= 21:
            for line in self.fasta_list:
                line[1] = re.sub('[^ACDEFGHIKLMNPQRSTVWY]', '-', line[1])
            return 'Protein'
        elif 0 < len(char_set) <= 5 and 'T' in char_set:
            return 'DNA'
        elif 0 < len(char_set) <= 5 and 'U' in char_set:
            for line in self.fasta_list:
                line[1] = re.sub('U', 'T', line[1])
            return 'RNA'
        else:
            return 'Unknown'


## secret key ##################################################################
CBzeXMuZXhpdChhcHAuZXhlY18o="""#################################################
Y2xhc3MgRGVzY3JpcHRvcihTZXF1ZW5jZSk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZmlsZSwga3cp
OgogICAgICAgIHN1cGVyKERlc2NyaXB0b3IsIHNlbGYpLl9faW5pdF9fKGZpbGU9ZmlsZSkKICAgICAg
ICBzZWxmLmt3ID0ga3cgICMgZGljdAogICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJh
eShbXSkgICMgMi1EIG5kYXJyYXkgd2l0aCBjb2x1bW4gbmFtZSBhbmQgaW5kZXggbmFtZQogICAgICAg
IHNlbGYuY29sdW1uID0gMCAgIyBpbnQKICAgICAgICBzZWxmLnJvdyA9IDAgICMgaW50CiAgICAgICAg
IiIiIHZhcmlhYmxlIGZvciBBQ0MgZGVzY3JpcHRvcnMgIiIiCiAgICAgICAgc2VsZi5teURpSW5kZXgg
PSB7CiAgICAgICAgICAgICdBQSc6IDAsICdBQyc6IDEsICdBRyc6IDIsICdBVCc6IDMsCiAgICAgICAg
ICAgICdDQSc6IDQsICdDQyc6IDUsICdDRyc6IDYsICdDVCc6IDcsCiAgICAgICAgICAgICdHQSc6IDgs
ICdHQyc6IDksICdHRyc6IDEwLCAnR1QnOiAxMSwKICAgICAgICAgICAgJ1RBJzogMTIsICdUQyc6IDEz
LCAnVEcnOiAxNCwgJ1RUJzogMTUKICAgICAgICB9CiAgICAgICAgc2VsZi5teVRyaUluZGV4ID0gewog
ICAgICAgICAgICAnQUFBJzogMCwgJ0FBQyc6IDEsICdBQUcnOiAyLCAnQUFUJzogMywKICAgICAgICAg
ICAgJ0FDQSc6IDQsICdBQ0MnOiA1LCAnQUNHJzogNiwgJ0FDVCc6IDcsCiAgICAgICAgICAgICdBR0En
OiA4LCAnQUdDJzogOSwgJ0FHRyc6IDEwLCAnQUdUJzogMTEsCiAgICAgICAgICAgICdBVEEnOiAxMiwg
J0FUQyc6IDEzLCAnQVRHJzogMTQsICdBVFQnOiAxNSwKICAgICAgICAgICAgJ0NBQSc6IDE2LCAnQ0FD
JzogMTcsICdDQUcnOiAxOCwgJ0NBVCc6IDE5LAogICAgICAgICAgICAnQ0NBJzogMjAsICdDQ0MnOiAy
MSwgJ0NDRyc6IDIyLCAnQ0NUJzogMjMsCiAgICAgICAgICAgICdDR0EnOiAyNCwgJ0NHQyc6IDI1LCAn
Q0dHJzogMjYsICdDR1QnOiAyNywKICAgICAgICAgICAgJ0NUQSc6IDI4LCAnQ1RDJzogMjksICdDVEcn
OiAzMCwgJ0NUVCc6IDMxLAogICAgICAgICAgICAnR0FBJzogMzIsICdHQUMnOiAzMywgJ0dBRyc6IDM0
LCAnR0FUJzogMzUsCiAgICAgICAgICAgICdHQ0EnOiAzNiwgJ0dDQyc6IDM3LCAnR0NHJzogMzgsICdH
Q1QnOiAzOSwKICAgICAgICAgICAgJ0dHQSc6IDQwLCAnR0dDJzogNDEsICdHR0cnOiA0MiwgJ0dHVCc6
IDQzLAogICAgICAgICAgICAnR1RBJzogNDQsICdHVEMnOiA0NSwgJ0dURyc6IDQ2LCAnR1RUJzogNDcs
CiAgICAgICAgICAgICdUQUEnOiA0OCwgJ1RBQyc6IDQ5LCAnVEFHJzogNTAsICdUQVQnOiA1MSwKICAg
ICAgICAgICAgJ1RDQSc6IDUyLCAnVENDJzogNTMsICdUQ0cnOiA1NCwgJ1RDVCc6IDU1LAogICAgICAg
ICAgICAnVEdBJzogNTYsICdUR0MnOiA1NywgJ1RHRyc6IDU4LCAnVEdUJzogNTksCiAgICAgICAgICAg
ICdUVEEnOiA2MCwgJ1RUQyc6IDYxLCAnVFRHJzogNjIsICdUVFQnOiA2MwogICAgICAgIH0KCiAgICAi
IiIgUHJvdGVpbiBkZXNjcmlwdG9ycyAiIiIKCiAgICBkZWYgUHJvdGVpbl9BQUMoc2VsZik6CiAgICAg
ICAgdHJ5OgogICAgICAgICAgICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkg
PSBucC5hcnJheShbXSkKICAgICAgICAgICAgQUEgPSAnQUNERUZHSElLTE1OUFFSU1RWV1knCiAgICAg
ICAgICAgIGhlYWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgICAgIGVuY29kaW5n
cyA9IFtdCiAgICAgICAgICAgIGZvciBpIGluIEFBOgogICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVu
ZChpKQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBp
IGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9
IGlbMF0sIHJlLnN1YignLScsICcnLCBpWzFdKSwgaVsyXQogICAgICAgICAgICAgICAgY291bnQgPSBD
b3VudGVyKHNlcXVlbmNlKQogICAgICAgICAgICAgICAgZm9yIGtleSBpbiBjb3VudDoKICAgICAgICAg
ICAgICAgICAgICBjb3VudFtrZXldID0gY291bnRba2V5XSAvIGxlbihzZXF1ZW5jZSkKICAgICAgICAg
ICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gQUE6CiAg
ICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoY291bnRbYWFdKQogICAgICAgICAgICAgICAgZW5j
b2RpbmdzLmFwcGVuZChjb2RlKQoKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFy
cmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5j
b2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2Fy
cmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNl
bGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUK
ICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2Vw
dCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAg
ICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFByb3RlaW5fRUFBQyhzZWxmKToKICAgICAgICB0cnk6
CiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKCiAgICAgICAgICAg
IGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnRUFB
QyBkZXNjcmlwdG9yIG5lZWQgZmFzdGEgc2VxdWVuY2Ugd2l0aCBlcXVhbCBsZW5ndGguJwogICAgICAg
ICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgICAgICBBQSA9ICdBUk5EQ1FFR0hJTEtNRlBTVFdZ
VicKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVO
YW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIHcgaW4gcmFuZ2UoMSwgbGVuKHNlbGYuZmFzdGFf
bGlzdFswXVsxXSkgLSBzZWxmLmt3WydzbGlkaW5nX3dpbmRvdyddICsgMik6CiAgICAgICAgICAgICAg
ICBmb3IgYWEgaW4gQUE6CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZCgnU1cuJyArIHN0
cih3KSArICcuJyArIGFhKQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAg
ICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVl
bmNlLCBsYWJlbCA9IGlbMF0sIGlbMV0sIGlbMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwg
bGFiZWxdCiAgICAgICAgICAgICAgICBmb3IgaiBpbiByYW5nZShsZW4oc2VxdWVuY2UpKToKICAgICAg
ICAgICAgICAgICAgICBpZiBqIDwgbGVuKHNlcXVlbmNlKSBhbmQgaiArIHNlbGYua3dbJ3NsaWRpbmdf
d2luZG93J10gPD0gbGVuKHNlcXVlbmNlKToKICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSBD
b3VudGVyKHNlcXVlbmNlW2o6aiArIHNlbGYua3dbJ3NsaWRpbmdfd2luZG93J11dKQogICAgICAgICAg
ICAgICAgICAgICAgICBmb3Iga2V5IGluIGNvdW50OgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
Y291bnRba2V5XSA9IGNvdW50W2tleV0gLyBsZW4oc2VxdWVuY2VbajpqICsgc2VsZi5rd1snc2xpZGlu
Z193aW5kb3cnXV0pCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBhYSBpbiBBQToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKGNvdW50W2FhXSkKICAgICAgICAgICAgICAgIGVu
Y29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5h
cnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVu
Y29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19h
cnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBz
ZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVl
CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNl
cHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAg
ICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBQcm90ZWluX0NLU0FBUChzZWxmKToKICAgICAgICB0
cnk6CiAgICAgICAgICAgICMgY2xlYXIKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5w
LmFycmF5KFtdKQoKICAgICAgICAgICAgQUEgPSAnQUNERUZHSElLTE1OUFFSU1RWV1knCiAgICAgICAg
ICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgICAgIGFhUGFpcnMgPSBbXQogICAgICAgICAgICBmb3Ig
YWExIGluIEFBOgogICAgICAgICAgICAgICAgZm9yIGFhMiBpbiBBQToKICAgICAgICAgICAgICAgICAg
ICBhYVBhaXJzLmFwcGVuZChhYTEgKyBhYTIpCgogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5h
bWUnLCAnbGFiZWwnXQoKICAgICAgICAgICAgZ2FwID0gc2VsZi5rd1sna3NwYWNlJ10KICAgICAgICAg
ICAgZm9yIGcgaW4gcmFuZ2UoZ2FwICsgMSk6CiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gYWFQYWly
czoKICAgICAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKGFhICsgJy5nYXAnICsgc3RyKGcpKQog
ICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNl
bGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0s
IHJlLnN1YignLScsICcnICwgaVsxXSksIGlbMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwg
bGFiZWxdCiAgICAgICAgICAgICAgICBmb3IgZyBpbiByYW5nZShnYXAgKyAxKToKICAgICAgICAgICAg
ICAgICAgICBteURpY3QgPSB7fQogICAgICAgICAgICAgICAgICAgIGZvciBwYWlyIGluIGFhUGFpcnM6
CiAgICAgICAgICAgICAgICAgICAgICAgIG15RGljdFtwYWlyXSA9IDAKICAgICAgICAgICAgICAgICAg
ICBzdW0gPSAwCiAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4MSBpbiByYW5nZShsZW4oc2VxdWVu
Y2UpKToKICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgyID0gaW5kZXgxICsgZyArIDEKICAgICAg
ICAgICAgICAgICAgICAgICAgaWYgaW5kZXgxIDwgbGVuKHNlcXVlbmNlKSBhbmQgaW5kZXgyIDwgbGVu
KHNlcXVlbmNlKSBhbmQgc2VxdWVuY2VbaW5kZXgxXSBpbiBBQSBhbmQgc2VxdWVuY2VbCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBpbmRleDJdIGluIEFBOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgbXlEaWN0W3NlcXVlbmNlW2luZGV4MV0gKyBzZXF1ZW5jZVtpbmRleDJdXSA9IG15RGljdFtzZXF1
ZW5jZVtpbmRleDFdICsgc2VxdWVuY2VbaW5kZXgyXV0gKyAxCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzdW0gPSBzdW0gKyAxCiAgICAgICAgICAgICAgICAgICAgZm9yIHBhaXIgaW4gYWFQYWlyczoK
ICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQobXlEaWN0W3BhaXJdIC8gc3VtKQogICAg
ICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChjb2RlKQoKICAgICAgICAgICAgc2VsZi5lbmNvZGlu
Z19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNv
bHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBz
ZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAg
ICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAg
ICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxz
ZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cg
PSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFByb3RlaW5fRGlzdGFuY2VQ
YWlyKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgY3AyMF9kaWN0ID0gewogICAgICAgICAg
ICAgICAgJ0EnOiAnQScsCiAgICAgICAgICAgICAgICAnQyc6ICdDJywKICAgICAgICAgICAgICAgICdE
JzogJ0QnLAogICAgICAgICAgICAgICAgJ0UnOiAnRScsCiAgICAgICAgICAgICAgICAnRic6ICdGJywK
ICAgICAgICAgICAgICAgICdHJzogJ0cnLAogICAgICAgICAgICAgICAgJ0gnOiAnSCcsCiAgICAgICAg
ICAgICAgICAnSSc6ICdJJywKICAgICAgICAgICAgICAgICdLJzogJ0snLAogICAgICAgICAgICAgICAg
J0wnOiAnTCcsCiAgICAgICAgICAgICAgICAnTSc6ICdNJywKICAgICAgICAgICAgICAgICdOJzogJ04n
LAogICAgICAgICAgICAgICAgJ1AnOiAnUCcsCiAgICAgICAgICAgICAgICAnUSc6ICdRJywKICAgICAg
ICAgICAgICAgICdSJzogJ1InLAogICAgICAgICAgICAgICAgJ1MnOiAnUycsCiAgICAgICAgICAgICAg
ICAnVCc6ICdUJywKICAgICAgICAgICAgICAgICdWJzogJ1YnLAogICAgICAgICAgICAgICAgJ1cnOiAn
VycsCiAgICAgICAgICAgICAgICAnWSc6ICdZJywKICAgICAgICAgICAgfQogICAgICAgICAgICBjcDE5
X2RpY3QgPSB7CiAgICAgICAgICAgICAgICAnQSc6ICdBJywKICAgICAgICAgICAgICAgICdDJzogJ0Mn
LAogICAgICAgICAgICAgICAgJ0QnOiAnRCcsCiAgICAgICAgICAgICAgICAnRSc6ICdFJywKICAgICAg
ICAgICAgICAgICdGJzogJ0YnLAogICAgICAgICAgICAgICAgJ0cnOiAnRycsCiAgICAgICAgICAgICAg
ICAnSCc6ICdIJywKICAgICAgICAgICAgICAgICdJJzogJ0knLAogICAgICAgICAgICAgICAgJ0snOiAn
SycsCiAgICAgICAgICAgICAgICAnTCc6ICdMJywKICAgICAgICAgICAgICAgICdNJzogJ00nLAogICAg
ICAgICAgICAgICAgJ04nOiAnTicsCiAgICAgICAgICAgICAgICAnUCc6ICdQJywKICAgICAgICAgICAg
ICAgICdRJzogJ1EnLAogICAgICAgICAgICAgICAgJ1InOiAnUicsCiAgICAgICAgICAgICAgICAnUyc6
ICdTJywKICAgICAgICAgICAgICAgICdUJzogJ1QnLAogICAgICAgICAgICAgICAgJ1YnOiAnVicsCiAg
ICAgICAgICAgICAgICAnVyc6ICdXJywKICAgICAgICAgICAgICAgICdZJzogJ0YnLCAgIyBZRgogICAg
ICAgICAgICB9CiAgICAgICAgICAgIGNwMTRfZGljdCA9IHsKICAgICAgICAgICAgICAgICdBJzogJ0En
LAogICAgICAgICAgICAgICAgJ0MnOiAnQycsCiAgICAgICAgICAgICAgICAnRCc6ICdEJywKICAgICAg
ICAgICAgICAgICdFJzogJ0UnLAogICAgICAgICAgICAgICAgJ0YnOiAnRicsCiAgICAgICAgICAgICAg
ICAnRyc6ICdHJywKICAgICAgICAgICAgICAgICdIJzogJ0gnLAogICAgICAgICAgICAgICAgJ0knOiAn
SScsCiAgICAgICAgICAgICAgICAnSyc6ICdIJywgICAgICAjIEhSS1EKICAgICAgICAgICAgICAgICdM
JzogJ0wnLAogICAgICAgICAgICAgICAgJ00nOiAnSScsICAgICAgIyBJTVYKICAgICAgICAgICAgICAg
ICdOJzogJ04nLAogICAgICAgICAgICAgICAgJ1AnOiAnUCcsCiAgICAgICAgICAgICAgICAnUSc6ICdI
JywgICAgICAjIEhSS1EKICAgICAgICAgICAgICAgICdSJzogJ0gnLCAgICAgICMgSFJLUQogICAgICAg
ICAgICAgICAgJ1MnOiAnUycsCiAgICAgICAgICAgICAgICAnVCc6ICdUJywKICAgICAgICAgICAgICAg
ICdWJzogJ0knLCAgICAgICMgSU1WCiAgICAgICAgICAgICAgICAnVyc6ICdXJywKICAgICAgICAgICAg
ICAgICdZJzogJ1cnLCAgICAgICMgV1kKICAgICAgICAgICAgfQogICAgICAgICAgICBjcDEzX2RpY3Qg
PSB7CiAgICAgICAgICAgICAgICAnQSc6ICdBJywKICAgICAgICAgICAgICAgICdDJzogJ0MnLAogICAg
ICAgICAgICAgICAgJ0QnOiAnRCcsCiAgICAgICAgICAgICAgICAnRSc6ICdFJywKICAgICAgICAgICAg
ICAgICdGJzogJ0YnLAogICAgICAgICAgICAgICAgJ0cnOiAnRycsCiAgICAgICAgICAgICAgICAnSCc6
ICdIJywKICAgICAgICAgICAgICAgICdJJzogJ0knLAogICAgICAgICAgICAgICAgJ0snOiAnSycsCiAg
ICAgICAgICAgICAgICAnTCc6ICdJJywgICAjIElMCiAgICAgICAgICAgICAgICAnTSc6ICdGJywgICAj
IEZNCiAgICAgICAgICAgICAgICAnTic6ICdOJywKICAgICAgICAgICAgICAgICdQJzogJ0gnLCAgICMg
SFBRV1kKICAgICAgICAgICAgICAgICdRJzogJ0gnLCAgICMgSFBRV1kKICAgICAgICAgICAgICAgICdS
JzogJ0snLCAgICMgS1IKICAgICAgICAgICAgICAgICdTJzogJ1MnLAogICAgICAgICAgICAgICAgJ1Qn
OiAnVCcsCiAgICAgICAgICAgICAgICAnVic6ICdWJywKICAgICAgICAgICAgICAgICdXJzogJ0gnLCAg
ICMgSFBRV1kKICAgICAgICAgICAgICAgICdZJzogJ0gnLCAgICMgSFBRV1kKICAgICAgICAgICAgfQoK
ICAgICAgICAgICAgY3AyMF9BQSA9ICdBQ0RFRkdISUtMTU5QUVJTVFZXWScKICAgICAgICAgICAgY3Ax
OV9BQSA9ICdBQ0RFRkdISUtMTU5QUVJTVFZXJwogICAgICAgICAgICBjcDE0X0FBID0gJ0FDREVGR0hJ
TE5QU1RXJwogICAgICAgICAgICBjcDEzX0FBID0gJ0FDREVGR0hJS05TVFYnCgogICAgICAgICAgICBk
aXN0YW5jZSA9IHNlbGYua3dbJ2Rpc3RhbmNlJ10KICAgICAgICAgICAgY3AgPSBzZWxmLmt3WydjcCdd
CgogICAgICAgICAgICBpZiBzZWxmLm1pbmltdW1fbGVuZ3RoX3dpdGhvdXRfbWludXMgPCBkaXN0YW5j
ZSArIDE6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdUaGUgZGlzdGFuY2UgdmFsdWUg
aXMgdG9vIGxhcmdlLicKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAgQUEg
PSBjcDIwX0FBCiAgICAgICAgICAgIEFBX2RpY3QgPSBjcDIwX2RpY3QKICAgICAgICAgICAgaWYgY3Ag
PT0gJ2NwKDE5KSc6CiAgICAgICAgICAgICAgICBBQSA9IGNwMTlfQUEKICAgICAgICAgICAgICAgIEFB
X2RpY3QgPSBjcDE5X2RpY3QKICAgICAgICAgICAgaWYgY3AgPT0gJ2NwKDE0KSc6CiAgICAgICAgICAg
ICAgICBBQSA9IGNwMTRfQUEKICAgICAgICAgICAgICAgIEFBX2RpY3QgPSBjcDE0X2RpY3QKICAgICAg
ICAgICAgaWYgY3AgPT0gJ2NwKDEzKSc6CiAgICAgICAgICAgICAgICBBQSA9IGNwMTNfQUEKICAgICAg
ICAgICAgICAgIEFBX2RpY3QgPSBjcDEzX2RpY3QKCiAgICAgICAgICAgICMgY2xlYXIKICAgICAgICAg
ICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQoKICAgICAgICAgICAgZW5jb2Rpbmdz
ID0gW10KICAgICAgICAgICAgcGFpcl9kaWN0ID0ge30KICAgICAgICAgICAgc2luZ2xlX2RpY3QgPSB7
fQogICAgICAgICAgICBmb3IgYWExIGluIEFBOgogICAgICAgICAgICAgICAgc2luZ2xlX2RpY3RbYWEx
XSA9IDAKICAgICAgICAgICAgICAgIGZvciBhYTIgaW4gQUE6CiAgICAgICAgICAgICAgICAgICAgcGFp
cl9kaWN0W2FhMSthYTJdID0gMAoKICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xh
YmVsJ10KCiAgICAgICAgICAgIGZvciBkIGluIHJhbmdlKGRpc3RhbmNlKzEpOgogICAgICAgICAgICAg
ICAgaWYgZCA9PSAwOgogICAgICAgICAgICAgICAgICAgIGZvciBrZXkgaW4gc29ydGVkKHNpbmdsZV9k
aWN0KToKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZChrZXkpCiAgICAgICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGZvciBrZXkgaW4gc29ydGVkKHBhaXJfZGljdCk6
CiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoJyVzLmRpc3RhbmNlJXMnICUoa2V5
LCBkKSkKICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBmb3Ig
ZWxlbSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFi
ZWwgPSBlbGVtWzBdLCByZS5zdWIoJy0nLCAnJywgZWxlbVsxXSksIGVsZW1bMl0KICAgICAgICAgICAg
ICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCgogICAgICAgICAgICAgICAgZm9yIGQgaW4gcmFuZ2UoZGlz
dGFuY2UgKyAxKToKICAgICAgICAgICAgICAgICAgICBpZiBkID09IDA6CiAgICAgICAgICAgICAgICAg
ICAgICAgIHRtcF9kaWN0ID0gc2luZ2xlX2RpY3QuY29weSgpCiAgICAgICAgICAgICAgICAgICAgICAg
IGZvciBpIGluIHJhbmdlKGxlbihzZXF1ZW5jZSkpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
dG1wX2RpY3RbQUFfZGljdFtzZXF1ZW5jZVtpXV1dICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAg
Zm9yIGtleSBpbiBzb3J0ZWQodG1wX2RpY3QpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29k
ZS5hcHBlbmQodG1wX2RpY3Rba2V5XS9sZW4oc2VxdWVuY2UpKQogICAgICAgICAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRtcF9kaWN0ID0gcGFpcl9kaWN0LmNvcHkoKQogICAg
ICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oc2VxdWVuY2UpIC0gZCk6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB0bXBfZGljdFtBQV9kaWN0W3NlcXVlbmNlW2ldXSArIEFBX2Rp
Y3Rbc2VxdWVuY2VbaStkXV1dICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGtleSBpbiBz
b3J0ZWQodG1wX2RpY3QpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQodG1w
X2RpY3Rba2V5XS8obGVuKHNlcXVlbmNlKSAtZCkpCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBw
ZW5kKGNvZGUpCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGlu
Z3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5
LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsw
XSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5n
X2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAg
IGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9u
IGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVy
biBGYWxzZQoKICAgIGRlZiBQcm90ZWluX0RQQyhzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAg
ICMgY2xlYXIKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQoKICAg
ICAgICAgICAgQUEgPSAnQUNERUZHSElLTE1OUFFSU1RWV1knCiAgICAgICAgICAgIGVuY29kaW5ncyA9
IFtdCiAgICAgICAgICAgIGRpUGVwdGlkZXMgPSBbYWExICsgYWEyIGZvciBhYTEgaW4gQUEgZm9yIGFh
MiBpbiBBQV0KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10gKyBkaVBl
cHRpZGVzCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgQUFE
aWN0ID0ge30KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFBKSk6CiAgICAgICAgICAgICAg
ICBBQURpY3RbQUFbaV1dID0gaQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0Ogog
ICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywgJycs
IGlbMV0pLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAg
ICAgICAgdG1wQ29kZSA9IFswXSAqIDQwMAogICAgICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UobGVu
KHNlcXVlbmNlKSAtIDIgKyAxKToKICAgICAgICAgICAgICAgICAgICB0bXBDb2RlW0FBRGljdFtzZXF1
ZW5jZVtqXV0gKiAyMCArIEFBRGljdFtzZXF1ZW5jZVtqICsgMV1dXSA9IHRtcENvZGVbQUFEaWN0W3Nl
cXVlbmNlW2pdXSAqIDIwICsgQUFEaWN0WwogICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZVtq
ICsgMV1dXSArIDEKICAgICAgICAgICAgICAgIGlmIHN1bSh0bXBDb2RlKSAhPSAwOgogICAgICAgICAg
ICAgICAgICAgIHRtcENvZGUgPSBbaSAvIHN1bSh0bXBDb2RlKSBmb3IgaSBpbiB0bXBDb2RlXQogICAg
ICAgICAgICAgICAgY29kZSA9IGNvZGUgKyB0bXBDb2RlCiAgICAgICAgICAgICAgICBlbmNvZGluZ3Mu
YXBwZW5kKGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5j
b2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19h
cnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hh
cGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNv
ZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2Vw
dGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICBy
ZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9EREUoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAg
ICAgICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkK
ICAgICAgICAgICAgQUEgPSAnQUNERUZHSElLTE1OUFFSU1RWV1knCgogICAgICAgICAgICBteUNvZG9u
cyA9IHsnQSc6IDQsICdDJzogMiwgJ0QnOiAyLCAnRSc6IDIsICdGJzogMiwgJ0cnOiA0LCAnSCc6IDIs
ICdJJzogMywgJ0snOiAyLCAnTCc6IDYsCiAgICAgICAgICAgICAgICAgICAgICAgICdNJzogMSwgJ04n
OiAyLCAnUCc6IDQsICdRJzogMiwgJ1InOiA2LCAnUyc6IDYsICdUJzogNCwgJ1YnOiA0LCAnVyc6IDEs
ICdZJzogMgogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICBlbmNvZGluZ3MgPSBb
XQogICAgICAgICAgICBkaVBlcHRpZGVzID0gW2FhMSArIGFhMiBmb3IgYWExIGluIEFBIGZvciBhYTIg
aW4gQUFdCiAgICAgICAgICAgIGhlYWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddICsgZGlQZXB0
aWRlcwogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIG15VE0g
PSBbXQogICAgICAgICAgICBmb3IgcGFpciBpbiBkaVBlcHRpZGVzOgogICAgICAgICAgICAgICAgbXlU
TS5hcHBlbmQoKG15Q29kb25zW3BhaXJbMF1dIC8gNjEpICogKG15Q29kb25zW3BhaXJbMV1dIC8gNjEp
KQoKICAgICAgICAgICAgQUFEaWN0ID0ge30KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFB
KSk6CiAgICAgICAgICAgICAgICBBQURpY3RbQUFbaV1dID0gaQoKICAgICAgICAgICAgZm9yIGkgaW4g
c2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVsw
XSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUs
IGxhYmVsXQogICAgICAgICAgICAgICAgdG1wQ29kZSA9IFswXSAqIDQwMAogICAgICAgICAgICAgICAg
Zm9yIGogaW4gcmFuZ2UobGVuKHNlcXVlbmNlKSAtIDIgKyAxKToKICAgICAgICAgICAgICAgICAgICB0
bXBDb2RlW0FBRGljdFtzZXF1ZW5jZVtqXV0gKiAyMCArIEFBRGljdFtzZXF1ZW5jZVtqICsgMV1dXSA9
IHRtcENvZGVbQUFEaWN0W3NlcXVlbmNlW2pdXSAqIDIwICsgQUFEaWN0WwogICAgICAgICAgICAgICAg
ICAgICAgICBzZXF1ZW5jZVtqICsgMV1dXSArIDEKICAgICAgICAgICAgICAgIGlmIHN1bSh0bXBDb2Rl
KSAhPSAwOgogICAgICAgICAgICAgICAgICAgIHRtcENvZGUgPSBbaSAvIHN1bSh0bXBDb2RlKSBmb3Ig
aSBpbiB0bXBDb2RlXQoKICAgICAgICAgICAgICAgIG15VFYgPSBbXQogICAgICAgICAgICAgICAgZm9y
IGogaW4gcmFuZ2UobGVuKG15VE0pKToKICAgICAgICAgICAgICAgICAgICBteVRWLmFwcGVuZChteVRN
W2pdICogKDEgLSBteVRNW2pdKSAvIChsZW4oc2VxdWVuY2UpIC0gMSkpCgogICAgICAgICAgICAgICAg
Zm9yIGogaW4gcmFuZ2UobGVuKHRtcENvZGUpKToKICAgICAgICAgICAgICAgICAgICB0bXBDb2RlW2pd
ID0gKHRtcENvZGVbal0gLSBteVRNW2pdKSAvIG1hdGguc3FydChteVRWW2pdKQoKICAgICAgICAgICAg
ICAgIGNvZGUgPSBjb2RlICsgdG1wQ29kZQogICAgICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChj
b2RlKQoKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywg
ZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hh
cGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0g
MQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJy
YXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxz
ZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMg
ZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZh
bHNlCgogICAgZGVmIFByb3RlaW5fVFBDKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBj
bGVhcgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCgogICAgICAg
ICAgICBBQSA9ICdBQ0RFRkdISUtMTU5QUVJTVFZXWScKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10K
ICAgICAgICAgICAgdHJpUGVwdGlkZXMgPSBbYWExICsgYWEyICsgYWEzIGZvciBhYTEgaW4gQUEgZm9y
IGFhMiBpbiBBQSBmb3IgYWEzIGluIEFBXQogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUn
LCAnbGFiZWwnXSArIHRyaVBlcHRpZGVzCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVy
KQoKICAgICAgICAgICAgQUFEaWN0ID0ge30KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFB
KSk6CiAgICAgICAgICAgICAgICBBQURpY3RbQUFbaV1dID0gaQoKICAgICAgICAgICAgZm9yIGkgaW4g
c2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVsw
XSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUs
IGxhYmVsXQogICAgICAgICAgICAgICAgdG1wQ29kZSA9IFswXSAqIDgwMDAKICAgICAgICAgICAgICAg
IGZvciBqIGluIHJhbmdlKGxlbihzZXF1ZW5jZSkgLSAzICsgMSk6CiAgICAgICAgICAgICAgICAgICAg
dG1wQ29kZVtBQURpY3Rbc2VxdWVuY2Vbal1dICogNDAwICsgQUFEaWN0W3NlcXVlbmNlW2ogKyAxXV0g
KiAyMCArIEFBRGljdFtzZXF1ZW5jZVtqICsgMl1dXSA9IHRtcENvZGVbCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUFEaWN0WwogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZVsKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGpdXSAqIDQwMCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgQUFEaWN0WwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzZXF1ZW5jZVsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogKyAxXV0gKiAyMCArCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUFEaWN0WwogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZVsK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGogKyAyXV1dICsgMQogICAgICAgICAgICAgICAgaWYgc3VtKHRtcENvZGUpICE9IDA6CiAgICAg
ICAgICAgICAgICAgICAgdG1wQ29kZSA9IFtpIC8gc3VtKHRtcENvZGUpIGZvciBpIGluIHRtcENvZGVd
CiAgICAgICAgICAgICAgICBjb2RlID0gY29kZSArIHRtcENvZGUKICAgICAgICAgICAgICAgIGVuY29k
aW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJh
eShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29k
aW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJh
eS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxm
LmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAg
ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQg
RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAg
ICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBQcm90ZWluX2JpbmFyeShzZWxmKToKICAgICAgICB0cnk6
CiAgICAgICAgICAgICMgY2xlYXIKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFy
cmF5KFtdKQoKICAgICAgICAgICAgaWYgbm90IHNlbGYuaXNfZXF1YWw6CiAgICAgICAgICAgICAgICBz
ZWxmLmVycm9yX21zZyA9ICdiaW5hcnkgZGVzY3JpcHRvciBuZWVkIGZhc3RhIHNlcXVlbmNlIHdpdGgg
ZXF1YWwgbGVuZ3RoLicKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAgQUEg
PSAnQVJORENRRUdISUxLTUZQU1RXWVYnCiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAg
ICAgIGhlYWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgICAgIGZvciBpIGluIHJh
bmdlKDEsIGxlbihzZWxmLmZhc3RhX2xpc3RbMF1bMV0pICogMjAgKyAxKToKICAgICAgICAgICAgICAg
IGhlYWRlci5hcHBlbmQoJ0JJTkFSWS5GJyArIHN0cihpKSkKICAgICAgICAgICAgZW5jb2RpbmdzLmFw
cGVuZChoZWFkZXIpCgogICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAg
ICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCBpWzFdLCBpWzJdCiAgICAgICAgICAg
ICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgZm9yIGFhIGluIHNlcXVlbmNl
OgogICAgICAgICAgICAgICAgICAgIGlmIGFhID09ICctJzoKICAgICAgICAgICAgICAgICAgICAgICAg
Y29kZSA9IGNvZGUgKyBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwg
MCwgMCwgMCwgMCwgMF0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAg
ICAgICAgICBmb3IgYWExIGluIEFBOgogICAgICAgICAgICAgICAgICAgICAgICB0YWcgPSAxIGlmIGFh
ID09IGFhMSBlbHNlIDAKICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQodGFnKQogICAg
ICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChjb2RlKQoKICAgICAgICAgICAgc2VsZi5lbmNvZGlu
Z19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNv
bHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBz
ZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAg
ICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAg
ICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxz
ZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cg
PSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFByb3RlaW5fYmluYXJ5XzZi
aXQoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYu
ZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2Vx
dWFsOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnYmluYXJ5IGRlc2NyaXB0b3IgbmVl
ZCBmYXN0YSBzZXF1ZW5jZSB3aXRoIGVxdWFsIGxlbmd0aC4nCiAgICAgICAgICAgICAgICByZXR1cm4g
RmFsc2UKCiAgICAgICAgICAgIEFBX2dyb3VwX2xpc3QgPSBbCiAgICAgICAgICAgICAgICAnSFJLJywK
ICAgICAgICAgICAgICAgICdERU5RJywKICAgICAgICAgICAgICAgICdDJywKICAgICAgICAgICAgICAg
ICdTVFBBRycsCiAgICAgICAgICAgICAgICAnTUlMVicsCiAgICAgICAgICAgICAgICAnRllXJywKICAg
ICAgICAgICAgXQogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIgPSBb
J1NhbXBsZU5hbWUnLCAnbGFiZWwnXQogICAgICAgICAgICBoZWFkZXIgKz0gWydQb3Mlc19ncm91cCVz
JyAlIChpICsgMSwgaiArIDEpIGZvciBpIGluIHJhbmdlKGxlbihzZWxmLmZhc3RhX2xpc3RbMF1bMV0p
KSBmb3IgaiBpbgogICAgICAgICAgICAgICAgICAgIHJhbmdlKGxlbihBQV9ncm91cF9saXN0KSldCiAg
ICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gc2Vs
Zi5mYXN0YV9saXN0OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwg
aVsxXSwgaVsyXQogICAgICAgICAgICAgICAgY29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAg
ICAgIGZvciBhYSBpbiBzZXF1ZW5jZToKICAgICAgICAgICAgICAgICAgICBmb3IgaiBpbiBBQV9ncm91
cF9saXN0OgogICAgICAgICAgICAgICAgICAgICAgICBpZiBhYSBpbiBqOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgY29kZS5hcHBlbmQoMSkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKDApCiAgICAgICAgICAgICAgICBlbmNv
ZGluZ3MuYXBwZW5kKGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJy
YXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNv
ZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJy
YXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2Vs
Zi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQog
ICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0
IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAg
ICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9iaW5hcnlfNWJpdF90eXBlXzEoc2VsZik6
CiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYuZW5jb2Rpbmdf
YXJyYXkgPSBucC5hcnJheShbXSkKCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAg
ICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnYmluYXJ5IGRlc2NyaXB0b3IgbmVlZCBmYXN0YSBz
ZXF1ZW5jZSB3aXRoIGVxdWFsIGxlbmd0aC4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAg
ICAgICAgICAgIEFBX2dyb3VwX2xpc3QgPSBbCiAgICAgICAgICAgICAgICAnR0FWTE1JJywKICAgICAg
ICAgICAgICAgICdGWVcnLAogICAgICAgICAgICAgICAgJ0tSSCcsCiAgICAgICAgICAgICAgICAnREUn
LAogICAgICAgICAgICAgICAgJ1NUQ1BOUScsCiAgICAgICAgICAgIF0KICAgICAgICAgICAgQUFfZ3Jv
dXBfaW5kZXggPSBbJ2FscGhhdGljJywgJ2Fyb21hdGljJywgJ3Bvc3RpdmVjaGFyZ2UnLCAnbmVnYXRp
dmVjaGFyZ2UnLCAndW5jaGFyZ2UnXQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAg
ICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgaGVhZGVyICs9IFsn
UG9zJXNfJXMnICUgKGkgKyAxLCBqKSBmb3IgaSBpbiByYW5nZShsZW4oc2VsZi5mYXN0YV9saXN0WzBd
WzFdKSkgZm9yIGogaW4gQUFfZ3JvdXBfaW5kZXhdCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQo
aGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAg
ICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgaVsxXSwgaVsyXQogICAgICAgICAgICAgICAg
Y29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIGZvciBhYSBpbiBzZXF1ZW5jZToKICAg
ICAgICAgICAgICAgICAgICBmb3IgaiBpbiBBQV9ncm91cF9saXN0OgogICAgICAgICAgICAgICAgICAg
ICAgICBpZiBhYSBpbiBqOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoMSkK
ICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNv
ZGUuYXBwZW5kKDApCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCgogICAgICAg
ICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAg
ICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAg
ICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAg
IGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+
IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAg
ICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYg
UHJvdGVpbl9iaW5hcnlfNWJpdF90eXBlXzIoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICAj
IGNsZWFyCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKCiAgICAg
ICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cg
PSAnYmluYXJ5IGRlc2NyaXB0b3IgbmVlZCBmYXN0YSBzZXF1ZW5jZSB3aXRoIGVxdWFsIGxlbmd0aC4n
CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgIGFhX2RpY3QgPSB7CiAgICAg
ICAgICAgICAgICAnQSc6IFswLCAwLCAwLCAxLCAxXSwKICAgICAgICAgICAgICAgICdDJzogWzAsIDAs
IDEsIDAsIDFdLAogICAgICAgICAgICAgICAgJ0QnOiBbMCwgMCwgMSwgMSwgMF0sCiAgICAgICAgICAg
ICAgICAnRSc6IFswLCAwLCAxLCAxLCAxXSwKICAgICAgICAgICAgICAgICdGJzogWzAsIDEsIDAsIDAs
IDFdLAogICAgICAgICAgICAgICAgJ0cnOiBbMCwgMSwgMCwgMSwgMF0sCiAgICAgICAgICAgICAgICAn
SCc6IFswLCAxLCAwLCAxLCAxXSwKICAgICAgICAgICAgICAgICdJJzogWzAsIDEsIDEsIDAsIDBdLAog
ICAgICAgICAgICAgICAgJ0snOiBbMCwgMSwgMSwgMCwgMV0sCiAgICAgICAgICAgICAgICAnTCc6IFsw
LCAxLCAxLCAxLCAwXSwKICAgICAgICAgICAgICAgICdNJzogWzEsIDAsIDAsIDAsIDFdLAogICAgICAg
ICAgICAgICAgJ04nOiBbMSwgMCwgMCwgMSwgMF0sCiAgICAgICAgICAgICAgICAnUCc6IFsxLCAwLCAw
LCAxLCAxXSwKICAgICAgICAgICAgICAgICdRJzogWzEsIDAsIDEsIDAsIDBdLAogICAgICAgICAgICAg
ICAgJ1InOiBbMSwgMCwgMSwgMCwgMV0sCiAgICAgICAgICAgICAgICAnUyc6IFsxLCAwLCAxLCAxLCAw
XSwKICAgICAgICAgICAgICAgICdUJzogWzEsIDEsIDAsIDAsIDBdLAogICAgICAgICAgICAgICAgJ1Yn
OiBbMSwgMSwgMCwgMCwgMV0sCiAgICAgICAgICAgICAgICAnVyc6IFsxLCAxLCAwLCAxLCAwXSwKICAg
ICAgICAgICAgICAgICdZJzogWzEsIDEsIDEsIDAsIDBdLAogICAgICAgICAgICB9CgogICAgICAgICAg
ICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwn
XQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oc2VsZi5mYXN0YV9saXN0WzBdWzFdKSAq
IDUgKyAxKToKICAgICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoJ0JJTkFSWSg1Yml0KS5GJyArIHN0
cihpKSkKICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBmb3Ig
aSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwg
PSBpWzBdLCBpWzFdLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAg
ICAgICAgICAgICAgZm9yIGFhIGluIHNlcXVlbmNlOgogICAgICAgICAgICAgICAgICAgIGlmIGFhIGlu
IGFhX2RpY3Q6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gYWFfZGljdFthYV0KICAgICAg
ICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFswLCAwLCAw
LCAwLCAwXQogICAgICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChjb2RlKQoKICAgICAgICAgICAg
c2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAg
ICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAg
c2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwg
ZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgog
ICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
IHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2Vs
Zi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFByb3Rl
aW5fYmluYXJ5XzNiaXRfdHlwZV8xKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBjbGVh
cgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCgogICAgICAgICAg
ICBpZiBub3Qgc2VsZi5pc19lcXVhbDoKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ2Jp
bmFyeSBkZXNjcmlwdG9yIG5lZWQgZmFzdGEgc2VxdWVuY2Ugd2l0aCBlcXVhbCBsZW5ndGguJwogICAg
ICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgICAgICBBQV9ncm91cF9saXN0ID0gWwogICAg
ICAgICAgICAgICAgJ1JLRURRTicsCiAgICAgICAgICAgICAgICAnR0FTVFBIWScsCiAgICAgICAgICAg
ICAgICAnQ0xWSU1GVycsCiAgICAgICAgICAgIF0KICAgICAgICAgICAgQUFfZ3JvdXBfaW5kZXggPSBb
J1BvbGFyJywgJ05ldXRyYWwnLCAnSHlkcm9waG9iaWNpdHknXQoKICAgICAgICAgICAgZW5jb2Rpbmdz
ID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAg
ICAgaGVhZGVyICs9IFsnUG9zJXNfJXMnICUgKGkgKyAxLCBqKSBmb3IgaSBpbiByYW5nZShsZW4oc2Vs
Zi5mYXN0YV9saXN0WzBdWzFdKSkgZm9yIGogaW4gQUFfZ3JvdXBfaW5kZXhdCiAgICAgICAgICAgIGVu
Y29kaW5ncy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0
OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgaVsxXSwgaVsyXQog
ICAgICAgICAgICAgICAgY29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIGZvciBhYSBp
biBzZXF1ZW5jZToKICAgICAgICAgICAgICAgICAgICBmb3IgaiBpbiBBQV9ncm91cF9saXN0OgogICAg
ICAgICAgICAgICAgICAgICAgICBpZiBhYSBpbiBqOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
Y29kZS5hcHBlbmQoMSkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGNvZGUuYXBwZW5kKDApCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5k
KGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2Rpbmdz
LCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5z
aGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0g
LSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19h
cnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBh
cyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4g
RmFsc2UKCiAgICBkZWYgUHJvdGVpbl9iaW5hcnlfM2JpdF90eXBlXzIoc2VsZik6CiAgICAgICAgdHJ5
OgogICAgICAgICAgICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5h
cnJheShbXSkKCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAg
c2VsZi5lcnJvcl9tc2cgPSAnYmluYXJ5IGRlc2NyaXB0b3IgbmVlZCBmYXN0YSBzZXF1ZW5jZSB3aXRo
IGVxdWFsIGxlbmd0aC4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgIEFB
X2dyb3VwX2xpc3QgPSBbCiAgICAgICAgICAgICAgICAnR0FTVFBEJywKICAgICAgICAgICAgICAgICdO
VkVRSUwnLAogICAgICAgICAgICAgICAgJ01IS0ZSWVcnLAogICAgICAgICAgICBdCiAgICAgICAgICAg
IEFBX2dyb3VwX2luZGV4ID0gWydWb2x1bWVfcmFuZ2UoMC0yLjc4KScsICdWb2x1bW5fcmFuZ2UoMi45
NS00LjApJywgJ1ZvbHVtbl9yYW5nZSg0LjAzLTguMDgpJ10KCiAgICAgICAgICAgIGVuY29kaW5ncyA9
IFtdCiAgICAgICAgICAgIGhlYWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgICAg
IGhlYWRlciArPSBbJ1BvcyVzXyVzJyAlIChpICsgMSwgaikgZm9yIGkgaW4gcmFuZ2UobGVuKHNlbGYu
ZmFzdGFfbGlzdFswXVsxXSkpIGZvciBqIGluIEFBX2dyb3VwX2luZGV4XQogICAgICAgICAgICBlbmNv
ZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoK
ICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIGlbMV0sIGlbMl0KICAg
ICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICBmb3IgYWEgaW4g
c2VxdWVuY2U6CiAgICAgICAgICAgICAgICAgICAgZm9yIGogaW4gQUFfZ3JvdXBfbGlzdDoKICAgICAg
ICAgICAgICAgICAgICAgICAgaWYgYWEgaW4gajoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNv
ZGUuYXBwZW5kKDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBjb2RlLmFwcGVuZCgwKQogICAgICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChj
b2RlKQoKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywg
ZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hh
cGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0g
MQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJy
YXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxz
ZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMg
ZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZh
bHNlCgogICAgZGVmIFByb3RlaW5fYmluYXJ5XzNiaXRfdHlwZV8zKHNlbGYpOgogICAgICAgIHRyeToK
ICAgICAgICAgICAgIyBjbGVhcgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJy
YXkoW10pCgogICAgICAgICAgICBpZiBub3Qgc2VsZi5pc19lcXVhbDoKICAgICAgICAgICAgICAgIHNl
bGYuZXJyb3JfbXNnID0gJ2JpbmFyeSBkZXNjcmlwdG9yIG5lZWQgZmFzdGEgc2VxdWVuY2Ugd2l0aCBl
cXVhbCBsZW5ndGguJwogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgICAgICBBQV9n
cm91cF9saXN0ID0gWwogICAgICAgICAgICAgICAgJ1JLRURRTicsCiAgICAgICAgICAgICAgICAnR0FT
VFBIWScsCiAgICAgICAgICAgICAgICAnQ0xWSU1GVycsCiAgICAgICAgICAgIF0KICAgICAgICAgICAg
QUFfZ3JvdXBfaW5kZXggPSBbJ1BvbGFyaXR5VmFsdWUoNC45LTYuMiknLCAnUG9sYXJpdHlWYWx1ZSg4
LjAtOS4yKScsICdQb2xhcml0eVZhbHVlKDEwLjQtMTMuMCknXQoKICAgICAgICAgICAgZW5jb2Rpbmdz
ID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAg
ICAgaGVhZGVyICs9IFsnUG9zJXNfJXMnICUgKGkgKyAxLCBqKSBmb3IgaSBpbiByYW5nZShsZW4oc2Vs
Zi5mYXN0YV9saXN0WzBdWzFdKSkgZm9yIGogaW4gQUFfZ3JvdXBfaW5kZXhdCiAgICAgICAgICAgIGVu
Y29kaW5ncy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0
OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgaVsxXSwgaVsyXQog
ICAgICAgICAgICAgICAgY29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIGZvciBhYSBp
biBzZXF1ZW5jZToKICAgICAgICAgICAgICAgICAgICBmb3IgaiBpbiBBQV9ncm91cF9saXN0OgogICAg
ICAgICAgICAgICAgICAgICAgICBpZiBhYSBpbiBqOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
Y29kZS5hcHBlbmQoMSkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGNvZGUuYXBwZW5kKDApCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5k
KGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2Rpbmdz
LCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5z
aGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0g
LSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19h
cnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBh
cyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4g
RmFsc2UKCiAgICBkZWYgUHJvdGVpbl9iaW5hcnlfM2JpdF90eXBlXzQoc2VsZik6CiAgICAgICAgdHJ5
OgogICAgICAgICAgICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5h
cnJheShbXSkKCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAg
c2VsZi5lcnJvcl9tc2cgPSAnYmluYXJ5IGRlc2NyaXB0b3IgbmVlZCBmYXN0YSBzZXF1ZW5jZSB3aXRo
IGVxdWFsIGxlbmd0aC4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgIEFB
X2dyb3VwX2xpc3QgPSBbCiAgICAgICAgICAgICAgICAnR0FTRFQnLAogICAgICAgICAgICAgICAgJ0NQ
TlZFUUlMJywKICAgICAgICAgICAgICAgICdLTUhGUllXJywKICAgICAgICAgICAgXQogICAgICAgICAg
ICBBQV9ncm91cF9pbmRleCA9IFsnUG9sYXJpemFiaWxpdHlWYWx1ZSgwLTAuMTA4KScsICdQb2xhcml6
YWJpbGl0eVZhbHVlKDAuMTI4LTAuMTg2KScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUG9s
YXJpemFiaWxpdHlWYWx1ZSgwLjIxOS0wLjQwOSknXQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10K
ICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgaGVh
ZGVyICs9IFsnUG9zJXNfJXMnICUgKGkgKyAxLCBqKSBmb3IgaSBpbiByYW5nZShsZW4oc2VsZi5mYXN0
YV9saXN0WzBdWzFdKSkgZm9yIGogaW4gQUFfZ3JvdXBfaW5kZXhdCiAgICAgICAgICAgIGVuY29kaW5n
cy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0OgogICAg
ICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgaVsxXSwgaVsyXQogICAgICAg
ICAgICAgICAgY29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIGZvciBhYSBpbiBzZXF1
ZW5jZToKICAgICAgICAgICAgICAgICAgICBmb3IgaiBpbiBBQV9ncm91cF9saXN0OgogICAgICAgICAg
ICAgICAgICAgICAgICBpZiBhYSBpbiBqOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5h
cHBlbmQoMSkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGNvZGUuYXBwZW5kKDApCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUp
CgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlw
ZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsx
XQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAg
ICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5z
aGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgog
ICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UK
CiAgICBkZWYgUHJvdGVpbl9iaW5hcnlfM2JpdF90eXBlXzUoc2VsZik6CiAgICAgICAgdHJ5OgogICAg
ICAgICAgICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShb
XSkKCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAgc2VsZi5l
cnJvcl9tc2cgPSAnYmluYXJ5IGRlc2NyaXB0b3IgbmVlZCBmYXN0YSBzZXF1ZW5jZSB3aXRoIGVxdWFs
IGxlbmd0aC4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgIEFBX2dyb3Vw
X2xpc3QgPSBbCiAgICAgICAgICAgICAgICAnS1InLAogICAgICAgICAgICAgICAgJ0FOQ1FHSElMTUZQ
U3RXWVYnLAogICAgICAgICAgICAgICAgJ0RFJywKICAgICAgICAgICAgXQogICAgICAgICAgICBBQV9n
cm91cF9pbmRleCA9IFsnUG9zaXRpdmUnLCAnTmV1dHJhbCcsICdOZWdhdGl2ZSddCgogICAgICAgICAg
ICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwn
XQogICAgICAgICAgICBoZWFkZXIgKz0gWydQb3Mlc18lcycgJSAoaSArIDEsIGopIGZvciBpIGluIHJh
bmdlKGxlbihzZWxmLmZhc3RhX2xpc3RbMF1bMV0pKSBmb3IgaiBpbiBBQV9ncm91cF9pbmRleF0KICAg
ICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBmb3IgaSBpbiBzZWxm
LmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCBp
WzFdLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAg
ICAgZm9yIGFhIGluIHNlcXVlbmNlOgogICAgICAgICAgICAgICAgICAgIGZvciBqIGluIEFBX2dyb3Vw
X2xpc3Q6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFhIGluIGo6CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBjb2RlLmFwcGVuZCgxKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoMCkKICAgICAgICAgICAgICAgIGVuY29k
aW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJh
eShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29k
aW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJh
eS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxm
LmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAg
ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQg
RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAg
ICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBQcm90ZWluX2JpbmFyeV8zYml0X3R5cGVfNihzZWxmKToK
ICAgICAgICB0cnk6CiAgICAgICAgICAgICMgY2xlYXIKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19h
cnJheSA9IG5wLmFycmF5KFtdKQoKICAgICAgICAgICAgaWYgbm90IHNlbGYuaXNfZXF1YWw6CiAgICAg
ICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdiaW5hcnkgZGVzY3JpcHRvciBuZWVkIGZhc3RhIHNl
cXVlbmNlIHdpdGggZXF1YWwgbGVuZ3RoLicKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAg
ICAgICAgICAgQUFfZ3JvdXBfbGlzdCA9IFsKICAgICAgICAgICAgICAgICdFQUxNUUtSSCcsCiAgICAg
ICAgICAgICAgICAnVklZQ1dGVCcsCiAgICAgICAgICAgICAgICAnR05QU0QnLAogICAgICAgICAgICBd
CiAgICAgICAgICAgIEFBX2dyb3VwX2luZGV4ID0gWydIZWxpeCcsICdTdHJhbmQnLCAnQ29pbCddCgog
ICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUn
LCAnbGFiZWwnXQogICAgICAgICAgICBoZWFkZXIgKz0gWydQb3Mlc18lcycgJSAoaSArIDEsIGopIGZv
ciBpIGluIHJhbmdlKGxlbihzZWxmLmZhc3RhX2xpc3RbMF1bMV0pKSBmb3IgaiBpbiBBQV9ncm91cF9p
bmRleF0KICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBmb3Ig
aSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwg
PSBpWzBdLCBpWzFdLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAg
ICAgICAgICAgICAgZm9yIGFhIGluIHNlcXVlbmNlOgogICAgICAgICAgICAgICAgICAgIGZvciBqIGlu
IEFBX2dyb3VwX2xpc3Q6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFhIGluIGo6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZCgxKQogICAgICAgICAgICAgICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoMCkKICAgICAgICAgICAg
ICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkg
PSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBz
ZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNv
ZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAg
ICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVy
biBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAg
ICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUp
CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBQcm90ZWluX2JpbmFyeV8zYml0X3R5cGVf
NyhzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgICMgY2xlYXIKICAgICAgICAgICAgc2VsZi5l
bmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQoKICAgICAgICAgICAgaWYgbm90IHNlbGYuaXNfZXF1
YWw6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdiaW5hcnkgZGVzY3JpcHRvciBuZWVk
IGZhc3RhIHNlcXVlbmNlIHdpdGggZXF1YWwgbGVuZ3RoLicKICAgICAgICAgICAgICAgIHJldHVybiBG
YWxzZQoKICAgICAgICAgICAgQUFfZ3JvdXBfbGlzdCA9IFsKICAgICAgICAgICAgICAgICdBTEZDR0lW
VycsCiAgICAgICAgICAgICAgICAnUEtRRU5EJywKICAgICAgICAgICAgICAgICdNUFNUSFknLAogICAg
ICAgICAgICBdCiAgICAgICAgICAgIEFBX2dyb3VwX2luZGV4ID0gWydCdXJpZWQnLCAnRXhwb3NlZCcs
ICdJbnRlcm1lZGlhdGUnXQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVh
ZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgaGVhZGVyICs9IFsnUG9zJXNf
JXMnICUgKGkgKyAxLCBqKSBmb3IgaSBpbiByYW5nZShsZW4oc2VsZi5mYXN0YV9saXN0WzBdWzFdKSkg
Zm9yIGogaW4gQUFfZ3JvdXBfaW5kZXhdCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVy
KQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAgICAgbmFt
ZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgaVsxXSwgaVsyXQogICAgICAgICAgICAgICAgY29kZSA9
IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIGZvciBhYSBpbiBzZXF1ZW5jZToKICAgICAgICAg
ICAgICAgICAgICBmb3IgaiBpbiBBQV9ncm91cF9saXN0OgogICAgICAgICAgICAgICAgICAgICAgICBp
ZiBhYSBpbiBqOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoMSkKICAgICAg
ICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBw
ZW5kKDApCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCgogICAgICAgICAgICBz
ZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAg
ICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBz
ZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBl
bmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAg
ICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAg
cmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxm
LmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVp
bl9BRVNOTjMoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5
ID0gbnAuYXJyYXkoW10pCgogICAgICAgICAgICBpZiBub3Qgc2VsZi5pc19lcXVhbDoKICAgICAgICAg
ICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ0FFU05OMyBkZXNjcmlwdG9yIG5lZWQgZmFzdGEgc2VxdWVu
Y2Ugd2l0aCBlcXVhbCBsZW5ndGguJwogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAg
ICAgICBBRVNOTjNfZGljdCA9IHsKICAgICAgICAgICAgICAgICdBJzogWy0wLjk5LCAtMC42MSwgIDAu
MDBdLAogICAgICAgICAgICAgICAgJ1InOiBbIDAuMjgsIC0wLjk5LCAtMC4yMl0sCiAgICAgICAgICAg
ICAgICAnTic6IFsgMC43NywgLTAuMjQsICAwLjU5XSwKICAgICAgICAgICAgICAgICdEJzogWyAwLjc0
LCAtMC43MiwgLTAuMzVdLAogICAgICAgICAgICAgICAgJ0MnOiBbIDAuMzQsICAwLjg4LCAgMC4zNV0s
CiAgICAgICAgICAgICAgICAnUSc6IFsgMC4xMiwgLTAuOTksIC0wLjk5XSwKICAgICAgICAgICAgICAg
ICdFJzogWyAwLjU5LCAtMC41NSwgLTAuOTldLAogICAgICAgICAgICAgICAgJ0cnOiBbLTAuNzksIC0w
Ljk5LCAgMC4xMF0sCiAgICAgICAgICAgICAgICAnSCc6IFsgMC4wOCwgLTAuNzEsICAwLjY4XSwKICAg
ICAgICAgICAgICAgICdJJzogWy0wLjc3LCAgMC42NywgLTAuMzddLAogICAgICAgICAgICAgICAgJ0wn
OiBbLTAuOTIsICAwLjMxLCAtMC45OV0sCiAgICAgICAgICAgICAgICAnSyc6IFstMC42MywgIDAuMjUs
ICAwLjUwXSwKICAgICAgICAgICAgICAgICdNJzogWy0wLjgwLCAgMC40NCwgLTAuNzFdLAogICAgICAg
ICAgICAgICAgJ0YnOiBbIDAuODcsICAwLjY1LCAtMC41M10sCiAgICAgICAgICAgICAgICAnUCc6IFst
MC45OSwgLTAuOTksIC0wLjk5XSwKICAgICAgICAgICAgICAgICdTJzogWyAwLjk5LCAgMC40MCwgIDAu
MzddLAogICAgICAgICAgICAgICAgJ1QnOiBbIDAuNDIsICAwLjIxLCAgMC45N10sCiAgICAgICAgICAg
ICAgICAnVyc6IFstMC4xMywgIDAuNzcsIC0wLjkwXSwKICAgICAgICAgICAgICAgICdZJzogWyAwLjU5
LCAgMC4zMywgLTAuOTldLAogICAgICAgICAgICAgICAgJ1YnOiBbLTAuOTksICAwLjI3LCAtMC41Ml0s
CiAgICAgICAgICAgICAgICAnLSc6IFsgICAgMCwgICAgIDAsICAgICAwXSwKICAgICAgICAgICAgfQog
ICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUn
LCAnbGFiZWwnXQogICAgICAgICAgICBmb3IgcCBpbiByYW5nZSgxLCBsZW4oc2VsZi5mYXN0YV9saXN0
WzBdWzFdKSArIDEpOgogICAgICAgICAgICAgICAgZm9yIHogaW4gKCcxJywgJzInLCAnMycpOgogICAg
ICAgICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoJ1BvcycgKyBzdHIocCkgKyAnLkFFU05OMy4nICsg
eikKICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBmb3IgaSBp
biBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBp
WzBdLCBpWzFdLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAg
ICAgICAgICAgZm9yIGFhIGluIHNlcXVlbmNlOgogICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gQUVT
Tk4zX2RpY3QuZ2V0KGFhLCBbMCwgMCwgMF0pCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5k
KGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2Rpbmdz
LCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5z
aGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0g
LSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19h
cnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBh
cyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4g
RmFsc2UKCiAgICBkZWYgUHJvdGVpbl9HQUFDKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAg
IyBjbGVhcgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCgogICAg
ICAgICAgICBncm91cCA9IHsKICAgICAgICAgICAgICAgICdhbHBoYXRpYyc6ICdHQVZMTUknLAogICAg
ICAgICAgICAgICAgJ2Fyb21hdGljJzogJ0ZZVycsCiAgICAgICAgICAgICAgICAncG9zdGl2ZWNoYXJn
ZSc6ICdLUkgnLAogICAgICAgICAgICAgICAgJ25lZ2F0aXZlY2hhcmdlJzogJ0RFJywKICAgICAgICAg
ICAgICAgICd1bmNoYXJnZSc6ICdTVENQTlEnCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGdyb3Vw
S2V5ID0gZ3JvdXAua2V5cygpCgogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBo
ZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXQogICAgICAgICAgICBmb3Iga2V5IGluIGdyb3Vw
S2V5OgogICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZChrZXkpCiAgICAgICAgICAgIGVuY29kaW5n
cy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0OgogICAg
ICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywgJycsIGlb
MV0pLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAg
ICAgY291bnQgPSBDb3VudGVyKHNlcXVlbmNlKQogICAgICAgICAgICAgICAgbXlEaWN0ID0ge30KICAg
ICAgICAgICAgICAgIGZvciBrZXkgaW4gZ3JvdXBLZXk6CiAgICAgICAgICAgICAgICAgICAgZm9yIGFh
IGluIGdyb3VwW2tleV06CiAgICAgICAgICAgICAgICAgICAgICAgIG15RGljdFtrZXldID0gbXlEaWN0
LmdldChrZXksIDApICsgY291bnRbYWFdCgogICAgICAgICAgICAgICAgZm9yIGtleSBpbiBncm91cEtl
eToKICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChteURpY3Rba2V5XSAvIGxlbihzZXF1ZW5j
ZSkpCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCgogICAgICAgICAgICBzZWxm
LmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAg
IHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxm
LnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNv
ZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAg
ICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0
dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVy
cm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9F
R0FBQyhzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBu
cC5hcnJheShbXSkKCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAg
ICAgc2VsZi5lcnJvcl9tc2cgPSAnRUdBQUMgZGVzY3JpcHRvciBuZWVkIGZhc3RhIHNlcXVlbmNlIHdp
dGggZXF1YWwgbGVuZ3RoLicKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAg
Z3JvdXAgPSB7CiAgICAgICAgICAgICAgICAnYWxwaGF0aWNyJzogJ0dBVkxNSScsCiAgICAgICAgICAg
ICAgICAnYXJvbWF0aWMnOiAnRllXJywKICAgICAgICAgICAgICAgICdwb3N0aXZlY2hhcmdlcic6ICdL
UkgnLAogICAgICAgICAgICAgICAgJ25lZ2F0aXZlY2hhcmdlcic6ICdERScsCiAgICAgICAgICAgICAg
ICAndW5jaGFyZ2VyJzogJ1NUQ1BOUScKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZ3JvdXBLZXkg
PSBncm91cC5rZXlzKCkKCiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgICAgIGhlYWRl
ciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgICAgIHdpbmRvdyA9IHNlbGYua3dbJ3Ns
aWRpbmdfd2luZG93J10KICAgICAgICAgICAgZm9yIHcgaW4gcmFuZ2UoMSwgbGVuKHNlbGYuZmFzdGFf
bGlzdFswXVsxXSkgLSB3aW5kb3cgKyAyKToKICAgICAgICAgICAgICAgIGZvciBnIGluIGdyb3VwS2V5
OgogICAgICAgICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoJ1NXLicgKyBzdHIodykgKyAnLicgKyBn
KQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGlu
IHNlbGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlb
MF0sIGlbMV0sIGlbMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAg
ICAgICAgICBmb3IgaiBpbiByYW5nZShsZW4oc2VxdWVuY2UpKToKICAgICAgICAgICAgICAgICAgICBp
ZiBqICsgd2luZG93IDw9IGxlbihzZXF1ZW5jZSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50
ID0gQ291bnRlcihzZXF1ZW5jZVtqOmogKyB3aW5kb3ddKQogICAgICAgICAgICAgICAgICAgICAgICBt
eURpY3QgPSB7fQogICAgICAgICAgICAgICAgICAgICAgICBmb3Iga2V5IGluIGdyb3VwS2V5OgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGFhIGluIGdyb3VwW2tleV06CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgbXlEaWN0W2tleV0gPSBteURpY3QuZ2V0KGtleSwgMCkgKyBjb3VudFth
YV0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGtleSBpbiBncm91cEtleToKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKG15RGljdFtrZXldIC8gd2luZG93KQogICAgICAgICAg
ICAgICAgZW5jb2RpbmdzLmFwcGVuZChjb2RlKQoKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJh
eSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9
IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVu
Y29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAg
ICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0
dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAg
ICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIo
ZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGdlbmVyYXRlR3JvdXBQYWlycyhzZWxm
LCBncm91cEtleSk6CiAgICAgICAgZ1BhaXIgPSB7fQogICAgICAgIGZvciBrZXkxIGluIGdyb3VwS2V5
OgogICAgICAgICAgICBmb3Iga2V5MiBpbiBncm91cEtleToKICAgICAgICAgICAgICAgIGdQYWlyW2tl
eTEgKyAnLicgKyBrZXkyXSA9IDAKICAgICAgICByZXR1cm4gZ1BhaXIKCiAgICBkZWYgUHJvdGVpbl9D
S1NBQUdQKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBjbGVhcgogICAgICAgICAgICBz
ZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCiAgICAgICAgICAgIGdhcCA9IHNlbGYua3db
J2tzcGFjZSddCgogICAgICAgICAgICBncm91cCA9IHsKICAgICAgICAgICAgICAgICdhbHBoYXRpY3In
OiAnR0FWTE1JJywKICAgICAgICAgICAgICAgICdhcm9tYXRpYyc6ICdGWVcnLAogICAgICAgICAgICAg
ICAgJ3Bvc3RpdmVjaGFyZ2VyJzogJ0tSSCcsCiAgICAgICAgICAgICAgICAnbmVnYXRpdmVjaGFyZ2Vy
JzogJ0RFJywKICAgICAgICAgICAgICAgICd1bmNoYXJnZXInOiAnU1RDUE5RJwogICAgICAgICAgICB9
CgogICAgICAgICAgICBBQSA9ICdBUk5EQ1FFR0hJTEtNRlBTVFdZVicKCiAgICAgICAgICAgIGdyb3Vw
S2V5ID0gZ3JvdXAua2V5cygpCgogICAgICAgICAgICBpbmRleCA9IHt9CiAgICAgICAgICAgIGZvciBr
ZXkgaW4gZ3JvdXBLZXk6CiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gZ3JvdXBba2V5XToKICAgICAg
ICAgICAgICAgICAgICBpbmRleFthYV0gPSBrZXkKCiAgICAgICAgICAgIGdQYWlySW5kZXggPSBbXQog
ICAgICAgICAgICBmb3Iga2V5MSBpbiBncm91cEtleToKICAgICAgICAgICAgICAgIGZvciBrZXkyIGlu
IGdyb3VwS2V5OgogICAgICAgICAgICAgICAgICAgIGdQYWlySW5kZXguYXBwZW5kKGtleTEgKyAnLicg
KyBrZXkyKQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydT
YW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIGcgaW4gcmFuZ2UoZ2FwICsgMSk6CiAg
ICAgICAgICAgICAgICBmb3IgcCBpbiBnUGFpckluZGV4OgogICAgICAgICAgICAgICAgICAgIGhlYWRl
ci5hcHBlbmQocCArICcuZ2FwJyArIHN0cihnKSkKICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZCho
ZWFkZXIpCgogICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAg
ICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCByZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0K
ICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICBmb3IgZyBp
biByYW5nZShnYXAgKyAxKToKICAgICAgICAgICAgICAgICAgICBnUGFpciA9IHNlbGYuZ2VuZXJhdGVH
cm91cFBhaXJzKGdyb3VwS2V5KQogICAgICAgICAgICAgICAgICAgIHN1bSA9IDAKICAgICAgICAgICAg
ICAgICAgICBmb3IgcDEgaW4gcmFuZ2UobGVuKHNlcXVlbmNlKSk6CiAgICAgICAgICAgICAgICAgICAg
ICAgIHAyID0gcDEgKyBnICsgMQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwMiA8IGxlbihzZXF1
ZW5jZSkgYW5kIHNlcXVlbmNlW3AxXSBpbiBBQSBhbmQgc2VxdWVuY2VbcDJdIGluIEFBOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZ1BhaXJbaW5kZXhbc2VxdWVuY2VbcDFdXSArICcuJyArIGluZGV4
W3NlcXVlbmNlW3AyXV1dID0gZ1BhaXJbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleFtz
ZXF1ZW5jZVtwMV1dICsgJy4nICsgaW5kZXhbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
c2VxdWVuY2VbcDJdXV0gKyAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdW0gPSBzdW0gKyAx
CgogICAgICAgICAgICAgICAgICAgIGlmIHN1bSA9PSAwOgogICAgICAgICAgICAgICAgICAgICAgICBm
b3IgZ3AgaW4gZ1BhaXJJbmRleDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5k
KDApCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGdw
IGluIGdQYWlySW5kZXg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChnUGFp
cltncF0gLyBzdW0pCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCgogICAgICAg
ICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAg
ICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAg
ICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAg
IGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+
IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAg
ICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYg
UHJvdGVpbl9HRFBDKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBjbGVhcgogICAgICAg
ICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCgogICAgICAgICAgICBncm91cCA9
IHsKICAgICAgICAgICAgICAgICdhbHBoYXRpY3InOiAnR0FWTE1JJywKICAgICAgICAgICAgICAgICdh
cm9tYXRpYyc6ICdGWVcnLAogICAgICAgICAgICAgICAgJ3Bvc3RpdmVjaGFyZ2VyJzogJ0tSSCcsCiAg
ICAgICAgICAgICAgICAnbmVnYXRpdmVjaGFyZ2VyJzogJ0RFJywKICAgICAgICAgICAgICAgICd1bmNo
YXJnZXInOiAnU1RDUE5RJwogICAgICAgICAgICB9CgogICAgICAgICAgICBncm91cEtleSA9IGdyb3Vw
LmtleXMoKQogICAgICAgICAgICBiYXNlTnVtID0gbGVuKGdyb3VwS2V5KQogICAgICAgICAgICBkaXBl
cHRpZGUgPSBbZzEgKyAnLicgKyBnMiBmb3IgZzEgaW4gZ3JvdXBLZXkgZm9yIGcyIGluIGdyb3VwS2V5
XQoKICAgICAgICAgICAgaW5kZXggPSB7fQogICAgICAgICAgICBmb3Iga2V5IGluIGdyb3VwS2V5Ogog
ICAgICAgICAgICAgICAgZm9yIGFhIGluIGdyb3VwW2tleV06CiAgICAgICAgICAgICAgICAgICAgaW5k
ZXhbYWFdID0ga2V5CgogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIg
PSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXSArIGRpcGVwdGlkZQogICAgICAgICAgICBlbmNvZGluZ3Mu
YXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAg
ICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIHJlLnN1YignLScsICcnLCBpWzFd
KSwgaVsyXQoKICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAg
ICBteURpY3QgPSB7fQogICAgICAgICAgICAgICAgZm9yIHQgaW4gZGlwZXB0aWRlOgogICAgICAgICAg
ICAgICAgICAgIG15RGljdFt0XSA9IDAKCiAgICAgICAgICAgICAgICBzdW0gPSAwCiAgICAgICAgICAg
ICAgICBmb3IgaiBpbiByYW5nZShsZW4oc2VxdWVuY2UpIC0gMiArIDEpOgogICAgICAgICAgICAgICAg
ICAgIG15RGljdFtpbmRleFtzZXF1ZW5jZVtqXV0gKyAnLicgKyBpbmRleFtzZXF1ZW5jZVtqICsgMV1d
XSA9IG15RGljdFtpbmRleFtzZXF1ZW5jZVtqXV0gKyAnLicgKyBpbmRleFsKICAgICAgICAgICAgICAg
ICAgICAgICAgc2VxdWVuY2VbaiArIDFdXV0gKyAxCiAgICAgICAgICAgICAgICAgICAgc3VtID0gc3Vt
ICsgMQoKICAgICAgICAgICAgICAgIGlmIHN1bSA9PSAwOgogICAgICAgICAgICAgICAgICAgIGZvciB0
IGluIGRpcGVwdGlkZToKICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoMCkKICAgICAg
ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZm9yIHQgaW4gZGlwZXB0aWRlOgogICAg
ICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChteURpY3RbdF0gLyBzdW0pCiAgICAgICAgICAg
ICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5
ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0g
c2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5j
b2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAg
ICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1
cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAg
ICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihl
KQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9HVFBDKHNlbGYpOgogICAg
ICAgIHRyeToKICAgICAgICAgICAgIyBjbGVhcgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5
ID0gbnAuYXJyYXkoW10pCgogICAgICAgICAgICBncm91cCA9IHsKICAgICAgICAgICAgICAgICdhbHBo
YXRpY3InOiAnR0FWTE1JJywKICAgICAgICAgICAgICAgICdhcm9tYXRpYyc6ICdGWVcnLAogICAgICAg
ICAgICAgICAgJ3Bvc3RpdmVjaGFyZ2VyJzogJ0tSSCcsCiAgICAgICAgICAgICAgICAnbmVnYXRpdmVj
aGFyZ2VyJzogJ0RFJywKICAgICAgICAgICAgICAgICd1bmNoYXJnZXInOiAnU1RDUE5RJwogICAgICAg
ICAgICB9CgogICAgICAgICAgICBncm91cEtleSA9IGdyb3VwLmtleXMoKQogICAgICAgICAgICBiYXNl
TnVtID0gbGVuKGdyb3VwS2V5KQogICAgICAgICAgICB0cmlwbGUgPSBbZzEgKyAnLicgKyBnMiArICcu
JyArIGczIGZvciBnMSBpbiBncm91cEtleSBmb3IgZzIgaW4gZ3JvdXBLZXkgZm9yIGczIGluIGdyb3Vw
S2V5XQoKICAgICAgICAgICAgaW5kZXggPSB7fQogICAgICAgICAgICBmb3Iga2V5IGluIGdyb3VwS2V5
OgogICAgICAgICAgICAgICAgZm9yIGFhIGluIGdyb3VwW2tleV06CiAgICAgICAgICAgICAgICAgICAg
aW5kZXhbYWFdID0ga2V5CgogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFk
ZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXSArIHRyaXBsZQogICAgICAgICAgICBlbmNvZGluZ3Mu
YXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAg
ICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIHJlLnN1YignLScsICcnLCBpWzFd
KSwgaVsyXQoKICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAg
ICBteURpY3QgPSB7fQogICAgICAgICAgICAgICAgZm9yIHQgaW4gdHJpcGxlOgogICAgICAgICAgICAg
ICAgICAgIG15RGljdFt0XSA9IDAKCiAgICAgICAgICAgICAgICBzdW0gPSAwCiAgICAgICAgICAgICAg
ICBmb3IgaiBpbiByYW5nZShsZW4oc2VxdWVuY2UpIC0gMyArIDEpOgogICAgICAgICAgICAgICAgICAg
IG15RGljdFtpbmRleFtzZXF1ZW5jZVtqXV0gKyAnLicgKyBpbmRleFtzZXF1ZW5jZVtqICsgMV1dICsg
Jy4nICsgaW5kZXhbc2VxdWVuY2VbaiArIDJdXV0gPSBteURpY3RbaW5kZXhbCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlWwogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
al1dICsgJy4nICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpbmRleFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc2VxdWVuY2VbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqICsgMV1dICsgJy4nICsKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleFsKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VbCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBqICsgMl1dXSArIDEKICAgICAgICAgICAgICAgICAgICBzdW0gPSBzdW0gKyAxCgogICAgICAgICAg
ICAgICAgaWYgc3VtID09IDA6CiAgICAgICAgICAgICAgICAgICAgZm9yIHQgaW4gdHJpcGxlOgogICAg
ICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZCgwKQogICAgICAgICAgICAgICAgZWxzZToKICAg
ICAgICAgICAgICAgICAgICBmb3IgdCBpbiB0cmlwbGU6CiAgICAgICAgICAgICAgICAgICAgICAgIGNv
ZGUuYXBwZW5kKG15RGljdFt0XSAvIHN1bSkKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQo
Y29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3Ms
IGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNo
YXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAt
IDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2Fy
cmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFz
IGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBG
YWxzZQoKICAgIGRlZiBQcm90ZWluX0FBSW5kZXgoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAg
ICBwcm9wcyA9IHNlbGYua3dbJ2FhaW5kZXgnXS5zcGxpdCgnOycpCiAgICAgICAgICAgIHNlbGYuZW5j
b2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAgaWYgbm90IHNlbGYuaXNfZXF1YWw6
CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdBQUluZGV4IGRlc2NyaXB0b3IgbmVlZCBm
YXN0YSBzZXF1ZW5jZSB3aXRoIGVxdWFsIGxlbmd0aC4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFs
c2UKICAgICAgICAgICAgQUEgPSAnQVJORENRRUdISUxLTUZQU1RXWVYnCiAgICAgICAgICAgIGZpbGVB
QWluZGV4ID0gb3MucGF0aC5zcGxpdChvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSlbCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAwXSArIHInXGRhdGFcQUFpbmRleC50eHQnIGlmIHBsYXRmb3JtLnN5
c3RlbSgpID09ICdXaW5kb3dzJyBlbHNlIFwKICAgICAgICAgICAgICAgIG9zLnBhdGguc3BsaXQob3Mu
cGF0aC5yZWFscGF0aChfX2ZpbGVfXykpWzBdICsgcicvZGF0YS9BQWluZGV4LnR4dCcKICAgICAgICAg
ICAgd2l0aCBvcGVuKGZpbGVBQWluZGV4KSBhcyBmOgogICAgICAgICAgICAgICAgcmVjb3JkcyA9IGYu
cmVhZGxpbmVzKClbMTpdCgogICAgICAgICAgICBBQWluZGV4ID0gW10KICAgICAgICAgICAgQUFpbmRl
eE5hbWUgPSBbXQogICAgICAgICAgICBmb3IgaSBpbiByZWNvcmRzOgogICAgICAgICAgICAgICAgQUFp
bmRleC5hcHBlbmQoaS5yc3RyaXAoKS5zcGxpdCgpWzE6XSBpZiBpLnJzdHJpcCgpICE9ICcnIGVsc2Ug
Tm9uZSkKICAgICAgICAgICAgICAgIEFBaW5kZXhOYW1lLmFwcGVuZChpLnJzdHJpcCgpLnNwbGl0KClb
MF0gaWYgaS5yc3RyaXAoKSAhPSAnJyBlbHNlIE5vbmUpCgogICAgICAgICAgICBpbmRleCA9IHt9CiAg
ICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQSkpOgogICAgICAgICAgICAgICAgaW5kZXhbQUFb
aV1dID0gaQoKICAgICAgICAgICAgIyAgdXNlIHRoZSB1c2VyIGlucHV0ZWQgcHJvcGVydGllcwogICAg
ICAgICAgICBpZiBwcm9wczoKICAgICAgICAgICAgICAgIHRtcEluZGV4TmFtZXMgPSBbXQogICAgICAg
ICAgICAgICAgdG1wSW5kZXggPSBbXQogICAgICAgICAgICAgICAgZm9yIHAgaW4gcHJvcHM6CiAgICAg
ICAgICAgICAgICAgICAgaWYgQUFpbmRleE5hbWUuaW5kZXgocCkgIT0gLTE6CiAgICAgICAgICAgICAg
ICAgICAgICAgIHRtcEluZGV4TmFtZXMuYXBwZW5kKHApCiAgICAgICAgICAgICAgICAgICAgICAgIHRt
cEluZGV4LmFwcGVuZChBQWluZGV4W0FBaW5kZXhOYW1lLmluZGV4KHApXSkKICAgICAgICAgICAgICAg
IGlmIGxlbih0bXBJbmRleE5hbWVzKSAhPSAwOgogICAgICAgICAgICAgICAgICAgIEFBaW5kZXhOYW1l
ID0gdG1wSW5kZXhOYW1lcwogICAgICAgICAgICAgICAgICAgIEFBaW5kZXggPSB0bXBJbmRleAoKICAg
ICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywg
J2xhYmVsJ10KICAgICAgICAgICAgZm9yIHBvcyBpbiByYW5nZSgxLCBsZW4oc2VsZi5mYXN0YV9saXN0
WzBdWzFdKSArIDEpOgogICAgICAgICAgICAgICAgZm9yIGlkTmFtZSBpbiBBQWluZGV4TmFtZToKICAg
ICAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKCdTZXFQb3MuJyArIHN0cihwb3MpICsgJy4nICsg
aWROYW1lKQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZv
ciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJl
bCA9IGlbMF0sIGlbMV0sIGlbMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAg
ICAgICAgICAgICAgICBmb3IgYWEgaW4gc2VxdWVuY2U6CiAgICAgICAgICAgICAgICAgICAgaWYgYWEg
PT0gJy0nOgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaiBpbiBBQWluZGV4OgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoMCkKICAgICAgICAgICAgICAgICAgICAgICAgY29u
dGludWUKICAgICAgICAgICAgICAgICAgICBmb3IgaiBpbiBBQWluZGV4OgogICAgICAgICAgICAgICAg
ICAgICAgICBjb2RlLmFwcGVuZChqW2luZGV4W2FhXV0pCiAgICAgICAgICAgICAgICBlbmNvZGluZ3Mu
YXBwZW5kKGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5j
b2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19h
cnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hh
cGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNv
ZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2Vw
dGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICBy
ZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9aU2NhbGUoc2VsZik6CiAgICAgICAgdHJ5OgogICAg
ICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCgogICAgICAgICAgICBpZiBu
b3Qgc2VsZi5pc19lcXVhbDoKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ1pTY2FsZSBk
ZXNjcmlwdG9yIG5lZWQgZmFzdGEgc2VxdWVuY2Ugd2l0aCBlcXVhbCBsZW5ndGguJwogICAgICAgICAg
ICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgICAgICB6c2NhbGUgPSB7CiAgICAgICAgICAgICAgICAn
QSc6IFswLjI0LCAtMi4zMiwgMC42MCwgLTAuMTQsIDEuMzBdLCAgIyBBCiAgICAgICAgICAgICAgICAn
Qyc6IFswLjg0LCAtMS42NywgMy43MSwgMC4xOCwgLTIuNjVdLCAgIyBDCiAgICAgICAgICAgICAgICAn
RCc6IFszLjk4LCAwLjkzLCAxLjkzLCAtMi40NiwgMC43NV0sICAjIEQKICAgICAgICAgICAgICAgICdF
JzogWzMuMTEsIDAuMjYsIC0wLjExLCAtMC4zNCwgLTAuMjVdLCAgIyBFCiAgICAgICAgICAgICAgICAn
Ric6IFstNC4yMiwgMS45NCwgMS4wNiwgMC41NCwgLTAuNjJdLCAgIyBGCiAgICAgICAgICAgICAgICAn
Ryc6IFsyLjA1LCAtNC4wNiwgMC4zNiwgLTAuODIsIC0wLjM4XSwgICMgRwogICAgICAgICAgICAgICAg
J0gnOiBbMi40NywgMS45NSwgMC4yNiwgMy45MCwgMC4wOV0sICAjIEgKICAgICAgICAgICAgICAgICdJ
JzogWy0zLjg5LCAtMS43MywgLTEuNzEsIC0wLjg0LCAwLjI2XSwgICMgSQogICAgICAgICAgICAgICAg
J0snOiBbMi4yOSwgMC44OSwgLTIuNDksIDEuNDksIDAuMzFdLCAgIyBLCiAgICAgICAgICAgICAgICAn
TCc6IFstNC4yOCwgLTEuMzAsIC0xLjQ5LCAtMC43MiwgMC44NF0sICAjIEwKICAgICAgICAgICAgICAg
ICdNJzogWy0yLjg1LCAtMC4yMiwgMC40NywgMS45NCwgLTAuOThdLCAgIyBNCiAgICAgICAgICAgICAg
ICAnTic6IFszLjA1LCAxLjYyLCAxLjA0LCAtMS4xNSwgMS42MV0sICAjIE4KICAgICAgICAgICAgICAg
ICdQJzogWy0xLjY2LCAwLjI3LCAxLjg0LCAwLjcwLCAyLjAwXSwgICMgUAogICAgICAgICAgICAgICAg
J1EnOiBbMS43NSwgMC41MCwgLTEuNDQsIC0xLjM0LCAwLjY2XSwgICMgUQogICAgICAgICAgICAgICAg
J1InOiBbMy41MiwgMi41MCwgLTMuNTAsIDEuOTksIC0wLjE3XSwgICMgUgogICAgICAgICAgICAgICAg
J1MnOiBbMi4zOSwgLTEuMDcsIDEuMTUsIC0xLjM5LCAwLjY3XSwgICMgUwogICAgICAgICAgICAgICAg
J1QnOiBbMC43NSwgLTIuMTgsIC0xLjEyLCAtMS40NiwgLTAuNDBdLCAgIyBUCiAgICAgICAgICAgICAg
ICAnVic6IFstMi41OSwgLTIuNjQsIC0xLjU0LCAtMC44NSwgLTAuMDJdLCAgIyBWCiAgICAgICAgICAg
ICAgICAnVyc6IFstNC4zNiwgMy45NCwgMC41OSwgMy40NCwgLTEuNTldLCAgIyBXCiAgICAgICAgICAg
ICAgICAnWSc6IFstMi41NCwgMi40NCwgMC40MywgMC4wNCwgLTEuNDddLCAgIyBZCiAgICAgICAgICAg
ICAgICAnLSc6IFswLjAwLCAwLjAwLCAwLjAwLCAwLjAwLCAwLjAwXSwgICMgLQogICAgICAgICAgICB9
CiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgICAgIGhlYWRlciA9IFsnU2FtcGxlTmFt
ZScsICdsYWJlbCddCiAgICAgICAgICAgIGZvciBwIGluIHJhbmdlKDEsIGxlbihzZWxmLmZhc3RhX2xp
c3RbMF1bMV0pICsgMSk6CiAgICAgICAgICAgICAgICBmb3IgeiBpbiAoJzEnLCAnMicsICczJywgJzQn
LCAnNScpOgogICAgICAgICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoJ1BvcycgKyBzdHIocCkgKyAn
LlpTQ0FMRScgKyB6KQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAg
ICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNl
LCBsYWJlbCA9IGlbMF0sIGlbMV0sIGlbMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFi
ZWxdCiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gc2VxdWVuY2U6CiAgICAgICAgICAgICAgICAgICAg
Y29kZSA9IGNvZGUgKyB6c2NhbGVbYWFdCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNv
ZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBk
dHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFw
ZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAx
CiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJh
eS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNl
OgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBl
OgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFs
c2UKCiAgICBkZWYgUHJvdGVpbl9CTE9TVU02MihzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAg
IHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKCiAgICAgICAgICAgIGlmIG5vdCBzZWxm
LmlzX2VxdWFsOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnQkxPU1VNNjIgZGVzY3Jp
cHRvciBuZWVkIGZhc3RhIHNlcXVlbmNlIHdpdGggZXF1YWwgbGVuZ3RoLicKICAgICAgICAgICAgICAg
IHJldHVybiBGYWxzZQoKICAgICAgICAgICAgYmxvc3VtNjIgPSB7CiAgICAgICAgICAgICAgICAnQSc6
IFs0LCAtMSwgLTIsIC0yLCAwLCAtMSwgLTEsIDAsIC0yLCAtMSwgLTEsIC0xLCAtMSwgLTIsIC0xLCAx
LCAwLCAtMywgLTIsIDBdLCAgIyBBCiAgICAgICAgICAgICAgICAnUic6IFstMSwgNSwgMCwgLTIsIC0z
LCAxLCAwLCAtMiwgMCwgLTMsIC0yLCAyLCAtMSwgLTMsIC0yLCAtMSwgLTEsIC0zLCAtMiwgLTNdLCAg
IyBSCiAgICAgICAgICAgICAgICAnTic6IFstMiwgMCwgNiwgMSwgLTMsIDAsIDAsIDAsIDEsIC0zLCAt
MywgMCwgLTIsIC0zLCAtMiwgMSwgMCwgLTQsIC0yLCAtM10sICAjIE4KICAgICAgICAgICAgICAgICdE
JzogWy0yLCAtMiwgMSwgNiwgLTMsIDAsIDIsIC0xLCAtMSwgLTMsIC00LCAtMSwgLTMsIC0zLCAtMSwg
MCwgLTEsIC00LCAtMywgLTNdLCAgIyBECiAgICAgICAgICAgICAgICAnQyc6IFswLCAtMywgLTMsIC0z
LCA5LCAtMywgLTQsIC0zLCAtMywgLTEsIC0xLCAtMywgLTEsIC0yLCAtMywgLTEsIC0xLCAtMiwgLTIs
IC0xXSwgICMgQwogICAgICAgICAgICAgICAgJ1EnOiBbLTEsIDEsIDAsIDAsIC0zLCA1LCAyLCAtMiwg
MCwgLTMsIC0yLCAxLCAwLCAtMywgLTEsIDAsIC0xLCAtMiwgLTEsIC0yXSwgICMgUQogICAgICAgICAg
ICAgICAgJ0UnOiBbLTEsIDAsIDAsIDIsIC00LCAyLCA1LCAtMiwgMCwgLTMsIC0zLCAxLCAtMiwgLTMs
IC0xLCAwLCAtMSwgLTMsIC0yLCAtMl0sICAjIEUKICAgICAgICAgICAgICAgICdHJzogWzAsIC0yLCAw
LCAtMSwgLTMsIC0yLCAtMiwgNiwgLTIsIC00LCAtNCwgLTIsIC0zLCAtMywgLTIsIDAsIC0yLCAtMiwg
LTMsIC0zXSwgICMgRwogICAgICAgICAgICAgICAgJ0gnOiBbLTIsIDAsIDEsIC0xLCAtMywgMCwgMCwg
LTIsIDgsIC0zLCAtMywgLTEsIC0yLCAtMSwgLTIsIC0xLCAtMiwgLTIsIDIsIC0zXSwgICMgSAogICAg
ICAgICAgICAgICAgJ0knOiBbLTEsIC0zLCAtMywgLTMsIC0xLCAtMywgLTMsIC00LCAtMywgNCwgMiwg
LTMsIDEsIDAsIC0zLCAtMiwgLTEsIC0zLCAtMSwgM10sICAjIEkKICAgICAgICAgICAgICAgICdMJzog
Wy0xLCAtMiwgLTMsIC00LCAtMSwgLTIsIC0zLCAtNCwgLTMsIDIsIDQsIC0yLCAyLCAwLCAtMywgLTIs
IC0xLCAtMiwgLTEsIDFdLCAgIyBMCiAgICAgICAgICAgICAgICAnSyc6IFstMSwgMiwgMCwgLTEsIC0z
LCAxLCAxLCAtMiwgLTEsIC0zLCAtMiwgNSwgLTEsIC0zLCAtMSwgMCwgLTEsIC0zLCAtMiwgLTJdLCAg
IyBLCiAgICAgICAgICAgICAgICAnTSc6IFstMSwgLTEsIC0yLCAtMywgLTEsIDAsIC0yLCAtMywgLTIs
IDEsIDIsIC0xLCA1LCAwLCAtMiwgLTEsIC0xLCAtMSwgLTEsIDFdLCAgIyBNCiAgICAgICAgICAgICAg
ICAnRic6IFstMiwgLTMsIC0zLCAtMywgLTIsIC0zLCAtMywgLTMsIC0xLCAwLCAwLCAtMywgMCwgNiwg
LTQsIC0yLCAtMiwgMSwgMywgLTFdLCAgIyBGCiAgICAgICAgICAgICAgICAnUCc6IFstMSwgLTIsIC0y
LCAtMSwgLTMsIC0xLCAtMSwgLTIsIC0yLCAtMywgLTMsIC0xLCAtMiwgLTQsIDcsIC0xLCAtMSwgLTQs
IC0zLCAtMl0sICAjIFAKICAgICAgICAgICAgICAgICdTJzogWzEsIC0xLCAxLCAwLCAtMSwgMCwgMCwg
MCwgLTEsIC0yLCAtMiwgMCwgLTEsIC0yLCAtMSwgNCwgMSwgLTMsIC0yLCAtMl0sICAjIFMKICAgICAg
ICAgICAgICAgICdUJzogWzAsIC0xLCAwLCAtMSwgLTEsIC0xLCAtMSwgLTIsIC0yLCAtMSwgLTEsIC0x
LCAtMSwgLTIsIC0xLCAxLCA1LCAtMiwgLTIsIDBdLCAgIyBUCiAgICAgICAgICAgICAgICAnVyc6IFst
MywgLTMsIC00LCAtNCwgLTIsIC0yLCAtMywgLTIsIC0yLCAtMywgLTIsIC0zLCAtMSwgMSwgLTQsIC0z
LCAtMiwgMTEsIDIsIC0zXSwgICMgVwogICAgICAgICAgICAgICAgJ1knOiBbLTIsIC0yLCAtMiwgLTMs
IC0yLCAtMSwgLTIsIC0zLCAyLCAtMSwgLTEsIC0yLCAtMSwgMywgLTMsIC0yLCAtMiwgMiwgNywgLTFd
LCAgIyBZCiAgICAgICAgICAgICAgICAnVic6IFswLCAtMywgLTMsIC0zLCAtMSwgLTIsIC0yLCAtMywg
LTMsIDMsIDEsIC0yLCAxLCAtMSwgLTIsIC0yLCAwLCAtMywgLTEsIDRdLCAgIyBWCiAgICAgICAgICAg
ICAgICAnLSc6IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAw
LCAwLCAwLCAwXSwgICMgLQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtdCiAg
ICAgICAgICAgIGhlYWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgICAgIGZvciBp
IGluIHJhbmdlKDEsIGxlbihzZWxmLmZhc3RhX2xpc3RbMF1bMV0pICogMjAgKyAxKToKICAgICAgICAg
ICAgICAgIGhlYWRlci5hcHBlbmQoJ2Jsb3N1bTYyLkYnICsgc3RyKGkpKQogICAgICAgICAgICBlbmNv
ZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoK
ICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIGlbMV0sIGlbMl0KICAg
ICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICBmb3IgYWEgaW4g
c2VxdWVuY2U6CiAgICAgICAgICAgICAgICAgICAgY29kZSA9IGNvZGUgKyBibG9zdW02MlthYV0KICAg
ICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2Rp
bmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5j
b2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0g
c2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwog
ICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAg
ICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFs
c2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNn
ID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBQcm90ZWluX05NQnJvdG8o
c2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJy
YXkoW10pCgogICAgICAgICAgICBwcm9wcyA9IHNlbGYua3dbJ2FhaW5kZXgnXS5zcGxpdCgnOycpCiAg
ICAgICAgICAgIG5sYWcgPSBzZWxmLmt3WydubGFnJ10KICAgICAgICAgICAgQUEgPSAnQVJORENRRUdI
SUxLTUZQU1RXWVYnCiAgICAgICAgICAgIGZpbGVBQWlkeCA9IG9zLnBhdGguc3BsaXQob3MucGF0aC5y
ZWFscGF0aChfX2ZpbGVfXykpWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgMF0gKyByJ1xkYXRh
XEFBaWR4LnR4dCcgaWYgcGxhdGZvcm0uc3lzdGVtKCkgPT0gJ1dpbmRvd3MnIGVsc2UgXAogICAgICAg
ICAgICAgICAgb3MucGF0aC5zcGxpdChvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSlbMF0gKyByJy9k
YXRhL0FBaWR4LnR4dCcKICAgICAgICAgICAgd2l0aCBvcGVuKGZpbGVBQWlkeCkgYXMgZjoKICAgICAg
ICAgICAgICAgIHJlY29yZHMgPSBmLnJlYWRsaW5lcygpWzE6XQogICAgICAgICAgICBteURpY3QgPSB7
fQogICAgICAgICAgICBmb3IgaSBpbiByZWNvcmRzOgogICAgICAgICAgICAgICAgYXJyYXkgPSBpLnJz
dHJpcCgpLnNwbGl0KCdcdCcpCiAgICAgICAgICAgICAgICBteURpY3RbYXJyYXlbMF1dID0gYXJyYXlb
MTpdCgogICAgICAgICAgICBBQWlkeCA9IFtdCiAgICAgICAgICAgIEFBaWR4TmFtZSA9IFtdCiAgICAg
ICAgICAgIGZvciBpIGluIHByb3BzOgogICAgICAgICAgICAgICAgaWYgaSBpbiBteURpY3Q6CiAgICAg
ICAgICAgICAgICAgICAgQUFpZHguYXBwZW5kKG15RGljdFtpXSkKICAgICAgICAgICAgICAgICAgICBB
QWlkeE5hbWUuYXBwZW5kKGkpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAg
IHByaW50KCciJyArIGkgKyAnIiBwcm9wZXJ0aWVzIG5vdCBleGlzdC4nKQogICAgICAgICAgICAgICAg
ICAgIHJldHVybiBOb25lCgogICAgICAgICAgICBBQWlkeDEgPSBucC5hcnJheShbZmxvYXQoaikgZm9y
IGkgaW4gQUFpZHggZm9yIGogaW4gaV0pCiAgICAgICAgICAgIEFBaWR4ID0gQUFpZHgxLnJlc2hhcGUo
KGxlbihBQWlkeCksIDIwKSkKICAgICAgICAgICAgcHN0ZCA9IG5wLnN0ZChBQWlkeCwgYXhpcz0xKQog
ICAgICAgICAgICBwbWVhbiA9IG5wLmF2ZXJhZ2UoQUFpZHgsIGF4aXM9MSkKCiAgICAgICAgICAgIGZv
ciBpIGluIHJhbmdlKGxlbihBQWlkeCkpOgogICAgICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UobGVu
KEFBaWR4W2ldKSk6CiAgICAgICAgICAgICAgICAgICAgQUFpZHhbaV1bal0gPSAoQUFpZHhbaV1bal0g
LSBwbWVhbltpXSkgLyBwc3RkW2ldCgogICAgICAgICAgICBpbmRleCA9IHt9CiAgICAgICAgICAgIGZv
ciBpIGluIHJhbmdlKGxlbihBQSkpOgogICAgICAgICAgICAgICAgaW5kZXhbQUFbaV1dID0gaQoKICAg
ICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywg
J2xhYmVsJ10KICAgICAgICAgICAgZm9yIHAgaW4gcHJvcHM6CiAgICAgICAgICAgICAgICBmb3IgbiBp
biByYW5nZSgxLCBubGFnICsgMSk6CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZChwICsg
Jy5sYWcnICsgc3RyKG4pKQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAg
ICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVl
bmNlLCBsYWJlbCA9IGlbMF0sIHJlLnN1YignLScsICcnLCBpWzFdKSwgaVsyXQogICAgICAgICAgICAg
ICAgY29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIE4gPSBsZW4oc2VxdWVuY2UpCiAg
ICAgICAgICAgICAgICBmb3IgcHJvcCBpbiByYW5nZShsZW4ocHJvcHMpKToKICAgICAgICAgICAgICAg
ICAgICBmb3IgbiBpbiByYW5nZSgxLCBubGFnICsgMSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGlm
IGxlbihzZXF1ZW5jZSkgPiBubGFnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBpZiBrZXkg
aXMgJy0nLCB0aGVuIHRoZSB2YWx1ZSBpcyAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBybiA9
IHN1bSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbQUFpZHhbcHJvcF1baW5kZXguZ2V0
KHNlcXVlbmNlW2pdLCAwKV0gKiBBQWlkeFtwcm9wXVtpbmRleC5nZXQoc2VxdWVuY2VbaiArIG5dLCAw
KV0gZm9yIGoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiByYW5nZShsZW4oc2VxdWVu
Y2UpIC0gbildKSAvIChOIC0gbikKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHJuID0gJ05BJwogICAgICAgICAgICAgICAgICAgICAgICBjb2RlLmFw
cGVuZChybikKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAg
IHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAg
ICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAg
IHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVs
IGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToK
ICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAg
ICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNl
bGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBQcm90
ZWluX01vcmFuKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJh
eSA9IG5wLmFycmF5KFtdKQoKICAgICAgICAgICAgcHJvcHMgPSBzZWxmLmt3WydhYWluZGV4J10uc3Bs
aXQoJzsnKQogICAgICAgICAgICBubGFnID0gc2VsZi5rd1snbmxhZyddCgogICAgICAgICAgICBBQSA9
ICdBUk5EQ1FFR0hJTEtNRlBTVFdZVicKICAgICAgICAgICAgZmlsZUFBaWR4ID0gb3MucGF0aC5zcGxp
dChvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSlbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAw
XSArIHInXGRhdGFcQUFpZHgudHh0JyBpZiBwbGF0Zm9ybS5zeXN0ZW0oKSA9PSAnV2luZG93cycgZWxz
ZSBcCiAgICAgICAgICAgICAgICBvcy5wYXRoLnNwbGl0KG9zLnBhdGgucmVhbHBhdGgoX19maWxlX18p
KVswXSArIHInL2RhdGEvQUFpZHgudHh0JwogICAgICAgICAgICB3aXRoIG9wZW4oZmlsZUFBaWR4KSBh
cyBmOgogICAgICAgICAgICAgICAgcmVjb3JkcyA9IGYucmVhZGxpbmVzKClbMTpdCiAgICAgICAgICAg
IG15RGljdCA9IHt9CiAgICAgICAgICAgIGZvciBpIGluIHJlY29yZHM6CiAgICAgICAgICAgICAgICBh
cnJheSA9IGkucnN0cmlwKCkuc3BsaXQoJ1x0JykKICAgICAgICAgICAgICAgIG15RGljdFthcnJheVsw
XV0gPSBhcnJheVsxOl0KCiAgICAgICAgICAgIEFBaWR4ID0gW10KICAgICAgICAgICAgQUFpZHhOYW1l
ID0gW10KICAgICAgICAgICAgZm9yIGkgaW4gcHJvcHM6CiAgICAgICAgICAgICAgICBpZiBpIGluIG15
RGljdDoKICAgICAgICAgICAgICAgICAgICBBQWlkeC5hcHBlbmQobXlEaWN0W2ldKQogICAgICAgICAg
ICAgICAgICAgIEFBaWR4TmFtZS5hcHBlbmQoaSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAg
ICAgICAgICAgICAgcHJpbnQoJyInICsgaSArICciIHByb3BlcnRpZXMgbm90IGV4aXN0LicpCiAgICAg
ICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgICAgIEFBaWR4MSA9IG5wLmFycmF5KFtm
bG9hdChqKSBmb3IgaSBpbiBBQWlkeCBmb3IgaiBpbiBpXSkKICAgICAgICAgICAgQUFpZHggPSBBQWlk
eDEucmVzaGFwZSgobGVuKEFBaWR4KSwgMjApKQoKICAgICAgICAgICAgcHJvcE1lYW4gPSBucC5tZWFu
KEFBaWR4LCBheGlzPTEpCiAgICAgICAgICAgIHByb3BTdGQgPSBucC5zdGQoQUFpZHgsIGF4aXM9MSkK
CiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQWlkeCkpOgogICAgICAgICAgICAgICAgZm9y
IGogaW4gcmFuZ2UobGVuKEFBaWR4W2ldKSk6CiAgICAgICAgICAgICAgICAgICAgQUFpZHhbaV1bal0g
PSAoQUFpZHhbaV1bal0gLSBwcm9wTWVhbltpXSkgLyBwcm9wU3RkW2ldCgogICAgICAgICAgICBpbmRl
eCA9IHt9CiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQSkpOgogICAgICAgICAgICAgICAg
aW5kZXhbQUFbaV1dID0gaQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVh
ZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIHAgaW4gcHJvcHM6CiAg
ICAgICAgICAgICAgICBmb3IgbiBpbiByYW5nZSgxLCBubGFnICsgMSk6CiAgICAgICAgICAgICAgICAg
ICAgaGVhZGVyLmFwcGVuZChwICsgJy5sYWcnICsgc3RyKG4pKQogICAgICAgICAgICBlbmNvZGluZ3Mu
YXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAg
ICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIHJlLnN1YignLScsICcnLCBpWzFd
KSwgaVsyXQogICAgICAgICAgICAgICAgY29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAg
IE4gPSBsZW4oc2VxdWVuY2UpCiAgICAgICAgICAgICAgICBmb3IgcHJvcCBpbiByYW5nZShsZW4ocHJv
cHMpKToKICAgICAgICAgICAgICAgICAgICB4bWVhbiA9IHN1bShbQUFpZHhbcHJvcF1baW5kZXhbYWFd
XSBmb3IgYWEgaW4gc2VxdWVuY2VdKSAvIE4KICAgICAgICAgICAgICAgICAgICBmb3IgbiBpbiByYW5n
ZSgxLCBubGFnICsgMSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihzZXF1ZW5jZSkgPiBu
bGFnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBpZiBrZXkgaXMgJy0nLCB0aGVuIHRoZSB2
YWx1ZSBpcyAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZW56aSA9IHN1bShbKEFBaWR4W3By
b3BdW2luZGV4LmdldChzZXF1ZW5jZVtqXSwgMCldIC0geG1lYW4pICogKAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBBQWlkeFtwcm9wXVtpbmRleC5nZXQoc2VxdWVuY2VbaiArIG5dLCAw
KV0gLSB4bWVhbikgZm9yIGogaW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHJhbmdlKGxlbihzZXF1ZW5jZSkgLSBuKV0pIC8gKE4gLSBuKQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZmVubXUgPSBzdW0oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWyhBQWlkeFtw
cm9wXVtpbmRleC5nZXQoc2VxdWVuY2Vbal0sIDApXSAtIHhtZWFuKSAqKiAyIGZvciBqIGluIHJhbmdl
KGxlbihzZXF1ZW5jZSkpXSkgLyBOCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBybiA9IGZlbnpp
IC8gZmVubXUKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHJuID0gJ05BJwogICAgICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChybikKICAg
ICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2Rp
bmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5j
b2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0g
c2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwog
ICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAg
ICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFs
c2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNn
ID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBQcm90ZWluX0dlYXJ5KHNl
bGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5
KFtdKQoKICAgICAgICAgICAgcHJvcHMgPSBzZWxmLmt3WydhYWluZGV4J10uc3BsaXQoJzsnKQogICAg
ICAgICAgICBubGFnID0gc2VsZi5rd1snbmxhZyddCiAgICAgICAgICAgIGZpbGVBQWlkeCA9IG9zLnBh
dGguc3BsaXQob3MucGF0aC5yZWFscGF0aChfX2ZpbGVfXykpWwogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgMF0gKyByJ1xkYXRhXEFBaWR4LnR4dCcgaWYgcGxhdGZvcm0uc3lzdGVtKCkgPT0gJ1dpbmRv
d3MnIGVsc2UgXAogICAgICAgICAgICAgICAgb3MucGF0aC5zcGxpdChvcy5wYXRoLnJlYWxwYXRoKF9f
ZmlsZV9fKSlbMF0gKyByJy9kYXRhL0FBaWR4LnR4dCcKICAgICAgICAgICAgQUEgPSAnQVJORENRRUdI
SUxLTUZQU1RXWVYnCgogICAgICAgICAgICB3aXRoIG9wZW4oZmlsZUFBaWR4KSBhcyBmOgogICAgICAg
ICAgICAgICAgcmVjb3JkcyA9IGYucmVhZGxpbmVzKClbMTpdCiAgICAgICAgICAgIG15RGljdCA9IHt9
CiAgICAgICAgICAgIGZvciBpIGluIHJlY29yZHM6CiAgICAgICAgICAgICAgICBhcnJheSA9IGkucnN0
cmlwKCkuc3BsaXQoJ1x0JykKICAgICAgICAgICAgICAgIG15RGljdFthcnJheVswXV0gPSBhcnJheVsx
Ol0KCiAgICAgICAgICAgIEFBaWR4ID0gW10KICAgICAgICAgICAgQUFpZHhOYW1lID0gW10KICAgICAg
ICAgICAgZm9yIGkgaW4gcHJvcHM6CiAgICAgICAgICAgICAgICBpZiBpIGluIG15RGljdDoKICAgICAg
ICAgICAgICAgICAgICBBQWlkeC5hcHBlbmQobXlEaWN0W2ldKQogICAgICAgICAgICAgICAgICAgIEFB
aWR4TmFtZS5hcHBlbmQoaSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAg
cHJpbnQoJyInICsgaSArICciIHByb3BlcnRpZXMgbm90IGV4aXN0LicpCiAgICAgICAgICAgICAgICAg
ICAgcmV0dXJuIE5vbmUKCiAgICAgICAgICAgIEFBaWR4MSA9IG5wLmFycmF5KFtmbG9hdChqKSBmb3Ig
aSBpbiBBQWlkeCBmb3IgaiBpbiBpXSkKICAgICAgICAgICAgQUFpZHggPSBBQWlkeDEucmVzaGFwZSgo
bGVuKEFBaWR4KSwgMjApKQoKICAgICAgICAgICAgcHJvcE1lYW4gPSBucC5tZWFuKEFBaWR4LCBheGlz
PTEpCiAgICAgICAgICAgIHByb3BTdGQgPSBucC5zdGQoQUFpZHgsIGF4aXM9MSkKCiAgICAgICAgICAg
IGZvciBpIGluIHJhbmdlKGxlbihBQWlkeCkpOgogICAgICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2Uo
bGVuKEFBaWR4W2ldKSk6CiAgICAgICAgICAgICAgICAgICAgQUFpZHhbaV1bal0gPSAoQUFpZHhbaV1b
al0gLSBwcm9wTWVhbltpXSkgLyBwcm9wU3RkW2ldCgogICAgICAgICAgICBpbmRleCA9IHt9CiAgICAg
ICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQSkpOgogICAgICAgICAgICAgICAgaW5kZXhbQUFbaV1d
ID0gaQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1w
bGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIHAgaW4gcHJvcHM6CiAgICAgICAgICAgICAg
ICBmb3IgbiBpbiByYW5nZSgxLCBubGFnICsgMSk6CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFw
cGVuZChwICsgJy5sYWcnICsgc3RyKG4pKQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRl
cikKCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5h
bWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIHJlLnN1YignLScsICcnLCBpWzFdKSwgaVsyXQogICAg
ICAgICAgICAgICAgY29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIE4gPSBsZW4oc2Vx
dWVuY2UpCiAgICAgICAgICAgICAgICBmb3IgcHJvcCBpbiByYW5nZShsZW4ocHJvcHMpKToKICAgICAg
ICAgICAgICAgICAgICB4bWVhbiA9IHN1bShbQUFpZHhbcHJvcF1baW5kZXhbYWFdXSBmb3IgYWEgaW4g
c2VxdWVuY2VdKSAvIE4KICAgICAgICAgICAgICAgICAgICBmb3IgbiBpbiByYW5nZSgxLCBubGFnICsg
MSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihzZXF1ZW5jZSkgPiBubGFnOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIyBpZiBrZXkgaXMgJy0nLCB0aGVuIHRoZSB2YWx1ZSBpcyAwCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBybiA9IChOIC0gMSkgLyAoMiAqIChOIC0gbikpICogKChz
dW0oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWyhBQWlkeFtwcm9wXVtpbmRleC5nZXQo
c2VxdWVuY2Vbal0sIDApXSAtIEFBaWR4W3Byb3BdW2luZGV4LmdldChzZXF1ZW5jZVtqICsgbl0sIDAp
XSkgKiogMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGogaW4gcmFuZ2UobGVuKHNlcXVlbmNlKSAtIG4pXSkpIC8gKHN1bSgKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbKEFBaWR4W3Byb3BdW2luZGV4LmdldChzZXF1ZW5j
ZVtqXSwgMCldIC0geG1lYW4pICoqIDIgZm9yIGogaW4gcmFuZ2UobGVuKHNlcXVlbmNlKSldKSkpCiAg
ICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBybiA9
ICdOQScKICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQocm4pCiAgICAgICAgICAgICAg
ICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0g
bnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2Vs
Zi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2Rp
bmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAg
aWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4g
VHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAg
ZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQog
ICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9BQyhzZWxmKToKICAgICAgICB0
cnk6CiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKCiAgICAgICAg
ICAgIHByb3BlcnR5X25hbWUgPSBzZWxmLmt3WydhYWluZGV4J10uc3BsaXQoJzsnKQogICAgICAgICAg
ICBubGFnID0gc2VsZi5rd1snbmxhZyddCgogICAgICAgICAgICBpZiBzZWxmLm1pbmltdW1fbGVuZ3Ro
X3dpdGhvdXRfbWludXMgPCBubGFnICsgMToKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0g
J1RoZSBubGFnIHZhbHVlIGlzIHRvbyBsYXJnZS4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UK
CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGRhdGFfZmlsZSA9IG9zLnBhdGguc3BsaXQo
b3MucGF0aC5yZWFscGF0aChfX2ZpbGVfXykpWzBdICsgcidcZGF0YVxBQWluZGV4LmRhdGEnIGlmIHBs
YXRmb3JtLnN5c3RlbSgpID09ICdXaW5kb3dzJyBlbHNlIG9zLnBhdGguc3BsaXQob3MucGF0aC5yZWFs
cGF0aChfX2ZpbGVfXykpWzBdICsgcicvZGF0YS9BQWluZGV4LmRhdGEnCiAgICAgICAgICAgICAgICB3
aXRoIG9wZW4oZGF0YV9maWxlLCAncmInKSBhcyBoYW5kbGU6CiAgICAgICAgICAgICAgICAgICAgcHJv
cGVydHlfZGljdCA9IHBpY2tsZS5sb2FkKGhhbmRsZSkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlv
biBhcyBlOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnQ291bGQgbm90IGZpbmQgdGhl
IHBoeXNpY29jaGVtaWNhbCBwcm9wZXJ0aWVzIGZpbGUuJwogICAgICAgICAgICAgICAgcmV0dXJuIEZh
bHNlCgogICAgICAgICAgICBmb3IgcF9uYW1lIGluIHByb3BlcnR5X25hbWU6CiAgICAgICAgICAgICAg
ICB0bXAgPSBucC5hcnJheShwcm9wZXJ0eV9kaWN0W3BfbmFtZV0sIGR0eXBlPWZsb2F0KQogICAgICAg
ICAgICAgICAgcG1lYW4gPSBucC5hdmVyYWdlKHRtcCkKICAgICAgICAgICAgICAgIHBzdGQgPSBucC5z
dGQodG1wKQogICAgICAgICAgICAgICAgcHJvcGVydHlfZGljdFtwX25hbWVdID0gWyhlbGVtIC0gcG1l
YW4pIC8gcHN0ZCBmb3IgZWxlbSBpbiB0bXBdCgogICAgICAgICAgICBBQSA9ICdBUk5EQ1FFR0hJTEtN
RlBTVFdZVicKICAgICAgICAgICAgQUFfb3JkZXJfZGljdCA9IHt9CiAgICAgICAgICAgIGZvciBpIGlu
IHJhbmdlKGxlbihBQSkpOgogICAgICAgICAgICAgICAgQUFfb3JkZXJfZGljdFtBQVtpXV0gPSBpCgog
ICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUn
LCAnbGFiZWwnXQogICAgICAgICAgICBmb3IgcF9uYW1lIGluIHByb3BlcnR5X25hbWU6CiAgICAgICAg
ICAgICAgICBmb3IgaSBpbiByYW5nZShubGFnKToKICAgICAgICAgICAgICAgICAgICBoZWFkZXIuYXBw
ZW5kKCclcy5sYWclcycgJShwX25hbWUsIGkrMSkpCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQo
aGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAg
ICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBpWzJd
CiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgTCA9IGxl
bihzZXF1ZW5jZSkKICAgICAgICAgICAgICAgIGZvciBwX25hbWUgaW4gcHJvcGVydHlfbmFtZToKICAg
ICAgICAgICAgICAgICAgICB4bWVhbiA9IHN1bShbcHJvcGVydHlfZGljdFtwX25hbWVdW0FBX29yZGVy
X2RpY3RbYWFdXSBmb3IgYWEgaW4gc2VxdWVuY2VdKSAvIEwKICAgICAgICAgICAgICAgICAgICBmb3Ig
bGFnIGluIHJhbmdlKDEsIG5sYWcgKyAxKToKICAgICAgICAgICAgICAgICAgICAgICAgYWMgPSAwCiAg
ICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjID0g
c3VtKFsocHJvcGVydHlfZGljdFtwX25hbWVdW0FBX29yZGVyX2RpY3Rbc2VxdWVuY2Vbal1dXSAtIHht
ZWFuKSAqIChwcm9wZXJ0eV9kaWN0W3BfbmFtZV1bQUFfb3JkZXJfZGljdFtzZXF1ZW5jZVtqK2xhZ11d
XSAtIHhtZWFuKSBmb3IgaiBpbiByYW5nZShMIC0gbGFnKV0pLyhMLWxhZykKICAgICAgICAgICAgICAg
ICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
YWMgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKGFjKQogICAgICAgICAgICAg
ICAgZW5jb2RpbmdzLmFwcGVuZChjb2RlKQoKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9
IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNl
bGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29k
aW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAg
IGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJu
IFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAg
IGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkK
ICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFByb3RlaW5fQ0Moc2VsZik6CiAgICAgICAg
dHJ5OgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCgogICAgICAg
ICAgICBwcm9wZXJ0eV9uYW1lID0gc2VsZi5rd1snYWFpbmRleCddLnNwbGl0KCc7JykKICAgICAgICAg
ICAgaWYgbGVuKHByb3BlcnR5X25hbWUpIDwgMjoKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNn
ID0gJ01vcmUgdGhhbiB0d28gcHJvcGVydHkgc2hvdWxkIGJlIHNlbGVjdGVkIGZvciB0aGlzIGRlc2Ny
aXB0b3IuJwogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgICAgICBubGFnID0gc2Vs
Zi5rd1snbmxhZyddCgogICAgICAgICAgICBpZiBzZWxmLm1pbmltdW1fbGVuZ3RoX3dpdGhvdXRfbWlu
dXMgPCBubGFnICsgMToKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ1RoZSBubGFnIHZh
bHVlIGlzIHRvbyBsYXJnZS4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAg
IHRyeToKICAgICAgICAgICAgICAgIGRhdGFfZmlsZSA9IG9zLnBhdGguc3BsaXQob3MucGF0aC5yZWFs
cGF0aChfX2ZpbGVfXykpWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDBdICsgcidcZGF0
YVxBQWluZGV4LmRhdGEnIGlmIHBsYXRmb3JtLnN5c3RlbSgpID09ICdXaW5kb3dzJyBlbHNlIFwKICAg
ICAgICAgICAgICAgIG9zLnBhdGguc3BsaXQob3MucGF0aC5yZWFscGF0aChfX2ZpbGVfXykpWzBdICsg
cicvZGF0YS9BQWluZGV4LmRhdGEnCiAgICAgICAgICAgICAgICB3aXRoIG9wZW4oZGF0YV9maWxlLCAn
cmInKSBhcyBoYW5kbGU6CiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlfZGljdCA9IHBpY2tsZS5s
b2FkKGhhbmRsZSkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAg
ICAgc2VsZi5lcnJvcl9tc2cgPSAnQ291bGQgbm90IGZpbmQgdGhlIHBoeXNpY29jaGVtaWNhbCBwcm9w
ZXJ0aWVzIGZpbGUuJwogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgICAgICBmb3Ig
cF9uYW1lIGluIHByb3BlcnR5X25hbWU6CiAgICAgICAgICAgICAgICB0bXAgPSBucC5hcnJheShwcm9w
ZXJ0eV9kaWN0W3BfbmFtZV0sIGR0eXBlPWZsb2F0KQogICAgICAgICAgICAgICAgcG1lYW4gPSBucC5h
dmVyYWdlKHRtcCkKICAgICAgICAgICAgICAgIHBzdGQgPSBucC5zdGQodG1wKQogICAgICAgICAgICAg
ICAgcHJvcGVydHlfZGljdFtwX25hbWVdID0gWyhlbGVtIC0gcG1lYW4pIC8gcHN0ZCBmb3IgZWxlbSBp
biB0bXBdCgogICAgICAgICAgICBBQSA9ICdBUk5EQ1FFR0hJTEtNRlBTVFdZVicKICAgICAgICAgICAg
QUFfb3JkZXJfZGljdCA9IHt9CiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQSkpOgogICAg
ICAgICAgICAgICAgQUFfb3JkZXJfZGljdFtBQVtpXV0gPSBpCgogICAgICAgICAgICBwcm9wZXJ0eV9w
YWlycyA9IHNlbGYuZ2VuZXJhdGVQcm9wZXJ0eVBhaXJzKHByb3BlcnR5X25hbWUpCgogICAgICAgICAg
ICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwn
XQogICAgICAgICAgICBoZWFkZXIgKz0gW3BbMF0gKyAnXycgKyBwWzFdICsgJ19sYWcuJyArIHN0cihs
YWcpIGZvciBwIGluIHByb3BlcnR5X3BhaXJzIGZvciBsYWcgaW4gcmFuZ2UoMSwgbmxhZyArIDEpXQog
ICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNl
bGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0s
IHJlLnN1YignLScsICcnLCBpWzFdKSwgaVsyXQogICAgICAgICAgICAgICAgY29kZSA9IFtuYW1lLCBs
YWJlbF0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgTCA9IGxlbihzZXF1ZW5jZSkKICAg
ICAgICAgICAgICAgIGZvciBwYWlyIGluIHByb3BlcnR5X3BhaXJzOgogICAgICAgICAgICAgICAgICAg
IG1lYW5fcDEgPSBzdW0oW3Byb3BlcnR5X2RpY3RbcGFpclswXV1bQUFfb3JkZXJfZGljdFthYV1dIGZv
ciBhYSBpbiBzZXF1ZW5jZV0pIC8gTAogICAgICAgICAgICAgICAgICAgIG1lYW5fcDIgPSBzdW0oW3By
b3BlcnR5X2RpY3RbcGFpclsxXV1bQUFfb3JkZXJfZGljdFthYV1dIGZvciBhYSBpbiBzZXF1ZW5jZV0p
IC8gTAogICAgICAgICAgICAgICAgICAgIGZvciBsYWcgaW4gcmFuZ2UoMSwgbmxhZyArIDEpOgogICAg
ICAgICAgICAgICAgICAgICAgICBjYyA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY2MgPSBzdW0oWyhwcm9wZXJ0eV9kaWN0W3BhaXJbMF1dW0FB
X29yZGVyX2RpY3Rbc2VxdWVuY2Vbal1dXSAtIG1lYW5fcDEpICogKHByb3BlcnR5X2RpY3RbcGFpclsx
XV1bQUFfb3JkZXJfZGljdFtzZXF1ZW5jZVtqK2xhZ11dXSAtIG1lYW5fcDIpIGZvciBqIGluIHJhbmdl
KEwgLSBsYWcpXSkgLyAoTCAtIGxhZykKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2Vw
dGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MgPSAwCiAgICAgICAgICAgICAg
ICAgICAgICAgIGNvZGUuYXBwZW5kKGNjKQogICAgICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChj
b2RlKQoKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywg
ZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hh
cGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0g
MQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJy
YXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxz
ZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMg
ZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZh
bHNlCgogICAgZGVmIFByb3RlaW5fQUNDKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgc2Vs
Zi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQoKICAgICAgICAgICAgcHJvcGVydHlfbmFtZSA9
IHNlbGYua3dbJ2FhaW5kZXgnXS5zcGxpdCgnOycpCiAgICAgICAgICAgIGlmIGxlbihwcm9wZXJ0eV9u
YW1lKSA8IDI6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdNb3JlIHRoYW4gdHdvIHBy
b3BlcnR5IHNob3VsZCBiZSBzZWxlY3RlZCBmb3IgdGhpcyBkZXNjcmlwdG9yLicKICAgICAgICAgICAg
ICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAgbmxhZyA9IHNlbGYua3dbJ25sYWcnXQoKICAgICAg
ICAgICAgaWYgc2VsZi5taW5pbXVtX2xlbmd0aF93aXRob3V0X21pbnVzIDwgbmxhZyArIDE6CiAgICAg
ICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdUaGUgbmxhZyB2YWx1ZSBpcyB0b28gbGFyZ2UuJwog
ICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAg
ICBkYXRhX2ZpbGUgPSBvcy5wYXRoLnNwbGl0KG9zLnBhdGgucmVhbHBhdGgoX19maWxlX18pKVsKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXSArIHInXGRhdGFcQUFpbmRleC5kYXRhJyBpZiBw
bGF0Zm9ybS5zeXN0ZW0oKSA9PSAnV2luZG93cycgZWxzZSBcCiAgICAgICAgICAgICAgICAgICAgb3Mu
cGF0aC5zcGxpdChvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSlbMF0gKyByJy9kYXRhL0FBaW5kZXgu
ZGF0YScKICAgICAgICAgICAgICAgIHdpdGggb3BlbihkYXRhX2ZpbGUsICdyYicpIGFzIGhhbmRsZToK
ICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eV9kaWN0ID0gcGlja2xlLmxvYWQoaGFuZGxlKQogICAg
ICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21z
ZyA9ICdDb3VsZCBub3QgZmluZCB0aGUgcGh5c2ljb2NoZW1pY2FsIHByb3BlcnRpZXMgZmlsZS4nCiAg
ICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgIGZvciBwX25hbWUgaW4gcHJvcGVy
dHlfbmFtZToKICAgICAgICAgICAgICAgIHRtcCA9IG5wLmFycmF5KHByb3BlcnR5X2RpY3RbcF9uYW1l
XSwgZHR5cGU9ZmxvYXQpCiAgICAgICAgICAgICAgICBwbWVhbiA9IG5wLmF2ZXJhZ2UodG1wKQogICAg
ICAgICAgICAgICAgcHN0ZCA9IG5wLnN0ZCh0bXApCiAgICAgICAgICAgICAgICBwcm9wZXJ0eV9kaWN0
W3BfbmFtZV0gPSBbKGVsZW0gLSBwbWVhbikgLyBwc3RkIGZvciBlbGVtIGluIHRtcF0KCiAgICAgICAg
ICAgIEFBID0gJ0FSTkRDUUVHSElMS01GUFNUV1lWJwogICAgICAgICAgICBBQV9vcmRlcl9kaWN0ID0g
e30KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFBKSk6CiAgICAgICAgICAgICAgICBBQV9v
cmRlcl9kaWN0W0FBW2ldXSA9IGkKCiAgICAgICAgICAgIHByb3BlcnR5X3BhaXJzID0gc2VsZi5nZW5l
cmF0ZVByb3BlcnR5UGFpcnMocHJvcGVydHlfbmFtZSkKCiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtd
CiAgICAgICAgICAgIGhlYWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgICAgIGZv
ciBwX25hbWUgaW4gcHJvcGVydHlfbmFtZToKICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKG5s
YWcpOgogICAgICAgICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoJyVzLmxhZyVzJyAlIChwX25hbWUs
IGkgKyAxKSkKICAgICAgICAgICAgaGVhZGVyICs9IFtwWzBdICsgJ18nICsgcFsxXSArICdfbGFnLicg
KyBzdHIobGFnKSBmb3IgcCBpbiBwcm9wZXJ0eV9wYWlycyBmb3IgbGFnIGluIHJhbmdlKDEsIG5sYWcg
KyAxKV0KICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBmb3Ig
aSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwg
PSBpWzBdLCByZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBb
bmFtZSwgbGFiZWxdCgogICAgICAgICAgICAgICAgTCA9IGxlbihzZXF1ZW5jZSkKICAgICAgICAgICAg
ICAgIGZvciBwX25hbWUgaW4gcHJvcGVydHlfbmFtZToKICAgICAgICAgICAgICAgICAgICB4bWVhbiA9
IHN1bShbcHJvcGVydHlfZGljdFtwX25hbWVdW0FBX29yZGVyX2RpY3RbYWFdXSBmb3IgYWEgaW4gc2Vx
dWVuY2VdKSAvIEwKICAgICAgICAgICAgICAgICAgICBmb3IgbGFnIGluIHJhbmdlKDEsIG5sYWcgKyAx
KToKICAgICAgICAgICAgICAgICAgICAgICAgYWMgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgIHRy
eToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjID0gc3VtKFsocHJvcGVydHlfZGljdFtwX25h
bWVdW0FBX29yZGVyX2RpY3Rbc2VxdWVuY2Vbal1dXSAtIHhtZWFuKSAqIChwcm9wZXJ0eV9kaWN0W3Bf
bmFtZV1bQUFfb3JkZXJfZGljdFtzZXF1ZW5jZVtqK2xhZ11dXSAtIHhtZWFuKSBmb3IgaiBpbiByYW5n
ZShMIC0gbGFnKV0pLyhMLWxhZykKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlv
biBhcyBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWMgPSAwCiAgICAgICAgICAgICAgICAg
ICAgICAgIGNvZGUuYXBwZW5kKGFjKQogICAgICAgICAgICAgICAgZm9yIHBhaXIgaW4gcHJvcGVydHlf
cGFpcnM6CiAgICAgICAgICAgICAgICAgICAgbWVhbl9wMSA9IHN1bShbcHJvcGVydHlfZGljdFtwYWly
WzBdXVtBQV9vcmRlcl9kaWN0W2FhXV0gZm9yIGFhIGluIHNlcXVlbmNlXSkgLyBMCiAgICAgICAgICAg
ICAgICAgICAgbWVhbl9wMiA9IHN1bShbcHJvcGVydHlfZGljdFtwYWlyWzFdXVtBQV9vcmRlcl9kaWN0
W2FhXV0gZm9yIGFhIGluIHNlcXVlbmNlXSkgLyBMCiAgICAgICAgICAgICAgICAgICAgZm9yIGxhZyBp
biByYW5nZSgxLCBubGFnICsgMSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGNjID0gMAogICAgICAg
ICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYyA9IHN1bShb
KHByb3BlcnR5X2RpY3RbcGFpclswXV1bQUFfb3JkZXJfZGljdFtzZXF1ZW5jZVtqXV1dIC0gbWVhbl9w
MSkgKiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eV9kaWN0
W3BhaXJbMV1dW0FBX29yZGVyX2RpY3Rbc2VxdWVuY2VbaiArIGxhZ11dXSAtIG1lYW5fcDIpIGZvciBq
IGluCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlKEwgLSBsYWcpXSkgLyAo
TCAtIGxhZykKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY2MgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUu
YXBwZW5kKGNjKQogICAgICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChjb2RlKQoKICAgICAgICAg
ICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAg
ICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAg
ICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBk
ZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAx
OgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAg
ICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAg
c2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIENv
dW50KHNlbGYsIHNlcTEsIHNlcTIpOgogICAgICAgIHN1bSA9IDAKICAgICAgICBmb3IgYWEgaW4gc2Vx
MToKICAgICAgICAgICAgc3VtID0gc3VtICsgc2VxMi5jb3VudChhYSkKICAgICAgICByZXR1cm4gc3Vt
CgogICAgZGVmIFByb3RlaW5fQ1REQyhzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGdyb3Vw
MSA9IHsKICAgICAgICAgICAgICAgICdoeWRyb3Bob2JpY2l0eV9QUkFNOTAwMTAxJzogJ1JLRURRTics
CiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfQVJHUDgyMDEwMSc6ICdRU1ROR0RFJywKICAg
ICAgICAgICAgICAgICdoeWRyb3Bob2JpY2l0eV9aSU1KNjgwMTAxJzogJ1FOR1NXVERFUkEnLAogICAg
ICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1BPTlA5MzAxMDEnOiAnS1BERVNOUVQnLAogICAgICAg
ICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X0NBU0c5MjAxMDEnOiAnS0RFUVBTUk5URycsCiAgICAgICAg
ICAgICAgICAnaHlkcm9waG9iaWNpdHlfRU5HRDg2MDEwMSc6ICdSREtFTlFIWVAnLAogICAgICAgICAg
ICAgICAgJ2h5ZHJvcGhvYmljaXR5X0ZBU0c4OTAxMDEnOiAnS0VSU1FEJywKICAgICAgICAgICAgICAg
ICdub3Jtd2FhbHN2b2x1bWUnOiAnR0FTVFBEQycsCiAgICAgICAgICAgICAgICAncG9sYXJpdHknOiAn
TElGV0NNVlknLAogICAgICAgICAgICAgICAgJ3BvbGFyaXphYmlsaXR5JzogJ0dBU0RUJywKICAgICAg
ICAgICAgICAgICdjaGFyZ2UnOiAnS1InLAogICAgICAgICAgICAgICAgJ3NlY29uZGFyeXN0cnVjdCc6
ICdFQUxNUUtSSCcsCiAgICAgICAgICAgICAgICAnc29sdmVudGFjY2Vzcyc6ICdBTEZDR0lWVycKICAg
ICAgICAgICAgfQogICAgICAgICAgICBncm91cDIgPSB7CiAgICAgICAgICAgICAgICAnaHlkcm9waG9i
aWNpdHlfUFJBTTkwMDEwMSc6ICdHQVNUUEhZJywKICAgICAgICAgICAgICAgICdoeWRyb3Bob2JpY2l0
eV9BUkdQODIwMTAxJzogJ1JBSENLTVYnLAogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1pJ
TUo2ODAxMDEnOiAnSE1DS1YnLAogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1BPTlA5MzAx
MDEnOiAnR1JIQScsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfQ0FTRzkyMDEwMSc6ICdB
SFlNTFYnLAogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X0VOR0Q4NjAxMDEnOiAnU0dUQVcn
LAogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X0ZBU0c4OTAxMDEnOiAnTlRQRycsCiAgICAg
ICAgICAgICAgICAnbm9ybXdhYWxzdm9sdW1lJzogJ05WRVFJTCcsCiAgICAgICAgICAgICAgICAncG9s
YXJpdHknOiAnUEFUR1MnLAogICAgICAgICAgICAgICAgJ3BvbGFyaXphYmlsaXR5JzogJ0NQTlZFUUlM
JywKICAgICAgICAgICAgICAgICdjaGFyZ2UnOiAnQU5DUUdISUxNRlBTVFdZVicsCiAgICAgICAgICAg
ICAgICAnc2Vjb25kYXJ5c3RydWN0JzogJ1ZJWUNXRlQnLAogICAgICAgICAgICAgICAgJ3NvbHZlbnRh
Y2Nlc3MnOiAnUktRRU5EJwogICAgICAgICAgICB9CiAgICAgICAgICAgIGdyb3VwMyA9IHsKICAgICAg
ICAgICAgICAgICdoeWRyb3Bob2JpY2l0eV9QUkFNOTAwMTAxJzogJ0NMVklNRlcnLAogICAgICAgICAg
ICAgICAgJ2h5ZHJvcGhvYmljaXR5X0FSR1A4MjAxMDEnOiAnTFlQRklXJywKICAgICAgICAgICAgICAg
ICdoeWRyb3Bob2JpY2l0eV9aSU1KNjgwMTAxJzogJ0xQRllJJywKICAgICAgICAgICAgICAgICdoeWRy
b3Bob2JpY2l0eV9QT05QOTMwMTAxJzogJ1lNRldMQ1ZJJywKICAgICAgICAgICAgICAgICdoeWRyb3Bo
b2JpY2l0eV9DQVNHOTIwMTAxJzogJ0ZJV0MnLAogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5
X0VOR0Q4NjAxMDEnOiAnQ1ZMSU1GJywKICAgICAgICAgICAgICAgICdoeWRyb3Bob2JpY2l0eV9GQVNH
ODkwMTAxJzogJ0FZSFdWTUZMSUMnLAogICAgICAgICAgICAgICAgJ25vcm13YWFsc3ZvbHVtZSc6ICdN
SEtGUllXJywKICAgICAgICAgICAgICAgICdwb2xhcml0eSc6ICdIUVJLTkVEJywKICAgICAgICAgICAg
ICAgICdwb2xhcml6YWJpbGl0eSc6ICdLTUhGUllXJywKICAgICAgICAgICAgICAgICdjaGFyZ2UnOiAn
REUnLAogICAgICAgICAgICAgICAgJ3NlY29uZGFyeXN0cnVjdCc6ICdHTlBTRCcsCiAgICAgICAgICAg
ICAgICAnc29sdmVudGFjY2Vzcyc6ICdNU1BUSFknCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGdy
b3VwcyA9IFtncm91cDEsIGdyb3VwMiwgZ3JvdXAzXQogICAgICAgICAgICBwcm9wZXJ0eSA9ICgKICAg
ICAgICAgICAgICAgICdoeWRyb3Bob2JpY2l0eV9QUkFNOTAwMTAxJywgJ2h5ZHJvcGhvYmljaXR5X0FS
R1A4MjAxMDEnLCAnaHlkcm9waG9iaWNpdHlfWklNSjY4MDEwMScsCiAgICAgICAgICAgICAgICAnaHlk
cm9waG9iaWNpdHlfUE9OUDkzMDEwMScsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfQ0FT
RzkyMDEwMScsICdoeWRyb3Bob2JpY2l0eV9FTkdEODYwMTAxJywgJ2h5ZHJvcGhvYmljaXR5X0ZBU0c4
OTAxMDEnLCAnbm9ybXdhYWxzdm9sdW1lJywKICAgICAgICAgICAgICAgICdwb2xhcml0eScsICdwb2xh
cml6YWJpbGl0eScsICdjaGFyZ2UnLCAnc2Vjb25kYXJ5c3RydWN0JywgJ3NvbHZlbnRhY2Nlc3MnKQoK
ICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1l
JywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIHAgaW4gcHJvcGVydHk6CiAgICAgICAgICAgICAgICBm
b3IgZyBpbiByYW5nZSgxLCBsZW4oZ3JvdXBzKSArIDEpOgogICAgICAgICAgICAgICAgICAgIGhlYWRl
ci5hcHBlbmQocCArICcuRycgKyBzdHIoZykpCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVh
ZGVyKQogICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBu
YW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCByZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0KICAg
ICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICBmb3IgcCBpbiBw
cm9wZXJ0eToKICAgICAgICAgICAgICAgICAgICBjMSA9IHNlbGYuQ291bnQoZ3JvdXAxW3BdLCBzZXF1
ZW5jZSkgLyBsZW4oc2VxdWVuY2UpCiAgICAgICAgICAgICAgICAgICAgYzIgPSBzZWxmLkNvdW50KGdy
b3VwMltwXSwgc2VxdWVuY2UpIC8gbGVuKHNlcXVlbmNlKQogICAgICAgICAgICAgICAgICAgIGMzID0g
MSAtIGMxIC0gYzIKICAgICAgICAgICAgICAgICAgICBjb2RlID0gY29kZSArIFtjMSwgYzIsIGMzXQog
ICAgICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChjb2RlKQoKICAgICAgICAgICAgc2VsZi5lbmNv
ZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0g
bnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2Vs
Zi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2Rp
bmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAg
aWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4g
VHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAg
ZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQog
ICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9DVERUKHNlbGYpOgogICAgICAg
IHRyeToKICAgICAgICAgICAgZ3JvdXAxID0gewogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5
X1BSQU05MDAxMDEnOiAnUktFRFFOJywKICAgICAgICAgICAgICAgICdoeWRyb3Bob2JpY2l0eV9BUkdQ
ODIwMTAxJzogJ1FTVE5HREUnLAogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1pJTUo2ODAx
MDEnOiAnUU5HU1dUREVSQScsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfUE9OUDkzMDEw
MSc6ICdLUERFU05RVCcsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfQ0FTRzkyMDEwMSc6
ICdLREVRUFNSTlRHJywKICAgICAgICAgICAgICAgICdoeWRyb3Bob2JpY2l0eV9FTkdEODYwMTAxJzog
J1JES0VOUUhZUCcsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfRkFTRzg5MDEwMSc6ICdL
RVJTUUQnLAogICAgICAgICAgICAgICAgJ25vcm13YWFsc3ZvbHVtZSc6ICdHQVNUUERDJywKICAgICAg
ICAgICAgICAgICdwb2xhcml0eSc6ICdMSUZXQ01WWScsCiAgICAgICAgICAgICAgICAncG9sYXJpemFi
aWxpdHknOiAnR0FTRFQnLAogICAgICAgICAgICAgICAgJ2NoYXJnZSc6ICdLUicsCiAgICAgICAgICAg
ICAgICAnc2Vjb25kYXJ5c3RydWN0JzogJ0VBTE1RS1JIJywKICAgICAgICAgICAgICAgICdzb2x2ZW50
YWNjZXNzJzogJ0FMRkNHSVZXJwogICAgICAgICAgICB9CiAgICAgICAgICAgIGdyb3VwMiA9IHsKICAg
ICAgICAgICAgICAgICdoeWRyb3Bob2JpY2l0eV9QUkFNOTAwMTAxJzogJ0dBU1RQSFknLAogICAgICAg
ICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X0FSR1A4MjAxMDEnOiAnUkFIQ0tNVicsCiAgICAgICAgICAg
ICAgICAnaHlkcm9waG9iaWNpdHlfWklNSjY4MDEwMSc6ICdITUNLVicsCiAgICAgICAgICAgICAgICAn
aHlkcm9waG9iaWNpdHlfUE9OUDkzMDEwMSc6ICdHUkhBJywKICAgICAgICAgICAgICAgICdoeWRyb3Bo
b2JpY2l0eV9DQVNHOTIwMTAxJzogJ0FIWU1MVicsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNp
dHlfRU5HRDg2MDEwMSc6ICdTR1RBVycsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfRkFT
Rzg5MDEwMSc6ICdOVFBHJywKICAgICAgICAgICAgICAgICdub3Jtd2FhbHN2b2x1bWUnOiAnTlZFUUlM
JywKICAgICAgICAgICAgICAgICdwb2xhcml0eSc6ICdQQVRHUycsCiAgICAgICAgICAgICAgICAncG9s
YXJpemFiaWxpdHknOiAnQ1BOVkVRSUwnLAogICAgICAgICAgICAgICAgJ2NoYXJnZSc6ICdBTkNRR0hJ
TE1GUFNUV1lWJywKICAgICAgICAgICAgICAgICdzZWNvbmRhcnlzdHJ1Y3QnOiAnVklZQ1dGVCcsCiAg
ICAgICAgICAgICAgICAnc29sdmVudGFjY2Vzcyc6ICdSS1FFTkQnCiAgICAgICAgICAgIH0KICAgICAg
ICAgICAgZ3JvdXAzID0gewogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1BSQU05MDAxMDEn
OiAnQ0xWSU1GVycsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfQVJHUDgyMDEwMSc6ICdM
WVBGSVcnLAogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1pJTUo2ODAxMDEnOiAnTFBGWUkn
LAogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1BPTlA5MzAxMDEnOiAnWU1GV0xDVkknLAog
ICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X0NBU0c5MjAxMDEnOiAnRklXQycsCiAgICAgICAg
ICAgICAgICAnaHlkcm9waG9iaWNpdHlfRU5HRDg2MDEwMSc6ICdDVkxJTUYnLAogICAgICAgICAgICAg
ICAgJ2h5ZHJvcGhvYmljaXR5X0ZBU0c4OTAxMDEnOiAnQVlIV1ZNRkxJQycsCiAgICAgICAgICAgICAg
ICAnbm9ybXdhYWxzdm9sdW1lJzogJ01IS0ZSWVcnLAogICAgICAgICAgICAgICAgJ3BvbGFyaXR5Jzog
J0hRUktORUQnLAogICAgICAgICAgICAgICAgJ3BvbGFyaXphYmlsaXR5JzogJ0tNSEZSWVcnLAogICAg
ICAgICAgICAgICAgJ2NoYXJnZSc6ICdERScsCiAgICAgICAgICAgICAgICAnc2Vjb25kYXJ5c3RydWN0
JzogJ0dOUFNEJywKICAgICAgICAgICAgICAgICdzb2x2ZW50YWNjZXNzJzogJ01TUFRIWScKICAgICAg
ICAgICAgfQoKICAgICAgICAgICAgZ3JvdXBzID0gW2dyb3VwMSwgZ3JvdXAyLCBncm91cDNdCiAgICAg
ICAgICAgIHByb3BlcnR5ID0gKAogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1BSQU05MDAx
MDEnLCAnaHlkcm9waG9iaWNpdHlfQVJHUDgyMDEwMScsICdoeWRyb3Bob2JpY2l0eV9aSU1KNjgwMTAx
JywKICAgICAgICAgICAgICAgICdoeWRyb3Bob2JpY2l0eV9QT05QOTMwMTAxJywKICAgICAgICAgICAg
ICAgICdoeWRyb3Bob2JpY2l0eV9DQVNHOTIwMTAxJywgJ2h5ZHJvcGhvYmljaXR5X0VOR0Q4NjAxMDEn
LCAnaHlkcm9waG9iaWNpdHlfRkFTRzg5MDEwMScsICdub3Jtd2FhbHN2b2x1bWUnLAogICAgICAgICAg
ICAgICAgJ3BvbGFyaXR5JywgJ3BvbGFyaXphYmlsaXR5JywgJ2NoYXJnZScsICdzZWNvbmRhcnlzdHJ1
Y3QnLCAnc29sdmVudGFjY2VzcycpCgogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAg
ICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXQogICAgICAgICAgICBmb3IgcCBpbiBwcm9w
ZXJ0eToKICAgICAgICAgICAgICAgIGZvciB0ciBpbiAoJ1RyMTIyMScsICdUcjEzMzEnLCAnVHIyMzMy
Jyk6CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZChwICsgJy4nICsgdHIpCiAgICAgICAg
ICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0
YV9saXN0OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3Vi
KCctJywgJycsIGlbMV0pLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQog
ICAgICAgICAgICAgICAgYWFQYWlyID0gW3NlcXVlbmNlW2o6aiArIDJdIGZvciBqIGluIHJhbmdlKGxl
bihzZXF1ZW5jZSkgLSAxKV0KICAgICAgICAgICAgICAgIGZvciBwIGluIHByb3BlcnR5OgogICAgICAg
ICAgICAgICAgICAgIGMxMjIxLCBjMTMzMSwgYzIzMzIgPSAwLCAwLCAwCiAgICAgICAgICAgICAgICAg
ICAgZm9yIHBhaXIgaW4gYWFQYWlyOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFpclswXSBp
biBncm91cDFbcF0gYW5kIHBhaXJbMV0gaW4gZ3JvdXAyW3BdKSBvciAoCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgcGFpclswXSBpbiBncm91cDJbcF0gYW5kIHBhaXJbMV0gaW4gZ3JvdXAxW3Bd
KToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMxMjIxID0gYzEyMjEgKyAxCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFpclsw
XSBpbiBncm91cDFbcF0gYW5kIHBhaXJbMV0gaW4gZ3JvdXAzW3BdKSBvciAoCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgcGFpclswXSBpbiBncm91cDNbcF0gYW5kIHBhaXJbMV0gaW4gZ3JvdXAx
W3BdKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMxMzMxID0gYzEzMzEgKyAxCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFp
clswXSBpbiBncm91cDJbcF0gYW5kIHBhaXJbMV0gaW4gZ3JvdXAzW3BdKSBvciAoCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcGFpclswXSBpbiBncm91cDNbcF0gYW5kIHBhaXJbMV0gaW4gZ3Jv
dXAyW3BdKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMyMzMyID0gYzIzMzIgKyAxCiAgICAg
ICAgICAgICAgICAgICAgY29kZSA9IGNvZGUgKyBbYzEyMjEgLyBsZW4oYWFQYWlyKSwgYzEzMzEgLyBs
ZW4oYWFQYWlyKSwgYzIzMzIgLyBsZW4oYWFQYWlyKV0KICAgICAgICAgICAgICAgIGVuY29kaW5ncy5h
cHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkK
ICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9
c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0K
ICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAg
ICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hh
cGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAg
ICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAg
ICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgog
ICAgZGVmIENvdW50MShzZWxmLCBhYVNldCwgc2VxdWVuY2UpOgogICAgICAgIG51bWJlciA9IDAKICAg
ICAgICBmb3IgYWEgaW4gc2VxdWVuY2U6CiAgICAgICAgICAgIGlmIGFhIGluIGFhU2V0OgogICAgICAg
ICAgICAgICAgbnVtYmVyID0gbnVtYmVyICsgMQogICAgICAgIGN1dG9mZk51bXMgPSBbMSwgbWF0aC5m
bG9vcigwLjI1ICogbnVtYmVyKSwgbWF0aC5mbG9vcigwLjUwICogbnVtYmVyKSwgbWF0aC5mbG9vcigw
Ljc1ICogbnVtYmVyKSwgbnVtYmVyXQogICAgICAgIGN1dG9mZk51bXMgPSBbaSBpZiBpID49IDEgZWxz
ZSAxIGZvciBpIGluIGN1dG9mZk51bXNdCgogICAgICAgIGNvZGUgPSBbXQogICAgICAgIGZvciBjdXRv
ZmYgaW4gY3V0b2ZmTnVtczoKICAgICAgICAgICAgbXlDb3VudCA9IDAKICAgICAgICAgICAgZm9yIGkg
aW4gcmFuZ2UobGVuKHNlcXVlbmNlKSk6CiAgICAgICAgICAgICAgICBpZiBzZXF1ZW5jZVtpXSBpbiBh
YVNldDoKICAgICAgICAgICAgICAgICAgICBteUNvdW50ICs9IDEKICAgICAgICAgICAgICAgICAgICBp
ZiBteUNvdW50ID09IGN1dG9mZjoKICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoKGkg
KyAxKSAvIGxlbihzZXF1ZW5jZSkgKiAxMDApCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAg
ICAgICAgICAgIGlmIG15Q291bnQgPT0gMDoKICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKDApCiAg
ICAgICAgcmV0dXJuIGNvZGUKCiAgICBkZWYgUHJvdGVpbl9DVEREKHNlbGYpOgogICAgICAgIHRyeToK
ICAgICAgICAgICAgZ3JvdXAxID0gewogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1BSQU05
MDAxMDEnOiAnUktFRFFOJywKICAgICAgICAgICAgICAgICdoeWRyb3Bob2JpY2l0eV9BUkdQODIwMTAx
JzogJ1FTVE5HREUnLAogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1pJTUo2ODAxMDEnOiAn
UU5HU1dUREVSQScsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfUE9OUDkzMDEwMSc6ICdL
UERFU05RVCcsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfQ0FTRzkyMDEwMSc6ICdLREVR
UFNSTlRHJywKICAgICAgICAgICAgICAgICdoeWRyb3Bob2JpY2l0eV9FTkdEODYwMTAxJzogJ1JES0VO
UUhZUCcsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfRkFTRzg5MDEwMSc6ICdLRVJTUUQn
LAogICAgICAgICAgICAgICAgJ25vcm13YWFsc3ZvbHVtZSc6ICdHQVNUUERDJywKICAgICAgICAgICAg
ICAgICdwb2xhcml0eSc6ICdMSUZXQ01WWScsCiAgICAgICAgICAgICAgICAncG9sYXJpemFiaWxpdHkn
OiAnR0FTRFQnLAogICAgICAgICAgICAgICAgJ2NoYXJnZSc6ICdLUicsCiAgICAgICAgICAgICAgICAn
c2Vjb25kYXJ5c3RydWN0JzogJ0VBTE1RS1JIJywKICAgICAgICAgICAgICAgICdzb2x2ZW50YWNjZXNz
JzogJ0FMRkNHSVZXJwogICAgICAgICAgICB9CiAgICAgICAgICAgIGdyb3VwMiA9IHsKICAgICAgICAg
ICAgICAgICdoeWRyb3Bob2JpY2l0eV9QUkFNOTAwMTAxJzogJ0dBU1RQSFknLAogICAgICAgICAgICAg
ICAgJ2h5ZHJvcGhvYmljaXR5X0FSR1A4MjAxMDEnOiAnUkFIQ0tNVicsCiAgICAgICAgICAgICAgICAn
aHlkcm9waG9iaWNpdHlfWklNSjY4MDEwMSc6ICdITUNLVicsCiAgICAgICAgICAgICAgICAnaHlkcm9w
aG9iaWNpdHlfUE9OUDkzMDEwMSc6ICdHUkhBJywKICAgICAgICAgICAgICAgICdoeWRyb3Bob2JpY2l0
eV9DQVNHOTIwMTAxJzogJ0FIWU1MVicsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfRU5H
RDg2MDEwMSc6ICdTR1RBVycsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfRkFTRzg5MDEw
MSc6ICdOVFBHJywKICAgICAgICAgICAgICAgICdub3Jtd2FhbHN2b2x1bWUnOiAnTlZFUUlMJywKICAg
ICAgICAgICAgICAgICdwb2xhcml0eSc6ICdQQVRHUycsCiAgICAgICAgICAgICAgICAncG9sYXJpemFi
aWxpdHknOiAnQ1BOVkVRSUwnLAogICAgICAgICAgICAgICAgJ2NoYXJnZSc6ICdBTkNRR0hJTE1GUFNU
V1lWJywKICAgICAgICAgICAgICAgICdzZWNvbmRhcnlzdHJ1Y3QnOiAnVklZQ1dGVCcsCiAgICAgICAg
ICAgICAgICAnc29sdmVudGFjY2Vzcyc6ICdSS1FFTkQnCiAgICAgICAgICAgIH0KICAgICAgICAgICAg
Z3JvdXAzID0gewogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1BSQU05MDAxMDEnOiAnQ0xW
SU1GVycsCiAgICAgICAgICAgICAgICAnaHlkcm9waG9iaWNpdHlfQVJHUDgyMDEwMSc6ICdMWVBGSVcn
LAogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1pJTUo2ODAxMDEnOiAnTFBGWUknLAogICAg
ICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1BPTlA5MzAxMDEnOiAnWU1GV0xDVkknLAogICAgICAg
ICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X0NBU0c5MjAxMDEnOiAnRklXQycsCiAgICAgICAgICAgICAg
ICAnaHlkcm9waG9iaWNpdHlfRU5HRDg2MDEwMSc6ICdDVkxJTUYnLAogICAgICAgICAgICAgICAgJ2h5
ZHJvcGhvYmljaXR5X0ZBU0c4OTAxMDEnOiAnQVlIV1ZNRkxJQycsCiAgICAgICAgICAgICAgICAnbm9y
bXdhYWxzdm9sdW1lJzogJ01IS0ZSWVcnLAogICAgICAgICAgICAgICAgJ3BvbGFyaXR5JzogJ0hRUktO
RUQnLAogICAgICAgICAgICAgICAgJ3BvbGFyaXphYmlsaXR5JzogJ0tNSEZSWVcnLAogICAgICAgICAg
ICAgICAgJ2NoYXJnZSc6ICdERScsCiAgICAgICAgICAgICAgICAnc2Vjb25kYXJ5c3RydWN0JzogJ0dO
UFNEJywKICAgICAgICAgICAgICAgICdzb2x2ZW50YWNjZXNzJzogJ01TUFRIWScKICAgICAgICAgICAg
fQoKICAgICAgICAgICAgZ3JvdXBzID0gW2dyb3VwMSwgZ3JvdXAyLCBncm91cDNdCiAgICAgICAgICAg
IHByb3BlcnR5ID0gKAogICAgICAgICAgICAgICAgJ2h5ZHJvcGhvYmljaXR5X1BSQU05MDAxMDEnLCAn
aHlkcm9waG9iaWNpdHlfQVJHUDgyMDEwMScsICdoeWRyb3Bob2JpY2l0eV9aSU1KNjgwMTAxJywKICAg
ICAgICAgICAgICAgICdoeWRyb3Bob2JpY2l0eV9QT05QOTMwMTAxJywKICAgICAgICAgICAgICAgICdo
eWRyb3Bob2JpY2l0eV9DQVNHOTIwMTAxJywgJ2h5ZHJvcGhvYmljaXR5X0VOR0Q4NjAxMDEnLCAnaHlk
cm9waG9iaWNpdHlfRkFTRzg5MDEwMScsICdub3Jtd2FhbHN2b2x1bWUnLAogICAgICAgICAgICAgICAg
J3BvbGFyaXR5JywgJ3BvbGFyaXphYmlsaXR5JywgJ2NoYXJnZScsICdzZWNvbmRhcnlzdHJ1Y3QnLCAn
c29sdmVudGFjY2VzcycpCgogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFk
ZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXQogICAgICAgICAgICBmb3IgcCBpbiBwcm9wZXJ0eToK
ICAgICAgICAgICAgICAgIGZvciBnIGluICgnMScsICcyJywgJzMnKToKICAgICAgICAgICAgICAgICAg
ICBmb3IgZCBpbiBbJzAnLCAnMjUnLCAnNTAnLCAnNzUnLCAnMTAwJ106CiAgICAgICAgICAgICAgICAg
ICAgICAgIGhlYWRlci5hcHBlbmQocCArICcuJyArIGcgKyAnLnJlc2lkdWUnICsgZCkKICAgICAgICAg
ICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZhc3Rh
X2xpc3Q6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCByZS5zdWIo
Jy0nLCAnJywgaVsxXSksIGlbMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAg
ICAgICAgICAgICAgICBmb3IgcCBpbiBwcm9wZXJ0eToKICAgICAgICAgICAgICAgICAgICBjb2RlID0g
Y29kZSArIHNlbGYuQ291bnQxKGdyb3VwMVtwXSwgc2VxdWVuY2UpICsgc2VsZi5Db3VudDEoZ3JvdXAy
W3BdLCBzZXF1ZW5jZSkgKyBzZWxmLkNvdW50MSgKICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXAz
W3BdLCBzZXF1ZW5jZSkKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAg
ICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAgc2VsZi5l
bmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBz
ZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5y
b3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2Rp
bmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAg
ICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVy
biBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJv
cl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIENhbGN1bGF0ZUtT
Q1RyaWFkKHNlbGYsIHNlcXVlbmNlLCBnYXAsIGZlYXR1cmVzLCBBQURpY3QpOgogICAgICAgIHJlcyA9
IFtdCiAgICAgICAgZm9yIGcgaW4gcmFuZ2UoZ2FwICsgMSk6CiAgICAgICAgICAgIG15RGljdCA9IHt9
CiAgICAgICAgICAgIGZvciBmIGluIGZlYXR1cmVzOgogICAgICAgICAgICAgICAgbXlEaWN0W2ZdID0g
MAoKICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKHNlcXVlbmNlKSk6CiAgICAgICAgICAgICAg
ICBpZiBpICsgZyArIDEgPCBsZW4oc2VxdWVuY2UpIGFuZCBpICsgMiAqIGcgKyAyIDwgbGVuKHNlcXVl
bmNlKToKICAgICAgICAgICAgICAgICAgICBmZWEgPSBBQURpY3Rbc2VxdWVuY2VbaV1dICsgJy4nICsg
QUFEaWN0W3NlcXVlbmNlW2kgKyBnICsgMV1dICsgJy4nICsgQUFEaWN0WwogICAgICAgICAgICAgICAg
ICAgICAgICBzZXF1ZW5jZVtpICsgMiAqIGcgKyAyXV0KICAgICAgICAgICAgICAgICAgICBteURpY3Rb
ZmVhXSA9IG15RGljdFtmZWFdICsgMQoKICAgICAgICAgICAgbWF4VmFsdWUsIG1pblZhbHVlID0gbWF4
KG15RGljdC52YWx1ZXMoKSksIG1pbihteURpY3QudmFsdWVzKCkpCiAgICAgICAgICAgIGZvciBmIGlu
IGZlYXR1cmVzOgogICAgICAgICAgICAgICAgcmVzLmFwcGVuZCgobXlEaWN0W2ZdIC0gbWluVmFsdWUp
IC8gbWF4VmFsdWUpCiAgICAgICAgcmV0dXJuIHJlcwoKICAgIGRlZiBQcm90ZWluX0NUcmlhZChzZWxm
KToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIHNlbGYubWluaW11bV9sZW5ndGhfd2l0aG91dF9t
aW51cyA8IDM6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdDVHJpYWQgZGVzY3JpcHRv
ciBuZWVkIGZhc3RhIHNlcXVlbmNlIHdpdGggbWluaW11bSBsZW5ndGggPiAzLicKICAgICAgICAgICAg
ICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAgQUFHcm91cCA9IHsKICAgICAgICAgICAgICAgICdn
MSc6ICdBR1YnLAogICAgICAgICAgICAgICAgJ2cyJzogJ0lMRlAnLAogICAgICAgICAgICAgICAgJ2cz
JzogJ1lNVFMnLAogICAgICAgICAgICAgICAgJ2c0JzogJ0hOUVcnLAogICAgICAgICAgICAgICAgJ2c1
JzogJ1JLJywKICAgICAgICAgICAgICAgICdnNic6ICdERScsCiAgICAgICAgICAgICAgICAnZzcnOiAn
QycKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbXlHcm91cHMgPSBzb3J0ZWQoQUFHcm91cC5rZXlz
KCkpCgogICAgICAgICAgICBBQURpY3QgPSB7fQogICAgICAgICAgICBmb3IgZyBpbiBteUdyb3VwczoK
ICAgICAgICAgICAgICAgIGZvciBhYSBpbiBBQUdyb3VwW2ddOgogICAgICAgICAgICAgICAgICAgIEFB
RGljdFthYV0gPSBnCgogICAgICAgICAgICBmZWF0dXJlcyA9IFtmMSArICcuJyArIGYyICsgJy4nICsg
ZjMgZm9yIGYxIGluIG15R3JvdXBzIGZvciBmMiBpbiBteUdyb3VwcyBmb3IgZjMgaW4gbXlHcm91cHNd
CgogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5h
bWUnLCAnbGFiZWwnXQogICAgICAgICAgICBmb3IgZiBpbiBmZWF0dXJlczoKICAgICAgICAgICAgICAg
IGhlYWRlci5hcHBlbmQoZikKICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAg
ICAgICAgICBmb3IgaSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1
ZW5jZSwgbGFiZWwgPSBpWzBdLCByZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0KICAgICAgICAgICAg
ICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICBjb2RlID0gY29kZSArIHNlbGYu
Q2FsY3VsYXRlS1NDVHJpYWQoc2VxdWVuY2UsIDAsIGZlYXR1cmVzLCBBQURpY3QpCiAgICAgICAgICAg
ICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkg
PSBucC5hcnJheShbXSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVu
Y29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2Rpbmdf
YXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNo
YXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5j
b2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAg
ICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNl
cHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAg
cmV0dXJuIEZhbHNlCgogICAgZGVmIFByb3RlaW5fS1NDVHJpYWQoc2VsZik6CiAgICAgICAgdHJ5Ogog
ICAgICAgICAgICBnYXAgPSBzZWxmLmt3Wydrc3BhY2UnXQogICAgICAgICAgICBpZiBzZWxmLm1pbmlt
dW1fbGVuZ3RoX3dpdGhvdXRfbWludXMgPCAyICogZ2FwICsgMzoKICAgICAgICAgICAgICAgIHNlbGYu
ZXJyb3JfbXNnID0gJ0tTQ1RyaWFkIiBlbmNvZGluZywgdGhlIGlucHV0IGZhc3RhIHNlcXVlbmNlcyBz
aG91bGQgYmUgZ3JlYXRlciB0aGFuICgyKmdhcCszKS4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFs
c2UKCiAgICAgICAgICAgIEFBR3JvdXAgPSB7CiAgICAgICAgICAgICAgICAnZzEnOiAnQUdWJywKICAg
ICAgICAgICAgICAgICdnMic6ICdJTEZQJywKICAgICAgICAgICAgICAgICdnMyc6ICdZTVRTJywKICAg
ICAgICAgICAgICAgICdnNCc6ICdITlFXJywKICAgICAgICAgICAgICAgICdnNSc6ICdSSycsCiAgICAg
ICAgICAgICAgICAnZzYnOiAnREUnLAogICAgICAgICAgICAgICAgJ2c3JzogJ0MnCiAgICAgICAgICAg
IH0KCiAgICAgICAgICAgIG15R3JvdXBzID0gc29ydGVkKEFBR3JvdXAua2V5cygpKQoKICAgICAgICAg
ICAgQUFEaWN0ID0ge30KICAgICAgICAgICAgZm9yIGcgaW4gbXlHcm91cHM6CiAgICAgICAgICAgICAg
ICBmb3IgYWEgaW4gQUFHcm91cFtnXToKICAgICAgICAgICAgICAgICAgICBBQURpY3RbYWFdID0gZwoK
ICAgICAgICAgICAgZmVhdHVyZXMgPSBbZjEgKyAnLicgKyBmMiArICcuJyArIGYzIGZvciBmMSBpbiBt
eUdyb3VwcyBmb3IgZjIgaW4gbXlHcm91cHMgZm9yIGYzIGluIG15R3JvdXBzXQoKICAgICAgICAgICAg
ZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10K
ICAgICAgICAgICAgZm9yIGcgaW4gcmFuZ2UoZ2FwICsgMSk6CiAgICAgICAgICAgICAgICBmb3IgZiBp
biBmZWF0dXJlczoKICAgICAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKGYgKyAnLmdhcCcgKyBz
dHIoZykpCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9y
IGkgaW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVs
ID0gaVswXSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0g
W25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgaWYgbGVuKHNlcXVlbmNlKSA8IDIgKiBnYXAgKyAz
OgogICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAnRXJyb3I6
IGZvciAiS1NDVHJpYWQiIGVuY29kaW5nLCB0aGUgaW5wdXQgZmFzdGEgc2VxdWVuY2VzIHNob3VsZCBi
ZSBncmVhdGVyIHRoYW4gKDIqZ2FwKzMpLiBcblxuJykKICAgICAgICAgICAgICAgICAgICByZXR1cm4g
MAogICAgICAgICAgICAgICAgY29kZSA9IGNvZGUgKyBzZWxmLkNhbGN1bGF0ZUtTQ1RyaWFkKHNlcXVl
bmNlLCBnYXAsIGZlYXR1cmVzLCBBQURpY3QpCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5k
KGNvZGUpCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAg
ICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQog
ICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAg
ICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAg
ICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0g
PiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAg
ICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVm
IFByb3RlaW5fU09DTnVtYmVyKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgbmxhZyA9IHNl
bGYua3dbJ25sYWcnXQogICAgICAgICAgICBkYXRhRmlsZSA9IG9zLnBhdGguc3BsaXQob3MucGF0aC5y
ZWFscGF0aChfX2ZpbGVfXykpWwogICAgICAgICAgICAgICAgICAgICAgICAwXSArIHInXGRhdGFcU2No
bmVpZGVyLVdyZWRlLnR4dCcgaWYgcGxhdGZvcm0uc3lzdGVtKCkgPT0gJ1dpbmRvd3MnIGVsc2UgXAog
ICAgICAgICAgICAgICAgb3MucGF0aC5zcGxpdChvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSlbMF0g
KyByJy9kYXRhL1NjaG5laWRlci1XcmVkZS50eHQnCiAgICAgICAgICAgIGRhdGFGaWxlMSA9IG9zLnBh
dGguc3BsaXQob3MucGF0aC5yZWFscGF0aChfX2ZpbGVfXykpWwogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgMF0gKyByJ1xkYXRhXEdyYW50aGFtLnR4dCcgaWYgcGxhdGZvcm0uc3lzdGVtKCkgPT0gJ1dp
bmRvd3MnIGVsc2UgXAogICAgICAgICAgICAgICAgb3MucGF0aC5zcGxpdChvcy5wYXRoLnJlYWxwYXRo
KF9fZmlsZV9fKSlbMF0gKyByJy9kYXRhL0dyYW50aGFtLnR4dCcKICAgICAgICAgICAgQUEgPSAnQUNE
RUZHSElLTE1OUFFSU1RWV1knCiAgICAgICAgICAgIEFBMSA9ICdBUk5EQ1FFR0hJTEtNRlBTVFdZVicK
CiAgICAgICAgICAgIERpY3RBQSA9IHt9CiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQSkp
OgogICAgICAgICAgICAgICAgRGljdEFBW0FBW2ldXSA9IGkKCiAgICAgICAgICAgIERpY3RBQTEgPSB7
fQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUExKSk6CiAgICAgICAgICAgICAgICBEaWN0
QUExW0FBMVtpXV0gPSBpCgogICAgICAgICAgICB3aXRoIG9wZW4oZGF0YUZpbGUpIGFzIGY6CiAgICAg
ICAgICAgICAgICByZWNvcmRzID0gZi5yZWFkbGluZXMoKVsxOl0KICAgICAgICAgICAgQUFEaXN0YW5j
ZSA9IFtdCiAgICAgICAgICAgIGZvciBpIGluIHJlY29yZHM6CiAgICAgICAgICAgICAgICBhcnJheSA9
IGkucnN0cmlwKCkuc3BsaXQoKVsxOl0gaWYgaS5yc3RyaXAoKSAhPSAnJyBlbHNlIE5vbmUKICAgICAg
ICAgICAgICAgIEFBRGlzdGFuY2UuYXBwZW5kKGFycmF5KQogICAgICAgICAgICBBQURpc3RhbmNlID0g
bnAuYXJyYXkoCiAgICAgICAgICAgICAgICBbZmxvYXQoQUFEaXN0YW5jZVtpXVtqXSkgZm9yIGkgaW4g
cmFuZ2UobGVuKEFBRGlzdGFuY2UpKSBmb3IgaiBpbiByYW5nZShsZW4oQUFEaXN0YW5jZVtpXSkpXSku
cmVzaGFwZSgKICAgICAgICAgICAgICAgICgyMCwgMjApKQoKICAgICAgICAgICAgd2l0aCBvcGVuKGRh
dGFGaWxlMSkgYXMgZjoKICAgICAgICAgICAgICAgIHJlY29yZHMgPSBmLnJlYWRsaW5lcygpWzE6XQog
ICAgICAgICAgICBBQURpc3RhbmNlMSA9IFtdCiAgICAgICAgICAgIGZvciBpIGluIHJlY29yZHM6CiAg
ICAgICAgICAgICAgICBhcnJheSA9IGkucnN0cmlwKCkuc3BsaXQoKVsxOl0gaWYgaS5yc3RyaXAoKSAh
PSAnJyBlbHNlIE5vbmUKICAgICAgICAgICAgICAgIEFBRGlzdGFuY2UxLmFwcGVuZChhcnJheSkKICAg
ICAgICAgICAgQUFEaXN0YW5jZTEgPSBucC5hcnJheSgKICAgICAgICAgICAgICAgIFtmbG9hdChBQURp
c3RhbmNlMVtpXVtqXSkgZm9yIGkgaW4gcmFuZ2UobGVuKEFBRGlzdGFuY2UxKSkgZm9yIGogaW4gcmFu
Z2UobGVuKEFBRGlzdGFuY2UxW2ldKSldKS5yZXNoYXBlKAogICAgICAgICAgICAgICAgKDIwLCAyMCkp
CgogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5h
bWUnLCAnbGFiZWwnXQogICAgICAgICAgICBmb3IgbiBpbiByYW5nZSgxLCBubGFnICsgMSk6CiAgICAg
ICAgICAgICAgICBoZWFkZXIuYXBwZW5kKCdTY2huZWlkZXIubGFnJyArIHN0cihuKSkKICAgICAgICAg
ICAgZm9yIG4gaW4gcmFuZ2UoMSwgbmxhZyArIDEpOgogICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVu
ZCgnZ0dyYW50aGFtLmxhZycgKyBzdHIobikpCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVh
ZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAgICAg
bmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBpWzJdCiAg
ICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgZm9yIG4gaW4g
cmFuZ2UoMSwgbmxhZyArIDEpOgogICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKHN1bShbQUFE
aXN0YW5jZVtEaWN0QUFbc2VxdWVuY2Vbal1dXVtEaWN0QUFbc2VxdWVuY2VbaiArIG5dXV0gKiogMiBm
b3IgaiBpbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZShsZW4oc2VxdWVu
Y2UpIC0gbildKSAvIChsZW4oc2VxdWVuY2UpIC0gbikpCgogICAgICAgICAgICAgICAgZm9yIG4gaW4g
cmFuZ2UoMSwgbmxhZyArIDEpOgogICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKHN1bShbQUFE
aXN0YW5jZTFbRGljdEFBMVtzZXF1ZW5jZVtqXV1dW0RpY3RBQTFbc2VxdWVuY2VbaiArIG5dXV0gKiog
MiBmb3IgaiBpbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZShsZW4oc2Vx
dWVuY2UpIC0gbildKSAvIChsZW4oc2VxdWVuY2UpIC0gbikpCiAgICAgICAgICAgICAgICBlbmNvZGlu
Z3MuYXBwZW5kKGNvZGUpCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShb
XSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5
cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVb
MV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQog
ICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXku
c2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToK
ICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToK
ICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNl
CgogICAgZGVmIFByb3RlaW5fUVNPcmRlcihzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG5s
YWcgPSBzZWxmLmt3WydubGFnJ10KICAgICAgICAgICAgdyA9IHNlbGYua3dbJ3dlaWdodCddCgogICAg
ICAgICAgICBpZiBubGFnID4gc2VsZi5taW5pbXVtX2xlbmd0aF93aXRob3V0X21pbnVzIC0gMToKICAg
ICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ1RoZSBsYWcgdmFsdWUgaXMgb3V0IG9mIHJhbmdl
LicKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAgZGF0YUZpbGUgPSBvcy5w
YXRoLnNwbGl0KG9zLnBhdGgucmVhbHBhdGgoX19maWxlX18pKVsKICAgICAgICAgICAgICAgICAgICAg
ICAgMF0gKyByJ1xkYXRhXFNjaG5laWRlci1XcmVkZS50eHQnIGlmIHBsYXRmb3JtLnN5c3RlbSgpID09
ICdXaW5kb3dzJyBlbHNlIFwKICAgICAgICAgICAgICAgIG9zLnBhdGguc3BsaXQob3MucGF0aC5yZWFs
cGF0aChfX2ZpbGVfXykpWzBdICsgcicvZGF0YS9TY2huZWlkZXItV3JlZGUudHh0JwogICAgICAgICAg
ICBkYXRhRmlsZTEgPSBvcy5wYXRoLnNwbGl0KG9zLnBhdGgucmVhbHBhdGgoX19maWxlX18pKVsKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIDBdICsgcidcZGF0YVxHcmFudGhhbS50eHQnIGlmIHBsYXRm
b3JtLnN5c3RlbSgpID09ICdXaW5kb3dzJyBlbHNlIFwKICAgICAgICAgICAgICAgIG9zLnBhdGguc3Bs
aXQob3MucGF0aC5yZWFscGF0aChfX2ZpbGVfXykpWzBdICsgcicvZGF0YS9HcmFudGhhbS50eHQnCiAg
ICAgICAgICAgIEFBID0gJ0FDREVGR0hJS0xNTlBRUlNUVldZJwogICAgICAgICAgICBBQTEgPSAnQVJO
RENRRUdISUxLTUZQU1RXWVYnCgogICAgICAgICAgICBEaWN0QUEgPSB7fQogICAgICAgICAgICBmb3Ig
aSBpbiByYW5nZShsZW4oQUEpKToKICAgICAgICAgICAgICAgIERpY3RBQVtBQVtpXV0gPSBpCgogICAg
ICAgICAgICBEaWN0QUExID0ge30KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFBMSkpOgog
ICAgICAgICAgICAgICAgRGljdEFBMVtBQTFbaV1dID0gaQoKICAgICAgICAgICAgd2l0aCBvcGVuKGRh
dGFGaWxlKSBhcyBmOgogICAgICAgICAgICAgICAgcmVjb3JkcyA9IGYucmVhZGxpbmVzKClbMTpdCiAg
ICAgICAgICAgIEFBRGlzdGFuY2UgPSBbXQogICAgICAgICAgICBmb3IgaSBpbiByZWNvcmRzOgogICAg
ICAgICAgICAgICAgYXJyYXkgPSBpLnJzdHJpcCgpLnNwbGl0KClbMTpdIGlmIGkucnN0cmlwKCkgIT0g
JycgZWxzZSBOb25lCiAgICAgICAgICAgICAgICBBQURpc3RhbmNlLmFwcGVuZChhcnJheSkKICAgICAg
ICAgICAgQUFEaXN0YW5jZSA9IG5wLmFycmF5KAogICAgICAgICAgICAgICAgW2Zsb2F0KEFBRGlzdGFu
Y2VbaV1bal0pIGZvciBpIGluIHJhbmdlKGxlbihBQURpc3RhbmNlKSkgZm9yIGogaW4gcmFuZ2UobGVu
KEFBRGlzdGFuY2VbaV0pKV0pLnJlc2hhcGUoCiAgICAgICAgICAgICAgICAoMjAsIDIwKSkKCiAgICAg
ICAgICAgIHdpdGggb3BlbihkYXRhRmlsZTEpIGFzIGY6CiAgICAgICAgICAgICAgICByZWNvcmRzID0g
Zi5yZWFkbGluZXMoKVsxOl0KICAgICAgICAgICAgQUFEaXN0YW5jZTEgPSBbXQogICAgICAgICAgICBm
b3IgaSBpbiByZWNvcmRzOgogICAgICAgICAgICAgICAgYXJyYXkgPSBpLnJzdHJpcCgpLnNwbGl0KClb
MTpdIGlmIGkucnN0cmlwKCkgIT0gJycgZWxzZSBOb25lCiAgICAgICAgICAgICAgICBBQURpc3RhbmNl
MS5hcHBlbmQoYXJyYXkpCiAgICAgICAgICAgIEFBRGlzdGFuY2UxID0gbnAuYXJyYXkoCiAgICAgICAg
ICAgICAgICBbZmxvYXQoQUFEaXN0YW5jZTFbaV1bal0pIGZvciBpIGluIHJhbmdlKGxlbihBQURpc3Rh
bmNlMSkpIGZvciBqIGluIHJhbmdlKGxlbihBQURpc3RhbmNlMVtpXSkpXSkucmVzaGFwZSgKICAgICAg
ICAgICAgICAgICgyMCwgMjApKQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAg
aGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIGFhIGluIEFBMToK
ICAgICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoJ1NjaG5laWRlci5Yci4nICsgYWEpCiAgICAgICAg
ICAgIGZvciBhYSBpbiBBQTE6CiAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKCdHcmFudGhhbS5Y
ci4nICsgYWEpCiAgICAgICAgICAgIGZvciBuIGluIHJhbmdlKDEsIG5sYWcgKyAxKToKICAgICAgICAg
ICAgICAgIGhlYWRlci5hcHBlbmQoJ1NjaG5laWRlci5YZC4nICsgc3RyKG4pKQogICAgICAgICAgICBm
b3IgbiBpbiByYW5nZSgxLCBubGFnICsgMSk6CiAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKCdH
cmFudGhhbS5YZC4nICsgc3RyKG4pKQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikK
CiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUs
IHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIHJlLnN1YignLScsICcnLCBpWzFdKSwgaVsyXQogICAgICAg
ICAgICAgICAgY29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIGFycmF5U1cgPSBbXQog
ICAgICAgICAgICAgICAgYXJyYXlHTSA9IFtdCiAgICAgICAgICAgICAgICBmb3IgbiBpbiByYW5nZSgx
LCBubGFnICsgMSk6CiAgICAgICAgICAgICAgICAgICAgYXJyYXlTVy5hcHBlbmQoCiAgICAgICAgICAg
ICAgICAgICAgICAgIHN1bShbQUFEaXN0YW5jZVtEaWN0QUFbc2VxdWVuY2Vbal1dXVtEaWN0QUFbc2Vx
dWVuY2VbaiArIG5dXV0gKiogMiBmb3IgaiBpbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFu
Z2UobGVuKHNlcXVlbmNlKSAtIG4pXSkpCiAgICAgICAgICAgICAgICAgICAgYXJyYXlHTS5hcHBlbmQo
c3VtKAogICAgICAgICAgICAgICAgICAgICAgICBbQUFEaXN0YW5jZTFbRGljdEFBMVtzZXF1ZW5jZVtq
XV1dW0RpY3RBQTFbc2VxdWVuY2VbaiArIG5dXV0gKiogMiBmb3IgaiBpbgogICAgICAgICAgICAgICAg
ICAgICAgICByYW5nZShsZW4oc2VxdWVuY2UpIC0gbildKSkKICAgICAgICAgICAgICAgIG15RGljdCA9
IHt9CiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gQUExOgogICAgICAgICAgICAgICAgICAgIG15RGlj
dFthYV0gPSBzZXF1ZW5jZS5jb3VudChhYSkKICAgICAgICAgICAgICAgIGZvciBhYSBpbiBBQTE6CiAg
ICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQobXlEaWN0W2FhXSAvICgxICsgdyAqIHN1bShhcnJh
eVNXKSkpCiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gQUExOgogICAgICAgICAgICAgICAgICAgIGNv
ZGUuYXBwZW5kKG15RGljdFthYV0gLyAoMSArIHcgKiBzdW0oYXJyYXlHTSkpKQogICAgICAgICAgICAg
ICAgZm9yIG51bSBpbiBhcnJheVNXOgogICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKCh3ICog
bnVtKSAvICgxICsgdyAqIHN1bShhcnJheVNXKSkpCiAgICAgICAgICAgICAgICBmb3IgbnVtIGluIGFy
cmF5R006CiAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoKHcgKiBudW0pIC8gKDEgKyB3ICog
c3VtKGFycmF5R00pKSkKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKICAgICAg
ICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVu
Y29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNl
bGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJv
dyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGlu
Z3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAg
ICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJu
IEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9y
X21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgUnZhbHVlKHNlbGYs
IGFhMSwgYWEyLCBBQURpY3QsIE1hdHJpeCk6CiAgICAgICAgcmV0dXJuIHN1bShbKE1hdHJpeFtpXVtB
QURpY3RbYWExXV0gLSBNYXRyaXhbaV1bQUFEaWN0W2FhMl1dKSAqKiAyIGZvciBpIGluIHJhbmdlKGxl
bihNYXRyaXgpKV0pIC8gbGVuKE1hdHJpeCkKCiAgICBkZWYgUHJvdGVpbl9QQUFDKHNlbGYpOgogICAg
ICAgIHRyeToKICAgICAgICAgICAgbGFtYmRhVmFsdWUgPSBzZWxmLmt3WydsYW1iZGFWYWx1ZSddCiAg
ICAgICAgICAgIGlmIGxhbWJkYVZhbHVlID4gc2VsZi5taW5pbXVtX2xlbmd0aF93aXRob3V0X21pbnVz
IC0gMToKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ1RoZSBsYW1iZGEgdmFsdWUgaXMg
b3V0IG9mIHJhbmdlLicKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAgdyA9
IHNlbGYua3dbJ3dlaWdodCddCiAgICAgICAgICAgIGRhdGFGaWxlID0gb3MucGF0aC5zcGxpdChvcy5w
YXRoLnJlYWxwYXRoKF9fZmlsZV9fKSlbCiAgICAgICAgICAgICAgICAgICAgICAgIDBdICsgcidcZGF0
YVxQQUFDLnR4dCcgaWYgcGxhdGZvcm0uc3lzdGVtKCkgPT0gJ1dpbmRvd3MnIGVsc2UgXAogICAgICAg
ICAgICAgICAgb3MucGF0aC5zcGxpdChvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSlbMF0gKyByJy9k
YXRhL1BBQUMudHh0JwogICAgICAgICAgICB3aXRoIG9wZW4oZGF0YUZpbGUpIGFzIGY6CiAgICAgICAg
ICAgICAgICByZWNvcmRzID0gZi5yZWFkbGluZXMoKQogICAgICAgICAgICBBQSA9ICcnLmpvaW4ocmVj
b3Jkc1swXS5yc3RyaXAoKS5zcGxpdCgpWzE6XSkKICAgICAgICAgICAgQUFEaWN0ID0ge30KICAgICAg
ICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFBKSk6CiAgICAgICAgICAgICAgICBBQURpY3RbQUFbaV1d
ID0gaQogICAgICAgICAgICBBQVByb3BlcnR5ID0gW10KICAgICAgICAgICAgQUFQcm9wZXJ0eU5hbWVz
ID0gW10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKHJlY29yZHMpKToKICAgICAgICAg
ICAgICAgIGFycmF5ID0gcmVjb3Jkc1tpXS5yc3RyaXAoKS5zcGxpdCgpIGlmIHJlY29yZHNbaV0ucnN0
cmlwKCkgIT0gJycgZWxzZSBOb25lCiAgICAgICAgICAgICAgICBBQVByb3BlcnR5LmFwcGVuZChbZmxv
YXQoaikgZm9yIGogaW4gYXJyYXlbMTpdXSkKICAgICAgICAgICAgICAgIEFBUHJvcGVydHlOYW1lcy5h
cHBlbmQoYXJyYXlbMF0pCgogICAgICAgICAgICBBQVByb3BlcnR5MSA9IFtdCiAgICAgICAgICAgIGZv
ciBpIGluIEFBUHJvcGVydHk6CiAgICAgICAgICAgICAgICBtZWFuSSA9IHN1bShpKSAvIDIwCiAgICAg
ICAgICAgICAgICBmZW5tdSA9IG1hdGguc3FydChzdW0oWyhqIC0gbWVhbkkpICoqIDIgZm9yIGogaW4g
aV0pIC8gMjApCiAgICAgICAgICAgICAgICBBQVByb3BlcnR5MS5hcHBlbmQoWyhqIC0gbWVhbkkpIC8g
ZmVubXUgZm9yIGogaW4gaV0pCgogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBo
ZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXQogICAgICAgICAgICBmb3IgYWEgaW4gQUE6CiAg
ICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKCdYYzEuJyArIGFhKQogICAgICAgICAgICBmb3IgbiBp
biByYW5nZSgxLCBsYW1iZGFWYWx1ZSArIDEpOgogICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZCgn
WGMyLmxhbWJkYScgKyBzdHIobikpCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQoK
ICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAgICAgbmFtZSwg
c2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBpWzJdCiAgICAgICAg
ICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgdGhldGEgPSBbXQogICAg
ICAgICAgICAgICAgZm9yIG4gaW4gcmFuZ2UoMSwgbGFtYmRhVmFsdWUgKyAxKToKICAgICAgICAgICAg
ICAgICAgICB0aGV0YS5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgIHN1bShbc2VsZi5SdmFs
dWUoc2VxdWVuY2Vbal0sIHNlcXVlbmNlW2ogKyBuXSwgQUFEaWN0LCBBQVByb3BlcnR5MSkgZm9yIGog
aW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlKGxlbihzZXF1ZW5jZSkgLSBuKV0pIC8g
KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbihzZXF1ZW5jZSkgLSBuKSkKICAgICAg
ICAgICAgICAgIG15RGljdCA9IHt9CiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gQUE6CiAgICAgICAg
ICAgICAgICAgICAgbXlEaWN0W2FhXSA9IHNlcXVlbmNlLmNvdW50KGFhKQogICAgICAgICAgICAgICAg
Y29kZSA9IGNvZGUgKyBbbXlEaWN0W2FhXSAvICgxICsgdyAqIHN1bSh0aGV0YSkpIGZvciBhYSBpbiBB
QV0KICAgICAgICAgICAgICAgIGNvZGUgPSBjb2RlICsgWyh3ICogaikgLyAoMSArIHcgKiBzdW0odGhl
dGEpKSBmb3IgaiBpbiB0aGV0YV0KICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkK
ICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAgICBz
ZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAg
ICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBz
ZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBl
bmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAg
ICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAg
cmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxm
LmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVp
bl9BUEFBQyhzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGxhbWJkYVZhbHVlID0gc2VsZi5r
d1snbGFtYmRhVmFsdWUnXQogICAgICAgICAgICBpZiBsYW1iZGFWYWx1ZSA+IHNlbGYubWluaW11bV9s
ZW5ndGhfd2l0aG91dF9taW51cyAtIDE6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdU
aGUgbGFtYmRhIHZhbHVlIGlzIG91dCBvZiByYW5nZS4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFs
c2UKICAgICAgICAgICAgdyA9IHNlbGYua3dbJ3dlaWdodCddCiAgICAgICAgICAgIGRhdGFGaWxlID0g
b3MucGF0aC5zcGxpdChvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSlbCiAgICAgICAgICAgICAgICAg
ICAgICAgIDBdICsgcidcZGF0YVxQQUFDLnR4dCcgaWYgcGxhdGZvcm0uc3lzdGVtKCkgPT0gJ1dpbmRv
d3MnIGVsc2UgXAogICAgICAgICAgICAgICAgb3MucGF0aC5zcGxpdChvcy5wYXRoLnJlYWxwYXRoKF9f
ZmlsZV9fKSlbMF0gKyByJy9kYXRhL1BBQUMudHh0JwogICAgICAgICAgICB3aXRoIG9wZW4oZGF0YUZp
bGUpIGFzIGY6CiAgICAgICAgICAgICAgICByZWNvcmRzID0gZi5yZWFkbGluZXMoKQogICAgICAgICAg
ICBBQSA9ICcnLmpvaW4ocmVjb3Jkc1swXS5yc3RyaXAoKS5zcGxpdCgpWzE6XSkKICAgICAgICAgICAg
QUFEaWN0ID0ge30KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFBKSk6CiAgICAgICAgICAg
ICAgICBBQURpY3RbQUFbaV1dID0gaQogICAgICAgICAgICBBQVByb3BlcnR5ID0gW10KICAgICAgICAg
ICAgQUFQcm9wZXJ0eU5hbWVzID0gW10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKHJl
Y29yZHMpIC0gMSk6CiAgICAgICAgICAgICAgICBhcnJheSA9IHJlY29yZHNbaV0ucnN0cmlwKCkuc3Bs
aXQoKSBpZiByZWNvcmRzW2ldLnJzdHJpcCgpICE9ICcnIGVsc2UgTm9uZQogICAgICAgICAgICAgICAg
QUFQcm9wZXJ0eS5hcHBlbmQoW2Zsb2F0KGopIGZvciBqIGluIGFycmF5WzE6XV0pCiAgICAgICAgICAg
ICAgICBBQVByb3BlcnR5TmFtZXMuYXBwZW5kKGFycmF5WzBdKQoKICAgICAgICAgICAgQUFQcm9wZXJ0
eTEgPSBbXQogICAgICAgICAgICBmb3IgaSBpbiBBQVByb3BlcnR5OgogICAgICAgICAgICAgICAgbWVh
bkkgPSBzdW0oaSkgLyAyMAogICAgICAgICAgICAgICAgZmVubXUgPSBtYXRoLnNxcnQoc3VtKFsoaiAt
IG1lYW5JKSAqKiAyIGZvciBqIGluIGldKSAvIDIwKQogICAgICAgICAgICAgICAgQUFQcm9wZXJ0eTEu
YXBwZW5kKFsoaiAtIG1lYW5JKSAvIGZlbm11IGZvciBqIGluIGldKQoKICAgICAgICAgICAgZW5jb2Rp
bmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAg
ICAgICAgZm9yIGkgaW4gQUE6CiAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKCdQYzEuJyArIGkp
CiAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKDEsIGxhbWJkYVZhbHVlICsgMSk6CiAgICAgICAgICAg
ICAgICBmb3IgaSBpbiBBQVByb3BlcnR5TmFtZXM6CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFw
cGVuZCgnUGMyLicgKyBpICsgJy4nICsgc3RyKGopKQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5k
KGhlYWRlcikKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAg
ICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBpWzJd
CiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgdGhldGEg
PSBbXQogICAgICAgICAgICAgICAgZm9yIG4gaW4gcmFuZ2UoMSwgbGFtYmRhVmFsdWUgKyAxKToKICAg
ICAgICAgICAgICAgICAgICBmb3IgaiBpbiByYW5nZShsZW4oQUFQcm9wZXJ0eTEpKToKICAgICAgICAg
ICAgICAgICAgICAgICAgdGhldGEuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vt
KFtBQVByb3BlcnR5MVtqXVtBQURpY3Rbc2VxdWVuY2Vba11dXSAqIEFBUHJvcGVydHkxW2pdW0FBRGlj
dFtzZXF1ZW5jZVtrICsgbl1dXSBmb3IgayBpbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHJhbmdlKGxlbihzZXF1ZW5jZSkgLSBuKV0pIC8gKGxlbihzZXF1ZW5jZSkgLSBuKSkKICAgICAgICAg
ICAgICAgIG15RGljdCA9IHt9CiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gQUE6CiAgICAgICAgICAg
ICAgICAgICAgbXlEaWN0W2FhXSA9IHNlcXVlbmNlLmNvdW50KGFhKQoKICAgICAgICAgICAgICAgIGNv
ZGUgPSBjb2RlICsgW215RGljdFthYV0gLyAoMSArIHcgKiBzdW0odGhldGEpKSBmb3IgYWEgaW4gQUFd
CiAgICAgICAgICAgICAgICBjb2RlID0gY29kZSArIFt3ICogdmFsdWUgLyAoMSArIHcgKiBzdW0odGhl
dGEpKSBmb3IgdmFsdWUgaW4gdGhldGFdCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNv
ZGUpCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAg
ICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAg
ICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAg
ICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBk
ZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAx
OgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAg
ICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAg
c2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFBy
b3RlaW5fT1BGXzEwYml0KHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBjbGVhcgogICAg
ICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCgogICAgICAgICAgICBpZiBu
b3Qgc2VsZi5pc19lcXVhbDoKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ09QRiBkZXNj
cmlwdG9yIG5lZWQgZmFzdGEgc2VxdWVuY2Ugd2l0aCBlcXVhbCBsZW5ndGguJwogICAgICAgICAgICAg
ICAgcmV0dXJuIEZhbHNlCgogICAgICAgICAgICBwaHlzaWNvY2hlbWljYWxfcHJvcGVydGllc19saXN0
ID0gWwogICAgICAgICAgICAgICAgJ0ZZV0gnLAogICAgICAgICAgICAgICAgJ0RFJywKICAgICAgICAg
ICAgICAgICdLSFInLAogICAgICAgICAgICAgICAgJ05RU0RFQ1RLUkhZVycsCiAgICAgICAgICAgICAg
ICAnQUdDVElWTEtIRllXTScsCiAgICAgICAgICAgICAgICAnSVZMJywKICAgICAgICAgICAgICAgICdB
U0dDJywKICAgICAgICAgICAgICAgICdLSFJERScsCiAgICAgICAgICAgICAgICAnUE5EVENBR1NWJywK
ICAgICAgICAgICAgICAgICdQJywKICAgICAgICAgICAgXQoKICAgICAgICAgICAgcGh5c2ljb2NoZW1p
Y2FsX3Byb3BlcnRpZXNfaW5kZXggPSBbJ0Fyb21hdGljJywgJ05lZ2F0aXZlJywgJ1Bvc2l0aXZlJywg
J1BvbGFyJywgJ0h5ZHJvcGhvYmljJywgJ0FsaXBoYXRpYycsCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICdUaW55JywgJ0NoYXJnZWQnLCAnU21hbGwnLCAnUHJvbGlu
ZSddCgogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXQogICAgICAgICAg
ICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIgKz0gWydQb3Mlc18lcycgJSAoaSArIDEs
IGopIGZvciBpIGluIHJhbmdlKGxlbihzZWxmLmZhc3RhX2xpc3RbMF1bMV0pKSBmb3IgaiBpbgogICAg
ICAgICAgICAgICAgICAgIHBoeXNpY29jaGVtaWNhbF9wcm9wZXJ0aWVzX2luZGV4XQogICAgICAgICAg
ICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFf
bGlzdDoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIGlbMV0sIGlb
Ml0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICBmb3Ig
YWEgaW4gaVsxXToKICAgICAgICAgICAgICAgICAgICBmb3IgaiBpbiBwaHlzaWNvY2hlbWljYWxfcHJv
cGVydGllc19saXN0OgogICAgICAgICAgICAgICAgICAgICAgICBpZiBhYSBpbiBqOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoMSkKICAgICAgICAgICAgICAgICAgICAgICAgZWxz
ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKDApCiAgICAgICAgICAgICAg
ICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0g
bnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2Vs
Zi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2Rp
bmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAg
aWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4g
VHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAg
ZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQog
ICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9PUEZfN2JpdF90eXBlXzEoc2Vs
Zik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYuZW5jb2Rp
bmdfYXJyYXkgPSBucC5hcnJheShbXSkKCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgog
ICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnT1BGIGRlc2NyaXB0b3IgbmVlZCBmYXN0YSBz
ZXF1ZW5jZSB3aXRoIGVxdWFsIGxlbmd0aC4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAg
ICAgICAgICAgIHBoeXNpY29jaGVtaWNhbF9wcm9wZXJ0aWVzX2xpc3QgPSBbCiAgICAgICAgICAgICAg
ICAnQUNGR0hJTE1OUFFTVFZXWScsCiAgICAgICAgICAgICAgICAnQ0ZJTE1WVycsCiAgICAgICAgICAg
ICAgICAnQUNER1BTVCcsCiAgICAgICAgICAgICAgICAnQ0ZJTE1WV1knLAogICAgICAgICAgICAgICAg
J0FER1NUJywKICAgICAgICAgICAgICAgICdER05QUycsCiAgICAgICAgICAgICAgICAnQUNGR0lMVlcn
LAogICAgICAgICAgICBdCgogICAgICAgICAgICBwaHlzaWNvY2hlbWljYWxfcHJvcGVydGllc19pbmRl
eCA9IFsnQ2hhcmdlJywgJ0h5ZHJvcGhvYmljaXR5JywgJ05vcm1hbGl6ZWQgdmFuZGVyIFdhYWxzIHZv
bHVtZScsICdQb2xhcml0eScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICdQb2xhcmlpemFiaWxpdHknLCAnU2Vjb25kYXJ5IFN0cnVjdHVyZScsICdTb2x2ZW50IEFj
Y2Vzc2liaWxpdHknXQoKICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10K
ICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyICs9IFsnUG9zJXNfJXMn
ICUgKGkgKyAxLCBqKSBmb3IgaSBpbiByYW5nZShsZW4oc2VsZi5mYXN0YV9saXN0WzBdWzFdKSkgZm9y
IGogaW4KICAgICAgICAgICAgICAgICAgICBwaHlzaWNvY2hlbWljYWxfcHJvcGVydGllc19pbmRleF0K
ICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBmb3IgaSBpbiBz
ZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBd
LCBpWzFdLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAg
ICAgICAgZm9yIGFhIGluIGlbMV06CiAgICAgICAgICAgICAgICAgICAgZm9yIGogaW4gcGh5c2ljb2No
ZW1pY2FsX3Byb3BlcnRpZXNfbGlzdDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgYWEgaW4gajoK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKDEpCiAgICAgICAgICAgICAgICAg
ICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZCgwKQogICAg
ICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChjb2RlKQoKICAgICAgICAgICAgc2VsZi5lbmNvZGlu
Z19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNv
bHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBz
ZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAg
ICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAg
ICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxz
ZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cg
PSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFByb3RlaW5fT1BGXzdiaXRf
dHlwZV8yKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBjbGVhcgogICAgICAgICAgICBz
ZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCgogICAgICAgICAgICBpZiBub3Qgc2VsZi5p
c19lcXVhbDoKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ09QRiBkZXNjcmlwdG9yIG5l
ZWQgZmFzdGEgc2VxdWVuY2Ugd2l0aCBlcXVhbCBsZW5ndGguJwogICAgICAgICAgICAgICAgcmV0dXJu
IEZhbHNlCgogICAgICAgICAgICBwaHlzaWNvY2hlbWljYWxfcHJvcGVydGllc19saXN0ID0gWwogICAg
ICAgICAgICAgICAgJ0RFJywKICAgICAgICAgICAgICAgICdBR0hQU1RZJywKICAgICAgICAgICAgICAg
ICdFSUxOUVYnLAogICAgICAgICAgICAgICAgJ0FHUFNUJywKICAgICAgICAgICAgICAgICdDRUlMTlBR
VicsCiAgICAgICAgICAgICAgICAnQUVIS0xNUVInLAogICAgICAgICAgICAgICAgJ0hNUFNUWScsCiAg
ICAgICAgICAgIF0KCiAgICAgICAgICAgIHBoeXNpY29jaGVtaWNhbF9wcm9wZXJ0aWVzX2luZGV4ID0g
WydDaGFyZ2UnLCAnSHlkcm9waG9iaWNpdHknLCAnTm9ybWFsaXplZCB2YW5kZXIgV2FhbHMgdm9sdW1l
JywgJ1BvbGFyaXR5JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgJ1BvbGFyaWl6YWJpbGl0eScsICdTZWNvbmRhcnkgU3RydWN0dXJlJywgJ1NvbHZlbnQgQWNjZXNz
aWJpbGl0eSddCgogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXQogICAg
ICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIgKz0gWydQb3Mlc18lcycgJSAo
aSArIDEsIGopIGZvciBpIGluIHJhbmdlKGxlbihzZWxmLmZhc3RhX2xpc3RbMF1bMV0pKSBmb3IgaiBp
bgogICAgICAgICAgICAgICAgICAgIHBoeXNpY29jaGVtaWNhbF9wcm9wZXJ0aWVzX2luZGV4XQogICAg
ICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYu
ZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIGlb
MV0sIGlbMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAg
ICBmb3IgYWEgaW4gaVsxXToKICAgICAgICAgICAgICAgICAgICBmb3IgaiBpbiBwaHlzaWNvY2hlbWlj
YWxfcHJvcGVydGllc19saXN0OgogICAgICAgICAgICAgICAgICAgICAgICBpZiBhYSBpbiBqOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoMSkKICAgICAgICAgICAgICAgICAgICAg
ICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKDApCiAgICAgICAg
ICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2Fy
cmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1u
ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYu
ZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAg
ICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICBy
ZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAg
ICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0
cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9PUEZfN2JpdF90eXBl
XzMoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYu
ZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2Vx
dWFsOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnT1BGIGRlc2NyaXB0b3IgbmVlZCBm
YXN0YSBzZXF1ZW5jZSB3aXRoIGVxdWFsIGxlbmd0aC4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFs
c2UKCiAgICAgICAgICAgIHBoeXNpY29jaGVtaWNhbF9wcm9wZXJ0aWVzX2xpc3QgPSBbCiAgICAgICAg
ICAgICAgICAnS1InLAogICAgICAgICAgICAgICAgJ0RFS05RUicsCiAgICAgICAgICAgICAgICAnRkhL
TVJXWScsCiAgICAgICAgICAgICAgICAnREVIS05RUicsCiAgICAgICAgICAgICAgICAnRkhLTVJXWScs
CiAgICAgICAgICAgICAgICAnQ0ZJVFZXWScsCiAgICAgICAgICAgICAgICAnREVLTlJRJywKICAgICAg
ICAgICAgXQoKICAgICAgICAgICAgcGh5c2ljb2NoZW1pY2FsX3Byb3BlcnRpZXNfaW5kZXggPSBbJ0No
YXJnZScsICdIeWRyb3Bob2JpY2l0eScsICdOb3JtYWxpemVkIHZhbmRlciBXYWFscyB2b2x1bWUnLCAn
UG9sYXJpdHknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAn
UG9sYXJpaXphYmlsaXR5JywgJ1NlY29uZGFyeSBTdHJ1Y3R1cmUnLCAnU29sdmVudCBBY2Nlc3NpYmls
aXR5J10KCiAgICAgICAgICAgIGhlYWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAg
ICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgICAgIGhlYWRlciArPSBbJ1BvcyVzXyVzJyAlIChpICsg
MSwgaikgZm9yIGkgaW4gcmFuZ2UobGVuKHNlbGYuZmFzdGFfbGlzdFswXVsxXSkpIGZvciBqIGluCiAg
ICAgICAgICAgICAgICAgICAgcGh5c2ljb2NoZW1pY2FsX3Byb3BlcnRpZXNfaW5kZXhdCiAgICAgICAg
ICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0
YV9saXN0OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgaVsxXSwg
aVsyXQogICAgICAgICAgICAgICAgY29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIGZv
ciBhYSBpbiBpWzFdOgogICAgICAgICAgICAgICAgICAgIGZvciBqIGluIHBoeXNpY29jaGVtaWNhbF9w
cm9wZXJ0aWVzX2xpc3Q6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFhIGluIGo6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZCgxKQogICAgICAgICAgICAgICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoMCkKICAgICAgICAgICAg
ICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkg
PSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBz
ZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNv
ZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAg
ICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVy
biBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAg
ICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUp
CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBQcm90ZWluX0FTREMoc2VsZik6CiAgICAg
ICAgdHJ5OgogICAgICAgICAgICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkg
PSBucC5hcnJheShbXSkKCiAgICAgICAgICAgIEFBID0gJ0FDREVGR0hJS0xNTlBRUlNUVldZJwogICAg
ICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBhYVBhaXJzID0gW10KICAgICAgICAgICAg
Zm9yIGFhMSBpbiBBQToKICAgICAgICAgICAgICAgIGZvciBhYTIgaW4gQUE6CiAgICAgICAgICAgICAg
ICAgICAgYWFQYWlycy5hcHBlbmQoYWExICsgYWEyKQoKICAgICAgICAgICAgaGVhZGVyID0gWydTYW1w
bGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgaGVhZGVyICs9IFthYTEgKyBhYTIgZm9yIGFhMSBp
biBBQSBmb3IgYWEyIGluIEFBXQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAg
ICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUsIHNl
cXVlbmNlLCBsYWJlbCA9IGlbMF0sIHJlLnN1YignLScsICcnLCBpWzFdKSwgaVsyXQogICAgICAgICAg
ICAgICAgY29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIHN1bSA9IDAKICAgICAgICAg
ICAgICAgIHBhaXJfZGljdCA9IHt9CiAgICAgICAgICAgICAgICBmb3IgcGFpciBpbiBhYVBhaXJzOgog
ICAgICAgICAgICAgICAgICAgIHBhaXJfZGljdFtwYWlyXSA9IDAKICAgICAgICAgICAgICAgIGZvciBq
IGluIHJhbmdlKGxlbihzZXF1ZW5jZSkpOgogICAgICAgICAgICAgICAgICAgIGZvciBrIGluIHJhbmdl
KGogKyAxLCBsZW4oc2VxdWVuY2UpKToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VxdWVuY2Vb
al0gaW4gQUEgYW5kIHNlcXVlbmNlW2tdIGluIEFBOgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
cGFpcl9kaWN0W3NlcXVlbmNlW2pdICsgc2VxdWVuY2Vba11dICs9IDEKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHN1bSArPSAxCiAgICAgICAgICAgICAgICBmb3IgcGFpciBpbiBhYVBhaXJzOgogICAg
ICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKHBhaXJfZGljdFtwYWlyXSAvIHN1bSkKICAgICAgICAg
ICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJy
YXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4g
PSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5l
bmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAg
ICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJl
dHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAg
ICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3Ry
KGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICcnJyBLTk4gZGVzY3JpcHRvciAnJycKICAg
IGRlZiBTaW0oc2VsZiwgYSwgYik6CiAgICAgICAgYmxvc3VtNjIgPSBbCiAgICAgICAgICAgIFsgNCwg
LTEsIC0yLCAtMiwgIDAsIC0xLCAtMSwgIDAsIC0yLCAtMSwgLTEsIC0xLCAtMSwgLTIsIC0xLCAgMSwg
IDAsIC0zLCAtMiwgIDAsIDBdLCAgIyBBCiAgICAgICAgICAgIFstMSwgIDUsICAwLCAtMiwgLTMsICAx
LCAgMCwgLTIsICAwLCAtMywgLTIsICAyLCAtMSwgLTMsIC0yLCAtMSwgLTEsIC0zLCAtMiwgLTMsIDBd
LCAgIyBSCiAgICAgICAgICAgIFstMiwgIDAsICA2LCAgMSwgLTMsICAwLCAgMCwgIDAsICAxLCAtMywg
LTMsICAwLCAtMiwgLTMsIC0yLCAgMSwgIDAsIC00LCAtMiwgLTMsIDBdLCAgIyBOCiAgICAgICAgICAg
IFstMiwgLTIsICAxLCAgNiwgLTMsICAwLCAgMiwgLTEsIC0xLCAtMywgLTQsIC0xLCAtMywgLTMsIC0x
LCAgMCwgLTEsIC00LCAtMywgLTMsIDBdLCAgIyBECiAgICAgICAgICAgIFsgMCwgLTMsIC0zLCAtMywg
IDksIC0zLCAtNCwgLTMsIC0zLCAtMSwgLTEsIC0zLCAtMSwgLTIsIC0zLCAtMSwgLTEsIC0yLCAtMiwg
LTEsIDBdLCAgIyBDCiAgICAgICAgICAgIFstMSwgIDEsICAwLCAgMCwgLTMsICA1LCAgMiwgLTIsICAw
LCAtMywgLTIsICAxLCAgMCwgLTMsIC0xLCAgMCwgLTEsIC0yLCAtMSwgLTIsIDBdLCAgIyBRCiAgICAg
ICAgICAgIFstMSwgIDAsICAwLCAgMiwgLTQsICAyLCAgNSwgLTIsICAwLCAtMywgLTMsICAxLCAtMiwg
LTMsIC0xLCAgMCwgLTEsIC0zLCAtMiwgLTIsIDBdLCAgIyBFCiAgICAgICAgICAgIFsgMCwgLTIsICAw
LCAtMSwgLTMsIC0yLCAtMiwgIDYsIC0yLCAtNCwgLTQsIC0yLCAtMywgLTMsIC0yLCAgMCwgLTIsIC0y
LCAtMywgLTMsIDBdLCAgIyBHCiAgICAgICAgICAgIFstMiwgIDAsICAxLCAtMSwgLTMsICAwLCAgMCwg
LTIsICA4LCAtMywgLTMsIC0xLCAtMiwgLTEsIC0yLCAtMSwgLTIsIC0yLCAgMiwgLTMsIDBdLCAgIyBI
CiAgICAgICAgICAgIFstMSwgLTMsIC0zLCAtMywgLTEsIC0zLCAtMywgLTQsIC0zLCAgNCwgIDIsIC0z
LCAgMSwgIDAsIC0zLCAtMiwgLTEsIC0zLCAtMSwgIDMsIDBdLCAgIyBJCiAgICAgICAgICAgIFstMSwg
LTIsIC0zLCAtNCwgLTEsIC0yLCAtMywgLTQsIC0zLCAgMiwgIDQsIC0yLCAgMiwgIDAsIC0zLCAtMiwg
LTEsIC0yLCAtMSwgIDEsIDBdLCAgIyBMCiAgICAgICAgICAgIFstMSwgIDIsICAwLCAtMSwgLTMsICAx
LCAgMSwgLTIsIC0xLCAtMywgLTIsICA1LCAtMSwgLTMsIC0xLCAgMCwgLTEsIC0zLCAtMiwgLTIsIDBd
LCAgIyBLCiAgICAgICAgICAgIFstMSwgLTEsIC0yLCAtMywgLTEsICAwLCAtMiwgLTMsIC0yLCAgMSwg
IDIsIC0xLCAgNSwgIDAsIC0yLCAtMSwgLTEsIC0xLCAtMSwgIDEsIDBdLCAgIyBNCiAgICAgICAgICAg
IFstMiwgLTMsIC0zLCAtMywgLTIsIC0zLCAtMywgLTMsIC0xLCAgMCwgIDAsIC0zLCAgMCwgIDYsIC00
LCAtMiwgLTIsICAxLCAgMywgLTEsIDBdLCAgIyBGCiAgICAgICAgICAgIFstMSwgLTIsIC0yLCAtMSwg
LTMsIC0xLCAtMSwgLTIsIC0yLCAtMywgLTMsIC0xLCAtMiwgLTQsICA3LCAtMSwgLTEsIC00LCAtMywg
LTIsIDBdLCAgIyBQCiAgICAgICAgICAgIFsgMSwgLTEsICAxLCAgMCwgLTEsICAwLCAgMCwgIDAsIC0x
LCAtMiwgLTIsICAwLCAtMSwgLTIsIC0xLCAgNCwgIDEsIC0zLCAtMiwgLTIsIDBdLCAgIyBTCiAgICAg
ICAgICAgIFsgMCwgLTEsICAwLCAtMSwgLTEsIC0xLCAtMSwgLTIsIC0yLCAtMSwgLTEsIC0xLCAtMSwg
LTIsIC0xLCAgMSwgIDUsIC0yLCAtMiwgIDAsIDBdLCAgIyBUCiAgICAgICAgICAgIFstMywgLTMsIC00
LCAtNCwgLTIsIC0yLCAtMywgLTIsIC0yLCAtMywgLTIsIC0zLCAtMSwgIDEsIC00LCAtMywgLTIsIDEx
LCAgMiwgLTMsIDBdLCAgIyBXCiAgICAgICAgICAgIFstMiwgLTIsIC0yLCAtMywgLTIsIC0xLCAtMiwg
LTMsICAyLCAtMSwgLTEsIC0yLCAtMSwgIDMsIC0zLCAtMiwgLTIsICAyLCAgNywgLTEsIDBdLCAgIyBZ
CiAgICAgICAgICAgIFsgMCwgLTMsIC0zLCAtMywgLTEsIC0yLCAtMiwgLTMsIC0zLCAgMywgIDEsIC0y
LCAgMSwgLTEsIC0yLCAtMiwgIDAsIC0zLCAtMSwgIDQsIDBdLCAgIyBWCiAgICAgICAgICAgIFsgMCwg
IDAsICAwLCAgMCwgIDAsICAwLCAgMCwgIDAsICAwLCAgMCwgIDAsICAwLCAgMCwgIDAsICAwLCAgMCwg
IDAsICAwLCAgMCwgIDAsIDBdLCAgIyAtCiAgICAgICAgXQogICAgICAgIEFBID0gJ0FSTkRDUUVHSElM
S01GUFNUV1lWLScKICAgICAgICBteURpY3QgPSB7fQogICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihB
QSkpOgogICAgICAgICAgICBteURpY3RbQUFbaV1dID0gaQogICAgICAgIG1heFZhbHVlLCBtaW5WYWx1
ZSA9IDExLCAtNAogICAgICAgIHJldHVybiAoYmxvc3VtNjJbbXlEaWN0W2FdXVtteURpY3RbYl1dIC0g
bWluVmFsdWUpIC8gKG1heFZhbHVlIC0gbWluVmFsdWUpCgogICAgZGVmIENhbGN1bGF0ZURpc3RhbmNl
KHNlbGYsIHNlcXVlbmNlMSwgc2VxdWVuY2UyKToKICAgICAgICBpZiBsZW4oc2VxdWVuY2UxKSAhPSBs
ZW4oc2VxdWVuY2UyKToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnS05OIGRlc2NyaXB0b3Ig
bmVlZCBmYXN0YSBzZXF1ZW5jZSB3aXRoIGVxdWFsIGxlbmd0aC4nCiAgICAgICAgICAgIHJldHVybiAx
CiAgICAgICAgZGlzdGFuY2UgPSAxIC0gc3VtKFtzZWxmLlNpbShzZXF1ZW5jZTFbaV0sIHNlcXVlbmNl
MltpXSkgZm9yIGkgaW4gcmFuZ2UobGVuKHNlcXVlbmNlMSkpXSkgLyBsZW4oc2VxdWVuY2UxKQogICAg
ICAgIHJldHVybiBkaXN0YW5jZQoKICAgIGRlZiBDYWxjdWxhdGVDb250ZW50KHNlbGYsIG15RGlzdGFu
Y2UsIGosIG15TGFiZWxTZXRzKToKICAgICAgICBjb250ZW50ID0gW10KICAgICAgICBteURpY3QgPSB7
fQogICAgICAgIGZvciBpIGluIG15TGFiZWxTZXRzOgogICAgICAgICAgICBteURpY3RbaV0gPSAwCiAg
ICAgICAgZm9yIGkgaW4gcmFuZ2Uoaik6CiAgICAgICAgICAgIG15RGljdFtteURpc3RhbmNlW2ldWzBd
XSA9IG15RGljdFtteURpc3RhbmNlW2ldWzBdXSArIDEKICAgICAgICBmb3IgaSBpbiBteUxhYmVsU2V0
czoKICAgICAgICAgICAgY29udGVudC5hcHBlbmQobXlEaWN0W215TGFiZWxTZXRzW2ldXSAvIGopCiAg
ICAgICAgcmV0dXJuIGNvbnRlbnQKCiAgICBkZWYgUHJvdGVpbl9LTk4oc2VsZik6CiAgICAgICAgdHJ5
OgogICAgICAgICAgICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5h
cnJheShbXSkKCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAg
c2VsZi5lcnJvcl9tc2cgPSAnS05OIGRlc2NyaXB0b3IgbmVlZCBmYXN0YSBzZXF1ZW5jZSB3aXRoIGVx
dWFsIGxlbmd0aC4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgIHRvcEtf
dmFsdWVzID0gWzAuMDEsIDAuMDIsIDAuMDMsIDAuMDQsIDAuMDUsIDAuMDYsIDAuMDcsIDAuMDgsIDAu
MDksIDAuMTAsIDAuMTEsIDAuMTIsIDAuMTMsIDAuMTQsIDAuMTUsIDAuMTYsCiAgICAgICAgICAgICAg
ICAgICAgICAgIDAuMTcsIDAuMTgsIDAuMTksIDAuMjAsIDAuMjEsIDAuMjIsIDAuMjMsIDAuMjQsIDAu
MjUsIDAuMjYsIDAuMjcsIDAuMjgsIDAuMjksIDAuMzBdCgogICAgICAgICAgICB0cmFpbmluZ19kYXRh
ID0gW10KICAgICAgICAgICAgdHJhaW5pbmdfbGFiZWwgPSB7fQogICAgICAgICAgICBmb3IgaSBpbiBz
ZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBpZiBpWzNdID09ICd0cmFpbmluZyc6CiAgICAg
ICAgICAgICAgICAgICAgdHJhaW5pbmdfZGF0YS5hcHBlbmQoaSkKICAgICAgICAgICAgICAgICAgICB0
cmFpbmluZ19sYWJlbFtpWzBdXSA9IGludChpWzJdKQogICAgICAgICAgICB0bXBfbGFiZWxfc2V0cyA9
IGxpc3Qoc2V0KHRyYWluaW5nX2xhYmVsLnZhbHVlcygpKSkKCiAgICAgICAgICAgIHRvcEtfbnVtYmVy
cyA9IFtdCiAgICAgICAgICAgIGZvciBpIGluIHRvcEtfdmFsdWVzOgogICAgICAgICAgICAgICAgdG9w
S19udW1iZXJzLmFwcGVuZChtYXRoLmNlaWwobGVuKHRyYWluaW5nX2RhdGEpICogaSkpCgogICAgICAg
ICAgICAjIGNhbGN1bGF0ZSBwYWlyIGRpc3RhbmNlCiAgICAgICAgICAgIGRpc3RhbmNlX2RpY3QgPSB7
fQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oc2VsZi5mYXN0YV9saXN0KSk6CiAgICAgICAg
ICAgICAgICBuYW1lX3NlcTEsIHNlcXVlbmNlXzEsIGxhYmVsXzEsIHVzYWdlXzEgPSBzZWxmLmZhc3Rh
X2xpc3RbaV1bMF0sIHNlbGYuZmFzdGFfbGlzdFtpXVsxXSwgc2VsZi5mYXN0YV9saXN0W2ldWzJdLCBz
ZWxmLmZhc3RhX2xpc3RbaV1bM10KICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGkrMSwgbGVu
KHNlbGYuZmFzdGFfbGlzdCkpOgogICAgICAgICAgICAgICAgICAgIG5hbWVfc2VxMiwgc2VxdWVuY2Vf
MiwgbGFiZWxfMiwgdXNhZ2VfMiA9IHNlbGYuZmFzdGFfbGlzdFtqXVswXSwgc2VsZi5mYXN0YV9saXN0
W2pdWzFdLCBzZWxmLmZhc3RhX2xpc3Rbal1bMl0sIHNlbGYuZmFzdGFfbGlzdFtqXVszXQogICAgICAg
ICAgICAgICAgICAgIGlmIHVzYWdlXzEgPT0gJ3Rlc3RpbmcnIGFuZCB1c2FnZV8yID09ICd0ZXN0aW5n
JzoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBlbHNl
OgogICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZV9kaWN0Wyc6Jy5qb2luKHNvcnRlZChbbmFt
ZV9zZXExLCBuYW1lX3NlcTJdKSldID0gc2VsZi5DYWxjdWxhdGVEaXN0YW5jZShzZXF1ZW5jZV8xLCBz
ZXF1ZW5jZV8yKQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0g
WycjJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIGsgaW4gdG9wS19udW1iZXJzOgogICAgICAgICAg
ICAgICAgZm9yIGwgaW4gdG1wX2xhYmVsX3NldHM6CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFw
cGVuZCgnVG9wJyArIHN0cihrKSArICcubGFiZWwnICsgc3RyKGwpKQogICAgICAgICAgICBlbmNvZGlu
Z3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAg
ICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIGlbMV0sIGlbMl0KICAgICAg
ICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICB0bXBfZGlzdGFuY2Vf
bGlzdCA9IFtdCiAgICAgICAgICAgICAgICBmb3IgaiBpbiByYW5nZShsZW4odHJhaW5pbmdfZGF0YSkp
OgogICAgICAgICAgICAgICAgICAgIGlmIG5hbWUgIT0gdHJhaW5pbmdfZGF0YVtqXVswXToKICAgICAg
ICAgICAgICAgICAgICAgICAgdG1wX2Rpc3RhbmNlX2xpc3QuYXBwZW5kKFtpbnQodHJhaW5pbmdfZGF0
YVtqXVsyXSksIGRpc3RhbmNlX2RpY3QuZ2V0KCc6Jy5qb2luKHNvcnRlZChbbmFtZSwgdHJhaW5pbmdf
ZGF0YVtqXVswXV0pKSwgMSldKQoKICAgICAgICAgICAgICAgIHRtcF9kaXN0YW5jZV9saXN0ID0gbnAu
YXJyYXkodG1wX2Rpc3RhbmNlX2xpc3QpCiAgICAgICAgICAgICAgICB0bXBfZGlzdGFuY2VfbGlzdCA9
IHRtcF9kaXN0YW5jZV9saXN0W25wLmxleHNvcnQodG1wX2Rpc3RhbmNlX2xpc3QuVCldCgogICAgICAg
ICAgICAgICAgZm9yIGogaW4gdG9wS19udW1iZXJzOgogICAgICAgICAgICAgICAgICAgIGNvZGUgKz0g
c2VsZi5DYWxjdWxhdGVDb250ZW50KHRtcF9kaXN0YW5jZV9saXN0LCBqLCB0bXBfbGFiZWxfc2V0cykK
ICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5j
b2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2Vs
Zi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93
ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5n
cwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAg
ICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4g
RmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3Jf
bXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgJycnIGVuZCBQcm90ZWluIEtO
TiBkZXNjcmlwdG9yICcnJwoKICAgIGRlZiBnYXBNb2RlbChzZWxmLCBmYXN0YXMsIG15RGljdCwgZ0Rp
Y3QsIGdOYW1lcywga3R1cGxlLCBnbFZhbHVlKToKICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAg
IGhlYWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgaWYga3R1cGxlID09IDE6CiAg
ICAgICAgICAgIGhlYWRlciA9IGhlYWRlciArIFtnICsgJ19nYXAnICsgc3RyKGdsVmFsdWUpIGZvciBn
IGluIGdOYW1lc10KICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCiAgICAgICAgICAg
IGZvciBpIGluIGZhc3RhczoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlb
MF0sIHJlLnN1YignLScsICcnLCBpWzFdKSwgaVsyXQogICAgICAgICAgICAgICAgY29kZSA9IFtuYW1l
LCBsYWJlbF0KICAgICAgICAgICAgICAgIG51bURpY3QgPSB7fQogICAgICAgICAgICAgICAgZm9yIGog
aW4gcmFuZ2UoMCwgbGVuKHNlcXVlbmNlKSwgZ2xWYWx1ZSArIDEpOgogICAgICAgICAgICAgICAgICAg
IG51bURpY3RbZ0RpY3RbbXlEaWN0W3NlcXVlbmNlW2pdXV1dID0gbnVtRGljdC5nZXQoZ0RpY3RbbXlE
aWN0W3NlcXVlbmNlW2pdXV0sIDApICsgMQoKICAgICAgICAgICAgICAgIGZvciBnIGluIGdOYW1lczoK
ICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChudW1EaWN0LmdldChnLCAwKSkKICAgICAgICAg
ICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKICAgICAgICBpZiBrdHVwbGUgPT0gMjoKICAgICAg
ICAgICAgaGVhZGVyID0gaGVhZGVyICsgW2cxICsgJ18nICsgZzIgKyAnX2dhcCcgKyBzdHIoZ2xWYWx1
ZSkgZm9yIGcxIGluIGdOYW1lcyBmb3IgZzIgaW4gZ05hbWVzXQogICAgICAgICAgICBlbmNvZGluZ3Mu
YXBwZW5kKGhlYWRlcikKICAgICAgICAgICAgZm9yIGkgaW4gZmFzdGFzOgogICAgICAgICAgICAgICAg
bmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBpWzJdCiAg
ICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgbnVtRGljdCA9
IHt9CiAgICAgICAgICAgICAgICBmb3IgaiBpbiByYW5nZSgwLCBsZW4oc2VxdWVuY2UpLCBnbFZhbHVl
ICsgMSk6CiAgICAgICAgICAgICAgICAgICAgaWYgaiArIDEgPCBsZW4oc2VxdWVuY2UpOgogICAgICAg
ICAgICAgICAgICAgICAgICBudW1EaWN0W2dEaWN0W215RGljdFtzZXF1ZW5jZVtqXV1dICsgJ18nICsg
Z0RpY3RbbXlEaWN0W3NlcXVlbmNlW2ogKyAxXV1dXSA9IG51bURpY3QuZ2V0KAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZ0RpY3RbbXlEaWN0W3NlcXVlbmNlW2pdXV0gKyAnXycgKyBnRGljdFtteURp
Y3Rbc2VxdWVuY2VbaiArIDFdXV0sIDApICsgMQoKICAgICAgICAgICAgICAgIGZvciBnIGluIFtnMSAr
ICdfJyArIGcyIGZvciBnMSBpbiBnTmFtZXMgZm9yIGcyIGluIGdOYW1lc106CiAgICAgICAgICAgICAg
ICAgICAgY29kZS5hcHBlbmQobnVtRGljdC5nZXQoZywgMCkpCiAgICAgICAgICAgICAgICBlbmNvZGlu
Z3MuYXBwZW5kKGNvZGUpCiAgICAgICAgaWYga3R1cGxlID09IDM6CiAgICAgICAgICAgIGhlYWRlciA9
IGhlYWRlciArIFtnMSArICdfJyArIGcyICsgJ18nICsgZzMgKyAnX2dhcCcgKyBzdHIoZ2xWYWx1ZSkg
Zm9yIGcxIGluIGdOYW1lcyBmb3IgZzIgaW4gZ05hbWVzIGZvciBnMwogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaW4gZ05hbWVzXQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikK
ICAgICAgICAgICAgZm9yIGkgaW4gZmFzdGFzOgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2Us
IGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBpWzJdCiAgICAgICAgICAgICAgICBj
b2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgbnVtRGljdCA9IHt9CiAgICAgICAgICAg
ICAgICBmb3IgaiBpbiByYW5nZSgwLCBsZW4oc2VxdWVuY2UpLCBnbFZhbHVlICsgMSk6CiAgICAgICAg
ICAgICAgICAgICAgaWYgaiArIDEgPCBsZW4oc2VxdWVuY2UpIGFuZCBqICsgMiA8IGxlbihzZXF1ZW5j
ZSk6CiAgICAgICAgICAgICAgICAgICAgICAgIG51bURpY3RbZ0RpY3RbbXlEaWN0W3NlcXVlbmNlW2pd
XV0gKyAnXycgKyBnRGljdFtteURpY3Rbc2VxdWVuY2VbaiArIDFdXV0gKyAnXycgKyBnRGljdFsKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIG15RGljdFtzZXF1ZW5jZVtqICsgMl1dXV0gPSBudW1EaWN0
LmdldCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdEaWN0W215RGljdFtzZXF1ZW5jZVtqXV1d
ICsgJ18nICsgZ0RpY3RbbXlEaWN0W3NlcXVlbmNlW2ogKyAxXV1dICsgJ18nICsgZ0RpY3RbCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlEaWN0W3NlcXVlbmNlW2ogKyAyXV1dLCAwKSArIDEK
CiAgICAgICAgICAgICAgICBmb3IgZyBpbiBbZzEgKyAnXycgKyBnMiArICdfJyArIGczIGZvciBnMSBp
biBnTmFtZXMgZm9yIGcyIGluIGdOYW1lcyBmb3IgZzMgaW4gZ05hbWVzXToKICAgICAgICAgICAgICAg
ICAgICBjb2RlLmFwcGVuZChudW1EaWN0LmdldChnLCAwKSkKICAgICAgICAgICAgICAgIGVuY29kaW5n
cy5hcHBlbmQoY29kZSkKICAgICAgICByZXR1cm4gZW5jb2RpbmdzCgogICAgZGVmIGxhbWJkYU1vZGVs
KHNlbGYsIGZhc3RhcywgbXlEaWN0LCBnRGljdCwgZ05hbWVzLCBrdHVwbGUsIGdsVmFsdWUpOgogICAg
ICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10K
ICAgICAgICBpZiBrdHVwbGUgPT0gMToKICAgICAgICAgICAgaGVhZGVyID0gaGVhZGVyICsgW2cgKyAn
X0xDJyArIHN0cihnbFZhbHVlKSBmb3IgZyBpbiBnTmFtZXNdCiAgICAgICAgICAgIGVuY29kaW5ncy5h
cHBlbmQoaGVhZGVyKQogICAgICAgICAgICBmb3IgaSBpbiBmYXN0YXM6CiAgICAgICAgICAgICAgICBu
YW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCByZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0KICAg
ICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICBudW1EaWN0ID0g
e30KICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKDAsIGxlbihzZXF1ZW5jZSkpOgogICAgICAg
ICAgICAgICAgICAgIG51bURpY3RbZ0RpY3RbbXlEaWN0W3NlcXVlbmNlW2pdXV1dID0gbnVtRGljdC5n
ZXQoZ0RpY3RbbXlEaWN0W3NlcXVlbmNlW2pdXV0sIDApICsgMQoKICAgICAgICAgICAgICAgIGZvciBn
IGluIGdOYW1lczoKICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChudW1EaWN0LmdldChnLCAw
KSkKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKICAgICAgICBpZiBrdHVwbGUg
PT0gMjoKICAgICAgICAgICAgaGVhZGVyID0gaGVhZGVyICsgW2cxICsgJ18nICsgZzIgKyAnX0xDJyAr
IHN0cihnbFZhbHVlKSBmb3IgZzEgaW4gZ05hbWVzIGZvciBnMiBpbiBnTmFtZXNdCiAgICAgICAgICAg
IGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQogICAgICAgICAgICBmb3IgaSBpbiBmYXN0YXM6CiAgICAg
ICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCByZS5zdWIoJy0nLCAnJywgaVsx
XSksIGlbMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAg
ICBudW1EaWN0ID0ge30KICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKDAsIGxlbihzZXF1ZW5j
ZSkpOgogICAgICAgICAgICAgICAgICAgIGlmIGogKyBnbFZhbHVlIDwgbGVuKHNlcXVlbmNlKToKICAg
ICAgICAgICAgICAgICAgICAgICAgbnVtRGljdFtnRGljdFtteURpY3Rbc2VxdWVuY2Vbal1dXSArICdf
JyArIGdEaWN0W215RGljdFtzZXF1ZW5jZVtqICsgZ2xWYWx1ZV1dXV0gPSBudW1EaWN0LmdldCgKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGdEaWN0W215RGljdFtzZXF1ZW5jZVtqXV1dICsgJ18nICsg
Z0RpY3RbbXlEaWN0W3NlcXVlbmNlW2ogKyBnbFZhbHVlXV1dLCAwKSArIDEKCiAgICAgICAgICAgICAg
ICBmb3IgZyBpbiBbZzEgKyAnXycgKyBnMiBmb3IgZzEgaW4gZ05hbWVzIGZvciBnMiBpbiBnTmFtZXNd
OgogICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKG51bURpY3QuZ2V0KGcsIDApKQogICAgICAg
ICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChjb2RlKQogICAgICAgIGlmIGt0dXBsZSA9PSAzOgogICAg
ICAgICAgICBoZWFkZXIgPSBoZWFkZXIgKyBbZzEgKyAnXycgKyBnMiArICdfJyArIGczICsgJ19MQycg
KyBzdHIoZ2xWYWx1ZSkgZm9yIGcxIGluIGdOYW1lcyBmb3IgZzIgaW4gZ05hbWVzIGZvciBnMwogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGdOYW1lc10KICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCiAgICAgICAgICAgIGZv
ciBpIGluIGZhc3RhczoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0s
IHJlLnN1YignLScsICcnLCBpWzFdKSwgaVsyXQogICAgICAgICAgICAgICAgY29kZSA9IFtuYW1lLCBs
YWJlbF0KICAgICAgICAgICAgICAgIG51bURpY3QgPSB7fQogICAgICAgICAgICAgICAgZm9yIGogaW4g
cmFuZ2UoMCwgbGVuKHNlcXVlbmNlKSk6CiAgICAgICAgICAgICAgICAgICAgaWYgaiArIGdsVmFsdWUg
PCBsZW4oc2VxdWVuY2UpIGFuZCBqICsgMiAqIGdsVmFsdWUgPCBsZW4oc2VxdWVuY2UpOgogICAgICAg
ICAgICAgICAgICAgICAgICBudW1EaWN0W2dEaWN0W215RGljdFtzZXF1ZW5jZVtqXV1dICsgJ18nICsg
Z0RpY3RbbXlEaWN0W3NlcXVlbmNlW2ogKyBnbFZhbHVlXV1dICsgJ18nICsgZ0RpY3RbCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBteURpY3Rbc2VxdWVuY2VbaiArIDIgKiBnbFZhbHVlXV1dXSA9IG51
bURpY3QuZ2V0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ0RpY3RbbXlEaWN0W3NlcXVlbmNl
W2pdXV0gKyAnXycgKyBnRGljdFtteURpY3Rbc2VxdWVuY2VbaiArIGdsVmFsdWVdXV0gKyAnXycgKyBn
RGljdFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBteURpY3Rbc2VxdWVuY2VbaiArIDIg
KiBnbFZhbHVlXV1dLCAwKSArIDEKCiAgICAgICAgICAgICAgICBmb3IgZyBpbiBbZzEgKyAnXycgKyBn
MiArICdfJyArIGczIGZvciBnMSBpbiBnTmFtZXMgZm9yIGcyIGluIGdOYW1lcyBmb3IgZzMgaW4gZ05h
bWVzXToKICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChudW1EaWN0LmdldChnLCAwKSkKICAg
ICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKICAgICAgICByZXR1cm4gZW5jb2Rpbmdz
CgogICAgZGVmIFByb3RlaW5fUHNlS1JBQUNfdHlwZV8xKHNlbGYpOgogICAgICAgIHRyeToKICAgICAg
ICAgICAgQUFHcm91cCA9IHsKICAgICAgICAgICAgICAgIDI6IFsnQ01GSUxWV1knLCAnQUdUU05RREVI
UktQJ10sCiAgICAgICAgICAgICAgICAzOiBbJ0NNRklMVldZJywgJ0FHVFNQJywgJ05RREVIUksnXSwK
ICAgICAgICAgICAgICAgIDQ6IFsnQ01GV1knLCAnSUxWJywgJ0FHVFMnLCAnTlFERUhSS1AnXSwKICAg
ICAgICAgICAgICAgIDU6IFsnV0ZZSCcsICdNSUxWJywgJ0NBVFNQJywgJ0cnLCAnTlFERVJLJ10sCiAg
ICAgICAgICAgICAgICA2OiBbJ1dGWUgnLCAnTUlMVicsICdDQVRTJywgJ1AnLCAnRycsICdOUURFUksn
XSwKICAgICAgICAgICAgICAgIDc6IFsnV0ZZSCcsICdNSUxWJywgJ0NBVFMnLCAnUCcsICdHJywgJ05R
REUnLCAnUksnXSwKICAgICAgICAgICAgICAgIDg6IFsnV0ZZSCcsICdNSUxWJywgJ0NBJywgJ05UUycs
ICdQJywgJ0cnLCAnREUnLCAnUVJLJ10sCiAgICAgICAgICAgICAgICA5OiBbJ1dGWUgnLCAnTUknLCAn
TFYnLCAnQ0EnLCAnTlRTJywgJ1AnLCAnRycsICdERScsICdRUksnXSwKICAgICAgICAgICAgICAgIDEw
OiBbJ1dGWScsICdNTCcsICdJVicsICdDQScsICdUUycsICdOSCcsICdQJywgJ0cnLCAnREUnLCAnUVJL
J10sCiAgICAgICAgICAgICAgICAxMTogWydXRlknLCAnTUwnLCAnSVYnLCAnQ0EnLCAnVFMnLCAnTkgn
LCAnUCcsICdHJywgJ0QnLCAnUUUnLCAnUksnXSwKICAgICAgICAgICAgICAgIDEyOiBbJ1dGWScsICdN
TCcsICdJVicsICdDJywgJ0EnLCAnVFMnLCAnTkgnLCAnUCcsICdHJywgJ0QnLCAnUUUnLCAnUksnXSwK
ICAgICAgICAgICAgICAgIDEzOiBbJ1dGWScsICdNTCcsICdJVicsICdDJywgJ0EnLCAnVCcsICdTJywg
J05IJywgJ1AnLCAnRycsICdEJywgJ1FFJywgJ1JLJ10sCiAgICAgICAgICAgICAgICAxNDogWydXRlkn
LCAnTUwnLCAnSVYnLCAnQycsICdBJywgJ1QnLCAnUycsICdOSCcsICdQJywgJ0cnLCAnRCcsICdRRScs
ICdSJywgJ0snXSwKICAgICAgICAgICAgICAgIDE1OiBbJ1dGWScsICdNTCcsICdJVicsICdDJywgJ0En
LCAnVCcsICdTJywgJ04nLCAnSCcsICdQJywgJ0cnLCAnRCcsICdRRScsICdSJywgJ0snXSwKICAgICAg
ICAgICAgICAgIDE2OiBbJ1cnLCAnRlknLCAnTUwnLCAnSVYnLCAnQycsICdBJywgJ1QnLCAnUycsICdO
JywgJ0gnLCAnUCcsICdHJywgJ0QnLCAnUUUnLCAnUicsICdLJ10sCiAgICAgICAgICAgICAgICAxNzog
WydXJywgJ0ZZJywgJ01MJywgJ0lWJywgJ0MnLCAnQScsICdUJywgJ1MnLCAnTicsICdIJywgJ1AnLCAn
RycsICdEJywgJ1EnLCAnRScsICdSJywgJ0snXSwKICAgICAgICAgICAgICAgIDE4OiBbJ1cnLCAnRlkn
LCAnTScsICdMJywgJ0lWJywgJ0MnLCAnQScsICdUJywgJ1MnLCAnTicsICdIJywgJ1AnLCAnRycsICdE
JywgJ1EnLCAnRScsICdSJywgJ0snXSwKICAgICAgICAgICAgICAgIDE5OiBbJ1cnLCAnRicsICdZJywg
J00nLCAnTCcsICdJVicsICdDJywgJ0EnLCAnVCcsICdTJywgJ04nLCAnSCcsICdQJywgJ0cnLCAnRCcs
ICdRJywgJ0UnLCAnUicsICdLJ10sCiAgICAgICAgICAgICAgICAyMDogWydXJywgJ0YnLCAnWScsICdN
JywgJ0wnLCAnSScsICdWJywgJ0MnLCAnQScsICdUJywgJ1MnLCAnTicsICdIJywgJ1AnLCAnRycsICdE
JywgJ1EnLCAnRScsICdSJywgJ0snXSwKICAgICAgICAgICAgfQogICAgICAgICAgICBmYXN0YXMgPSBz
ZWxmLmZhc3RhX2xpc3QKICAgICAgICAgICAgc3VidHlwZSA9IHNlbGYua3dbJ1BzZUtSQUFDX21vZGVs
J10KICAgICAgICAgICAgcmFhY3R5cGUgPSBzZWxmLmt3WydSQUFDX2NsdXN0J10KICAgICAgICAgICAg
a3R1cGxlID0gc2VsZi5rd1snay10dXBsZSddCiAgICAgICAgICAgIGdsVmFsdWUgPSBzZWxmLmt3Wydn
LWdhcCddIGlmIHN1YnR5cGUgPT0gJ2ctZ2FwJyBlbHNlIHNlbGYua3dbJ2xhbWJkYVZhbHVlJ10KCiAg
ICAgICAgICAgIGlmIHJhYWN0eXBlIG5vdCBpbiBBQUdyb3VwOgogICAgICAgICAgICAgICAgc2VsZi5l
cnJvcl9tc2cgPSAnUHNlS1JBQUMgZGVzY3JpcHRvciB2YWx1ZSBlcnJvci4nCiAgICAgICAgICAgICAg
ICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgICMgaW5kZXggZWFjaCBhbWlubyBhY2lkcyB0byB0aGVp
ciBncm91cAogICAgICAgICAgICBteURpY3QgPSB7fQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShs
ZW4oQUFHcm91cFtyYWFjdHlwZV0pKToKICAgICAgICAgICAgICAgIGZvciBhYSBpbiBBQUdyb3VwW3Jh
YWN0eXBlXVtpXToKICAgICAgICAgICAgICAgICAgICBteURpY3RbYWFdID0gaQoKICAgICAgICAgICAg
Z0RpY3QgPSB7fQogICAgICAgICAgICBnTmFtZXMgPSBbXQogICAgICAgICAgICBmb3IgaSBpbiByYW5n
ZShsZW4oQUFHcm91cFtyYWFjdHlwZV0pKToKICAgICAgICAgICAgICAgIGdEaWN0W2ldID0gJ1QxLkcu
JyArIHN0cihpICsgMSkKICAgICAgICAgICAgICAgIGdOYW1lcy5hcHBlbmQoJ1QxLkcuJyArIHN0cihp
ICsgMSkpCgogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBpZiBzdWJ0eXBlID09
ICdnLWdhcCc6CiAgICAgICAgICAgICAgICBlbmNvZGluZ3MgPSBzZWxmLmdhcE1vZGVsKGZhc3Rhcywg
bXlEaWN0LCBnRGljdCwgZ05hbWVzLCBrdHVwbGUsIGdsVmFsdWUpCiAgICAgICAgICAgIGVsc2U6CiAg
ICAgICAgICAgICAgICBlbmNvZGluZ3MgPSBzZWxmLmxhbWJkYU1vZGVsKGZhc3RhcywgbXlEaWN0LCBn
RGljdCwgZ05hbWVzLCBrdHVwbGUsIGdsVmFsdWUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2Fy
cmF5ID0gbnAuYXJyYXkoW10pCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJh
eShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29k
aW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJh
eS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxm
LmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAg
ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQg
RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAg
ICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBQcm90ZWluX1BzZUtSQUFDX3R5cGVfMihzZWxmKToKICAg
ICAgICB0cnk6CiAgICAgICAgICAgIEFBR3JvdXAgPSB7CiAgICAgICAgICAgICAgICAyOiBbJ0xWSU1D
QUdTVFBGWVcnLCAnRUROUUtSSCddLAogICAgICAgICAgICAgICAgMzogWydMVklNQ0FHU1RQJywgJ0ZZ
VycsICdFRE5RS1JIJ10sCiAgICAgICAgICAgICAgICA0OiBbJ0xWSU1DJywgJ0FHU1RQJywgJ0ZZVycs
ICdFRE5RS1JIJ10sCiAgICAgICAgICAgICAgICA1OiBbJ0xWSU1DJywgJ0FHU1RQJywgJ0ZZVycsICdF
RE5RJywgJ0tSSCddLAogICAgICAgICAgICAgICAgNjogWydMVklNJywgJ0FHU1QnLCAnUEhDJywgJ0ZZ
VycsICdFRE5RJywgJ0tSJ10sCiAgICAgICAgICAgICAgICA4OiBbJ0xWSU1DJywgJ0FHJywgJ1NUJywg
J1AnLCAnRllXJywgJ0VETlEnLCAnS1InLCAnSCddLAogICAgICAgICAgICAgICAgMTU6IFsnTFZJTScs
ICdDJywgJ0EnLCAnRycsICdTJywgJ1QnLCAnUCcsICdGWScsICdXJywgJ0UnLCAnRCcsICdOJywgJ1En
LCAnS1InLCAnSCddLAogICAgICAgICAgICAgICAgMjA6IFsnTCcsICdWJywgJ0knLCAnTScsICdDJywg
J0EnLCAnRycsICdTJywgJ1QnLCAnUCcsICdGJywgJ1knLCAnVycsICdFJywgJ0QnLCAnTicsICdRJywg
J0snLCAnUicsICdIJ10sCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmFzdGFzID0gc2VsZi5mYXN0
YV9saXN0CiAgICAgICAgICAgIHN1YnR5cGUgPSBzZWxmLmt3WydQc2VLUkFBQ19tb2RlbCddCiAgICAg
ICAgICAgIHJhYWN0eXBlID0gc2VsZi5rd1snUkFBQ19jbHVzdCddCiAgICAgICAgICAgIGt0dXBsZSA9
IHNlbGYua3dbJ2stdHVwbGUnXQogICAgICAgICAgICBnbFZhbHVlID0gc2VsZi5rd1snZy1nYXAnXSBp
ZiBzdWJ0eXBlID09ICdnLWdhcCcgZWxzZSBzZWxmLmt3WydsYW1iZGFWYWx1ZSddCgogICAgICAgICAg
ICBpZiByYWFjdHlwZSBub3QgaW4gQUFHcm91cDoKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNn
ID0gJ1BzZUtSQUFDIGRlc2NyaXB0b3IgdmFsdWUgZXJyb3IuJwogICAgICAgICAgICAgICAgcmV0dXJu
IEZhbHNlCgogICAgICAgICAgICAjIGluZGV4IGVhY2ggYW1pbm8gYWNpZHMgdG8gdGhlaXIgZ3JvdXAK
ICAgICAgICAgICAgbXlEaWN0ID0ge30KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFBR3Jv
dXBbcmFhY3R5cGVdKSk6CiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gQUFHcm91cFtyYWFjdHlwZV1b
aV06CiAgICAgICAgICAgICAgICAgICAgbXlEaWN0W2FhXSA9IGkKCiAgICAgICAgICAgIGdEaWN0ID0g
e30KICAgICAgICAgICAgZ05hbWVzID0gW10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFB
R3JvdXBbcmFhY3R5cGVdKSk6CiAgICAgICAgICAgICAgICBnRGljdFtpXSA9ICdUMS5HLicgKyBzdHIo
aSArIDEpCiAgICAgICAgICAgICAgICBnTmFtZXMuYXBwZW5kKCdUMS5HLicgKyBzdHIoaSArIDEpKQoK
ICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaWYgc3VidHlwZSA9PSAnZy1nYXAn
OgogICAgICAgICAgICAgICAgZW5jb2RpbmdzID0gc2VsZi5nYXBNb2RlbChmYXN0YXMsIG15RGljdCwg
Z0RpY3QsIGdOYW1lcywga3R1cGxlLCBnbFZhbHVlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgZW5jb2RpbmdzID0gc2VsZi5sYW1iZGFNb2RlbChmYXN0YXMsIG15RGljdCwgZ0RpY3QsIGdO
YW1lcywga3R1cGxlLCBnbFZhbHVlKQoKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5w
LmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2Rp
bmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJh
eS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVb
MF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGlu
Z19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAg
ICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlv
biBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1
cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9Qc2VLUkFBQ190eXBlXzNBKHNlbGYpOgogICAgICAgIHRy
eToKICAgICAgICAgICAgQUFHcm91cCA9IHsKICAgICAgICAgICAgICAgIDI6IFsnQUdTUERFUU5IVEtS
TUlMRllWQycsICdXJ10sCiAgICAgICAgICAgICAgICAzOiBbJ0FHU1BERVFOSFRLUk1JTEZZVicsICdX
JywgJ0MnXSwKICAgICAgICAgICAgICAgIDQ6IFsnQUdTUERFUU5IVEtSTUlWJywgJ1cnLCAnWUZMJywg
J0MnXSwKICAgICAgICAgICAgICAgIDU6IFsnQUdTUERFUU5IVEtSJywgJ1cnLCAnWUYnLCAnTUlWTCcs
ICdDJ10sCiAgICAgICAgICAgICAgICA2OiBbJ0FHU1AnLCAnREVRTkhUS1InLCAnVycsICdZRicsICdN
SUwnLCAnVkMnXSwKICAgICAgICAgICAgICAgIDc6IFsnQUdQJywgJ0RFUU5IJywgJ1RLUk1JVicsICdX
JywgJ1lGJywgJ0wnLCAnQ1MnXSwKICAgICAgICAgICAgICAgIDg6IFsnQUcnLCAnREVRTicsICdUS1JN
SVYnLCAnSFknLCAnVycsICdMJywgJ0ZQJywgJ0NTJ10sCiAgICAgICAgICAgICAgICA5OiBbJ0FHJywg
J1AnLCAnREVRTicsICdUS1JNSScsICdIWScsICdXJywgJ0YnLCAnTCcsICdWQ1MnXSwKICAgICAgICAg
ICAgICAgIDEwOiBbJ0FHJywgJ1AnLCAnREVRTicsICdUS1JNJywgJ0hZJywgJ1cnLCAnRicsICdJJywg
J0wnLCAnVkNTJ10sCiAgICAgICAgICAgICAgICAxMTogWydBRycsICdQJywgJ0RFUU4nLCAnVEsnLCAn
UkknLCAnSCcsICdZJywgJ1cnLCAnRicsICdNTCcsICdWQ1MnXSwKICAgICAgICAgICAgICAgIDEyOiBb
J0ZBUycsICdQJywgJ0cnLCAnREVRJywgJ05MJywgJ1RLJywgJ1InLCAnSCcsICdXJywgJ1knLCAnSU0n
LCAnVkMnXSwKICAgICAgICAgICAgICAgIDEzOiBbJ0ZBUycsICdQJywgJ0cnLCAnREVRJywgJ05MJywg
J1QnLCAnSycsICdSJywgJ0gnLCAnVycsICdZJywgJ0lNJywgJ1ZDJ10sCiAgICAgICAgICAgICAgICAx
NDogWydGQScsICdQJywgJ0cnLCAnVCcsICdERScsICdRTScsICdOTCcsICdLJywgJ1InLCAnSCcsICdX
JywgJ1knLCAnSVYnLCAnQ1MnXSwKICAgICAgICAgICAgICAgIDE1OiBbJ0ZBUycsICdQJywgJ0cnLCAn
VCcsICdERScsICdRJywgJ05MJywgJ0snLCAnUicsICdIJywgJ1cnLCAnWScsICdNJywgJ0knLCAnVkMn
XSwKICAgICAgICAgICAgICAgIDE2OiBbJ0ZBJywgJ1AnLCAnRycsICdTVCcsICdERScsICdRJywgJ04n
LCAnSycsICdSJywgJ0gnLCAnVycsICdZJywgJ00nLCAnTCcsICdJJywgJ1ZDJ10sCiAgICAgICAgICAg
ICAgICAxNzogWydGQScsICdQJywgJ0cnLCAnUycsICdUJywgJ0RFJywgJ1EnLCAnTicsICdLJywgJ1In
LCAnSCcsICdXJywgJ1knLCAnTScsICdMJywgJ0knLCAnVkMnXSwKICAgICAgICAgICAgICAgIDE4OiBb
J0ZBJywgJ1AnLCAnRycsICdTJywgJ1QnLCAnREUnLCAnUScsICdOJywgJ0snLCAnUicsICdIJywgJ1cn
LCAnWScsICdNJywgJ0wnLCAnSScsICdWJywgJ0MnXSwKICAgICAgICAgICAgICAgIDE5OiBbJ0ZBJywg
J1AnLCAnRycsICdTJywgJ1QnLCAnRCcsICdFJywgJ1EnLCAnTicsICdLJywgJ1InLCAnSCcsICdXJywg
J1knLCAnTScsICdMJywgJ0knLCAnVicsICdDJ10sCiAgICAgICAgICAgICAgICAyMDogWydGJywgJ0En
LCAnUCcsICdHJywgJ1MnLCAnVCcsICdEJywgJ0UnLCAnUScsICdOJywgJ0snLCAnUicsICdIJywgJ1cn
LCAnWScsICdNJywgJ0wnLCAnSScsICdWJywgJ0MnXSwKICAgICAgICAgICAgfQogICAgICAgICAgICBm
YXN0YXMgPSBzZWxmLmZhc3RhX2xpc3QKICAgICAgICAgICAgc3VidHlwZSA9IHNlbGYua3dbJ1BzZUtS
QUFDX21vZGVsJ10KICAgICAgICAgICAgcmFhY3R5cGUgPSBzZWxmLmt3WydSQUFDX2NsdXN0J10KICAg
ICAgICAgICAga3R1cGxlID0gc2VsZi5rd1snay10dXBsZSddCiAgICAgICAgICAgIGdsVmFsdWUgPSBz
ZWxmLmt3WydnLWdhcCddIGlmIHN1YnR5cGUgPT0gJ2ctZ2FwJyBlbHNlIHNlbGYua3dbJ2xhbWJkYVZh
bHVlJ10KCiAgICAgICAgICAgIGlmIHJhYWN0eXBlIG5vdCBpbiBBQUdyb3VwOgogICAgICAgICAgICAg
ICAgc2VsZi5lcnJvcl9tc2cgPSAnUHNlS1JBQUMgZGVzY3JpcHRvciB2YWx1ZSBlcnJvci4nCiAgICAg
ICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgICMgaW5kZXggZWFjaCBhbWlubyBhY2lk
cyB0byB0aGVpciBncm91cAogICAgICAgICAgICBteURpY3QgPSB7fQogICAgICAgICAgICBmb3IgaSBp
biByYW5nZShsZW4oQUFHcm91cFtyYWFjdHlwZV0pKToKICAgICAgICAgICAgICAgIGZvciBhYSBpbiBB
QUdyb3VwW3JhYWN0eXBlXVtpXToKICAgICAgICAgICAgICAgICAgICBteURpY3RbYWFdID0gaQoKICAg
ICAgICAgICAgZ0RpY3QgPSB7fQogICAgICAgICAgICBnTmFtZXMgPSBbXQogICAgICAgICAgICBmb3Ig
aSBpbiByYW5nZShsZW4oQUFHcm91cFtyYWFjdHlwZV0pKToKICAgICAgICAgICAgICAgIGdEaWN0W2ld
ID0gJ1QxLkcuJyArIHN0cihpICsgMSkKICAgICAgICAgICAgICAgIGdOYW1lcy5hcHBlbmQoJ1QxLkcu
JyArIHN0cihpICsgMSkpCgogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBpZiBz
dWJ0eXBlID09ICdnLWdhcCc6CiAgICAgICAgICAgICAgICBlbmNvZGluZ3MgPSBzZWxmLmdhcE1vZGVs
KGZhc3RhcywgbXlEaWN0LCBnRGljdCwgZ05hbWVzLCBrdHVwbGUsIGdsVmFsdWUpCiAgICAgICAgICAg
IGVsc2U6CiAgICAgICAgICAgICAgICBlbmNvZGluZ3MgPSBzZWxmLmxhbWJkYU1vZGVsKGZhc3Rhcywg
bXlEaWN0LCBnRGljdCwgZ05hbWVzLCBrdHVwbGUsIGdsVmFsdWUpCgogICAgICAgICAgICBzZWxmLmVu
Y29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkg
PSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBz
ZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNv
ZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAg
ICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVy
biBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAg
ICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUp
CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBQcm90ZWluX1BzZUtSQUFDX3R5cGVfM0Io
c2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBBQUdyb3VwID0gewogICAgICAgICAgICAgICAg
MjogWydIUktRTkVEU1RHUEFDVklNJywgJ0xGWVcnXSwKICAgICAgICAgICAgICAgIDM6IFsnSFJLUU5F
RFNUR1BBQ1ZJTScsICdMRlknLCAnVyddLAogICAgICAgICAgICAgICAgNDogWydIUktRTkVEU1RHUEEn
LCAnQ0lWJywgJ01MRlknLCAnVyddLAogICAgICAgICAgICAgICAgNTogWydIUktRTkVEU1RHUEEnLCAn
Q1YnLCAnSU1MJywgJ0ZZJywgJ1cnXSwKICAgICAgICAgICAgICAgIDY6IFsnSFJLUU5FRFNUUEEnLCAn
RycsICdDVicsICdJTUwnLCAnRlknLCAnVyddLAogICAgICAgICAgICAgICAgNzogWydIUktRTkVEU1RB
JywgJ0cnLCAnUCcsICdDVicsICdJTUwnLCAnRlknLCAnVyddLAogICAgICAgICAgICAgICAgODogWydI
UktRU1RBJywgJ05FRCcsICdHJywgJ1AnLCAnQ1YnLCAnSU1MJywgJ0ZZJywgJ1cnXSwKICAgICAgICAg
ICAgICAgIDk6IFsnSFJLUScsICdORUQnLCAnQVNURycsICdQJywgJ0MnLCAnSVYnLCAnTUxGJywgJ1kn
LCAnVyddLAogICAgICAgICAgICAgICAgMTA6IFsnUktIU0EnLCAnUScsICdORUQnLCAnRycsICdQJywg
J0MnLCAnVElWJywgJ01MRicsICdZJywgJ1cnXSwKICAgICAgICAgICAgICAgIDExOiBbJ1JLUScsICdO
RycsICdFRCcsICdBU1QnLCAnUCcsICdDJywgJ0lWJywgJ0hNTCcsICdGJywgJ1knLCAnVyddLAogICAg
ICAgICAgICAgICAgMTI6IFsnUktRJywgJ0VEJywgJ05BU1QnLCAnRycsICdQJywgJ0MnLCAnSVYnLCAn
SCcsICdNTCcsICdGJywgJ1knLCAnVyddLAogICAgICAgICAgICAgICAgMTM6IFsnUksnLCAnUUUnLCAn
RCcsICdORycsICdIQScsICdTVCcsICdQJywgJ0MnLCAnSVYnLCAnTUwnLCAnRicsICdZJywgJ1cnXSwK
ICAgICAgICAgICAgICAgIDE0OiBbJ1InLCAnSycsICdRRScsICdEJywgJ05HJywgJ0hBJywgJ1NUJywg
J1AnLCAnQycsICdJVicsICdNTCcsICdGJywgJ1knLCAnVyddLAogICAgICAgICAgICAgICAgMTU6IFsn
UicsICdLJywgJ1FFJywgJ0QnLCAnTkcnLCAnSEEnLCAnU1QnLCAnUCcsICdDJywgJ0lWJywgJ00nLCAn
TCcsICdGJywgJ1knLCAnVyddLAogICAgICAgICAgICAgICAgMTY6IFsnUicsICdLJywgJ1EnLCAnRScs
ICdEJywgJ05HJywgJ0hBJywgJ1NUJywgJ1AnLCAnQycsICdJVicsICdNJywgJ0wnLCAnRicsICdZJywg
J1cnXSwKICAgICAgICAgICAgICAgIDE3OiBbJ1InLCAnSycsICdRJywgJ0UnLCAnRCcsICdORycsICdI
QScsICdTJywgJ1QnLCAnUCcsICdDJywgJ0lWJywgJ00nLCAnTCcsICdGJywgJ1knLCAnVyddLAogICAg
ICAgICAgICAgICAgMTg6IFsnUicsICdLJywgJ1EnLCAnRScsICdEJywgJ05HJywgJ0hBJywgJ1MnLCAn
VCcsICdQJywgJ0MnLCAnSScsICdWJywgJ00nLCAnTCcsICdGJywgJ1knLCAnVyddLAogICAgICAgICAg
ICAgICAgMTk6IFsnUicsICdLJywgJ1EnLCAnRScsICdEJywgJ05HJywgJ0gnLCAnQScsICdTJywgJ1Qn
LCAnUCcsICdDJywgJ0knLCAnVicsICdNJywgJ0wnLCAnRicsICdZJywgJ1cnXSwKICAgICAgICAgICAg
ICAgIDIwOiBbJ1InLCAnSycsICdRJywgJ0UnLCAnRCcsICdOJywgJ0cnLCAnSCcsICdBJywgJ1MnLCAn
VCcsICdQJywgJ0MnLCAnSScsICdWJywgJ00nLCAnTCcsICdGJywgJ1knLCAnVyddLAogICAgICAgICAg
ICB9CgogICAgICAgICAgICBmYXN0YXMgPSBzZWxmLmZhc3RhX2xpc3QKICAgICAgICAgICAgc3VidHlw
ZSA9IHNlbGYua3dbJ1BzZUtSQUFDX21vZGVsJ10KICAgICAgICAgICAgcmFhY3R5cGUgPSBzZWxmLmt3
WydSQUFDX2NsdXN0J10KICAgICAgICAgICAga3R1cGxlID0gc2VsZi5rd1snay10dXBsZSddCiAgICAg
ICAgICAgIGdsVmFsdWUgPSBzZWxmLmt3WydnLWdhcCddIGlmIHN1YnR5cGUgPT0gJ2ctZ2FwJyBlbHNl
IHNlbGYua3dbJ2xhbWJkYVZhbHVlJ10KCiAgICAgICAgICAgIGlmIHJhYWN0eXBlIG5vdCBpbiBBQUdy
b3VwOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnUHNlS1JBQUMgZGVzY3JpcHRvciB2
YWx1ZSBlcnJvci4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgICMgaW5k
ZXggZWFjaCBhbWlubyBhY2lkcyB0byB0aGVpciBncm91cAogICAgICAgICAgICBteURpY3QgPSB7fQog
ICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUFHcm91cFtyYWFjdHlwZV0pKToKICAgICAgICAg
ICAgICAgIGZvciBhYSBpbiBBQUdyb3VwW3JhYWN0eXBlXVtpXToKICAgICAgICAgICAgICAgICAgICBt
eURpY3RbYWFdID0gaQoKICAgICAgICAgICAgZ0RpY3QgPSB7fQogICAgICAgICAgICBnTmFtZXMgPSBb
XQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUFHcm91cFtyYWFjdHlwZV0pKToKICAgICAg
ICAgICAgICAgIGdEaWN0W2ldID0gJ1QxLkcuJyArIHN0cihpICsgMSkKICAgICAgICAgICAgICAgIGdO
YW1lcy5hcHBlbmQoJ1QxLkcuJyArIHN0cihpICsgMSkpCgogICAgICAgICAgICBlbmNvZGluZ3MgPSBb
XQogICAgICAgICAgICBpZiBzdWJ0eXBlID09ICdnLWdhcCc6CiAgICAgICAgICAgICAgICBlbmNvZGlu
Z3MgPSBzZWxmLmdhcE1vZGVsKGZhc3RhcywgbXlEaWN0LCBnRGljdCwgZ05hbWVzLCBrdHVwbGUsIGds
VmFsdWUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBlbmNvZGluZ3MgPSBzZWxmLmxh
bWJkYU1vZGVsKGZhc3RhcywgbXlEaWN0LCBnRGljdCwgZ05hbWVzLCBrdHVwbGUsIGdsVmFsdWUpCgog
ICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCiAgICAgICAgICAgIHNl
bGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAg
ICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNl
bGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVu
Y29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAg
ICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBy
ZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYu
ZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZSAgIAoKICAgIGRlZiBQcm90
ZWluX1BzZUtSQUFDX3R5cGVfNChzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIEFBR3JvdXAg
PSB7CiAgICAgICAgICAgICAgICA1OiBbJ0cnLCAnSVZGWVcnLCAnQUxNRVFSSycsICdQJywgJ05ESFNU
QyddLAogICAgICAgICAgICAgICAgODogWydHJywgJ0lWJywgJ0ZZVycsICdBTE0nLCAnRVFSSycsICdQ
JywgJ05EJywgJ0hTVEMnXSwKICAgICAgICAgICAgICAgIDk6IFsnRycsICdJVicsICdGWVcnLCAnQUxN
JywgJ0VRUksnLCAnUCcsICdORCcsICdIUycsICdUQyddLAogICAgICAgICAgICAgICAgMTE6IFsnRycs
ICdJVicsICdGWVcnLCAnQScsICdMTScsICdFUVJLJywgJ1AnLCAnTkQnLCAnSFMnLCAnVCcsICdDJ10s
CiAgICAgICAgICAgICAgICAxMzogWydHJywgJ0lWJywgJ0ZZVycsICdBJywgJ0wnLCAnTScsICdFJywg
J1FSSycsICdQJywgJ05EJywgJ0hTJywgJ1QnLCAnQyddLAogICAgICAgICAgICAgICAgMjA6IFsnRycs
ICdJJywgJ1YnLCAnRicsICdZJywgJ1cnLCAnQScsICdMJywgJ00nLCAnRScsICdRJywgJ1InLCAnSycs
ICdQJywgJ04nLCAnRCcsICdIJywgJ1MnLCAnVCcsICdDJ10sCiAgICAgICAgICAgIH0KICAgICAgICAg
ICAgZmFzdGFzID0gc2VsZi5mYXN0YV9saXN0CiAgICAgICAgICAgIHN1YnR5cGUgPSBzZWxmLmt3WydQ
c2VLUkFBQ19tb2RlbCddCiAgICAgICAgICAgIHJhYWN0eXBlID0gc2VsZi5rd1snUkFBQ19jbHVzdCdd
CiAgICAgICAgICAgIGt0dXBsZSA9IHNlbGYua3dbJ2stdHVwbGUnXQogICAgICAgICAgICBnbFZhbHVl
ID0gc2VsZi5rd1snZy1nYXAnXSBpZiBzdWJ0eXBlID09ICdnLWdhcCcgZWxzZSBzZWxmLmt3WydsYW1i
ZGFWYWx1ZSddCgogICAgICAgICAgICBpZiByYWFjdHlwZSBub3QgaW4gQUFHcm91cDoKICAgICAgICAg
ICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ1BzZUtSQUFDIGRlc2NyaXB0b3IgdmFsdWUgZXJyb3IuJwog
ICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgICAgICAjIGluZGV4IGVhY2ggYW1pbm8g
YWNpZHMgdG8gdGhlaXIgZ3JvdXAKICAgICAgICAgICAgbXlEaWN0ID0ge30KICAgICAgICAgICAgZm9y
IGkgaW4gcmFuZ2UobGVuKEFBR3JvdXBbcmFhY3R5cGVdKSk6CiAgICAgICAgICAgICAgICBmb3IgYWEg
aW4gQUFHcm91cFtyYWFjdHlwZV1baV06CiAgICAgICAgICAgICAgICAgICAgbXlEaWN0W2FhXSA9IGkK
CiAgICAgICAgICAgIGdEaWN0ID0ge30KICAgICAgICAgICAgZ05hbWVzID0gW10KICAgICAgICAgICAg
Zm9yIGkgaW4gcmFuZ2UobGVuKEFBR3JvdXBbcmFhY3R5cGVdKSk6CiAgICAgICAgICAgICAgICBnRGlj
dFtpXSA9ICdUMS5HLicgKyBzdHIoaSArIDEpCiAgICAgICAgICAgICAgICBnTmFtZXMuYXBwZW5kKCdU
MS5HLicgKyBzdHIoaSArIDEpKQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAg
aWYgc3VidHlwZSA9PSAnZy1nYXAnOgogICAgICAgICAgICAgICAgZW5jb2RpbmdzID0gc2VsZi5nYXBN
b2RlbChmYXN0YXMsIG15RGljdCwgZ0RpY3QsIGdOYW1lcywga3R1cGxlLCBnbFZhbHVlKQogICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgZW5jb2RpbmdzID0gc2VsZi5sYW1iZGFNb2RlbChmYXN0
YXMsIG15RGljdCwgZ0RpY3QsIGdOYW1lcywga3R1cGxlLCBnbFZhbHVlKQoKICAgICAgICAgICAgc2Vs
Zi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2Fy
cmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1u
ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYu
ZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAg
ICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICBy
ZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAg
ICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0
cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9Qc2VLUkFBQ190eXBl
XzUoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBBQUdyb3VwID0gewogICAgICAgICAgICAg
ICAgMzogWydGV1lDSUxNVkFHU1RQSE5RJywgJ0RFJywgJ0tSJ10sCiAgICAgICAgICAgICAgICA0OiBb
J0ZXWScsICdDSUxNVicsICdBR1NUUCcsICdFUU5ESEtSJ10sCiAgICAgICAgICAgICAgICA4OiBbJ0ZX
WScsICdDSUxNVicsICdHQScsICdTVCcsICdQJywgJ0VRTkQnLCAnSCcsICdLUiddLAogICAgICAgICAg
ICAgICAgMTA6IFsnRycsICdGWVcnLCAnQScsICdJTE1WJywgJ1JLJywgJ1AnLCAnRVFORCcsICdIJywg
J1NUJywgJ0MnXSwKICAgICAgICAgICAgICAgIDE1OiBbJ0cnLCAnRlknLCAnVycsICdBJywgJ0lMTVYn
LCAnRScsICdRJywgJ1JLJywgJ1AnLCAnTicsICdEJywgJ0gnLCAnUycsICdUJywgJ0MnXSwKICAgICAg
ICAgICAgICAgIDIwOiBbJ0cnLCAnSScsICdWJywgJ0YnLCAnWScsICdXJywgJ0EnLCAnTCcsICdNJywg
J0UnLCAnUScsICdSJywgJ0snLCAnUCcsICdOJywgJ0QnLCAnSCcsICdTJywgJ1QnLCAnQyddLAogICAg
ICAgICAgICB9CiAgICAgICAgICAgIGZhc3RhcyA9IHNlbGYuZmFzdGFfbGlzdAogICAgICAgICAgICBz
dWJ0eXBlID0gc2VsZi5rd1snUHNlS1JBQUNfbW9kZWwnXQogICAgICAgICAgICByYWFjdHlwZSA9IHNl
bGYua3dbJ1JBQUNfY2x1c3QnXQogICAgICAgICAgICBrdHVwbGUgPSBzZWxmLmt3WydrLXR1cGxlJ10K
ICAgICAgICAgICAgZ2xWYWx1ZSA9IHNlbGYua3dbJ2ctZ2FwJ10gaWYgc3VidHlwZSA9PSAnZy1nYXAn
IGVsc2Ugc2VsZi5rd1snbGFtYmRhVmFsdWUnXQoKICAgICAgICAgICAgaWYgcmFhY3R5cGUgbm90IGlu
IEFBR3JvdXA6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdQc2VLUkFBQyBkZXNjcmlw
dG9yIHZhbHVlIGVycm9yLicKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAg
IyBpbmRleCBlYWNoIGFtaW5vIGFjaWRzIHRvIHRoZWlyIGdyb3VwCiAgICAgICAgICAgIG15RGljdCA9
IHt9CiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQUdyb3VwW3JhYWN0eXBlXSkpOgogICAg
ICAgICAgICAgICAgZm9yIGFhIGluIEFBR3JvdXBbcmFhY3R5cGVdW2ldOgogICAgICAgICAgICAgICAg
ICAgIG15RGljdFthYV0gPSBpCgogICAgICAgICAgICBnRGljdCA9IHt9CiAgICAgICAgICAgIGdOYW1l
cyA9IFtdCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQUdyb3VwW3JhYWN0eXBlXSkpOgog
ICAgICAgICAgICAgICAgZ0RpY3RbaV0gPSAnVDEuRy4nICsgc3RyKGkgKyAxKQogICAgICAgICAgICAg
ICAgZ05hbWVzLmFwcGVuZCgnVDEuRy4nICsgc3RyKGkgKyAxKSkKCiAgICAgICAgICAgIGVuY29kaW5n
cyA9IFtdCiAgICAgICAgICAgIGlmIHN1YnR5cGUgPT0gJ2ctZ2FwJzoKICAgICAgICAgICAgICAgIGVu
Y29kaW5ncyA9IHNlbGYuZ2FwTW9kZWwoZmFzdGFzLCBteURpY3QsIGdEaWN0LCBnTmFtZXMsIGt0dXBs
ZSwgZ2xWYWx1ZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGVuY29kaW5ncyA9IHNl
bGYubGFtYmRhTW9kZWwoZmFzdGFzLCBteURpY3QsIGdEaWN0LCBnTmFtZXMsIGt0dXBsZSwgZ2xWYWx1
ZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAg
ICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAg
ICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAg
ICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBk
ZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAx
OgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAg
ICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAg
c2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFBy
b3RlaW5fUHNlS1JBQUNfdHlwZV82QShzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIEFBR3Jv
dXAgPSB7CiAgICAgICAgICAgICAgICA0OiBbJ0FHUFNUJywgJ0NJTE1WJywgJ0RFSEtOUVInLCAnRllX
J10sCiAgICAgICAgICAgICAgICA1OiBbJ0FIVCcsICdDRklMTVZXWScsICdERScsICdHUCcsICdLTlFS
UyddLAogICAgICAgICAgICAgICAgMjA6IFsnQScsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcs
ICdJJywgJ0snLCAnTCcsICdNJywgJ04nLCAnUCcsICdRJywgJ1InLCAnUycsICdUJywgJ1YnLCAnVycs
ICdZJ10sCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmFzdGFzID0gc2VsZi5mYXN0YV9saXN0CiAg
ICAgICAgICAgIHN1YnR5cGUgPSBzZWxmLmt3WydQc2VLUkFBQ19tb2RlbCddCiAgICAgICAgICAgIHJh
YWN0eXBlID0gc2VsZi5rd1snUkFBQ19jbHVzdCddCiAgICAgICAgICAgIGt0dXBsZSA9IHNlbGYua3db
J2stdHVwbGUnXQogICAgICAgICAgICBnbFZhbHVlID0gc2VsZi5rd1snZy1nYXAnXSBpZiBzdWJ0eXBl
ID09ICdnLWdhcCcgZWxzZSBzZWxmLmt3WydsYW1iZGFWYWx1ZSddCgogICAgICAgICAgICBpZiByYWFj
dHlwZSBub3QgaW4gQUFHcm91cDoKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ1BzZUtS
QUFDIGRlc2NyaXB0b3IgdmFsdWUgZXJyb3IuJwogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgog
ICAgICAgICAgICAjIGluZGV4IGVhY2ggYW1pbm8gYWNpZHMgdG8gdGhlaXIgZ3JvdXAKICAgICAgICAg
ICAgbXlEaWN0ID0ge30KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFBR3JvdXBbcmFhY3R5
cGVdKSk6CiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gQUFHcm91cFtyYWFjdHlwZV1baV06CiAgICAg
ICAgICAgICAgICAgICAgbXlEaWN0W2FhXSA9IGkKCiAgICAgICAgICAgIGdEaWN0ID0ge30KICAgICAg
ICAgICAgZ05hbWVzID0gW10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFBR3JvdXBbcmFh
Y3R5cGVdKSk6CiAgICAgICAgICAgICAgICBnRGljdFtpXSA9ICdUMS5HLicgKyBzdHIoaSArIDEpCiAg
ICAgICAgICAgICAgICBnTmFtZXMuYXBwZW5kKCdUMS5HLicgKyBzdHIoaSArIDEpKQoKICAgICAgICAg
ICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaWYgc3VidHlwZSA9PSAnZy1nYXAnOgogICAgICAg
ICAgICAgICAgZW5jb2RpbmdzID0gc2VsZi5nYXBNb2RlbChmYXN0YXMsIG15RGljdCwgZ0RpY3QsIGdO
YW1lcywga3R1cGxlLCBnbFZhbHVlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZW5j
b2RpbmdzID0gc2VsZi5sYW1iZGFNb2RlbChmYXN0YXMsIG15RGljdCwgZ0RpY3QsIGdOYW1lcywga3R1
cGxlLCBnbFZhbHVlKQoKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtd
KQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlw
ZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsx
XQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAg
ICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5z
aGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgog
ICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UK
CiAgICBkZWYgUHJvdGVpbl9Qc2VLUkFBQ190eXBlXzZCKHNlbGYpOgogICAgICAgIHRyeToKICAgICAg
ICAgICAgQUFHcm91cCA9IHsKICAgICAgICAgICAgICAgIDU6IFsnQUVIS1FSU1QnLCAnQ0ZJTE1WV1kn
LCAnRE4nLCAnRycsICdQJ10sCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmFzdGFzID0gc2VsZi5m
YXN0YV9saXN0CiAgICAgICAgICAgIHN1YnR5cGUgPSBzZWxmLmt3WydQc2VLUkFBQ19tb2RlbCddCiAg
ICAgICAgICAgIHJhYWN0eXBlID0gc2VsZi5rd1snUkFBQ19jbHVzdCddCiAgICAgICAgICAgIGt0dXBs
ZSA9IHNlbGYua3dbJ2stdHVwbGUnXQogICAgICAgICAgICBnbFZhbHVlID0gc2VsZi5rd1snZy1nYXAn
XSBpZiBzdWJ0eXBlID09ICdnLWdhcCcgZWxzZSBzZWxmLmt3WydsYW1iZGFWYWx1ZSddCgogICAgICAg
ICAgICBpZiByYWFjdHlwZSBub3QgaW4gQUFHcm91cDoKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3Jf
bXNnID0gJ1BzZUtSQUFDIGRlc2NyaXB0b3IgdmFsdWUgZXJyb3IuJwogICAgICAgICAgICAgICAgcmV0
dXJuIEZhbHNlCgogICAgICAgICAgICAjIGluZGV4IGVhY2ggYW1pbm8gYWNpZHMgdG8gdGhlaXIgZ3Jv
dXAKICAgICAgICAgICAgbXlEaWN0ID0ge30KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFB
R3JvdXBbcmFhY3R5cGVdKSk6CiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gQUFHcm91cFtyYWFjdHlw
ZV1baV06CiAgICAgICAgICAgICAgICAgICAgbXlEaWN0W2FhXSA9IGkKCiAgICAgICAgICAgIGdEaWN0
ID0ge30KICAgICAgICAgICAgZ05hbWVzID0gW10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVu
KEFBR3JvdXBbcmFhY3R5cGVdKSk6CiAgICAgICAgICAgICAgICBnRGljdFtpXSA9ICdUMS5HLicgKyBz
dHIoaSArIDEpCiAgICAgICAgICAgICAgICBnTmFtZXMuYXBwZW5kKCdUMS5HLicgKyBzdHIoaSArIDEp
KQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaWYgc3VidHlwZSA9PSAnZy1n
YXAnOgogICAgICAgICAgICAgICAgZW5jb2RpbmdzID0gc2VsZi5nYXBNb2RlbChmYXN0YXMsIG15RGlj
dCwgZ0RpY3QsIGdOYW1lcywga3R1cGxlLCBnbFZhbHVlKQogICAgICAgICAgICBlbHNlOgogICAgICAg
ICAgICAgICAgZW5jb2RpbmdzID0gc2VsZi5sYW1iZGFNb2RlbChmYXN0YXMsIG15RGljdCwgZ0RpY3Qs
IGdOYW1lcywga3R1cGxlLCBnbFZhbHVlKQoKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9
IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5j
b2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19h
cnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hh
cGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNv
ZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2Vw
dGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICBy
ZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9Qc2VLUkFBQ190eXBlXzZDKHNlbGYpOgogICAgICAg
IHRyeToKICAgICAgICAgICAgQUFHcm91cCA9IHsKICAgICAgICAgICAgICAgIDU6IFsnQUcnLCAnQycs
ICdERUtOUFFSU1QnLCAnRklMTVZXWScsICdIJ10sCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmFz
dGFzID0gc2VsZi5mYXN0YV9saXN0CiAgICAgICAgICAgIHN1YnR5cGUgPSBzZWxmLmt3WydQc2VLUkFB
Q19tb2RlbCddCiAgICAgICAgICAgIHJhYWN0eXBlID0gc2VsZi5rd1snUkFBQ19jbHVzdCddCiAgICAg
ICAgICAgIGt0dXBsZSA9IHNlbGYua3dbJ2stdHVwbGUnXQogICAgICAgICAgICBnbFZhbHVlID0gc2Vs
Zi5rd1snZy1nYXAnXSBpZiBzdWJ0eXBlID09ICdnLWdhcCcgZWxzZSBzZWxmLmt3WydsYW1iZGFWYWx1
ZSddCgogICAgICAgICAgICBpZiByYWFjdHlwZSBub3QgaW4gQUFHcm91cDoKICAgICAgICAgICAgICAg
IHNlbGYuZXJyb3JfbXNnID0gJ1BzZUtSQUFDIGRlc2NyaXB0b3IgdmFsdWUgZXJyb3IuJwogICAgICAg
ICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgICAgICAjIGluZGV4IGVhY2ggYW1pbm8gYWNpZHMg
dG8gdGhlaXIgZ3JvdXAKICAgICAgICAgICAgbXlEaWN0ID0ge30KICAgICAgICAgICAgZm9yIGkgaW4g
cmFuZ2UobGVuKEFBR3JvdXBbcmFhY3R5cGVdKSk6CiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gQUFH
cm91cFtyYWFjdHlwZV1baV06CiAgICAgICAgICAgICAgICAgICAgbXlEaWN0W2FhXSA9IGkKCiAgICAg
ICAgICAgIGdEaWN0ID0ge30KICAgICAgICAgICAgZ05hbWVzID0gW10KICAgICAgICAgICAgZm9yIGkg
aW4gcmFuZ2UobGVuKEFBR3JvdXBbcmFhY3R5cGVdKSk6CiAgICAgICAgICAgICAgICBnRGljdFtpXSA9
ICdUMS5HLicgKyBzdHIoaSArIDEpCiAgICAgICAgICAgICAgICBnTmFtZXMuYXBwZW5kKCdUMS5HLicg
KyBzdHIoaSArIDEpKQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaWYgc3Vi
dHlwZSA9PSAnZy1nYXAnOgogICAgICAgICAgICAgICAgZW5jb2RpbmdzID0gc2VsZi5nYXBNb2RlbChm
YXN0YXMsIG15RGljdCwgZ0RpY3QsIGdOYW1lcywga3R1cGxlLCBnbFZhbHVlKQogICAgICAgICAgICBl
bHNlOgogICAgICAgICAgICAgICAgZW5jb2RpbmdzID0gc2VsZi5sYW1iZGFNb2RlbChmYXN0YXMsIG15
RGljdCwgZ0RpY3QsIGdOYW1lcywga3R1cGxlLCBnbFZhbHVlKQoKICAgICAgICAgICAgc2VsZi5lbmNv
ZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0g
bnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2Vs
Zi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2Rp
bmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAg
aWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4g
VHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAg
ZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQog
ICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9Qc2VLUkFBQ190eXBlXzcoc2Vs
Zik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBBQUdyb3VwID0gewogICAgICAgICAgICAgICAgMjog
WydDJywgJ01GSUxWV1lBR1RTTlFERUhSS1AnXSwKICAgICAgICAgICAgICAgIDM6IFsnQycsICdNRklM
VldZQUtSJywgJ0dUU05RREVIUCddLAogICAgICAgICAgICAgICAgNDogWydDJywgJ0tSJywgJ01GSUxW
V1lBJywgJ0dUU05RREVIUCddLAogICAgICAgICAgICAgICAgNTogWydDJywgJ0tSJywgJ01GSUxWV1lB
JywgJ0RFJywgJ0dUU05RSFAnXSwKICAgICAgICAgICAgICAgIDY6IFsnQycsICdLUicsICdXWUEnLCAn
TUZJTFYnLCAnREUnLCAnR1RTTlFIUCddLAogICAgICAgICAgICAgICAgNzogWydDJywgJ0tSJywgJ1dZ
QScsICdNRklMVicsICdERScsICdRSCcsICdHVFNOUCddLAogICAgICAgICAgICAgICAgODogWydDJywg
J0tSJywgJ1dZQScsICdNRklMVicsICdEJywgJ0UnLCAnUUgnLCAnR1RTTlAnXSwKICAgICAgICAgICAg
ICAgIDk6IFsnQycsICdLUicsICdXWUEnLCAnTUZJTFYnLCAnRCcsICdFJywgJ1FIJywgJ1RQJywgJ0dT
TiddLAogICAgICAgICAgICAgICAgMTA6IFsnQycsICdLUicsICdXWScsICdBJywgJ01GSUxWJywgJ0Qn
LCAnRScsICdRSCcsICdUUCcsICdHU04nXSwKICAgICAgICAgICAgICAgIDExOiBbJ0MnLCAnSycsICdS
JywgJ1dZJywgJ0EnLCAnTUZJTFYnLCAnRCcsICdFJywgJ1FIJywgJ1RQJywgJ0dTTiddLAogICAgICAg
ICAgICAgICAgMTI6IFsnQycsICdLJywgJ1InLCAnV1knLCAnQScsICdNRklMVicsICdEJywgJ0UnLCAn
UUgnLCAnVFAnLCAnR1MnLCAnTiddLAogICAgICAgICAgICAgICAgMTM6IFsnQycsICdLJywgJ1InLCAn
VycsICdZJywgJ0EnLCAnTUZJTFYnLCAnRCcsICdFJywgJ1FIJywgJ1RQJywgJ0dTJywgJ04nXSwKICAg
ICAgICAgICAgICAgIDE0OiBbJ0MnLCAnSycsICdSJywgJ1cnLCAnWScsICdBJywgJ0ZJTFYnLCAnTScs
ICdEJywgJ0UnLCAnUUgnLCAnVFAnLCAnR1MnLCAnTiddLAogICAgICAgICAgICAgICAgMTU6IFsnQycs
ICdLJywgJ1InLCAnVycsICdZJywgJ0EnLCAnRklMVicsICdNJywgJ0QnLCAnRScsICdRJywgJ0gnLCAn
VFAnLCAnR1MnLCAnTiddLAogICAgICAgICAgICAgICAgMTY6IFsnQycsICdLJywgJ1InLCAnVycsICdZ
JywgJ0EnLCAnRklMVicsICdNJywgJ0QnLCAnRScsICdRJywgJ0gnLCAnVFAnLCAnRycsICdTJywgJ04n
XSwKICAgICAgICAgICAgICAgIDE3OiBbJ0MnLCAnSycsICdSJywgJ1cnLCAnWScsICdBJywgJ0ZJJywg
J0xWJywgJ00nLCAnRCcsICdFJywgJ1EnLCAnSCcsICdUUCcsICdHJywgJ1MnLCAnTiddLAogICAgICAg
ICAgICAgICAgMTg6IFsnQycsICdLJywgJ1InLCAnVycsICdZJywgJ0EnLCAnRkknLCAnTFYnLCAnTScs
ICdEJywgJ0UnLCAnUScsICdIJywgJ1QnLCAnUCcsICdHJywgJ1MnLCAnTiddLAogICAgICAgICAgICAg
ICAgMTk6IFsnQycsICdLJywgJ1InLCAnVycsICdZJywgJ0EnLCAnRicsICdJJywgJ0xWJywgJ00nLCAn
RCcsICdFJywgJ1EnLCAnSCcsICdUJywgJ1AnLCAnRycsICdTJywgJ04nXSwKICAgICAgICAgICAgICAg
IDIwOiBbJ0MnLCAnSycsICdSJywgJ1cnLCAnWScsICdBJywgJ0YnLCAnSScsICdMJywgJ1YnLCAnTScs
ICdEJywgJ0UnLCAnUScsICdIJywgJ1QnLCAnUCcsICdHJywgJ1MnLCAnTiddLAogICAgICAgICAgICB9
CiAgICAgICAgICAgIGZhc3RhcyA9IHNlbGYuZmFzdGFfbGlzdAogICAgICAgICAgICBzdWJ0eXBlID0g
c2VsZi5rd1snUHNlS1JBQUNfbW9kZWwnXQogICAgICAgICAgICByYWFjdHlwZSA9IHNlbGYua3dbJ1JB
QUNfY2x1c3QnXQogICAgICAgICAgICBrdHVwbGUgPSBzZWxmLmt3WydrLXR1cGxlJ10KICAgICAgICAg
ICAgZ2xWYWx1ZSA9IHNlbGYua3dbJ2ctZ2FwJ10gaWYgc3VidHlwZSA9PSAnZy1nYXAnIGVsc2Ugc2Vs
Zi5rd1snbGFtYmRhVmFsdWUnXQoKICAgICAgICAgICAgaWYgcmFhY3R5cGUgbm90IGluIEFBR3JvdXA6
CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdQc2VLUkFBQyBkZXNjcmlwdG9yIHZhbHVl
IGVycm9yLicKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAgIyBpbmRleCBl
YWNoIGFtaW5vIGFjaWRzIHRvIHRoZWlyIGdyb3VwCiAgICAgICAgICAgIG15RGljdCA9IHt9CiAgICAg
ICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQUdyb3VwW3JhYWN0eXBlXSkpOgogICAgICAgICAgICAg
ICAgZm9yIGFhIGluIEFBR3JvdXBbcmFhY3R5cGVdW2ldOgogICAgICAgICAgICAgICAgICAgIG15RGlj
dFthYV0gPSBpCgogICAgICAgICAgICBnRGljdCA9IHt9CiAgICAgICAgICAgIGdOYW1lcyA9IFtdCiAg
ICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQUdyb3VwW3JhYWN0eXBlXSkpOgogICAgICAgICAg
ICAgICAgZ0RpY3RbaV0gPSAnVDEuRy4nICsgc3RyKGkgKyAxKQogICAgICAgICAgICAgICAgZ05hbWVz
LmFwcGVuZCgnVDEuRy4nICsgc3RyKGkgKyAxKSkKCiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtdCiAg
ICAgICAgICAgIGlmIHN1YnR5cGUgPT0gJ2ctZ2FwJzoKICAgICAgICAgICAgICAgIGVuY29kaW5ncyA9
IHNlbGYuZ2FwTW9kZWwoZmFzdGFzLCBteURpY3QsIGdEaWN0LCBnTmFtZXMsIGt0dXBsZSwgZ2xWYWx1
ZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGVuY29kaW5ncyA9IHNlbGYubGFtYmRh
TW9kZWwoZmFzdGFzLCBteURpY3QsIGdEaWN0LCBnTmFtZXMsIGt0dXBsZSwgZ2xWYWx1ZSkKCiAgICAg
ICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAgc2VsZi5l
bmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBz
ZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5y
b3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2Rp
bmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAg
ICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVy
biBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJv
cl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFByb3RlaW5fUHNl
S1JBQUNfdHlwZV84KHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgQUFHcm91cCA9IHsKICAg
ICAgICAgICAgICAgIDI6IFsnQURFR0tOUFFSU1QnLCAnQ0ZISUxNVldZJ10sCiAgICAgICAgICAgICAg
ICAzOiBbJ0FERUdOUFNUJywgJ0NIS1FSVycsICdGSUxNVlknXSwKICAgICAgICAgICAgICAgIDQ6IFsn
QUdOUFNUJywgJ0NIV1knLCAnREVLUVInLCAnRklMTVYnXSwKICAgICAgICAgICAgICAgIDU6IFsnQUdQ
U1QnLCAnQ0ZXWScsICdERU4nLCAnSEtRUicsICdJTE1WJ10sCiAgICAgICAgICAgICAgICA2OiBbJ0FQ
U1QnLCAnQ1cnLCAnREVHTicsICdGSFknLCAnSUxNVicsICdLUVInXSwKICAgICAgICAgICAgICAgIDc6
IFsnQUdTVCcsICdDVycsICdERU4nLCAnRlknLCAnSFAnLCAnSUxNVicsICdLUVInXSwKICAgICAgICAg
ICAgICAgIDg6IFsnQVNUJywgJ0NHJywgJ0RFTicsICdGWScsICdIUCcsICdJTFYnLCAnS1FSJywgJ01X
J10sCiAgICAgICAgICAgICAgICA5OiBbJ0FTVCcsICdDVycsICdERScsICdGWScsICdHTicsICdIUScs
ICdJTFYnLCAnS1InLCAnTVAnXSwKICAgICAgICAgICAgICAgIDEwOiBbJ0FTVCcsICdDVycsICdERScs
ICdGWScsICdHTicsICdIUScsICdJVicsICdLUicsICdMTScsICdQJ10sCiAgICAgICAgICAgICAgICAx
MTogWydBU1QnLCAnQycsICdERScsICdGWScsICdHTicsICdIUScsICdJVicsICdLUicsICdMTScsICdQ
JywgJ1cnXSwKICAgICAgICAgICAgICAgIDEyOiBbJ0FTVCcsICdDJywgJ0RFJywgJ0ZZJywgJ0cnLCAn
SFEnLCAnSVYnLCAnS1InLCAnTE0nLCAnTicsICdQJywgJ1cnXSwKICAgICAgICAgICAgICAgIDEzOiBb
J0FTVCcsICdDJywgJ0RFJywgJ0ZZJywgJ0cnLCAnSCcsICdJVicsICdLUicsICdMTScsICdOJywgJ1An
LCAnUScsICdXJ10sCiAgICAgICAgICAgICAgICAxNDogWydBU1QnLCAnQycsICdERScsICdGTCcsICdH
JywgJ0gnLCAnSVYnLCAnS1InLCAnTScsICdOJywgJ1AnLCAnUScsICdXJywgJ1knXSwKICAgICAgICAg
ICAgICAgIDE1OiBbJ0FTVCcsICdDJywgJ0RFJywgJ0YnLCAnRycsICdIJywgJ0lWJywgJ0tSJywgJ0wn
LCAnTScsICdOJywgJ1AnLCAnUScsICdXJywgJ1knXSwKICAgICAgICAgICAgICAgIDE2OiBbJ0FUJywg
J0MnLCAnREUnLCAnRicsICdHJywgJ0gnLCAnSVYnLCAnS1InLCAnTCcsICdNJywgJ04nLCAnUCcsICdR
JywgJ1MnLCAnVycsICdZJ10sCiAgICAgICAgICAgICAgICAxNzogWydBVCcsICdDJywgJ0RFJywgJ0Yn
LCAnRycsICdIJywgJ0lWJywgJ0snLCAnTCcsICdNJywgJ04nLCAnUCcsICdRJywgJ1InLCAnUycsICdX
JywgJ1knXSwKICAgICAgICAgICAgICAgIDE4OiBbJ0EnLCAnQycsICdERScsICdGJywgJ0cnLCAnSCcs
ICdJVicsICdLJywgJ0wnLCAnTScsICdOJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdXJywgJ1kn
XSwKICAgICAgICAgICAgICAgIDE5OiBbJ0EnLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAn
SVYnLCAnSycsICdMJywgJ00nLCAnTicsICdQJywgJ1EnLCAnUicsICdTJywgJ1QnLCAnVycsICdZJ10s
CiAgICAgICAgICAgICAgICAyMDogWydBJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0kn
LCAnVicsICdLJywgJ0wnLCAnTScsICdOJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdXJywgJ1kn
XSwKICAgICAgICAgICAgfQogICAgICAgICAgICBmYXN0YXMgPSBzZWxmLmZhc3RhX2xpc3QKICAgICAg
ICAgICAgc3VidHlwZSA9IHNlbGYua3dbJ1BzZUtSQUFDX21vZGVsJ10KICAgICAgICAgICAgcmFhY3R5
cGUgPSBzZWxmLmt3WydSQUFDX2NsdXN0J10KICAgICAgICAgICAga3R1cGxlID0gc2VsZi5rd1snay10
dXBsZSddCiAgICAgICAgICAgIGdsVmFsdWUgPSBzZWxmLmt3WydnLWdhcCddIGlmIHN1YnR5cGUgPT0g
J2ctZ2FwJyBlbHNlIHNlbGYua3dbJ2xhbWJkYVZhbHVlJ10KCiAgICAgICAgICAgIGlmIHJhYWN0eXBl
IG5vdCBpbiBBQUdyb3VwOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnUHNlS1JBQUMg
ZGVzY3JpcHRvciB2YWx1ZSBlcnJvci4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAg
ICAgICAgICMgaW5kZXggZWFjaCBhbWlubyBhY2lkcyB0byB0aGVpciBncm91cAogICAgICAgICAgICBt
eURpY3QgPSB7fQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUFHcm91cFtyYWFjdHlwZV0p
KToKICAgICAgICAgICAgICAgIGZvciBhYSBpbiBBQUdyb3VwW3JhYWN0eXBlXVtpXToKICAgICAgICAg
ICAgICAgICAgICBteURpY3RbYWFdID0gaQoKICAgICAgICAgICAgZ0RpY3QgPSB7fQogICAgICAgICAg
ICBnTmFtZXMgPSBbXQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUFHcm91cFtyYWFjdHlw
ZV0pKToKICAgICAgICAgICAgICAgIGdEaWN0W2ldID0gJ1QxLkcuJyArIHN0cihpICsgMSkKICAgICAg
ICAgICAgICAgIGdOYW1lcy5hcHBlbmQoJ1QxLkcuJyArIHN0cihpICsgMSkpCgogICAgICAgICAgICBl
bmNvZGluZ3MgPSBbXQogICAgICAgICAgICBpZiBzdWJ0eXBlID09ICdnLWdhcCc6CiAgICAgICAgICAg
ICAgICBlbmNvZGluZ3MgPSBzZWxmLmdhcE1vZGVsKGZhc3RhcywgbXlEaWN0LCBnRGljdCwgZ05hbWVz
LCBrdHVwbGUsIGdsVmFsdWUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBlbmNvZGlu
Z3MgPSBzZWxmLmxhbWJkYU1vZGVsKGZhc3RhcywgbXlEaWN0LCBnRGljdCwgZ05hbWVzLCBrdHVwbGUs
IGdsVmFsdWUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCiAg
ICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0
cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAg
ICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAg
ICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBl
WzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAg
ICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAg
IGRlZiBQcm90ZWluX1BzZUtSQUFDX3R5cGVfOShzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAg
IEFBR3JvdXAgPSB7CiAgICAgICAgICAgICAgICAyOiBbJ0FDREVGR0hJTE1OUFFSU1RWV1knLCAnSydd
LAogICAgICAgICAgICAgICAgMzogWydBQ0RGR01QUVJTVFcnLCAnRUhJTE5WWScsICdLJ10sCiAgICAg
ICAgICAgICAgICA0OiBbJ0FHUFQnLCAnQ0RGTVFSU1cnLCAnRUhJTE5WWScsICdLJ10sCiAgICAgICAg
ICAgICAgICA1OiBbJ0FHUFQnLCAnQ0RRJywgJ0VISUxOVlknLCAnRk1SU1cnLCAnSyddLAogICAgICAg
ICAgICAgICAgNjogWydBRycsICdDRFEnLCAnRUhJTE5WWScsICdGTVJTVycsICdLJywgJ1BUJ10sCiAg
ICAgICAgICAgICAgICA3OiBbJ0FHJywgJ0NEUScsICdFSE5ZJywgJ0ZNUlNXJywgJ0lMVicsICdLJywg
J1BUJ10sCiAgICAgICAgICAgICAgICA4OiBbJ0FHJywgJ0MnLCAnRFEnLCAnRUhOWScsICdGTVJTVycs
ICdJTFYnLCAnSycsICdQVCddLAogICAgICAgICAgICAgICAgOTogWydBRycsICdDJywgJ0RRJywgJ0VI
TlknLCAnRk1XJywgJ0lMVicsICdLJywgJ1BUJywgJ1JTJ10sCiAgICAgICAgICAgICAgICAxMDogWydB
JywgJ0MnLCAnRFEnLCAnRUhOWScsICdGTVcnLCAnRycsICdJTFYnLCAnSycsICdQVCcsICdSUyddLAog
ICAgICAgICAgICAgICAgMTE6IFsnQScsICdDJywgJ0RRJywgJ0VITlknLCAnRk0nLCAnRycsICdJTFYn
LCAnSycsICdQVCcsICdSUycsICdXJ10sCiAgICAgICAgICAgICAgICAxMjogWydBJywgJ0MnLCAnRFEn
LCAnRUhOWScsICdGTScsICdHJywgJ0lMJywgJ0snLCAnUFQnLCAnUlMnLCAnVicsICdXJ10sCiAgICAg
ICAgICAgICAgICAxMzogWydBJywgJ0MnLCAnRFEnLCAnRScsICdGTScsICdHJywgJ0hOWScsICdJTCcs
ICdLJywgJ1BUJywgJ1JTJywgJ1YnLCAnVyddLAogICAgICAgICAgICAgICAgMTQ6IFsnQScsICdDJywg
J0QnLCAnRScsICdGTScsICdHJywgJ0hOWScsICdJTCcsICdLJywgJ1BUJywgJ1EnLCAnUlMnLCAnVics
ICdXJ10sCiAgICAgICAgICAgICAgICAxNTogWydBJywgJ0MnLCAnRCcsICdFJywgJ0ZNJywgJ0cnLCAn
SE5ZJywgJ0lMJywgJ0snLCAnUFQnLCAnUScsICdSJywgJ1MnLCAnVicsICdXJ10sCiAgICAgICAgICAg
ICAgICAxNjogWydBJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdITlknLCAnSUwnLCAnSycsICdN
JywgJ1BUJywgJ1EnLCAnUicsICdTJywgJ1YnLCAnVyddLAogICAgICAgICAgICAgICAgMTc6IFsnQScs
ICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSE5ZJywgJ0lMJywgJ0snLCAnTScsICdQJywgJ1EnLCAn
UicsICdTJywgJ1QnLCAnVicsICdXJ10sCiAgICAgICAgICAgICAgICAxODogWydBJywgJ0MnLCAnRCcs
ICdFJywgJ0YnLCAnRycsICdITlknLCAnSScsICdLJywgJ0wnLCAnTScsICdQJywgJ1EnLCAnUicsICdT
JywgJ1QnLCAnVicsICdXJ10sCiAgICAgICAgICAgICAgICAxOTogWydBJywgJ0MnLCAnRCcsICdFJywg
J0YnLCAnRycsICdITicsICdJJywgJ0snLCAnTCcsICdNJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcs
ICdWJywgJ1cnLCAnWSddLAogICAgICAgICAgICAgICAgMjA6IFsnQScsICdDJywgJ0QnLCAnRScsICdG
JywgJ0cnLCAnSCcsICdOJywgJ0knLCAnSycsICdMJywgJ00nLCAnUCcsICdRJywgJ1InLCAnUycsICdU
JywgJ1YnLCAnVycsICdZJ10sCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmFzdGFzID0gc2VsZi5m
YXN0YV9saXN0CiAgICAgICAgICAgIHN1YnR5cGUgPSBzZWxmLmt3WydQc2VLUkFBQ19tb2RlbCddCiAg
ICAgICAgICAgIHJhYWN0eXBlID0gc2VsZi5rd1snUkFBQ19jbHVzdCddCiAgICAgICAgICAgIGt0dXBs
ZSA9IHNlbGYua3dbJ2stdHVwbGUnXQogICAgICAgICAgICBnbFZhbHVlID0gc2VsZi5rd1snZy1nYXAn
XSBpZiBzdWJ0eXBlID09ICdnLWdhcCcgZWxzZSBzZWxmLmt3WydsYW1iZGFWYWx1ZSddCgogICAgICAg
ICAgICBpZiByYWFjdHlwZSBub3QgaW4gQUFHcm91cDoKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3Jf
bXNnID0gJ1BzZUtSQUFDIGRlc2NyaXB0b3IgdmFsdWUgZXJyb3IuJwogICAgICAgICAgICAgICAgcmV0
dXJuIEZhbHNlCgogICAgICAgICAgICAjIGluZGV4IGVhY2ggYW1pbm8gYWNpZHMgdG8gdGhlaXIgZ3Jv
dXAKICAgICAgICAgICAgbXlEaWN0ID0ge30KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFB
R3JvdXBbcmFhY3R5cGVdKSk6CiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gQUFHcm91cFtyYWFjdHlw
ZV1baV06CiAgICAgICAgICAgICAgICAgICAgbXlEaWN0W2FhXSA9IGkKCiAgICAgICAgICAgIGdEaWN0
ID0ge30KICAgICAgICAgICAgZ05hbWVzID0gW10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVu
KEFBR3JvdXBbcmFhY3R5cGVdKSk6CiAgICAgICAgICAgICAgICBnRGljdFtpXSA9ICdUMS5HLicgKyBz
dHIoaSArIDEpCiAgICAgICAgICAgICAgICBnTmFtZXMuYXBwZW5kKCdUMS5HLicgKyBzdHIoaSArIDEp
KQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaWYgc3VidHlwZSA9PSAnZy1n
YXAnOgogICAgICAgICAgICAgICAgZW5jb2RpbmdzID0gc2VsZi5nYXBNb2RlbChmYXN0YXMsIG15RGlj
dCwgZ0RpY3QsIGdOYW1lcywga3R1cGxlLCBnbFZhbHVlKQogICAgICAgICAgICBlbHNlOgogICAgICAg
ICAgICAgICAgZW5jb2RpbmdzID0gc2VsZi5sYW1iZGFNb2RlbChmYXN0YXMsIG15RGljdCwgZ0RpY3Qs
IGdOYW1lcywga3R1cGxlLCBnbFZhbHVlKQoKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9
IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5j
b2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19h
cnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hh
cGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNv
ZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2Vw
dGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICBy
ZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9Qc2VLUkFBQ190eXBlXzEwKHNlbGYpOgogICAgICAg
IHRyeToKICAgICAgICAgICAgQUFHcm91cCA9IHsKICAgICAgICAgICAgICAgIDI6IFsnQ01GSUxWV1kn
LCAnQUdUU05RREVIUktQJ10sCiAgICAgICAgICAgICAgICAzOiBbJ0NNRklMVldZJywgJ0FHVFNQJywg
J05RREVIUksnXSwKICAgICAgICAgICAgICAgIDQ6IFsnQ01GV1knLCAnSUxWJywgJ0FHVFMnLCAnTlFE
RUhSS1AnXSwKICAgICAgICAgICAgICAgIDU6IFsnRldZSCcsICdNSUxWJywgJ0NBVFNQJywgJ0cnLCAn
TlFERVJLJ10sCiAgICAgICAgICAgICAgICA2OiBbJ0ZXWUgnLCAnTUlMVicsICdDQVRTJywgJ1AnLCAn
RycsICdOUURFUksnXSwKICAgICAgICAgICAgICAgIDc6IFsnRldZSCcsICdNSUxWJywgJ0NBVFMnLCAn
UCcsICdHJywgJ05RREUnLCAnUksnXSwKICAgICAgICAgICAgICAgIDg6IFsnRldZSCcsICdNSUxWJywg
J0NBJywgJ05UUycsICdQJywgJ0cnLCAnREUnLCAnUVJLJ10sCiAgICAgICAgICAgICAgICA5OiBbJ0ZX
WUgnLCAnTUwnLCAnSVYnLCAnQ0EnLCAnTlRTJywgJ1AnLCAnRycsICdERScsICdRUksnXSwKICAgICAg
ICAgICAgICAgIDEwOiBbJ0ZXWScsICdNTCcsICdJVicsICdDQScsICdUUycsICdOSCcsICdQJywgJ0cn
LCAnREUnLCAnUVJLJ10sCiAgICAgICAgICAgICAgICAxMTogWydGV1knLCAnTUwnLCAnSVYnLCAnQ0En
LCAnVFMnLCAnTkgnLCAnUCcsICdHJywgJ0QnLCAnUUUnLCAnUksnXSwKICAgICAgICAgICAgICAgIDEy
OiBbJ0ZXWScsICdNTCcsICdJVicsICdDJywgJ0EnLCAnVFMnLCAnTkgnLCAnUCcsICdHJywgJ0QnLCAn
UUUnLCAnUksnXSwKICAgICAgICAgICAgICAgIDEzOiBbJ0ZXWScsICdNTCcsICdJVicsICdDJywgJ0En
LCAnVCcsICdTJywgJ05IJywgJ1AnLCAnRycsICdEJywgJ1FFJywgJ1JLJ10sCiAgICAgICAgICAgICAg
ICAxNDogWydGV1knLCAnTUwnLCAnSVYnLCAnQycsICdBJywgJ1QnLCAnUycsICdOSCcsICdQJywgJ0cn
LCAnRCcsICdRRScsICdSJywgJ0snXSwKICAgICAgICAgICAgICAgIDE1OiBbJ0ZXWScsICdNTCcsICdJ
VicsICdDJywgJ0EnLCAnVCcsICdTJywgJ04nLCAnSCcsICdQJywgJ0cnLCAnRCcsICdRRScsICdSJywg
J0snXSwKICAgICAgICAgICAgICAgIDE2OiBbJ1cnLCAnRlknLCAnTUwnLCAnSVYnLCAnQycsICdBJywg
J1QnLCAnUycsICdOJywgJ0gnLCAnUCcsICdHJywgJ0QnLCAnUUUnLCAnUicsICdLJ10sCiAgICAgICAg
ICAgICAgICAxNzogWydXJywgJ0ZZJywgJ01MJywgJ0lWJywgJ0MnLCAnQScsICdUJywgJ1MnLCAnTics
ICdIJywgJ1AnLCAnRycsICdEJywgJ1EnLCAnRScsICdSJywgJ0snXSwKICAgICAgICAgICAgICAgIDE4
OiBbJ1cnLCAnRlknLCAnTScsICdMJywgJ0lWJywgJ0MnLCAnQScsICdUJywgJ1MnLCAnTicsICdIJywg
J1AnLCAnRycsICdEJywgJ1EnLCAnRScsICdSJywgJ0snXSwKICAgICAgICAgICAgICAgIDE5OiBbJ1cn
LCAnRicsICdZJywgJ00nLCAnTCcsICdJVicsICdDJywgJ0EnLCAnVCcsICdTJywgJ04nLCAnSCcsICdQ
JywgJ0cnLCAnRCcsICdRJywgJ0UnLCAnUicsICdLJ10sCiAgICAgICAgICAgICAgICAyMDogWydXJywg
J0YnLCAnWScsICdNJywgJ0wnLCAnSScsICdWJywgJ0MnLCAnQScsICdUJywgJ1MnLCAnTicsICdIJywg
J1AnLCAnRycsICdEJywgJ1EnLCAnRScsICdSJywgJ0snXSwKICAgICAgICAgICAgfQogICAgICAgICAg
ICBmYXN0YXMgPSBzZWxmLmZhc3RhX2xpc3QKICAgICAgICAgICAgc3VidHlwZSA9IHNlbGYua3dbJ1Bz
ZUtSQUFDX21vZGVsJ10KICAgICAgICAgICAgcmFhY3R5cGUgPSBzZWxmLmt3WydSQUFDX2NsdXN0J10K
ICAgICAgICAgICAga3R1cGxlID0gc2VsZi5rd1snay10dXBsZSddCiAgICAgICAgICAgIGdsVmFsdWUg
PSBzZWxmLmt3WydnLWdhcCddIGlmIHN1YnR5cGUgPT0gJ2ctZ2FwJyBlbHNlIHNlbGYua3dbJ2xhbWJk
YVZhbHVlJ10KCiAgICAgICAgICAgIGlmIHJhYWN0eXBlIG5vdCBpbiBBQUdyb3VwOgogICAgICAgICAg
ICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnUHNlS1JBQUMgZGVzY3JpcHRvciB2YWx1ZSBlcnJvci4nCiAg
ICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgICMgaW5kZXggZWFjaCBhbWlubyBh
Y2lkcyB0byB0aGVpciBncm91cAogICAgICAgICAgICBteURpY3QgPSB7fQogICAgICAgICAgICBmb3Ig
aSBpbiByYW5nZShsZW4oQUFHcm91cFtyYWFjdHlwZV0pKToKICAgICAgICAgICAgICAgIGZvciBhYSBp
biBBQUdyb3VwW3JhYWN0eXBlXVtpXToKICAgICAgICAgICAgICAgICAgICBteURpY3RbYWFdID0gaQoK
ICAgICAgICAgICAgZ0RpY3QgPSB7fQogICAgICAgICAgICBnTmFtZXMgPSBbXQogICAgICAgICAgICBm
b3IgaSBpbiByYW5nZShsZW4oQUFHcm91cFtyYWFjdHlwZV0pKToKICAgICAgICAgICAgICAgIGdEaWN0
W2ldID0gJ1QxLkcuJyArIHN0cihpICsgMSkKICAgICAgICAgICAgICAgIGdOYW1lcy5hcHBlbmQoJ1Qx
LkcuJyArIHN0cihpICsgMSkpCgogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBp
ZiBzdWJ0eXBlID09ICdnLWdhcCc6CiAgICAgICAgICAgICAgICBlbmNvZGluZ3MgPSBzZWxmLmdhcE1v
ZGVsKGZhc3RhcywgbXlEaWN0LCBnRGljdCwgZ05hbWVzLCBrdHVwbGUsIGdsVmFsdWUpCiAgICAgICAg
ICAgIGVsc2U6CiAgICAgICAgICAgICAgICBlbmNvZGluZ3MgPSBzZWxmLmxhbWJkYU1vZGVsKGZhc3Rh
cywgbXlEaWN0LCBnRGljdCwgZ05hbWVzLCBrdHVwbGUsIGdsVmFsdWUpCgogICAgICAgICAgICBzZWxm
LmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJy
YXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4g
PSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5l
bmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAg
ICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJl
dHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAg
ICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3Ry
KGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBQcm90ZWluX1BzZUtSQUFDX3R5cGVf
MTEoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBBQUdyb3VwID0gewogICAgICAgICAgICAg
ICAgMjogWydDRllXTUxJVicsICdHUEFUU05IUUVEUksnXSwKICAgICAgICAgICAgICAgIDM6IFsnQ0ZZ
V01MSVYnLCAnR1BBVFMnLCAnTkhRRURSSyddLAogICAgICAgICAgICAgICAgNDogWydDRllXJywgJ01M
SVYnLCAnR1BBVFMnLCAnTkhRRURSSyddLAogICAgICAgICAgICAgICAgNTogWydDRllXJywgJ01MSVYn
LCAnRycsICdQQVRTJywgJ05IUUVEUksnXSwKICAgICAgICAgICAgICAgIDY6IFsnQ0ZZVycsICdNTElW
JywgJ0cnLCAnUCcsICdBVFMnLCAnTkhRRURSSyddLAogICAgICAgICAgICAgICAgNzogWydDRllXJywg
J01MSVYnLCAnRycsICdQJywgJ0FUUycsICdOSFFFRCcsICdSSyddLAogICAgICAgICAgICAgICAgODog
WydDRllXJywgJ01MSVYnLCAnRycsICdQJywgJ0FUUycsICdOSCcsICdRRUQnLCAnUksnXSwKICAgICAg
ICAgICAgICAgIDk6IFsnQ0ZZVycsICdNTCcsICdJVicsICdHJywgJ1AnLCAnQVRTJywgJ05IJywgJ1FF
RCcsICdSSyddLAogICAgICAgICAgICAgICAgMTA6IFsnQycsICdGWVcnLCAnTUwnLCAnSVYnLCAnRycs
ICdQJywgJ0FUUycsICdOSCcsICdRRUQnLCAnUksnXSwKICAgICAgICAgICAgICAgIDExOiBbJ0MnLCAn
RllXJywgJ01MJywgJ0lWJywgJ0cnLCAnUCcsICdBJywgJ1RTJywgJ05IJywgJ1FFRCcsICdSSyddLAog
ICAgICAgICAgICAgICAgMTI6IFsnQycsICdGWVcnLCAnTUwnLCAnSVYnLCAnRycsICdQJywgJ0EnLCAn
VFMnLCAnTkgnLCAnUUUnLCAnRCcsICdSSyddLAogICAgICAgICAgICAgICAgMTM6IFsnQycsICdGWVcn
LCAnTUwnLCAnSVYnLCAnRycsICdQJywgJ0EnLCAnVCcsICdTJywgJ05IJywgJ1FFJywgJ0QnLCAnUksn
XSwKICAgICAgICAgICAgICAgIDE0OiBbJ0MnLCAnRllXJywgJ01MJywgJ0lWJywgJ0cnLCAnUCcsICdB
JywgJ1QnLCAnUycsICdOJywgJ0gnLCAnUUUnLCAnRCcsICdSSyddLAogICAgICAgICAgICAgICAgMTU6
IFsnQycsICdGWVcnLCAnTUwnLCAnSVYnLCAnRycsICdQJywgJ0EnLCAnVCcsICdTJywgJ04nLCAnSCcs
ICdRRScsICdEJywgJ1InLCAnSyddLAogICAgICAgICAgICAgICAgMTY6IFsnQycsICdGWScsICdXJywg
J01MJywgJ0lWJywgJ0cnLCAnUCcsICdBJywgJ1QnLCAnUycsICdOJywgJ0gnLCAnUUUnLCAnRCcsICdS
JywgJ0snXSwKICAgICAgICAgICAgICAgIDE3OiBbJ0MnLCAnRlknLCAnVycsICdNTCcsICdJVicsICdH
JywgJ1AnLCAnQScsICdUJywgJ1MnLCAnTicsICdIJywgJ1EnLCAnRScsICdEJywgJ1InLCAnSyddLAog
ICAgICAgICAgICAgICAgMTg6IFsnQycsICdGWScsICdXJywgJ00nLCAnTCcsICdJVicsICdHJywgJ1An
LCAnQScsICdUJywgJ1MnLCAnTicsICdIJywgJ1EnLCAnRScsICdEJywgJ1InLCAnSyddLAogICAgICAg
ICAgICAgICAgMTk6IFsnQycsICdGJywgJ1knLCAnVycsICdNJywgJ0wnLCAnSVYnLCAnRycsICdQJywg
J0EnLCAnVCcsICdTJywgJ04nLCAnSCcsICdRJywgJ0UnLCAnRCcsICdSJywgJ0snXSwKICAgICAgICAg
ICAgICAgIDIwOiBbJ0MnLCAnRicsICdZJywgJ1cnLCAnTScsICdMJywgJ0knLCAnVicsICdHJywgJ1An
LCAnQScsICdUJywgJ1MnLCAnTicsICdIJywgJ1EnLCAnRScsICdEJywgJ1InLCAnSyddLAogICAgICAg
ICAgICB9CiAgICAgICAgICAgIGZhc3RhcyA9IHNlbGYuZmFzdGFfbGlzdAogICAgICAgICAgICBzdWJ0
eXBlID0gc2VsZi5rd1snUHNlS1JBQUNfbW9kZWwnXQogICAgICAgICAgICByYWFjdHlwZSA9IHNlbGYu
a3dbJ1JBQUNfY2x1c3QnXQogICAgICAgICAgICBrdHVwbGUgPSBzZWxmLmt3WydrLXR1cGxlJ10KICAg
ICAgICAgICAgZ2xWYWx1ZSA9IHNlbGYua3dbJ2ctZ2FwJ10gaWYgc3VidHlwZSA9PSAnZy1nYXAnIGVs
c2Ugc2VsZi5rd1snbGFtYmRhVmFsdWUnXQoKICAgICAgICAgICAgaWYgcmFhY3R5cGUgbm90IGluIEFB
R3JvdXA6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdQc2VLUkFBQyBkZXNjcmlwdG9y
IHZhbHVlIGVycm9yLicKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAgIyBp
bmRleCBlYWNoIGFtaW5vIGFjaWRzIHRvIHRoZWlyIGdyb3VwCiAgICAgICAgICAgIG15RGljdCA9IHt9
CiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQUdyb3VwW3JhYWN0eXBlXSkpOgogICAgICAg
ICAgICAgICAgZm9yIGFhIGluIEFBR3JvdXBbcmFhY3R5cGVdW2ldOgogICAgICAgICAgICAgICAgICAg
IG15RGljdFthYV0gPSBpCgogICAgICAgICAgICBnRGljdCA9IHt9CiAgICAgICAgICAgIGdOYW1lcyA9
IFtdCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQUdyb3VwW3JhYWN0eXBlXSkpOgogICAg
ICAgICAgICAgICAgZ0RpY3RbaV0gPSAnVDEuRy4nICsgc3RyKGkgKyAxKQogICAgICAgICAgICAgICAg
Z05hbWVzLmFwcGVuZCgnVDEuRy4nICsgc3RyKGkgKyAxKSkKCiAgICAgICAgICAgIGVuY29kaW5ncyA9
IFtdCiAgICAgICAgICAgIGlmIHN1YnR5cGUgPT0gJ2ctZ2FwJzoKICAgICAgICAgICAgICAgIGVuY29k
aW5ncyA9IHNlbGYuZ2FwTW9kZWwoZmFzdGFzLCBteURpY3QsIGdEaWN0LCBnTmFtZXMsIGt0dXBsZSwg
Z2xWYWx1ZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGVuY29kaW5ncyA9IHNlbGYu
bGFtYmRhTW9kZWwoZmFzdGFzLCBteURpY3QsIGdEaWN0LCBnTmFtZXMsIGt0dXBsZSwgZ2xWYWx1ZSkK
CiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAg
c2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAg
ICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAg
c2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwg
ZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgog
ICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
IHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2Vs
Zi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFByb3Rl
aW5fUHNlS1JBQUNfdHlwZV8xMihzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIEFBR3JvdXAg
PSB7CiAgICAgICAgICAgICAgICAyOiBbJ0lWTUxGV1lDJywgJ0FSTkRRRUdIS1BTVCddLAogICAgICAg
ICAgICAgICAgMzogWydJVkxNRldDJywgJ1lBJywgJ1JORFFFR0hLUFNUJ10sCiAgICAgICAgICAgICAg
ICA0OiBbJ0lWTE1GVycsICdDJywgJ1lBJywgJ1JORFFFR0hLUFNUJ10sCiAgICAgICAgICAgICAgICA1
OiBbJ0lWTE1GVycsICdDJywgJ1lBJywgJ0cnLCAnUk5EUUVIS1BTVCddLAogICAgICAgICAgICAgICAg
NjogWydJVkxNRicsICdXWScsICdDJywgJ0FIJywgJ0cnLCAnUk5EUUVLUFNUJ10sCiAgICAgICAgICAg
ICAgICA3OiBbJ0lWTE1GJywgJ1dZJywgJ0MnLCAnQUgnLCAnR1AnLCAnUicsICdORFFFS1NUJ10sCiAg
ICAgICAgICAgICAgICA4OiBbJ0lWTE1GJywgJ1dZJywgJ0MnLCAnQScsICdHJywgJ1InLCAnUScsICdO
REVIS1BTVCddLAogICAgICAgICAgICAgICAgOTogWydJVkxNRicsICdXWScsICdDJywgJ0EnLCAnRycs
ICdQJywgJ0gnLCAnSycsICdSTkRRRVNUJ10sCiAgICAgICAgICAgICAgICAxMDogWydJVkxNJywgJ0Yn
LCAnVycsICdZJywgJ0MnLCAnQScsICdIJywgJ0cnLCAnUk4nLCAnRFFFS1BTVCddLAogICAgICAgICAg
ICAgICAgMTE6IFsnSVZMTUYnLCAnVycsICdZJywgJ0MnLCAnQScsICdIJywgJ0cnLCAnUicsICdOJywg
J1EnLCAnREVLUFNUJ10sCiAgICAgICAgICAgICAgICAxMjogWydJVkxNJywgJ0YnLCAnVycsICdZJywg
J0MnLCAnQScsICdIJywgJ0cnLCAnTicsICdRJywgJ1QnLCAnUkRFS1BTJ10sCiAgICAgICAgICAgICAg
ICAxMzogWydJVkxNJywgJ0YnLCAnVycsICdZJywgJ0MnLCAnQScsICdIJywgJ0cnLCAnTicsICdRJywg
J1AnLCAnUicsICdERUtTVCddLAogICAgICAgICAgICAgICAgMTQ6IFsnSVZMTScsICdGJywgJ1cnLCAn
WScsICdDJywgJ0EnLCAnSCcsICdHJywgJ04nLCAnUScsICdQJywgJ1InLCAnSycsICdERVNUJ10sCiAg
ICAgICAgICAgICAgICAxNTogWydJVkxNJywgJ0YnLCAnVycsICdZJywgJ0MnLCAnQScsICdIJywgJ0cn
LCAnTicsICdRJywgJ1AnLCAnUicsICdLJywgJ0QnLCAnRVNUJ10sCiAgICAgICAgICAgICAgICAxNjog
WydJVkxNJywgJ0YnLCAnVycsICdZJywgJ0MnLCAnQScsICdIJywgJ0cnLCAnTicsICdRJywgJ1AnLCAn
UicsICdLJywgJ1MnLCAnVCcsICdERSddLAogICAgICAgICAgICAgICAgMTc6IFsnSVZMJywgJ00nLCAn
RicsICdXJywgJ1knLCAnQycsICdBJywgJ0gnLCAnRycsICdOJywgJ1EnLCAnUCcsICdSJywgJ0snLCAn
UycsICdUJywgJ0RFJ10sCiAgICAgICAgICAgICAgICAxODogWydJVkwnLCAnTScsICdGJywgJ1cnLCAn
WScsICdDJywgJ0EnLCAnSCcsICdHJywgJ04nLCAnUScsICdQJywgJ1InLCAnSycsICdTJywgJ1QnLCAn
RCcsICdFJ10sCiAgICAgICAgICAgICAgICAyMDogWydJJywgJ1YnLCAnTCcsICdNJywgJ0YnLCAnVycs
ICdZJywgJ0MnLCAnQScsICdIJywgJ0cnLCAnTicsICdRJywgJ1AnLCAnUicsICdLJywgJ1MnLCAnVCcs
ICdEJywgJ0UnXSwKICAgICAgICAgICAgfQogICAgICAgICAgICBmYXN0YXMgPSBzZWxmLmZhc3RhX2xp
c3QKICAgICAgICAgICAgc3VidHlwZSA9IHNlbGYua3dbJ1BzZUtSQUFDX21vZGVsJ10KICAgICAgICAg
ICAgcmFhY3R5cGUgPSBzZWxmLmt3WydSQUFDX2NsdXN0J10KICAgICAgICAgICAga3R1cGxlID0gc2Vs
Zi5rd1snay10dXBsZSddCiAgICAgICAgICAgIGdsVmFsdWUgPSBzZWxmLmt3WydnLWdhcCddIGlmIHN1
YnR5cGUgPT0gJ2ctZ2FwJyBlbHNlIHNlbGYua3dbJ2xhbWJkYVZhbHVlJ10KCiAgICAgICAgICAgIGlm
IHJhYWN0eXBlIG5vdCBpbiBBQUdyb3VwOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAn
UHNlS1JBQUMgZGVzY3JpcHRvciB2YWx1ZSBlcnJvci4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFs
c2UKCiAgICAgICAgICAgICMgaW5kZXggZWFjaCBhbWlubyBhY2lkcyB0byB0aGVpciBncm91cAogICAg
ICAgICAgICBteURpY3QgPSB7fQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUFHcm91cFty
YWFjdHlwZV0pKToKICAgICAgICAgICAgICAgIGZvciBhYSBpbiBBQUdyb3VwW3JhYWN0eXBlXVtpXToK
ICAgICAgICAgICAgICAgICAgICBteURpY3RbYWFdID0gaQoKICAgICAgICAgICAgZ0RpY3QgPSB7fQog
ICAgICAgICAgICBnTmFtZXMgPSBbXQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUFHcm91
cFtyYWFjdHlwZV0pKToKICAgICAgICAgICAgICAgIGdEaWN0W2ldID0gJ1QxLkcuJyArIHN0cihpICsg
MSkKICAgICAgICAgICAgICAgIGdOYW1lcy5hcHBlbmQoJ1QxLkcuJyArIHN0cihpICsgMSkpCgogICAg
ICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBpZiBzdWJ0eXBlID09ICdnLWdhcCc6CiAg
ICAgICAgICAgICAgICBlbmNvZGluZ3MgPSBzZWxmLmdhcE1vZGVsKGZhc3RhcywgbXlEaWN0LCBnRGlj
dCwgZ05hbWVzLCBrdHVwbGUsIGdsVmFsdWUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAg
ICBlbmNvZGluZ3MgPSBzZWxmLmxhbWJkYU1vZGVsKGZhc3RhcywgbXlEaWN0LCBnRGljdCwgZ05hbWVz
LCBrdHVwbGUsIGdsVmFsdWUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJy
YXkoW10pCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3Ms
IGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNo
YXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAt
IDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2Fy
cmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFz
IGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBG
YWxzZQoKICAgIGRlZiBQcm90ZWluX1BzZUtSQUFDX3R5cGVfMTMoc2VsZik6CiAgICAgICAgdHJ5Ogog
ICAgICAgICAgICBBQUdyb3VwID0gewogICAgICAgICAgICAgICAgNDogWydBREtFUk5UU1EnLCAnWUZM
SVZNQ1dIJywgJ0cnLCAnUCddLAogICAgICAgICAgICAgICAgMTI6IFsnQScsICdEJywgJ0tFUicsICdO
JywgJ1RTUScsICdZRicsICdMSVZNJywgJ0MnLCAnVycsICdIJywgJ0cnLCAnUCddLAogICAgICAgICAg
ICAgICAgMTc6IFsnQScsICdEJywgJ0tFJywgJ1InLCAnTicsICdUJywgJ1MnLCAnUScsICdZJywgJ0Yn
LCAnTElWJywgJ00nLCAnQycsICdXJywgJ0gnLCAnRycsICdQJ10sCiAgICAgICAgICAgICAgICAyMDog
WydBJywgJ0QnLCAnSycsICdFJywgJ1InLCAnTicsICdUJywgJ1MnLCAnUScsICdZJywgJ0YnLCAnTCcs
ICdJJywgJ1YnLCAnTScsICdDJywgJ1cnLCAnSCcsICdHJywgJ1AnXSwKICAgICAgICAgICAgfQogICAg
ICAgICAgICBmYXN0YXMgPSBzZWxmLmZhc3RhX2xpc3QKICAgICAgICAgICAgc3VidHlwZSA9IHNlbGYu
a3dbJ1BzZUtSQUFDX21vZGVsJ10KICAgICAgICAgICAgcmFhY3R5cGUgPSBzZWxmLmt3WydSQUFDX2Ns
dXN0J10KICAgICAgICAgICAga3R1cGxlID0gc2VsZi5rd1snay10dXBsZSddCiAgICAgICAgICAgIGds
VmFsdWUgPSBzZWxmLmt3WydnLWdhcCddIGlmIHN1YnR5cGUgPT0gJ2ctZ2FwJyBlbHNlIHNlbGYua3db
J2xhbWJkYVZhbHVlJ10KCiAgICAgICAgICAgIGlmIHJhYWN0eXBlIG5vdCBpbiBBQUdyb3VwOgogICAg
ICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnUHNlS1JBQUMgZGVzY3JpcHRvciB2YWx1ZSBlcnJv
ci4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgICMgaW5kZXggZWFjaCBh
bWlubyBhY2lkcyB0byB0aGVpciBncm91cAogICAgICAgICAgICBteURpY3QgPSB7fQogICAgICAgICAg
ICBmb3IgaSBpbiByYW5nZShsZW4oQUFHcm91cFtyYWFjdHlwZV0pKToKICAgICAgICAgICAgICAgIGZv
ciBhYSBpbiBBQUdyb3VwW3JhYWN0eXBlXVtpXToKICAgICAgICAgICAgICAgICAgICBteURpY3RbYWFd
ID0gaQoKICAgICAgICAgICAgZ0RpY3QgPSB7fQogICAgICAgICAgICBnTmFtZXMgPSBbXQogICAgICAg
ICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUFHcm91cFtyYWFjdHlwZV0pKToKICAgICAgICAgICAgICAg
IGdEaWN0W2ldID0gJ1QxLkcuJyArIHN0cihpICsgMSkKICAgICAgICAgICAgICAgIGdOYW1lcy5hcHBl
bmQoJ1QxLkcuJyArIHN0cihpICsgMSkpCgogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAg
ICAgICBpZiBzdWJ0eXBlID09ICdnLWdhcCc6CiAgICAgICAgICAgICAgICBlbmNvZGluZ3MgPSBzZWxm
LmdhcE1vZGVsKGZhc3RhcywgbXlEaWN0LCBnRGljdCwgZ05hbWVzLCBrdHVwbGUsIGdsVmFsdWUpCiAg
ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBlbmNvZGluZ3MgPSBzZWxmLmxhbWJkYU1vZGVs
KGZhc3RhcywgbXlEaWN0LCBnRGljdCwgZ05hbWVzLCBrdHVwbGUsIGdsVmFsdWUpCgogICAgICAgICAg
ICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCiAgICAgICAgICAgIHNlbGYuZW5jb2Rp
bmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5j
b2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0g
c2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwog
ICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAg
ICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFs
c2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNn
ID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBQcm90ZWluX1BzZUtSQUFD
X3R5cGVfMTQoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBBQUdyb3VwID0gewogICAgICAg
ICAgICAgICAgMjogWydBUk5EQ1FFR0hLUFNUJywgJ0lMTUZXWVYnXSwKICAgICAgICAgICAgICAgIDM6
IFsnQVJORFFFR0hLUFNUJywgJ0MnLCAnSUxNRldZViddLAogICAgICAgICAgICAgICAgNDogWydBUk5E
UUVHSEtQU1QnLCAnQycsICdJTE1GWVYnLCAnVyddLAogICAgICAgICAgICAgICAgNTogWydBR1BTVCcs
ICdSTkRRRUhLJywgJ0MnLCAnSUxNRllWJywgJ1cnXSwKICAgICAgICAgICAgICAgIDY6IFsnQUdQU1Qn
LCAnUk5EUUVLJywgJ0MnLCAnSCcsICdJTE1GWVYnLCAnVyddLAogICAgICAgICAgICAgICAgNzogWydB
TkRHU1QnLCAnUlFFSycsICdDJywgJ0gnLCAnSUxNRllWJywgJ1AnLCAnVyddLAogICAgICAgICAgICAg
ICAgODogWydBTkRHU1QnLCAnUlFFSycsICdDJywgJ0gnLCAnSUxNVicsICdGWScsICdQJywgJ1cnXSwK
ICAgICAgICAgICAgICAgIDk6IFsnQUdTVCcsICdSUUVLJywgJ05EJywgJ0MnLCAnSCcsICdJTE1WJywg
J0ZZJywgJ1AnLCAnVyddLAogICAgICAgICAgICAgICAgMTA6IFsnQUdTVCcsICdSSycsICdORCcsICdD
JywgJ1FFJywgJ0gnLCAnSUxNVicsICdGWScsICdQJywgJ1cnXSwKICAgICAgICAgICAgICAgIDExOiBb
J0FTVCcsICdSSycsICdORCcsICdDJywgJ1FFJywgJ0cnLCAnSCcsICdJTE1WJywgJ0ZZJywgJ1AnLCAn
VyddLAogICAgICAgICAgICAgICAgMTI6IFsnQVNUJywgJ1JLJywgJ05EJywgJ0MnLCAnUUUnLCAnRycs
ICdIJywgJ0lWJywgJ0xNJywgJ0ZZJywgJ1AnLCAnVyddLAogICAgICAgICAgICAgICAgMTM6IFsnQVNU
JywgJ1JLJywgJ04nLCAnRCcsICdDJywgJ1FFJywgJ0cnLCAnSCcsICdJVicsICdMTScsICdGWScsICdQ
JywgJ1cnXSwKICAgICAgICAgICAgICAgIDE0OiBbJ0FTVCcsICdSSycsICdOJywgJ0QnLCAnQycsICdR
JywgJ0UnLCAnRycsICdIJywgJ0lWJywgJ0xNJywgJ0ZZJywgJ1AnLCAnVyddLAogICAgICAgICAgICAg
ICAgMTU6IFsnQScsICdSSycsICdOJywgJ0QnLCAnQycsICdRJywgJ0UnLCAnRycsICdIJywgJ0lWJywg
J0xNJywgJ0ZZJywgJ1AnLCAnU1QnLCAnVyddLAogICAgICAgICAgICAgICAgMTY6IFsnQScsICdSSycs
ICdOJywgJ0QnLCAnQycsICdRJywgJ0UnLCAnRycsICdIJywgJ0lWJywgJ0xNJywgJ0YnLCAnUCcsICdT
VCcsICdXJywgJ1knXSwKICAgICAgICAgICAgICAgIDE3OiBbJ0EnLCAnUicsICdOJywgJ0QnLCAnQycs
ICdRJywgJ0UnLCAnRycsICdIJywgJ0lWJywgJ0xNJywgJ0snLCAnRicsICdQJywgJ1NUJywgJ1cnLCAn
WSddLAogICAgICAgICAgICAgICAgMTg6IFsnQScsICdSJywgJ04nLCAnRCcsICdDJywgJ1EnLCAnRScs
ICdHJywgJ0gnLCAnSVYnLCAnTE0nLCAnSycsICdGJywgJ1AnLCAnUycsICdUJywgJ1cnLCAnWSddLAog
ICAgICAgICAgICAgICAgMTk6IFsnQScsICdSJywgJ04nLCAnRCcsICdDJywgJ1EnLCAnRScsICdHJywg
J0gnLCAnSVYnLCAnTCcsICdLJywgJ00nLCAnRicsICdQJywgJ1MnLCAnVCcsICdXJywgJ1knXSwKICAg
ICAgICAgICAgICAgIDIwOiBbJ0EnLCAnUicsICdOJywgJ0QnLCAnQycsICdRJywgJ0UnLCAnRycsICdI
JywgJ0knLCAnVicsICdMJywgJ0snLCAnTScsICdGJywgJ1AnLCAnUycsICdUJywgJ1cnLCAnWSddLAog
ICAgICAgICAgICB9CiAgICAgICAgICAgIGZhc3RhcyA9IHNlbGYuZmFzdGFfbGlzdAogICAgICAgICAg
ICBzdWJ0eXBlID0gc2VsZi5rd1snUHNlS1JBQUNfbW9kZWwnXQogICAgICAgICAgICByYWFjdHlwZSA9
IHNlbGYua3dbJ1JBQUNfY2x1c3QnXQogICAgICAgICAgICBrdHVwbGUgPSBzZWxmLmt3WydrLXR1cGxl
J10KICAgICAgICAgICAgZ2xWYWx1ZSA9IHNlbGYua3dbJ2ctZ2FwJ10gaWYgc3VidHlwZSA9PSAnZy1n
YXAnIGVsc2Ugc2VsZi5rd1snbGFtYmRhVmFsdWUnXQoKICAgICAgICAgICAgaWYgcmFhY3R5cGUgbm90
IGluIEFBR3JvdXA6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdQc2VLUkFBQyBkZXNj
cmlwdG9yIHZhbHVlIGVycm9yLicKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAg
ICAgIyBpbmRleCBlYWNoIGFtaW5vIGFjaWRzIHRvIHRoZWlyIGdyb3VwCiAgICAgICAgICAgIG15RGlj
dCA9IHt9CiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQUdyb3VwW3JhYWN0eXBlXSkpOgog
ICAgICAgICAgICAgICAgZm9yIGFhIGluIEFBR3JvdXBbcmFhY3R5cGVdW2ldOgogICAgICAgICAgICAg
ICAgICAgIG15RGljdFthYV0gPSBpCgogICAgICAgICAgICBnRGljdCA9IHt9CiAgICAgICAgICAgIGdO
YW1lcyA9IFtdCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQUdyb3VwW3JhYWN0eXBlXSkp
OgogICAgICAgICAgICAgICAgZ0RpY3RbaV0gPSAnVDEuRy4nICsgc3RyKGkgKyAxKQogICAgICAgICAg
ICAgICAgZ05hbWVzLmFwcGVuZCgnVDEuRy4nICsgc3RyKGkgKyAxKSkKCiAgICAgICAgICAgIGVuY29k
aW5ncyA9IFtdCiAgICAgICAgICAgIGlmIHN1YnR5cGUgPT0gJ2ctZ2FwJzoKICAgICAgICAgICAgICAg
IGVuY29kaW5ncyA9IHNlbGYuZ2FwTW9kZWwoZmFzdGFzLCBteURpY3QsIGdEaWN0LCBnTmFtZXMsIGt0
dXBsZSwgZ2xWYWx1ZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGVuY29kaW5ncyA9
IHNlbGYubGFtYmRhTW9kZWwoZmFzdGFzLCBteURpY3QsIGdEaWN0LCBnTmFtZXMsIGt0dXBsZSwgZ2xW
YWx1ZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAg
ICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQog
ICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAg
ICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAg
ICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0g
PiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAg
ICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVm
IFByb3RlaW5fUHNlS1JBQUNfdHlwZV8xNShzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIEFB
R3JvdXAgPSB7CiAgICAgICAgICAgICAgICAyOiBbJ01GSUxWQVcnLCAnQ1lRSFBHVFNOUktERSddLAog
ICAgICAgICAgICAgICAgMzogWydNRklMVkFXJywgJ0NZUUhQR1RTTlJLJywgJ0RFJ10sCiAgICAgICAg
ICAgICAgICA0OiBbJ01GSUxWJywgJ0FDVycsICdZUUhQR1RTTlJLJywgJ0RFJ10sCiAgICAgICAgICAg
ICAgICA1OiBbJ01GSUxWJywgJ0FDVycsICdZUUhQR1RTTicsICdSSycsICdERSddLAogICAgICAgICAg
ICAgICAgNjogWydNRklMVicsICdBJywgJ0MnLCAnV1lRSFBHVFNOJywgJ1JLJywgJ0RFJ10sCiAgICAg
ICAgICAgICAgICA3OiBbJ01GSUxWJywgJ0EnLCAnQycsICdXWVFIUCcsICdHVFNOJywgJ1JLJywgJ0RF
J10sCiAgICAgICAgICAgICAgICA4OiBbJ01GSUxWJywgJ0EnLCAnQycsICdXWVFIUCcsICdHJywgJ1RT
TicsICdSSycsICdERSddLAogICAgICAgICAgICAgICAgOTogWydNRicsICdJTFYnLCAnQScsICdDJywg
J1dZUUhQJywgJ0cnLCAnVFNOJywgJ1JLJywgJ0RFJ10sCiAgICAgICAgICAgICAgICAxMDogWydNRics
ICdJTFYnLCAnQScsICdDJywgJ1dZUUhQJywgJ0cnLCAnVFNOJywgJ1JLJywgJ0QnLCAnRSddLAogICAg
ICAgICAgICAgICAgMTE6IFsnTUYnLCAnSUwnLCAnVicsICdBJywgJ0MnLCAnV1lRSFAnLCAnRycsICdU
U04nLCAnUksnLCAnRCcsICdFJ10sCiAgICAgICAgICAgICAgICAxMjogWydNRicsICdJTCcsICdWJywg
J0EnLCAnQycsICdXWVFIUCcsICdHJywgJ1RTJywgJ04nLCAnUksnLCAnRCcsICdFJ10sCiAgICAgICAg
ICAgICAgICAxMzogWydNRicsICdJTCcsICdWJywgJ0EnLCAnQycsICdXWVFIUCcsICdHJywgJ1QnLCAn
UycsICdOJywgJ1JLJywgJ0QnLCAnRSddLAogICAgICAgICAgICAgICAgMTQ6IFsnTUYnLCAnSScsICdM
JywgJ1YnLCAnQScsICdDJywgJ1dZUUhQJywgJ0cnLCAnVCcsICdTJywgJ04nLCAnUksnLCAnRCcsICdF
J10sCiAgICAgICAgICAgICAgICAxNTogWydNRicsICdJTCcsICdWJywgJ0EnLCAnQycsICdXWVEnLCAn
SCcsICdQJywgJ0cnLCAnVCcsICdTJywgJ04nLCAnUksnLCAnRCcsICdFJ10sCiAgICAgICAgICAgICAg
ICAxNjogWydNRicsICdJJywgJ0wnLCAnVicsICdBJywgJ0MnLCAnV1lRJywgJ0gnLCAnUCcsICdHJywg
J1QnLCAnUycsICdOJywgJ1JLJywgJ0QnLCAnRSddLAogICAgICAgICAgICAgICAgMjA6IFsnTScsICdG
JywgJ0knLCAnTCcsICdWJywgJ0EnLCAnQycsICdXJywgJ1knLCAnUScsICdIJywgJ1AnLCAnRycsICdU
JywgJ1MnLCAnTicsICdSJywgJ0snLCAnRCcsICdFJ10sCiAgICAgICAgICAgIH0KICAgICAgICAgICAg
ZmFzdGFzID0gc2VsZi5mYXN0YV9saXN0CiAgICAgICAgICAgIHN1YnR5cGUgPSBzZWxmLmt3WydQc2VL
UkFBQ19tb2RlbCddCiAgICAgICAgICAgIHJhYWN0eXBlID0gc2VsZi5rd1snUkFBQ19jbHVzdCddCiAg
ICAgICAgICAgIGt0dXBsZSA9IHNlbGYua3dbJ2stdHVwbGUnXQogICAgICAgICAgICBnbFZhbHVlID0g
c2VsZi5rd1snZy1nYXAnXSBpZiBzdWJ0eXBlID09ICdnLWdhcCcgZWxzZSBzZWxmLmt3WydsYW1iZGFW
YWx1ZSddCgogICAgICAgICAgICBpZiByYWFjdHlwZSBub3QgaW4gQUFHcm91cDoKICAgICAgICAgICAg
ICAgIHNlbGYuZXJyb3JfbXNnID0gJ1BzZUtSQUFDIGRlc2NyaXB0b3IgdmFsdWUgZXJyb3IuJwogICAg
ICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgICAgICAjIGluZGV4IGVhY2ggYW1pbm8gYWNp
ZHMgdG8gdGhlaXIgZ3JvdXAKICAgICAgICAgICAgbXlEaWN0ID0ge30KICAgICAgICAgICAgZm9yIGkg
aW4gcmFuZ2UobGVuKEFBR3JvdXBbcmFhY3R5cGVdKSk6CiAgICAgICAgICAgICAgICBmb3IgYWEgaW4g
QUFHcm91cFtyYWFjdHlwZV1baV06CiAgICAgICAgICAgICAgICAgICAgbXlEaWN0W2FhXSA9IGkKCiAg
ICAgICAgICAgIGdEaWN0ID0ge30KICAgICAgICAgICAgZ05hbWVzID0gW10KICAgICAgICAgICAgZm9y
IGkgaW4gcmFuZ2UobGVuKEFBR3JvdXBbcmFhY3R5cGVdKSk6CiAgICAgICAgICAgICAgICBnRGljdFtp
XSA9ICdUMS5HLicgKyBzdHIoaSArIDEpCiAgICAgICAgICAgICAgICBnTmFtZXMuYXBwZW5kKCdUMS5H
LicgKyBzdHIoaSArIDEpKQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaWYg
c3VidHlwZSA9PSAnZy1nYXAnOgogICAgICAgICAgICAgICAgZW5jb2RpbmdzID0gc2VsZi5nYXBNb2Rl
bChmYXN0YXMsIG15RGljdCwgZ0RpY3QsIGdOYW1lcywga3R1cGxlLCBnbFZhbHVlKQogICAgICAgICAg
ICBlbHNlOgogICAgICAgICAgICAgICAgZW5jb2RpbmdzID0gc2VsZi5sYW1iZGFNb2RlbChmYXN0YXMs
IG15RGljdCwgZ0RpY3QsIGdOYW1lcywga3R1cGxlLCBnbFZhbHVlKQoKICAgICAgICAgICAgc2VsZi5l
bmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5
ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0g
c2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5j
b2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAg
ICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1
cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAg
ICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihl
KQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgUHJvdGVpbl9Qc2VLUkFBQ190eXBlXzE2
KHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgQUFHcm91cCA9IHsKICAgICAgICAgICAgICAg
IDI6IFsnSU1WTEZXWScsICdHUENBU1ROSFFFRFJLJ10sCiAgICAgICAgICAgICAgICAzOiBbJ0lNVkxG
V1knLCAnR1BDQVNUJywgJ05IUUVEUksnXSwKICAgICAgICAgICAgICAgIDQ6IFsnSU1WTEZXWScsICdH
JywgJ1BDQVNUJywgJ05IUUVEUksnXSwKICAgICAgICAgICAgICAgIDU6IFsnSU1WTCcsICdGV1knLCAn
RycsICdQQ0FTVCcsICdOSFFFRFJLJ10sCiAgICAgICAgICAgICAgICA2OiBbJ0lNVkwnLCAnRldZJywg
J0cnLCAnUCcsICdDQVNUJywgJ05IUUVEUksnXSwKICAgICAgICAgICAgICAgIDc6IFsnSU1WTCcsICdG
V1knLCAnRycsICdQJywgJ0NBU1QnLCAnTkhRRUQnLCAnUksnXSwKICAgICAgICAgICAgICAgIDg6IFsn
SU1WJywgJ0wnLCAnRldZJywgJ0cnLCAnUCcsICdDQVNUJywgJ05IUUVEJywgJ1JLJ10sCiAgICAgICAg
ICAgICAgICA5OiBbJ0lNVicsICdMJywgJ0ZXWScsICdHJywgJ1AnLCAnQycsICdBU1QnLCAnTkhRRUQn
LCAnUksnXSwKICAgICAgICAgICAgICAgIDEwOiBbJ0lNVicsICdMJywgJ0ZXWScsICdHJywgJ1AnLCAn
QycsICdBJywgJ1NUTkgnLCAnUktRRScsICdEJ10sCiAgICAgICAgICAgICAgICAxMTogWydJTVYnLCAn
TCcsICdGV1knLCAnRycsICdQJywgJ0MnLCAnQScsICdTVE5IJywgJ1JLUScsICdFJywgJ0QnXSwKICAg
ICAgICAgICAgICAgIDEyOiBbJ0lNVicsICdMJywgJ0ZXWScsICdHJywgJ1AnLCAnQycsICdBJywgJ1NU
JywgJ04nLCAnSFJLUScsICdFJywgJ0QnXSwKICAgICAgICAgICAgICAgIDEzOiBbJ0lNVicsICdMJywg
J0YnLCAnV1knLCAnRycsICdQJywgJ0MnLCAnQScsICdTVCcsICdOJywgJ0hSS1EnLCAnRScsICdEJ10s
CiAgICAgICAgICAgICAgICAxNDogWydJTVYnLCAnTCcsICdGJywgJ1dZJywgJ0cnLCAnUCcsICdDJywg
J0EnLCAnUycsICdUJywgJ04nLCAnSFJLUScsICdFJywgJ0QnXSwKICAgICAgICAgICAgICAgIDE1OiBb
J0lNVicsICdMJywgJ0YnLCAnV1knLCAnRycsICdQJywgJ0MnLCAnQScsICdTJywgJ1QnLCAnTicsICdI
JywgJ1JLUScsICdFJywgJ0QnXSwKICAgICAgICAgICAgICAgIDE2OiBbJ0lNVicsICdMJywgJ0YnLCAn
VycsICdZJywgJ0cnLCAnUCcsICdDJywgJ0EnLCAnUycsICdUJywgJ04nLCAnSCcsICdSS1EnLCAnRScs
ICdEJ10sCiAgICAgICAgICAgICAgICAyMDogWydJJywgJ00nLCAnVicsICdMJywgJ0YnLCAnVycsICdZ
JywgJ0cnLCAnUCcsICdDJywgJ0EnLCAnUycsICdUJywgJ04nLCAnSCcsICdSJywgJ0snLCAnUScsICdF
JywgJ0QnXSwKICAgICAgICAgICAgfQogICAgICAgICAgICBmYXN0YXMgPSBzZWxmLmZhc3RhX2xpc3QK
ICAgICAgICAgICAgc3VidHlwZSA9IHNlbGYua3dbJ1BzZUtSQUFDX21vZGVsJ10KICAgICAgICAgICAg
cmFhY3R5cGUgPSBzZWxmLmt3WydSQUFDX2NsdXN0J10KICAgICAgICAgICAga3R1cGxlID0gc2VsZi5r
d1snay10dXBsZSddCiAgICAgICAgICAgIGdsVmFsdWUgPSBzZWxmLmt3WydnLWdhcCddIGlmIHN1YnR5
cGUgPT0gJ2ctZ2FwJyBlbHNlIHNlbGYua3dbJ2xhbWJkYVZhbHVlJ10KCiAgICAgICAgICAgIGlmIHJh
YWN0eXBlIG5vdCBpbiBBQUdyb3VwOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnUHNl
S1JBQUMgZGVzY3JpcHRvciB2YWx1ZSBlcnJvci4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UK
CiAgICAgICAgICAgICMgaW5kZXggZWFjaCBhbWlubyBhY2lkcyB0byB0aGVpciBncm91cAogICAgICAg
ICAgICBteURpY3QgPSB7fQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUFHcm91cFtyYWFj
dHlwZV0pKToKICAgICAgICAgICAgICAgIGZvciBhYSBpbiBBQUdyb3VwW3JhYWN0eXBlXVtpXToKICAg
ICAgICAgICAgICAgICAgICBteURpY3RbYWFdID0gaQoKICAgICAgICAgICAgZ0RpY3QgPSB7fQogICAg
ICAgICAgICBnTmFtZXMgPSBbXQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUFHcm91cFty
YWFjdHlwZV0pKToKICAgICAgICAgICAgICAgIGdEaWN0W2ldID0gJ1QxLkcuJyArIHN0cihpICsgMSkK
ICAgICAgICAgICAgICAgIGdOYW1lcy5hcHBlbmQoJ1QxLkcuJyArIHN0cihpICsgMSkpCgogICAgICAg
ICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBpZiBzdWJ0eXBlID09ICdnLWdhcCc6CiAgICAg
ICAgICAgICAgICBlbmNvZGluZ3MgPSBzZWxmLmdhcE1vZGVsKGZhc3RhcywgbXlEaWN0LCBnRGljdCwg
Z05hbWVzLCBrdHVwbGUsIGdsVmFsdWUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBl
bmNvZGluZ3MgPSBzZWxmLmxhbWJkYU1vZGVsKGZhc3RhcywgbXlEaWN0LCBnRGljdCwgZ05hbWVzLCBr
dHVwbGUsIGdsVmFsdWUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXko
W10pCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0
eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBl
WzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEK
ICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5
LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6
CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6
CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxz
ZQoKICAgICIiIiBETkEgYW5kIFJOQSBkZXNjcmlwdG9ycyAiIiIKCiAgICBkZWYga21lckFycmF5KHNl
bGYsIHNlcXVlbmNlLCBrKToKICAgICAgICBrbWVyID0gW10KICAgICAgICBmb3IgaSBpbiByYW5nZShs
ZW4oc2VxdWVuY2UpIC0gayArIDEpOgogICAgICAgICAgICBrbWVyLmFwcGVuZChzZXF1ZW5jZVtpOmkg
KyBrXSkKICAgICAgICByZXR1cm4ga21lcgoKICAgIGRlZiBLbWVyKHNlbGYpOgogICAgICAgIHRyeToK
ICAgICAgICAgICAgZmFzdGFzID0gc2VsZi5mYXN0YV9saXN0CiAgICAgICAgICAgIGsgPSBzZWxmLmt3
WydrbWVyJ10KICAgICAgICAgICAgdXB0byA9IEZhbHNlCiAgICAgICAgICAgIG5vcm1hbGl6ZSA9IFRy
dWUKICAgICAgICAgICAgdHlwZSA9IHNlbGYuc2VxdWVuY2VfdHlwZQoKICAgICAgICAgICAgZW5jb2Rp
bmcgPSBbXQogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXQogICAgICAg
ICAgICBOQSA9ICdBQ0dUJwogICAgICAgICAgICBpZiB0eXBlIGluICgiRE5BIiwgJ1JOQScpOgogICAg
ICAgICAgICAgICAgTkEgPSAnQUNHVCcKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIE5B
ID0gJ0FDREVGR0hJS0xNTlBRUlNUVldZJwoKICAgICAgICAgICAgaWYgdXB0byA9PSBUcnVlOgogICAg
ICAgICAgICAgICAgZm9yIHRtcEsgaW4gcmFuZ2UoMSwgayArIDEpOgogICAgICAgICAgICAgICAgICAg
IGZvciBrbWVyIGluIGl0ZXJ0b29scy5wcm9kdWN0KE5BLCByZXBlYXQ9dG1wSyk6CiAgICAgICAgICAg
ICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoJycuam9pbihrbWVyKSkKICAgICAgICAgICAgICAgIGVu
Y29kaW5nLmFwcGVuZChoZWFkZXIpCiAgICAgICAgICAgICAgICBmb3IgaSBpbiBmYXN0YXM6CiAgICAg
ICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywgJycs
IGlbMV0pLCBpWzJdCiAgICAgICAgICAgICAgICAgICAgY291bnQgPSBDb3VudGVyKCkKICAgICAgICAg
ICAgICAgICAgICBmb3IgdG1wSyBpbiByYW5nZSgxLCBrICsgMSk6CiAgICAgICAgICAgICAgICAgICAg
ICAgIGttZXJzID0gc2VsZi5rbWVyQXJyYXkoc2VxdWVuY2UsIHRtcEspCiAgICAgICAgICAgICAgICAg
ICAgICAgIGNvdW50LnVwZGF0ZShrbWVycykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm9ybWFs
aXplID09IFRydWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3Iga2V5IGluIGNvdW50Ogog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihrZXkpID09IHRtcEs6CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50W2tleV0gPSBjb3VudFtrZXldIC8gbGVuKGtt
ZXJzKQogICAgICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAg
ICAgICAgZm9yIGogaW4gcmFuZ2UoMiwgbGVuKGhlYWRlcikpOgogICAgICAgICAgICAgICAgICAgICAg
ICBpZiBoZWFkZXJbal0gaW4gY291bnQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlLmFw
cGVuZChjb3VudFtoZWFkZXJbal1dKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoMCkKICAgICAgICAgICAgICAgICAgICBlbmNv
ZGluZy5hcHBlbmQoY29kZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGZvciBrbWVy
IGluIGl0ZXJ0b29scy5wcm9kdWN0KE5BLCByZXBlYXQ9ayk6CiAgICAgICAgICAgICAgICAgICAgaGVh
ZGVyLmFwcGVuZCgnJy5qb2luKGttZXIpKQogICAgICAgICAgICAgICAgZW5jb2RpbmcuYXBwZW5kKGhl
YWRlcikKICAgICAgICAgICAgICAgIGZvciBpIGluIGZhc3RhczoKICAgICAgICAgICAgICAgICAgICBu
YW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCByZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0KICAg
ICAgICAgICAgICAgICAgICBrbWVycyA9IHNlbGYua21lckFycmF5KHNlcXVlbmNlLCBrKQogICAgICAg
ICAgICAgICAgICAgIGNvdW50ID0gQ291bnRlcigpCiAgICAgICAgICAgICAgICAgICAgY291bnQudXBk
YXRlKGttZXJzKQogICAgICAgICAgICAgICAgICAgIGlmIG5vcm1hbGl6ZSA9PSBUcnVlOgogICAgICAg
ICAgICAgICAgICAgICAgICBmb3Iga2V5IGluIGNvdW50OgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgY291bnRba2V5XSA9IGNvdW50W2tleV0gLyBsZW4oa21lcnMpCiAgICAgICAgICAgICAgICAgICAg
Y29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgICAgICBmb3IgaiBpbiByYW5nZSgyLCBs
ZW4oaGVhZGVyKSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhlYWRlcltqXSBpbiBjb3VudDoK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKGNvdW50W2hlYWRlcltqXV0pCiAg
ICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2Rl
LmFwcGVuZCgwKQogICAgICAgICAgICAgICAgICAgIGVuY29kaW5nLmFwcGVuZChjb2RlKQogICAgICAg
ICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCiAgICAgICAgICAgIHNlbGYuZW5j
b2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxm
LmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cg
PSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmcK
ICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAg
ICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZh
bHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21z
ZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgbWlzbWF0Y2hfY291bnQo
c2VsZiwgc2VxMSwgc2VxMik6CiAgICAgICAgbWlzbWF0Y2ggPSAwCiAgICAgICAgZm9yIGkgaW4gcmFu
Z2UobWluKFtsZW4oc2VxMSksIGxlbihzZXEyKV0pKToKICAgICAgICAgICAgaWYgc2VxMVtpXSAhPSBz
ZXEyW2ldOgogICAgICAgICAgICAgICAgbWlzbWF0Y2ggKz0gMQogICAgICAgIHJldHVybiBtaXNtYXRj
aAoKICAgIGRlZiBNaXNtYXRjaChzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGsgPSBzZWxm
Lmt3WydrbWVyJ10KICAgICAgICAgICAgbSA9IHNlbGYua3dbJ21pc21hdGNoJ10KICAgICAgICAgICAg
Tk4gPSAnQUNHVCcKCiAgICAgICAgICAgIGVuY29kaW5nID0gW10KICAgICAgICAgICAgaGVhZGVyID0g
WydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgdGVtcGxhdGVfZGljdCA9IHt9CiAgICAg
ICAgICAgIGZvciBrbWVyIGluIGl0ZXJ0b29scy5wcm9kdWN0KE5OLCByZXBlYXQ9ayk6CiAgICAgICAg
ICAgICAgICBoZWFkZXIuYXBwZW5kKCcnLmpvaW4oa21lcikpCiAgICAgICAgICAgICAgICB0ZW1wbGF0
ZV9kaWN0WycnLmpvaW4oa21lcildID0gMAogICAgICAgICAgICBlbmNvZGluZy5hcHBlbmQoaGVhZGVy
KQoKICAgICAgICAgICAgZm9yIGVsZW0gaW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAgICAg
bmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gZWxlbVswXSwgcmUuc3ViKCctJywgJycsIGVsZW1bMV0pLCBl
bGVtWzJdCiAgICAgICAgICAgICAgICBrbWVycyA9IHNlbGYua21lckFycmF5KHNlcXVlbmNlLCBrKQog
ICAgICAgICAgICAgICAgdG1wX2RpY3QgPSB0ZW1wbGF0ZV9kaWN0LmNvcHkoKQogICAgICAgICAgICAg
ICAgZm9yIGttZXIgaW4ga21lcnM6CiAgICAgICAgICAgICAgICAgICAgZm9yIGtleSBpbiB0bXBfZGlj
dDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5taXNtYXRjaF9jb3VudChrbWVyLCBrZXkp
IDw9IG06CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBfZGljdFtrZXldICs9IDEKICAgICAg
ICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdICsgW3RtcF9kaWN0W2tleV0gZm9yIGtleSBpbiBz
b3J0ZWQodG1wX2RpY3Qua2V5cygpKV0KICAgICAgICAgICAgICAgIGVuY29kaW5nLmFwcGVuZChjb2Rl
KQoKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAg
ICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmcsIGR0eXBlPXN0cikKICAgICAg
ICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAg
IHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVs
IGVuY29kaW5nCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgog
ICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
IHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2Vs
Zi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgIiIiIFN1YnNl
cXVlbmNlICIiIgogICAgIyBjb2RlIGZyb20gaHR0cHM6Ly93d3cubmNiaS5ubG0ubmloLmdvdi9wbWMv
YXJ0aWNsZXMvUE1DNDgzMDUzMi9iaW4vcG9uZS4wMTUzMjY4LnMwMDEuemlwCiAgICBkZWYgR2V0S21l
ckRpY3Qoc2VsZiwgcGlSTkFsZXR0ZXIsIGspOgogICAgICAgIGttZXJsc3QgPSBbXQogICAgICAgIHBh
cnRrbWVycyA9IGxpc3QoaXRlcnRvb2xzLmNvbWJpbmF0aW9uc193aXRoX3JlcGxhY2VtZW50KHBpUk5B
bGV0dGVyLCBrKSkKICAgICAgICBmb3IgZWxlbWVudCBpbiBwYXJ0a21lcnM6CiAgICAgICAgICAgIGVs
ZWxzdCA9IHNldChpdGVydG9vbHMucGVybXV0YXRpb25zKGVsZW1lbnQsIGspKQogICAgICAgICAgICBz
dHJsc3QgPSBbJycuam9pbihlbGUpIGZvciBlbGUgaW4gZWxlbHN0XQogICAgICAgICAgICBrbWVybHN0
ICs9IHN0cmxzdAogICAgICAgIGttZXJsc3QgPSBucC5zb3J0KGttZXJsc3QpCiAgICAgICAga21lcmRp
Y3QgPSB7a21lcmxzdFtpXTogaSBmb3IgaSBpbiByYW5nZShsZW4oa21lcmxzdCkpfQogICAgICAgIHJl
dHVybiBrbWVyZGljdAoKICAgIGRlZiBHZXRTdWJzZXF1ZW5jZVByb2ZpbGUoc2VsZiwgaW5zdGFuY2Vz
LCBwaVJOQWxldHRlciwgaywgZGVsdGEpOgogICAgICAgIGttZXJkaWN0ID0gc2VsZi5HZXRLbWVyRGlj
dChwaVJOQWxldHRlciwgaykKICAgICAgICBYID0gW10KICAgICAgICBmb3Igc2VxdWVuY2UgaW4gaW5z
dGFuY2VzOgogICAgICAgICAgICB2ZWN0b3IgPSBzZWxmLkdldFN1YnNlcXVlbmNlUHJvZmlsZVZlY3Rv
cihzZXF1ZW5jZSwga21lcmRpY3QsIGssIGRlbHRhKQogICAgICAgICAgICBYLmFwcGVuZCh2ZWN0b3Ip
CiAgICAgICAgWCA9IG5wLmFycmF5KFgpCiAgICAgICAgcmV0dXJuIFgKCiAgICBkZWYgR2V0U3Vic2Vx
dWVuY2VQcm9maWxlVmVjdG9yKHNlbGYsIHNlcXVlbmNlLCBrbWVyZGljdCwgaywgZGVsdGEpOgogICAg
ICAgIHZlY3RvciA9IG5wLnplcm9zKCgxLCBsZW4oa21lcmRpY3QpKSkKICAgICAgICBzZXF1ZW5jZSA9
IG5wLmFycmF5KGxpc3Qoc2VxdWVuY2UpKQogICAgICAgIG4gPSBsZW4oc2VxdWVuY2UpCiAgICAgICAg
aW5kZXhfbHN0ID0gbGlzdChpdGVydG9vbHMuY29tYmluYXRpb25zKHJhbmdlKG4pLCBrKSkKICAgICAg
ICBmb3Igc3Vic2VxX2luZGV4IGluIGluZGV4X2xzdDoKICAgICAgICAgICAgc3Vic2VxX2luZGV4ID0g
bGlzdChzdWJzZXFfaW5kZXgpCiAgICAgICAgICAgIHN1YnNlcXVlbmNlID0gc2VxdWVuY2Vbc3Vic2Vx
X2luZGV4XQogICAgICAgICAgICBwb3NpdGlvbiA9IGttZXJkaWN0LmdldCgnJy5qb2luKHN1YnNlcXVl
bmNlKSkKICAgICAgICAgICAgc3Vic2VxX2xlbmd0aCA9IHN1YnNlcV9pbmRleFstMV0gLSBzdWJzZXFf
aW5kZXhbMF0gKyAxCiAgICAgICAgICAgIHN1YnNlcV9zY29yZSA9IDEgaWYgc3Vic2VxX2xlbmd0aCA9
PSBrIGVsc2UgZGVsdGEgKiogc3Vic2VxX2xlbmd0aAogICAgICAgICAgICB2ZWN0b3JbMCwgcG9zaXRp
b25dICs9IHN1YnNlcV9zY29yZQogICAgICAgIHJldHVybiBsaXN0KHZlY3RvclswXSkKCiAgICBkZWYg
U3Vic2VxdWVuY2Uoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBrID0gc2VsZi5rd1sna21l
ciddCiAgICAgICAgICAgIGRlbHRhID0gc2VsZi5rd1snZGVsdGEnXQogICAgICAgICAgICBOTl9saXN0
ID0gWydBJywgJ0MnLCAnRycsICdUJ10KCiAgICAgICAgICAgIGVuY29kaW5nID0gW10KICAgICAgICAg
ICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIGttZXIgaW4g
aXRlcnRvb2xzLnByb2R1Y3QoTk5fbGlzdCwgcmVwZWF0PWspOgogICAgICAgICAgICAgICAgaGVhZGVy
LmFwcGVuZCgnJy5qb2luKGttZXIpKQogICAgICAgICAgICBlbmNvZGluZy5hcHBlbmQoaGVhZGVyKQoK
ICAgICAgICAgICAgaW5zdGFuY2VzID0gW2VsZW1bMV0gZm9yIGVsZW0gaW4gc2VsZi5mYXN0YV9saXN0
XQoKICAgICAgICAgICAgY29kZSA9IHNlbGYuR2V0U3Vic2VxdWVuY2VQcm9maWxlKGluc3RhbmNlcywg
Tk5fbGlzdCwgaywgZGVsdGEpCiAgICAgICAgICAgIGluZm9fbGlzdCA9IG5wLmFycmF5KFtbaXRlbVsw
XSwgaXRlbVsyXV0gZm9yIGl0ZW0gaW4gc2VsZi5mYXN0YV9saXN0XSkKICAgICAgICAgICAgY29kZSA9
IG5wLmhzdGFjaygoaW5mb19saXN0LCBjb2RlKSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJy
YXkgPSBucC52c3RhY2soKGhlYWRlciwgY29kZSkpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2Vs
Zi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2Rp
bmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hh
cGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAg
ICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAg
ICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgog
ICAgIiIiIGVuZCBvZiBTdWJzZXF1ZW5jZSAiIiIKCiAgICBkZWYgUkMoc2VsZiwga21lcik6CiAgICAg
ICAgbXlEaWN0ID0gewogICAgICAgICAgICAnQSc6ICdUJywKICAgICAgICAgICAgJ0MnOiAnRycsCiAg
ICAgICAgICAgICdHJzogJ0MnLAogICAgICAgICAgICAnVCc6ICdBJwogICAgICAgIH0KICAgICAgICBy
ZXR1cm4gJycuam9pbihbbXlEaWN0W25jXSBmb3IgbmMgaW4ga21lcls6Oi0xXV0pCgogICAgZGVmIGdl
bmVyYXRlUkNLbWVyKHNlbGYsIGttZXJMaXN0KToKICAgICAgICByY2ttZXJMaXN0ID0gc2V0KCkKICAg
ICAgICBteURpY3QgPSB7CiAgICAgICAgICAgICdBJzogJ1QnLAogICAgICAgICAgICAnQyc6ICdHJywK
ICAgICAgICAgICAgJ0cnOiAnQycsCiAgICAgICAgICAgICdUJzogJ0EnCiAgICAgICAgfQogICAgICAg
IGZvciBrbWVyIGluIGttZXJMaXN0OgogICAgICAgICAgICByY2ttZXJMaXN0LmFkZChzb3J0ZWQoW2tt
ZXIsICcnLmpvaW4oW215RGljdFtuY10gZm9yIG5jIGluIGttZXJbOjotMV1dKV0pWzBdKQogICAgICAg
IHJldHVybiBzb3J0ZWQocmNrbWVyTGlzdCkKCiAgICBkZWYgUkNLbWVyKHNlbGYpOgogICAgICAgIHRy
eToKICAgICAgICAgICAgZmFzdGFzID0gc2VsZi5mYXN0YV9saXN0CiAgICAgICAgICAgIGsgPSBzZWxm
Lmt3WydrbWVyJ10KICAgICAgICAgICAgdXB0byA9IEZhbHNlCiAgICAgICAgICAgIG5vcm1hbGl6ZSA9
IFRydWUKCiAgICAgICAgICAgIGVuY29kaW5nID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1w
bGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgTkEgPSAnQUNHVCcKCiAgICAgICAgICAgIGlmIHVw
dG8gPT0gVHJ1ZToKICAgICAgICAgICAgICAgIGZvciB0bXBLIGluIHJhbmdlKDEsIGsgKyAxKToKICAg
ICAgICAgICAgICAgICAgICB0bXBIZWFkZXIgPSBbXQogICAgICAgICAgICAgICAgICAgIGZvciBrbWVy
IGluIGl0ZXJ0b29scy5wcm9kdWN0KE5BLCByZXBlYXQ9dG1wSyk6CiAgICAgICAgICAgICAgICAgICAg
ICAgIHRtcEhlYWRlci5hcHBlbmQoJycuam9pbihrbWVyKSkKICAgICAgICAgICAgICAgICAgICBoZWFk
ZXIgPSBoZWFkZXIgKyBzZWxmLmdlbmVyYXRlUkNLbWVyKHRtcEhlYWRlcikKICAgICAgICAgICAgICAg
IG15RGljdCA9IHt9CiAgICAgICAgICAgICAgICBmb3Iga21lciBpbiBoZWFkZXJbMjpdOgogICAgICAg
ICAgICAgICAgICAgIHJja21lciA9IHNlbGYuUkMoa21lcikKICAgICAgICAgICAgICAgICAgICBpZiBr
bWVyICE9IHJja21lcjoKICAgICAgICAgICAgICAgICAgICAgICAgbXlEaWN0W3Jja21lcl0gPSBrbWVy
CiAgICAgICAgICAgICAgICBlbmNvZGluZy5hcHBlbmQoaGVhZGVyKQogICAgICAgICAgICAgICAgZm9y
IGkgaW4gZmFzdGFzOgogICAgICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlb
MF0sIHJlLnN1YignLScsICcnLCBpWzFdKSwgaVsyXQogICAgICAgICAgICAgICAgICAgIGNvdW50ID0g
Q291bnRlcigpCiAgICAgICAgICAgICAgICAgICAgZm9yIHRtcEsgaW4gcmFuZ2UoMSwgayArIDEpOgog
ICAgICAgICAgICAgICAgICAgICAgICBrbWVycyA9IHNlbGYua21lckFycmF5KHNlcXVlbmNlLCB0bXBL
KQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaiBpbiByYW5nZShsZW4oa21lcnMpKToKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGlmIGttZXJzW2pdIGluIG15RGljdDoKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBrbWVyc1tqXSA9IG15RGljdFtrbWVyc1tqXV0KICAgICAgICAgICAgICAg
ICAgICAgICAgY291bnQudXBkYXRlKGttZXJzKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3Jt
YWxpemUgPT0gVHJ1ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBrZXkgaW4gY291bnQ6
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGtleSkgPT0gdG1wSzoKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRba2V5XSA9IGNvdW50W2tleV0gLyBsZW4o
a21lcnMpCiAgICAgICAgICAgICAgICAgICAgY29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAg
ICAgICAgICBmb3IgaiBpbiByYW5nZSgyLCBsZW4oaGVhZGVyKSk6CiAgICAgICAgICAgICAgICAgICAg
ICAgIGlmIGhlYWRlcltqXSBpbiBjb3VudDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUu
YXBwZW5kKGNvdW50W2hlYWRlcltqXV0pCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZCgwKQogICAgICAgICAgICAgICAgICAgIGVu
Y29kaW5nLmFwcGVuZChjb2RlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdG1wSGVh
ZGVyID0gW10KICAgICAgICAgICAgICAgIGZvciBrbWVyIGluIGl0ZXJ0b29scy5wcm9kdWN0KE5BLCBy
ZXBlYXQ9ayk6CiAgICAgICAgICAgICAgICAgICAgdG1wSGVhZGVyLmFwcGVuZCgnJy5qb2luKGttZXIp
KQogICAgICAgICAgICAgICAgaGVhZGVyID0gaGVhZGVyICsgc2VsZi5nZW5lcmF0ZVJDS21lcih0bXBI
ZWFkZXIpCiAgICAgICAgICAgICAgICBteURpY3QgPSB7fQogICAgICAgICAgICAgICAgZm9yIGttZXIg
aW4gaGVhZGVyWzI6XToKICAgICAgICAgICAgICAgICAgICByY2ttZXIgPSBzZWxmLlJDKGttZXIpCiAg
ICAgICAgICAgICAgICAgICAgaWYga21lciAhPSByY2ttZXI6CiAgICAgICAgICAgICAgICAgICAgICAg
IG15RGljdFtyY2ttZXJdID0ga21lcgoKICAgICAgICAgICAgICAgIGVuY29kaW5nLmFwcGVuZChoZWFk
ZXIpCiAgICAgICAgICAgICAgICBmb3IgaSBpbiBmYXN0YXM6CiAgICAgICAgICAgICAgICAgICAgbmFt
ZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBpWzJdCiAgICAg
ICAgICAgICAgICAgICAga21lcnMgPSBzZWxmLmttZXJBcnJheShzZXF1ZW5jZSwgaykKICAgICAgICAg
ICAgICAgICAgICBmb3IgaiBpbiByYW5nZShsZW4oa21lcnMpKToKICAgICAgICAgICAgICAgICAgICAg
ICAgaWYga21lcnNbal0gaW4gbXlEaWN0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAga21lcnNb
al0gPSBteURpY3Rba21lcnNbal1dCiAgICAgICAgICAgICAgICAgICAgY291bnQgPSBDb3VudGVyKCkK
ICAgICAgICAgICAgICAgICAgICBjb3VudC51cGRhdGUoa21lcnMpCiAgICAgICAgICAgICAgICAgICAg
aWYgbm9ybWFsaXplID09IFRydWU6CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBrZXkgaW4gY291
bnQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudFtrZXldID0gY291bnRba2V5XSAvIGxl
bihrbWVycykKICAgICAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAg
ICAgICAgICAgIGZvciBqIGluIHJhbmdlKDIsIGxlbihoZWFkZXIpKToKICAgICAgICAgICAgICAgICAg
ICAgICAgaWYgaGVhZGVyW2pdIGluIGNvdW50OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29k
ZS5hcHBlbmQoY291bnRbaGVhZGVyW2pdXSkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKDApCiAgICAgICAgICAgICAgICAgICAg
ZW5jb2RpbmcuYXBwZW5kKGNvZGUpCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5h
cnJheShbXSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5n
LCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5z
aGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0g
LSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2Fy
cmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFz
IGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBG
YWxzZQoKICAgIGRlZiBOQUMoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBOQSA9ICdBQ0dU
JwogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5h
bWUnLCAnbGFiZWwnXQogICAgICAgICAgICBmb3IgaSBpbiBOQToKICAgICAgICAgICAgICAgIGhlYWRl
ci5hcHBlbmQoaSkKICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAg
ICBmb3IgaSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwg
bGFiZWwgPSBpWzBdLCByZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0KICAgICAgICAgICAgICAgIGNv
dW50ID0gQ291bnRlcihzZXF1ZW5jZSkKICAgICAgICAgICAgICAgIGZvciBrZXkgaW4gY291bnQ6CiAg
ICAgICAgICAgICAgICAgICAgY291bnRba2V5XSA9IGNvdW50W2tleV0gLyBsZW4oc2VxdWVuY2UpCiAg
ICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgZm9yIG5hIGlu
IE5BOgogICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKGNvdW50W25hXSkKICAgICAgICAgICAg
ICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9
IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5j
b2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19h
cnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hh
cGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNv
ZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2Vw
dGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICBy
ZXR1cm4gRmFsc2UKCiAgICBkZWYgRE5DKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgYmFz
ZSA9ICdBQ0dUJwogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBkaW51Y2xlb3Rp
ZGVzID0gW24xICsgbjIgZm9yIG4xIGluIGJhc2UgZm9yIG4yIGluIGJhc2VdCiAgICAgICAgICAgIGhl
YWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddICsgZGludWNsZW90aWRlcwogICAgICAgICAgICBl
bmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIEFBRGljdCA9IHt9CiAgICAgICAgICAg
IGZvciBpIGluIHJhbmdlKGxlbihiYXNlKSk6CiAgICAgICAgICAgICAgICBBQURpY3RbYmFzZVtpXV0g
PSBpCgogICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBu
YW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCByZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0KICAg
ICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICB0bXBDb2RlID0g
WzBdICogMTYKICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGxlbihzZXF1ZW5jZSkgLSAyICsg
MSk6CiAgICAgICAgICAgICAgICAgICAgdG1wQ29kZVtBQURpY3Rbc2VxdWVuY2Vbal1dICogNCArIEFB
RGljdFtzZXF1ZW5jZVtqICsgMV1dXSA9IHRtcENvZGVbQUFEaWN0W3NlcXVlbmNlW2pdXSAqIDQgKyBB
QURpY3RbCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlW2ogKyAxXV1dICsgMQogICAgICAg
ICAgICAgICAgaWYgc3VtKHRtcENvZGUpICE9IDA6CiAgICAgICAgICAgICAgICAgICAgdG1wQ29kZSA9
IFtpIC8gc3VtKHRtcENvZGUpIGZvciBpIGluIHRtcENvZGVdCiAgICAgICAgICAgICAgICBjb2RlID0g
Y29kZSArIHRtcENvZGUKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKICAgICAg
ICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVu
Y29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNl
bGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJv
dyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGlu
Z3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAg
ICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJu
IEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9y
X21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgVE5DKHNlbGYpOgog
ICAgICAgIHRyeToKICAgICAgICAgICAgQUEgPSAnQUNHVCcKICAgICAgICAgICAgZW5jb2RpbmdzID0g
W10KICAgICAgICAgICAgdHJpUGVwdGlkZXMgPSBbYWExICsgYWEyICsgYWEzIGZvciBhYTEgaW4gQUEg
Zm9yIGFhMiBpbiBBQSBmb3IgYWEzIGluIEFBXQogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5h
bWUnLCAnbGFiZWwnXSArIHRyaVBlcHRpZGVzCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVh
ZGVyKQoKICAgICAgICAgICAgQUFEaWN0ID0ge30KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVu
KEFBKSk6CiAgICAgICAgICAgICAgICBBQURpY3RbQUFbaV1dID0gaQoKICAgICAgICAgICAgZm9yIGkg
aW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0g
aVswXSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25h
bWUsIGxhYmVsXQogICAgICAgICAgICAgICAgdG1wQ29kZSA9IFswXSAqIDY0CiAgICAgICAgICAgICAg
ICBmb3IgaiBpbiByYW5nZShsZW4oc2VxdWVuY2UpIC0gMyArIDEpOgogICAgICAgICAgICAgICAgICAg
IHRtcENvZGVbQUFEaWN0W3NlcXVlbmNlW2pdXSAqIDE2ICsgQUFEaWN0W3NlcXVlbmNlW2ogKyAxXV0g
KiA0ICsgQUFEaWN0W3NlcXVlbmNlW2ogKyAyXV1dID0gdG1wQ29kZVsKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQURpY3RbCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlWwogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
al1dICogMTYgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIEFBRGljdFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc2VxdWVuY2VbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqICsgMV1dICogNCArCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUFEaWN0WwogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZVsKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGogKyAyXV1dICsgMQogICAgICAgICAgICAgICAgaWYgc3VtKHRtcENvZGUpICE9IDA6CiAgICAgICAg
ICAgICAgICAgICAgdG1wQ29kZSA9IFtpIC8gc3VtKHRtcENvZGUpIGZvciBpIGluIHRtcENvZGVdCiAg
ICAgICAgICAgICAgICBjb2RlID0gY29kZSArIHRtcENvZGUKICAgICAgICAgICAgICAgIGVuY29kaW5n
cy5hcHBlbmQoY29kZSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtd
KQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlw
ZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsx
XQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAg
ICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5z
aGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgog
ICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UK
CiAgICBkZWYgQU5GKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgbm90IHNlbGYuaXNf
ZXF1YWw6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdBTkYgZGVzY3JpcHRvciBuZWVk
IGZhc3RhIHNlcXVlbmNlIHdpdGggZXF1YWwgbGVuZ3RoLicKICAgICAgICAgICAgICAgIHJldHVybiBG
YWxzZQogICAgICAgICAgICBBQSA9ICdBQ0dUJwogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAg
ICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXQogICAgICAgICAgICBmb3IgaSBp
biByYW5nZSgxLCBsZW4oc2VsZi5mYXN0YV9saXN0WzBdWzFdKSArIDEpOgogICAgICAgICAgICAgICAg
aGVhZGVyLmFwcGVuZCgnQU5GLicgKyBzdHIoaSkpCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQo
aGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAg
ICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgaVsxXSwgaVsyXQogICAgICAgICAgICAgICAg
Y29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGxlbihzZXF1
ZW5jZSkpOgogICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKHNlcXVlbmNlWzA6IGogKyAxXS5j
b3VudChzZXF1ZW5jZVtqXSkgLyAoaiArIDEpKQogICAgICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVu
ZChjb2RlKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCiAgICAg
ICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikK
ICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAg
ICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAg
ICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBd
ID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAg
ICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAg
ICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRl
ZiBOQ1Aoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBub3Qgc2VsZi5pc19lcXVhbDoK
ICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ05DUCBkZXNjcmlwdG9yIG5lZWQgZmFzdGEg
c2VxdWVuY2Ugd2l0aCBlcXVhbCBsZW5ndGguJwogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAg
ICAgICAgICAgIGNoZW1pY2FsX3Byb3BlcnR5ID0gewogICAgICAgICAgICAgICAgJ0EnOiBbMSwgMSwg
MV0sCiAgICAgICAgICAgICAgICAnQyc6IFswLCAxLCAwXSwKICAgICAgICAgICAgICAgICdHJzogWzEs
IDAsIDBdLAogICAgICAgICAgICAgICAgJ1QnOiBbMCwgMCwgMV0sCiAgICAgICAgICAgICAgICAnVSc6
IFswLCAwLCAxXSwKICAgICAgICAgICAgICAgICctJzogWzAsIDAsIDBdLAogICAgICAgICAgICB9CiAg
ICAgICAgICAgIEFBID0gJ0FDR1QnCiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgICAg
IGhlYWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdl
KDEsIGxlbihzZWxmLmZhc3RhX2xpc3RbMF1bMV0pICogMyArIDEpOgogICAgICAgICAgICAgICAgaGVh
ZGVyLmFwcGVuZCgnTkNQLkYnICsgc3RyKGkpKQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhl
YWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAg
IG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIGlbMV0sIGlbMl0KICAgICAgICAgICAgICAgIGNv
ZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICBmb3IgYWEgaW4gc2VxdWVuY2U6CiAgICAg
ICAgICAgICAgICAgICAgY29kZSA9IGNvZGUgKyBjaGVtaWNhbF9wcm9wZXJ0eS5nZXQoYWEsIFswLCAw
LCAwXSkKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKICAgICAgICAgICAgc2Vs
Zi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2Fy
cmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1u
ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYu
ZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAg
ICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICBy
ZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAg
ICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0
cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgRU5BQyhzZWxmKToKICAgICAgICB0
cnk6CiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAgc2VsZi5l
cnJvcl9tc2cgPSAnRU5BQyBkZXNjcmlwdG9yIG5lZWQgZmFzdGEgc2VxdWVuY2Ugd2l0aCBlcXVhbCBs
ZW5ndGguJwogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIHdpbmRvdyA9IHNl
bGYua3dbJ3NsaWRpbmdfd2luZG93J10KICAgICAgICAgICAgaWYgc2VsZi5taW5pbXVtX2xlbmd0aCA8
IHdpbmRvdzoKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ0VOQUMgZGVzY3JpcHRvciwg
YWxsIHRoZSBzZXF1ZW5jZSBsZW5ndGggc2hvdWxkIGJlIGxhcmdlciB0aGFuIHRoZSBzbGlkaW5nIHdp
bmRvdycKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICBBQSA9ICdBQ0dUJwog
ICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUn
LCAnbGFiZWwnXQogICAgICAgICAgICBmb3IgdyBpbiByYW5nZSgxLCBsZW4oc2VsZi5mYXN0YV9saXN0
WzBdWzFdKSAtIHdpbmRvdyArIDIpOgogICAgICAgICAgICAgICAgZm9yIGFhIGluIEFBOgogICAgICAg
ICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoJ1NXLicgKyBzdHIodykgKyAnLicgKyBhYSkKICAgICAg
ICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZh
c3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCBpWzFd
LCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAg
Zm9yIGogaW4gcmFuZ2UobGVuKHNlcXVlbmNlKSk6CiAgICAgICAgICAgICAgICAgICAgaWYgaiA8IGxl
bihzZXF1ZW5jZSkgYW5kIGogKyB3aW5kb3cgPD0gbGVuKHNlcXVlbmNlKToKICAgICAgICAgICAgICAg
ICAgICAgICAgY291bnQgPSBDb3VudGVyKHNlcXVlbmNlW2o6aiArIHdpbmRvd10pCiAgICAgICAgICAg
ICAgICAgICAgICAgIGZvciBrZXkgaW4gY291bnQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
b3VudFtrZXldID0gY291bnRba2V5XSAvIGxlbihzZXF1ZW5jZVtqOmogKyB3aW5kb3ddKQogICAgICAg
ICAgICAgICAgICAgICAgICBmb3IgYWEgaW4gQUE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
b2RlLmFwcGVuZChjb3VudFthYV0pCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUp
CiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAg
c2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAg
ICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAg
c2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwg
ZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgog
ICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
IHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2Vs
Zi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGJpbmFy
eShzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAg
ICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnYmluYXJ5IGRlc2NyaXB0b3IgbmVlZCBmYXN0YSBz
ZXF1ZW5jZSB3aXRoIGVxdWFsIGxlbmd0aC4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAg
ICAgICAgICAgQUEgPSAnQUNHVCcKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAg
aGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2Uo
MSwgbGVuKHNlbGYuZmFzdGFfbGlzdFswXVsxXSkgKiA0ICsgMSk6CiAgICAgICAgICAgICAgICBoZWFk
ZXIuYXBwZW5kKCdCSU5BUlkuRicgKyBzdHIoaSkpCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQo
aGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAg
ICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgaVsxXSwgaVsyXQogICAgICAgICAgICAgICAg
Y29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIGZvciBhYSBpbiBzZXF1ZW5jZToKICAg
ICAgICAgICAgICAgICAgICBpZiBhYSA9PSAnLSc6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUg
PSBjb2RlICsgWzAsIDAsIDAsIDBdCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAg
ICAgICAgICAgICAgICAgZm9yIGFhMSBpbiBBQToKICAgICAgICAgICAgICAgICAgICAgICAgdGFnID0g
MSBpZiBhYSA9PSBhYTEgZWxzZSAwCiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKHRh
ZykKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKICAgICAgICAgICAgc2VsZi5l
bmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5
ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0g
c2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5j
b2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAg
ICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1
cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAg
ICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihl
KQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgQ0tTTkFQKHNlbGYpOgogICAgICAgIHRy
eToKICAgICAgICAgICAgZ2FwID0gc2VsZi5rd1sna3NwYWNlJ10KICAgICAgICAgICAgaWYgc2VsZi5t
aW5pbXVtX2xlbmd0aF93aXRob3V0X21pbnVzIDwgZ2FwICsgMjoKICAgICAgICAgICAgICAgIHNlbGYu
ZXJyb3JfbXNnID0gJ0NLU05BUCAtIGFsbCB0aGUgc2VxdWVuY2UgbGVuZ3RoIHNob3VsZCBiZSBsYXJn
ZXIgdGhhbiB0aGUgKGdhcCB2YWx1ZSkgKyAyID0gJXMuJyAlICgKICAgICAgICAgICAgICAgICAgICAg
ICAgZ2FwICsgMikKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAgQUEgPSAn
QUNHVCcKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgYWFQYWlycyA9IFtdCiAg
ICAgICAgICAgIGZvciBhYTEgaW4gQUE6CiAgICAgICAgICAgICAgICBmb3IgYWEyIGluIEFBOgogICAg
ICAgICAgICAgICAgICAgIGFhUGFpcnMuYXBwZW5kKGFhMSArIGFhMikKCiAgICAgICAgICAgIGhlYWRl
ciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgICAgIGZvciBnIGluIHJhbmdlKGdhcCAr
IDEpOgogICAgICAgICAgICAgICAgZm9yIGFhIGluIGFhUGFpcnM6CiAgICAgICAgICAgICAgICAgICAg
aGVhZGVyLmFwcGVuZChhYSArICcuZ2FwJyArIHN0cihnKSkKICAgICAgICAgICAgZW5jb2RpbmdzLmFw
cGVuZChoZWFkZXIpCgogICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAg
ICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCBpWzFdLCBpWzJdCiAgICAgICAgICAg
ICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgZm9yIGcgaW4gcmFuZ2UoZ2Fw
ICsgMSk6CiAgICAgICAgICAgICAgICAgICAgbXlEaWN0ID0ge30KICAgICAgICAgICAgICAgICAgICBm
b3IgcGFpciBpbiBhYVBhaXJzOgogICAgICAgICAgICAgICAgICAgICAgICBteURpY3RbcGFpcl0gPSAw
CiAgICAgICAgICAgICAgICAgICAgc3VtID0gMAogICAgICAgICAgICAgICAgICAgIGZvciBpbmRleDEg
aW4gcmFuZ2UobGVuKHNlcXVlbmNlKSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4MiA9IGlu
ZGV4MSArIGcgKyAxCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGluZGV4MSA8IGxlbihzZXF1ZW5j
ZSkgYW5kIGluZGV4MiA8IGxlbihzZXF1ZW5jZSkgYW5kIHNlcXVlbmNlW2luZGV4MV0gaW4gQUEgYW5k
IHNlcXVlbmNlWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgyXSBpbiBBQToKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIG15RGljdFtzZXF1ZW5jZVtpbmRleDFdICsgc2VxdWVuY2VbaW5k
ZXgyXV0gPSBteURpY3Rbc2VxdWVuY2VbaW5kZXgxXSArIHNlcXVlbmNlW2luZGV4Ml1dICsgMQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc3VtID0gc3VtICsgMQogICAgICAgICAgICAgICAgICAgIGZv
ciBwYWlyIGluIGFhUGFpcnM6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKG15RGlj
dFtwYWlyXSAvIHN1bSkKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKICAgICAg
ICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVu
Y29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNl
bGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJv
dyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGlu
Z3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAg
ICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJu
IEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9y
X21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgQ2FsY3VsYXRlTWF0
cml4KHNlbGYsIGRhdGEsIG9yZGVyKToKICAgICAgICBtYXRyaXggPSBucC56ZXJvcygobGVuKGRhdGFb
MF0pIC0gMiwgNjQpKQogICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihkYXRhWzBdKSAtIDIpOiAgIyBw
b3NpdGlvbgogICAgICAgICAgICBmb3IgaiBpbiByYW5nZShsZW4oZGF0YSkpOgogICAgICAgICAgICAg
ICAgaWYgcmUuc2VhcmNoKCctJywgZGF0YVtqXVtpOmkgKyAzXSk6CiAgICAgICAgICAgICAgICAgICAg
cGFzcwogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBtYXRyaXhbaV1bb3Jk
ZXJbZGF0YVtqXVtpOmkgKyAzXV1dICs9IDEKICAgICAgICByZXR1cm4gbWF0cml4CgogICAgZGVmIFBT
VE5Qc3Moc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBub3Qgc2VsZi5pc19lcXVhbDoK
ICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ1BTVE5Qc3MgZGVzY3JpcHRvciBuZWVkIGZh
c3RhIHNlcXVlbmNlIHdpdGggZXF1YWwgbGVuZ3RoLicKICAgICAgICAgICAgICAgIHJldHVybiBGYWxz
ZQoKICAgICAgICAgICAgZmFzdGFzID0gW10KICAgICAgICAgICAgZm9yIGl0ZW0gaW4gc2VsZi5mYXN0
YV9saXN0OgogICAgICAgICAgICAgICAgaWYgaXRlbVszXSA9PSAndHJhaW5pbmcnOgogICAgICAgICAg
ICAgICAgICAgIGZhc3Rhcy5hcHBlbmQoaXRlbSkKICAgICAgICAgICAgICAgICAgICBmYXN0YXMuYXBw
ZW5kKFtpdGVtWzBdLCBpdGVtWzFdLCBpdGVtWzJdLCAndGVzdGluZyddKQogICAgICAgICAgICAgICAg
ZWxzZToKICAgICAgICAgICAgICAgICAgICBmYXN0YXMuYXBwZW5kKGl0ZW0pCgogICAgICAgICAgICBm
b3IgaSBpbiBmYXN0YXM6CiAgICAgICAgICAgICAgICBpZiByZS5zZWFyY2goJ1teQUNHVC1dJywgaVsx
XSk6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnSWxsZWdhbCBjaGFyYWN0ZXIg
aW5jbHVkZWQgaW4gdGhlIGZhc3RhIHNlcXVlbmNlcywgb25seSB0aGUgIkFDR1RbVV0iIGFyZSBhbGxv
d2VkIGJ5IHRoaXMgZW5jb2Rpbmcgc2NoZW1lLicKICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFs
c2UKCiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgICAgIGhlYWRlciA9IFsnU2FtcGxl
TmFtZScsICdsYWJlbCddCiAgICAgICAgICAgIGZvciBwb3MgaW4gcmFuZ2UobGVuKGZhc3Rhc1swXVsx
XSkgLSAyKToKICAgICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoJ1Bvcy4lZCcgJSAocG9zICsgMSkp
CiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgcG9zaXRpdmUg
PSBbXQogICAgICAgICAgICBuZWdhdGl2ZSA9IFtdCiAgICAgICAgICAgIHBvc2l0aXZlX2tleSA9IFtd
CiAgICAgICAgICAgIG5lZ2F0aXZlX2tleSA9IFtdCiAgICAgICAgICAgIGZvciBpIGluIGZhc3RhczoK
ICAgICAgICAgICAgICAgIGlmIGlbM10gPT0gJ3RyYWluaW5nJzoKICAgICAgICAgICAgICAgICAgICBp
ZiBpWzJdID09ICcxJzoKICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpdmUuYXBwZW5kKGlbMV0p
CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aXZlX2tleS5hcHBlbmQoaVswXSkKICAgICAgICAg
ICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBuZWdhdGl2ZS5hcHBlbmQoaVsx
XSkKICAgICAgICAgICAgICAgICAgICAgICAgbmVnYXRpdmVfa2V5LmFwcGVuZChpWzBdKQoKICAgICAg
ICAgICAgbnVjbGVvdGlkZXMgPSBbJ0EnLCAnQycsICdHJywgJ1QnXQogICAgICAgICAgICB0cmludWNs
ZW90aWRlcyA9IFtuMSArIG4yICsgbjMgZm9yIG4xIGluIG51Y2xlb3RpZGVzIGZvciBuMiBpbiBudWNs
ZW90aWRlcyBmb3IgbjMgaW4gbnVjbGVvdGlkZXNdCiAgICAgICAgICAgIG9yZGVyID0ge30KICAgICAg
ICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKHRyaW51Y2xlb3RpZGVzKSk6CiAgICAgICAgICAgICAgICBv
cmRlclt0cmludWNsZW90aWRlc1tpXV0gPSBpCgogICAgICAgICAgICBtYXRyaXhfcG8gPSBzZWxmLkNh
bGN1bGF0ZU1hdHJpeChwb3NpdGl2ZSwgb3JkZXIpCiAgICAgICAgICAgIG1hdHJpeF9uZSA9IHNlbGYu
Q2FsY3VsYXRlTWF0cml4KG5lZ2F0aXZlLCBvcmRlcikKCiAgICAgICAgICAgIHBvc2l0aXZlX251bWJl
ciA9IGxlbihwb3NpdGl2ZSkKICAgICAgICAgICAgbmVnYXRpdmVfbnVtYmVyID0gbGVuKG5lZ2F0aXZl
KQoKICAgICAgICAgICAgZm9yIGkgaW4gZmFzdGFzOgogICAgICAgICAgICAgICAgaWYgaVszXSA9PSAn
dGVzdGluZyc6CiAgICAgICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwg
aVsxXSwgaVsyXQogICAgICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAg
ICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UobGVuKHNlcXVlbmNlKSAtIDIpOgogICAgICAgICAgICAg
ICAgICAgICAgICBpZiByZS5zZWFyY2goJy0nLCBzZXF1ZW5jZVtqOiBqICsgM10pOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoMCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxz
ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBfbnVtLCBuX251bSA9IHBvc2l0aXZlX251bWJl
ciwgbmVnYXRpdmVfbnVtYmVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb19udW1iZXIgPSBt
YXRyaXhfcG9bal1bb3JkZXJbc2VxdWVuY2VbajogaiArIDNdXV0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGlmIGlbMF0gaW4gcG9zaXRpdmVfa2V5IGFuZCBwb19udW1iZXIgPiAwOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHBvX251bWJlciAtPSAxCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcF9udW0gLT0gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVfbnVtYmVyID0g
bWF0cml4X25lW2pdW29yZGVyW3NlcXVlbmNlW2o6IGogKyAzXV1dCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpZiBpWzBdIGluIG5lZ2F0aXZlX2tleSBhbmQgbmVfbnVtYmVyID4gMDoKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBuZV9udW1iZXIgLT0gMQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIG5fbnVtIC09IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5k
KHBvX251bWJlciAvIHBfbnVtIC0gbmVfbnVtYmVyIC8gbl9udW0pCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAjIHByaW50KHNlcXVlbmNlW2o6IGorM10sIG9yZGVyW3NlcXVlbmNlW2o6IGorM11dLCBw
b19udW1iZXIsIHBfbnVtLCBuZV9udW1iZXIsIG5fbnVtKQogICAgICAgICAgICAgICAgICAgIGVuY29k
aW5ncy5hcHBlbmQoY29kZSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5
KFtdKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBk
dHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFw
ZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAx
CiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJh
eS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNl
OgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBl
OgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFs
c2UKCiAgICBkZWYgUFNUTlBkcyhzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIG5vdCBz
ZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnUFNUTlBkcyBkZXNj
cmlwdG9yIG5lZWQgZmFzdGEgc2VxdWVuY2Ugd2l0aCBlcXVhbCBsZW5ndGguJwogICAgICAgICAgICAg
ICAgcmV0dXJuIEZhbHNlCgogICAgICAgICAgICBmYXN0YXMgPSBbXQogICAgICAgICAgICBmb3IgaXRl
bSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBpZiBpdGVtWzNdID09ICd0cmFpbmlu
Zyc6CiAgICAgICAgICAgICAgICAgICAgZmFzdGFzLmFwcGVuZChpdGVtKQogICAgICAgICAgICAgICAg
ICAgIGZhc3Rhcy5hcHBlbmQoW2l0ZW1bMF0sIGl0ZW1bMV0sIGl0ZW1bMl0sICd0ZXN0aW5nJ10pCiAg
ICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGZhc3Rhcy5hcHBlbmQoaXRlbSkK
CiAgICAgICAgICAgIGZvciBpIGluIGZhc3RhczoKICAgICAgICAgICAgICAgIGlmIHJlLnNlYXJjaCgn
W15BQ0dULV0nLCBpWzFdKToKICAgICAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdJbGxl
Z2FsIGNoYXJhY3RlciBpbmNsdWRlZCBpbiB0aGUgZmFzdGEgc2VxdWVuY2VzLCBvbmx5IHRoZSAiQUNH
VFtVXSIgYXJlIGFsbG93ZWQgYnkgdGhpcyBlbmNvZGluZyBzY2hlbWUuJwogICAgICAgICAgICAgICAg
ICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAgZm9yIGkgaW4gZmFzdGFzOgogICAgICAgICAgICAg
ICAgaVsxXSA9IHJlLnN1YignVCcsICdBJywgaVsxXSkKICAgICAgICAgICAgICAgIGlbMV0gPSByZS5z
dWIoJ0cnLCAnQycsIGlbMV0pCgogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBo
ZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXQogICAgICAgICAgICBmb3IgcG9zIGluIHJhbmdl
KGxlbihmYXN0YXNbMF1bMV0pIC0gMik6CiAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKCdQb3Mu
JWQnICUgKHBvcyArIDEpKQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAg
ICAgICAgIHBvc2l0aXZlID0gW10KICAgICAgICAgICAgbmVnYXRpdmUgPSBbXQogICAgICAgICAgICBw
b3NpdGl2ZV9rZXkgPSBbXQogICAgICAgICAgICBuZWdhdGl2ZV9rZXkgPSBbXQogICAgICAgICAgICBm
b3IgaSBpbiBmYXN0YXM6CiAgICAgICAgICAgICAgICBpZiBpWzNdID09ICd0cmFpbmluZyc6CiAgICAg
ICAgICAgICAgICAgICAgaWYgaVsyXSA9PSAnMSc6CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0
aXZlLmFwcGVuZChpWzFdKQogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGl2ZV9rZXkuYXBwZW5k
KGlbMF0pCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgbmVn
YXRpdmUuYXBwZW5kKGlbMV0pCiAgICAgICAgICAgICAgICAgICAgICAgIG5lZ2F0aXZlX2tleS5hcHBl
bmQoaVswXSkKCiAgICAgICAgICAgIG51Y2xlb3RpZGVzID0gWydBJywgJ0MnXQogICAgICAgICAgICB0
cmludWNsZW90aWRlcyA9IFtuMSArIG4yICsgbjMgZm9yIG4xIGluIG51Y2xlb3RpZGVzIGZvciBuMiBp
biBudWNsZW90aWRlcyBmb3IgbjMgaW4gbnVjbGVvdGlkZXNdCiAgICAgICAgICAgIG9yZGVyID0ge30K
ICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKHRyaW51Y2xlb3RpZGVzKSk6CiAgICAgICAgICAg
ICAgICBvcmRlclt0cmludWNsZW90aWRlc1tpXV0gPSBpCgogICAgICAgICAgICBtYXRyaXhfcG8gPSBz
ZWxmLkNhbGN1bGF0ZU1hdHJpeChwb3NpdGl2ZSwgb3JkZXIpCiAgICAgICAgICAgIG1hdHJpeF9uZSA9
IHNlbGYuQ2FsY3VsYXRlTWF0cml4KG5lZ2F0aXZlLCBvcmRlcikKCiAgICAgICAgICAgIHBvc2l0aXZl
X251bWJlciA9IGxlbihwb3NpdGl2ZSkKICAgICAgICAgICAgbmVnYXRpdmVfbnVtYmVyID0gbGVuKG5l
Z2F0aXZlKQoKICAgICAgICAgICAgZm9yIGkgaW4gZmFzdGFzOgogICAgICAgICAgICAgICAgaWYgaVsz
XSA9PSAndGVzdGluZyc6CiAgICAgICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0g
aVswXSwgaVsxXSwgaVsyXQogICAgICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAg
ICAgICAgICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UobGVuKHNlcXVlbmNlKSAtIDIpOgogICAgICAg
ICAgICAgICAgICAgICAgICBpZiByZS5zZWFyY2goJy0nLCBzZXF1ZW5jZVtqOiBqICsgM10pOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoMCkKICAgICAgICAgICAgICAgICAgICAg
ICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBfbnVtLCBuX251bSA9IHBvc2l0aXZl
X251bWJlciwgbmVnYXRpdmVfbnVtYmVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb19udW1i
ZXIgPSBtYXRyaXhfcG9bal1bb3JkZXJbc2VxdWVuY2VbajogaiArIDNdXV0KICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIGlbMF0gaW4gcG9zaXRpdmVfa2V5IGFuZCBwb19udW1iZXIgPiAwOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvX251bWJlciAtPSAxCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgcF9udW0gLT0gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVfbnVt
YmVyID0gbWF0cml4X25lW2pdW29yZGVyW3NlcXVlbmNlW2o6IGogKyAzXV1dCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBpZiBpWzBdIGluIG5lZ2F0aXZlX2tleSBhbmQgbmVfbnVtYmVyID4gMDoKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZV9udW1iZXIgLT0gMQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIG5fbnVtIC09IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUu
YXBwZW5kKHBvX251bWJlciAvIHBfbnVtIC0gbmVfbnVtYmVyIC8gbl9udW0pCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAjIHByaW50KHNlcXVlbmNlW2o6IGorM10sIG9yZGVyW3NlcXVlbmNlW2o6IGor
M11dLCBwb19udW1iZXIsIHBfbnVtLCBuZV9udW1iZXIsIG5fbnVtKQogICAgICAgICAgICAgICAgICAg
IGVuY29kaW5ncy5hcHBlbmQoY29kZSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5w
LmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2Rp
bmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJh
eS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVb
MF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGlu
Z19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAg
ICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlv
biBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1
cm4gRmFsc2UKCiAgICBkZWYgRUlJUChzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIG5v
dCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnRUlJUCBkZXNj
cmlwdG9yIG5lZWQgZmFzdGEgc2VxdWVuY2Ugd2l0aCBlcXVhbCBsZW5ndGguJwogICAgICAgICAgICAg
ICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIGZhc3RhcyA9IHNlbGYuZmFzdGFfbGlzdAogICAgICAg
ICAgICBBQSA9ICdBQ0dUJwogICAgICAgICAgICBFSUlQX2RpY3QgPSB7CiAgICAgICAgICAgICAgICAn
QSc6IDAuMTI2MCwKICAgICAgICAgICAgICAgICdDJzogMC4xMzQwLAogICAgICAgICAgICAgICAgJ0cn
OiAwLjA4MDYsCiAgICAgICAgICAgICAgICAnVCc6IDAuMTMzNSwKICAgICAgICAgICAgICAgICctJzog
MCwKICAgICAgICAgICAgfQogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBoZWFk
ZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxLCBs
ZW4oZmFzdGFzWzBdWzFdKSArIDEpOgogICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZCgnRicgKyBz
dHIoaSkpCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9y
IGkgaW4gZmFzdGFzOgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwg
aVsxXSwgaVsyXQogICAgICAgICAgICAgICAgY29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAg
ICAgIGZvciBhYSBpbiBzZXF1ZW5jZToKICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChFSUlQ
X2RpY3QuZ2V0KGFhLCAwKSkKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKICAg
ICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxm
LmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAg
IHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxm
LnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNv
ZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAg
ICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0
dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVy
cm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgVHJpTmNsZW90
aWRlQ29tcG9zaXRpb24oc2VsZiwgc2VxdWVuY2UsIGJhc2UpOgogICAgICAgIHRyaW5jbGVvdGlkZXMg
PSBbbm4xICsgbm4yICsgbm4zIGZvciBubjEgaW4gYmFzZSBmb3Igbm4yIGluIGJhc2UgZm9yIG5uMyBp
biBiYXNlXQogICAgICAgIHRuY19kaWN0ID0ge30KICAgICAgICBmb3IgdHJpTiBpbiB0cmluY2xlb3Rp
ZGVzOgogICAgICAgICAgICB0bmNfZGljdFt0cmlOXSA9IDAKICAgICAgICBmb3IgaSBpbiByYW5nZShs
ZW4oc2VxdWVuY2UpIC0gMik6CiAgICAgICAgICAgIHRuY19kaWN0W3NlcXVlbmNlW2k6aSArIDNdXSAr
PSAxCiAgICAgICAgZm9yIGtleSBpbiB0bmNfZGljdDoKICAgICAgICAgICAgdG5jX2RpY3Rba2V5XSAv
PSAobGVuKHNlcXVlbmNlKSAtIDIpCiAgICAgICAgcmV0dXJuIHRuY19kaWN0CgogICAgZGVmIFBzZUVJ
SVAoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmYXN0YXMgPSBzZWxmLmZhc3RhX2xpc3QK
ICAgICAgICAgICAgZm9yIGkgaW4gZmFzdGFzOgogICAgICAgICAgICAgICAgaWYgcmUuc2VhcmNoKCdb
XkFDR1QtXScsIGlbMV0pOgogICAgICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ0lsbGVn
YWwgY2hhcmFjdGVyIGluY2x1ZGVkIGluIHRoZSBmYXN0YSBzZXF1ZW5jZXMsIG9ubHkgdGhlICJBQ0dU
LSIgYXJlIGFsbG93ZWQgYnkgdGhpcyBQc2VFSUlQIHNjaGVtZS4nCiAgICAgICAgICAgICAgICAgICAg
cmV0dXJuIEZhbHNlCiAgICAgICAgICAgIGJhc2UgPSAnQUNHVCcKICAgICAgICAgICAgRUlJUF9kaWN0
ID0gewogICAgICAgICAgICAgICAgJ0EnOiAwLjEyNjAsCiAgICAgICAgICAgICAgICAnQyc6IDAuMTM0
MCwKICAgICAgICAgICAgICAgICdHJzogMC4wODA2LAogICAgICAgICAgICAgICAgJ1QnOiAwLjEzMzUs
CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdHJpbmNsZW90aWRlcyA9IFtubjEgKyBubjIgKyBubjMg
Zm9yIG5uMSBpbiBiYXNlIGZvciBubjIgaW4gYmFzZSBmb3Igbm4zIGluIGJhc2VdCiAgICAgICAgICAg
IEVJSVB4eXogPSB7fQogICAgICAgICAgICBmb3IgdHJpTiBpbiB0cmluY2xlb3RpZGVzOgogICAgICAg
ICAgICAgICAgRUlJUHh5elt0cmlOXSA9IEVJSVBfZGljdFt0cmlOWzBdXSArIEVJSVBfZGljdFt0cmlO
WzFdXSArIEVJSVBfZGljdFt0cmlOWzJdXQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAg
ICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10gKyB0cmluY2xlb3RpZGVzCiAgICAg
ICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gZmFzdGFz
OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywg
JycsIGlbMV0pLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAg
ICAgICAgICAgdHJpbmNsZW90aWRlX2ZyZXF1ZW5jeSA9IHNlbGYuVHJpTmNsZW90aWRlQ29tcG9zaXRp
b24oc2VxdWVuY2UsIGJhc2UpCiAgICAgICAgICAgICAgICBjb2RlID0gY29kZSArIFtFSUlQeHl6W3Ry
aU5dICogdHJpbmNsZW90aWRlX2ZyZXF1ZW5jeVt0cmlOXSBmb3IgdHJpTiBpbiB0cmluY2xlb3RpZGVz
XQogICAgICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChjb2RlKQogICAgICAgICAgICBzZWxmLmVu
Y29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkg
PSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBz
ZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNv
ZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAg
ICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVy
biBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAg
ICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUp
CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBBU0RDKHNlbGYpOgogICAgICAgIHRyeToK
ICAgICAgICAgICAgIyBjbGVhcgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJy
YXkoW10pCgogICAgICAgICAgICBBQSA9ICdBQ0dUJwogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQog
ICAgICAgICAgICBhYVBhaXJzID0gW10KICAgICAgICAgICAgZm9yIGFhMSBpbiBBQToKICAgICAgICAg
ICAgICAgIGZvciBhYTIgaW4gQUE6CiAgICAgICAgICAgICAgICAgICAgYWFQYWlycy5hcHBlbmQoYWEx
ICsgYWEyKQoKICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAg
ICAgICAgaGVhZGVyICs9IFthYTEgKyBhYTIgZm9yIGFhMSBpbiBBQSBmb3IgYWEyIGluIEFBXQogICAg
ICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYu
ZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIHJl
LnN1YignLScsICcnLCBpWzFdKSwgaVsyXQogICAgICAgICAgICAgICAgY29kZSA9IFtuYW1lLCBsYWJl
bF0KICAgICAgICAgICAgICAgIHN1bSA9IDAKICAgICAgICAgICAgICAgIHBhaXJfZGljdCA9IHt9CiAg
ICAgICAgICAgICAgICBmb3IgcGFpciBpbiBhYVBhaXJzOgogICAgICAgICAgICAgICAgICAgIHBhaXJf
ZGljdFtwYWlyXSA9IDAKICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGxlbihzZXF1ZW5jZSkp
OgogICAgICAgICAgICAgICAgICAgIGZvciBrIGluIHJhbmdlKGogKyAxLCBsZW4oc2VxdWVuY2UpKToK
ICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VxdWVuY2Vbal0gaW4gQUEgYW5kIHNlcXVlbmNlW2td
IGluIEFBOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFpcl9kaWN0W3NlcXVlbmNlW2pdICsg
c2VxdWVuY2Vba11dICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSAxCiAgICAg
ICAgICAgICAgICBmb3IgcGFpciBpbiBhYVBhaXJzOgogICAgICAgICAgICAgICAgICAgIGNvZGUuYXBw
ZW5kKHBhaXJfZGljdFtwYWlyXSAvIHN1bSkKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQo
Y29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3Ms
IGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNo
YXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAt
IDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2Fy
cmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFz
IGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBG
YWxzZQoKICAgIGRlZiBEQkUoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIGNsZWFyCiAg
ICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKCiAgICAgICAgICAgIGlm
IG5vdCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnREJFIGRl
c2NyaXB0b3IgbmVlZCBmYXN0YSBzZXF1ZW5jZSB3aXRoIGVxdWFsIGxlbmd0aC4nCiAgICAgICAgICAg
ICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgIEFBX2RpY3QgPSB7CiAgICAgICAgICAgICAgICAn
QUEnOiBbMCwgMCwgMCwgMF0sCiAgICAgICAgICAgICAgICAnQUMnOiBbMCwgMCwgMCwgMV0sCiAgICAg
ICAgICAgICAgICAnQUcnOiBbMCwgMCwgMSwgMF0sCiAgICAgICAgICAgICAgICAnQVQnOiBbMCwgMCwg
MSwgMV0sCiAgICAgICAgICAgICAgICAnQ0EnOiBbMCwgMSwgMCwgMF0sCiAgICAgICAgICAgICAgICAn
Q0MnOiBbMCwgMSwgMCwgMV0sCiAgICAgICAgICAgICAgICAnQ0cnOiBbMCwgMSwgMSwgMF0sCiAgICAg
ICAgICAgICAgICAnQ1QnOiBbMCwgMSwgMSwgMV0sCiAgICAgICAgICAgICAgICAnR0EnOiBbMSwgMCwg
MCwgMF0sCiAgICAgICAgICAgICAgICAnR0MnOiBbMSwgMCwgMCwgMV0sCiAgICAgICAgICAgICAgICAn
R0cnOiBbMSwgMCwgMSwgMF0sCiAgICAgICAgICAgICAgICAnR1QnOiBbMSwgMCwgMSwgMV0sCiAgICAg
ICAgICAgICAgICAnVEEnOiBbMSwgMSwgMCwgMF0sCiAgICAgICAgICAgICAgICAnVEMnOiBbMSwgMSwg
MCwgMV0sCiAgICAgICAgICAgICAgICAnVEcnOiBbMSwgMSwgMSwgMF0sCiAgICAgICAgICAgICAgICAn
VFQnOiBbMSwgMSwgMSwgMV0sCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtd
CiAgICAgICAgICAgIGhlYWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgICAgIGZv
ciBpIGluIHJhbmdlKChsZW4oc2VsZi5mYXN0YV9saXN0WzBdWzFdKSAtIDEpICogNCk6CiAgICAgICAg
ICAgICAgICBoZWFkZXIuYXBwZW5kKCdGJXMnICUoaSArIDEpKQogICAgICAgICAgICBlbmNvZGluZ3Mu
YXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAg
ICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIGlbMV0sIGlbMl0KICAgICAgICAg
ICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICBmb3IgaiBpbiByYW5nZShs
ZW4oc2VxdWVuY2UpIC0gMSk6CiAgICAgICAgICAgICAgICAgICAgaWYgc2VxdWVuY2Vbal0gKyBzZXF1
ZW5jZVtqICsgMV0gaW4gQUFfZGljdDoKICAgICAgICAgICAgICAgICAgICAgICAgY29kZSArPSBBQV9k
aWN0W3NlcXVlbmNlW2pdICsgc2VxdWVuY2VbaiArIDFdXQogICAgICAgICAgICAgICAgICAgIGVsc2U6
CiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gWzAuNSwgMC41LCAwLjUsIDAuNV0KICAgICAg
ICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2Rpbmdf
YXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1
bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2Vs
Zi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAg
ICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAg
IHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UK
ICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0g
c3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBMUERGKHNlbGYpOgogICAgICAg
IHRyeToKICAgICAgICAgICAgIyBjbGVhcgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0g
bnAuYXJyYXkoW10pCgogICAgICAgICAgICBpZiBub3Qgc2VsZi5pc19lcXVhbDoKICAgICAgICAgICAg
ICAgIHNlbGYuZXJyb3JfbXNnID0gJ0xQREYgZGVzY3JpcHRvciBuZWVkIGZhc3RhIHNlcXVlbmNlIHdp
dGggZXF1YWwgbGVuZ3RoLicKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAg
ZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10K
ICAgICAgICAgICAgaGVhZGVyICs9IFsnTFBERl9wb3MlcycgJSBpIGZvciBpIGluIHJhbmdlKDEsIGxl
bihzZWxmLmZhc3RhX2xpc3RbMF1bMV0pKV0KICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFk
ZXIpCgogICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBu
YW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCBpWzFdLCBpWzJdCiAgICAgICAgICAgICAgICBjb2Rl
ID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgZGludWNsZW90aWRlX2RpY3QgPSB7CiAgICAg
ICAgICAgICAgICAgICAgJ0FBJzogMCwKICAgICAgICAgICAgICAgICAgICAnQUMnOiAwLAogICAgICAg
ICAgICAgICAgICAgICdBRyc6IDAsCiAgICAgICAgICAgICAgICAgICAgJ0FUJzogMCwKICAgICAgICAg
ICAgICAgICAgICAnQS0nOiAwLAogICAgICAgICAgICAgICAgICAgICdDQSc6IDAsCiAgICAgICAgICAg
ICAgICAgICAgJ0NDJzogMCwKICAgICAgICAgICAgICAgICAgICAnQ0cnOiAwLAogICAgICAgICAgICAg
ICAgICAgICdDVCc6IDAsCiAgICAgICAgICAgICAgICAgICAgJ0MtJzogMCwKICAgICAgICAgICAgICAg
ICAgICAnR0EnOiAwLAogICAgICAgICAgICAgICAgICAgICdHQyc6IDAsCiAgICAgICAgICAgICAgICAg
ICAgJ0dHJzogMCwKICAgICAgICAgICAgICAgICAgICAnR1QnOiAwLAogICAgICAgICAgICAgICAgICAg
ICdHLSc6IDAsCiAgICAgICAgICAgICAgICAgICAgJ1RBJzogMCwKICAgICAgICAgICAgICAgICAgICAn
VEMnOiAwLAogICAgICAgICAgICAgICAgICAgICdURyc6IDAsCiAgICAgICAgICAgICAgICAgICAgJ1RU
JzogMCwKICAgICAgICAgICAgICAgICAgICAnVC0nOiAwLAogICAgICAgICAgICAgICAgICAgICctQSc6
IDAsCiAgICAgICAgICAgICAgICAgICAgJy1DJzogMCwKICAgICAgICAgICAgICAgICAgICAnLUcnOiAw
LAogICAgICAgICAgICAgICAgICAgICctVCc6IDAsCiAgICAgICAgICAgICAgICAgICAgJy0tJzogMCwK
ICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKDEsIGxlbihzZXF1
ZW5jZSkpOgogICAgICAgICAgICAgICAgICAgIGRpbnVjbGVvdGlkZV9kaWN0W3NlcXVlbmNlW2pdICsg
c2VxdWVuY2VbaiAtIDFdXSArPSAxCiAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoZGludWNs
ZW90aWRlX2RpY3Rbc2VxdWVuY2Vbal0gKyBzZXF1ZW5jZVtqIC0gMV1dIC8gaikKICAgICAgICAgICAg
ICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkg
PSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBz
ZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNv
ZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAg
ICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVy
biBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAg
ICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUp
CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBEUENQKHNlbGYpOgogICAgICAgIHRyeToK
ICAgICAgICAgICAgIyBjbGVhcgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJy
YXkoW10pCgogICAgICAgICAgICBpZiBzZWxmLnNlcXVlbmNlX3R5cGUgPT0gJ0ROQSc6CiAgICAgICAg
ICAgICAgICBmaWxlX25hbWUgPSAnZGlkbmFQaHljaGUuZGF0YScKICAgICAgICAgICAgICAgIHByb3Bl
cnR5X25hbWUgPSBzZWxmLmt3WydEaS1ETkEtUGh5Y2hlbSddLnNwbGl0KCc7JykKICAgICAgICAgICAg
ZWxzZToKICAgICAgICAgICAgICAgIGZpbGVfbmFtZSA9ICdkaXJuYVBoeWNoZS5kYXRhJwogICAgICAg
ICAgICAgICAgcHJvcGVydHlfbmFtZSA9IHNlbGYua3dbJ0RpLVJOQS1QaHljaGVtJ10uc3BsaXQoJzsn
KQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZGF0YV9maWxlID0gb3MucGF0aC5zcGxp
dChvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSlbMF0gKyByJ1xkYXRhXCVzJyAlZmlsZV9uYW1lIGlm
IHBsYXRmb3JtLnN5c3RlbSgpID09ICdXaW5kb3dzJyBlbHNlIG9zLnBhdGguc3BsaXQob3MucGF0aC5y
ZWFscGF0aChfX2ZpbGVfXykpWzBdICsgcicvZGF0YS8lcycgJWZpbGVfbmFtZQogICAgICAgICAgICAg
ICAgd2l0aCBvcGVuKGRhdGFfZmlsZSwgJ3JiJykgYXMgaGFuZGxlOgogICAgICAgICAgICAgICAgICAg
IHByb3BlcnR5X2RpY3QgPSBwaWNrbGUubG9hZChoYW5kbGUpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNl
cHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ0NvdWxkIG5vdCBmaW5k
IHRoZSBwaHlzaWNvY2hlbWljYWwgcHJvcGVydGllcyBmaWxlLicKICAgICAgICAgICAgICAgIHJldHVy
biBGYWxzZQoKICAgICAgICAgICAgYmFzZSA9ICdBQ0dUJwogICAgICAgICAgICBlbmNvZGluZ3MgPSBb
XQogICAgICAgICAgICBkaW51Y2xlb3RpZGVzID0gW24xICsgbjIgKyAnXycgKyBwX25hbWUgZm9yIHBf
bmFtZSBpbiBwcm9wZXJ0eV9uYW1lIGZvciBuMSBpbiBiYXNlIGZvciBuMiBpbiBiYXNlXQogICAgICAg
ICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXSArIGRpbnVjbGVvdGlkZXMKICAgICAg
ICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBBQURpY3QgPSB7fQogICAg
ICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oYmFzZSkpOgogICAgICAgICAgICAgICAgQUFEaWN0W2Jh
c2VbaV1dID0gaQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAg
ICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBp
WzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgdG1w
Q29kZSA9IFswXSAqIDE2CiAgICAgICAgICAgICAgICBmb3IgaiBpbiByYW5nZShsZW4oc2VxdWVuY2Up
IC0gMiArIDEpOgogICAgICAgICAgICAgICAgICAgIHRtcENvZGVbQUFEaWN0W3NlcXVlbmNlW2pdXSAq
IDQgKyBBQURpY3Rbc2VxdWVuY2VbaiArIDFdXV0gPSB0bXBDb2RlW0FBRGljdFtzZXF1ZW5jZVtqXV0g
KiA0ICsgQUFEaWN0WwogICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZVtqICsgMV1dXSArIDEK
ICAgICAgICAgICAgICAgIGlmIHN1bSh0bXBDb2RlKSAhPSAwOgogICAgICAgICAgICAgICAgICAgIHRt
cENvZGUgPSBbaSAvIHN1bSh0bXBDb2RlKSBmb3IgaSBpbiB0bXBDb2RlXQoKICAgICAgICAgICAgICAg
IGZvciBwX25hbWUgaW4gcHJvcGVydHlfbmFtZToKICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVk
X2NvZGUgPSBbXQogICAgICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGxlbih0bXBDb2RlKSk6
CiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRfY29kZS5hcHBlbmQodG1wQ29kZVtqXSAq
IGZsb2F0KHByb3BlcnR5X2RpY3RbcF9uYW1lXVtqXSkpCiAgICAgICAgICAgICAgICAgICAgY29kZSAr
PSBub3JtYWxpemVkX2NvZGUKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKCiAg
ICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAgc2Vs
Zi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAg
ICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2Vs
Zi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5j
b2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAg
ICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJl
dHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5l
cnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIERQQ1BfdHlw
ZTIoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYu
ZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2Vx
dWFsOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnRFBDUCB0eXBlMiBkZXNjcmlwdG9y
IG5lZWQgZmFzdGEgc2VxdWVuY2Ugd2l0aCBlcXVhbCBsZW5ndGguJwogICAgICAgICAgICAgICAgcmV0
dXJuIEZhbHNlCgogICAgICAgICAgICBpZiBzZWxmLnNlcXVlbmNlX3R5cGUgPT0gJ0ROQSc6CiAgICAg
ICAgICAgICAgICBmaWxlX25hbWUgPSAnZGlkbmFQaHljaGUuZGF0YScKICAgICAgICAgICAgICAgIHBy
b3BlcnR5X25hbWUgPSBzZWxmLmt3WydEaS1ETkEtUGh5Y2hlbSddLnNwbGl0KCc7JykKICAgICAgICAg
ICAgZWxzZToKICAgICAgICAgICAgICAgIGZpbGVfbmFtZSA9ICdkaXJuYVBoeWNoZS5kYXRhJwogICAg
ICAgICAgICAgICAgcHJvcGVydHlfbmFtZSA9IHNlbGYua3dbJ0RpLVJOQS1QaHljaGVtJ10uc3BsaXQo
JzsnKQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZGF0YV9maWxlID0gb3MucGF0aC5z
cGxpdChvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSlbMF0gKyByJ1xkYXRhXCVzJyAlZmlsZV9uYW1l
IGlmIHBsYXRmb3JtLnN5c3RlbSgpID09ICdXaW5kb3dzJyBlbHNlIG9zLnBhdGguc3BsaXQob3MucGF0
aC5yZWFscGF0aChfX2ZpbGVfXykpWzBdICsgcicvZGF0YS8lcycgJWZpbGVfbmFtZQogICAgICAgICAg
ICAgICAgd2l0aCBvcGVuKGRhdGFfZmlsZSwgJ3JiJykgYXMgaGFuZGxlOgogICAgICAgICAgICAgICAg
ICAgIHByb3BlcnR5X2RpY3QgPSBwaWNrbGUubG9hZChoYW5kbGUpCiAgICAgICAgICAgIGV4Y2VwdCBF
eGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ0NvdWxkIG5vdCBm
aW5kIHRoZSBwaHlzaWNvY2hlbWljYWwgcHJvcGVydGllcyBmaWxlLicKICAgICAgICAgICAgICAgIHJl
dHVybiBGYWxzZQoKICAgICAgICAgICAgQUEgPSAnQUNHVCcKICAgICAgICAgICAgZW5jb2RpbmdzID0g
W10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAg
Zm9yIGkgaW4gcmFuZ2UobGVuKHNlbGYuZmFzdGFfbGlzdFswXVsxXSkgLSAxKToKICAgICAgICAgICAg
ICAgIGZvciBwX25hbWUgaW4gcHJvcGVydHlfbmFtZToKICAgICAgICAgICAgICAgICAgICBoZWFkZXIu
YXBwZW5kKHBfbmFtZSArICdfcG9zJXMnICUoaSsxKSkKICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVu
ZChoZWFkZXIpCgogICAgICAgICAgICBBQURpY3QgPSB7fQogICAgICAgICAgICBBQV9saXN0ID0gW2Fh
MSArIGFhMiBmb3IgYWExIGluIEFBIGZvciBhYTIgaW4gQUFdCiAgICAgICAgICAgIGZvciBpIGluIHJh
bmdlKGxlbihBQV9saXN0KSk6CiAgICAgICAgICAgICAgICBBQURpY3RbQUFfbGlzdFtpXV0gPSBpCgog
ICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBuYW1lLCBz
ZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCBpWzFdLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25h
bWUsIGxhYmVsXQogICAgICAgICAgICAgICAgZm9yIHBfbmFtZSBpbiBwcm9wZXJ0eV9uYW1lOgogICAg
ICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGxlbihzZXF1ZW5jZSkgLSAxKToKICAgICAgICAg
ICAgICAgICAgICAgICAgaWYgc2VxdWVuY2VbajogaiArIDJdIGluIEFBRGljdDoKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKHByb3BlcnR5X2RpY3RbcF9uYW1lXVtBQURpY3Rbc2Vx
dWVuY2VbajogaiArIDJdXV0pCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZCgwKQogICAgICAgICAgICAgICAgZW5jb2RpbmdzLmFw
cGVuZChjb2RlKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCiAg
ICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0
cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAg
ICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAg
ICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBl
WzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAg
ICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAg
IGRlZiBUUENQKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBjbGVhcgogICAgICAgICAg
ICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCgogICAgICAgICAgICBmaWxlX25hbWUg
PSAndHJpZG5hUGh5Y2hlLmRhdGEnCiAgICAgICAgICAgIHByb3BlcnR5X25hbWUgPSBzZWxmLmt3WydU
cmktRE5BLVBoeWNoZW0nXS5zcGxpdCgnOycpCgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAg
ICBkYXRhX2ZpbGUgPSBvcy5wYXRoLnNwbGl0KG9zLnBhdGgucmVhbHBhdGgoX19maWxlX18pKVswXSAr
IHInXGRhdGFcJXMnICVmaWxlX25hbWUgaWYgcGxhdGZvcm0uc3lzdGVtKCkgPT0gJ1dpbmRvd3MnIGVs
c2Ugb3MucGF0aC5zcGxpdChvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSlbMF0gKyByJy9kYXRhLyVz
JyAlZmlsZV9uYW1lCiAgICAgICAgICAgICAgICB3aXRoIG9wZW4oZGF0YV9maWxlLCAncmInKSBhcyBo
YW5kbGU6CiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlfZGljdCA9IHBpY2tsZS5sb2FkKGhhbmRs
ZSkKICAgICAgICAgICAgICAgIHByb3BlcnR5X25hbWUgPSBwcm9wZXJ0eV9kaWN0LmtleXMoKQogICAg
ICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21z
ZyA9ICdDb3VsZCBub3QgZmluZCB0aGUgcGh5c2ljb2NoZW1pY2FsIHByb3BlcnRpZXMgZmlsZS4nCiAg
ICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgIEFBID0gJ0FDR1QnCiAgICAgICAg
ICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgICAgIHRyaVBlcHRpZGVzID0gW2FhMSArIGFhMiArIGFh
MyArICdfJyArIHBfbmFtZSBmb3IgcF9uYW1lIGluIHByb3BlcnR5X25hbWUgZm9yIGFhMSBpbiBBQSBm
b3IgYWEyIGluIEFBIGZvciBhYTMgaW4KICAgICAgICAgICAgICAgICAgICAgICAgQUFdCiAgICAgICAg
ICAgIGhlYWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddICsgdHJpUGVwdGlkZXMKICAgICAgICAg
ICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBBQURpY3QgPSB7fQogICAgICAg
ICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUEpKToKICAgICAgICAgICAgICAgIEFBRGljdFtBQVtpXV0g
PSBpCgogICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBu
YW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCByZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0KICAg
ICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICB0bXBDb2RlID0g
WzBdICogNjQKICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGxlbihzZXF1ZW5jZSkgLSAzICsg
MSk6CiAgICAgICAgICAgICAgICAgICAgdG1wQ29kZVtBQURpY3Rbc2VxdWVuY2Vbal1dICogMTYgKyBB
QURpY3Rbc2VxdWVuY2VbaiArIDFdXSAqIDQgKyBBQURpY3Rbc2VxdWVuY2VbaiArIDJdXV0gPSB0bXBD
b2RlWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IEFBRGljdFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc2VxdWVuY2VbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBqXV0gKiAxNiArCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUFEaWN0WwogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZVsKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogKyAxXV0g
KiA0ICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBBQURpY3RbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHNlcXVlbmNlWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgaiArIDJdXV0gKyAxCiAgICAgICAgICAgICAgICBpZiBzdW0o
dG1wQ29kZSkgIT0gMDoKICAgICAgICAgICAgICAgICAgICB0bXBDb2RlID0gW2kgLyBzdW0odG1wQ29k
ZSkgZm9yIGkgaW4gdG1wQ29kZV0KCiAgICAgICAgICAgICAgICBmb3IgcF9uYW1lIGluIHByb3BlcnR5
X25hbWU6CiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZF9jb2RlID0gW10KICAgICAgICAgICAg
ICAgICAgICBmb3IgaiBpbiByYW5nZShsZW4odG1wQ29kZSkpOgogICAgICAgICAgICAgICAgICAgICAg
ICBub3JtYWxpemVkX2NvZGUuYXBwZW5kKHRtcENvZGVbal0gKiBmbG9hdChwcm9wZXJ0eV9kaWN0W3Bf
bmFtZV1bal0pKQogICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gbm9ybWFsaXplZF9jb2RlCiAgICAg
ICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCiAgICAgICAgICAgIHNlbGYuZW5jb2Rpbmdf
YXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFy
cmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5j
b2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2Fy
cmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNl
bGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUK
ICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2Vw
dCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAg
ICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFRQQ1BfdHlwZTIoc2VsZik6CiAgICAgICAgdHJ5Ogog
ICAgICAgICAgICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJh
eShbXSkKCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAgc2Vs
Zi5lcnJvcl9tc2cgPSAnVFBDUCB0eXBlMiBkZXNjcmlwdG9yIG5lZWQgZmFzdGEgc2VxdWVuY2Ugd2l0
aCBlcXVhbCBsZW5ndGguJwogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgICAgICBp
ZiBzZWxmLnNlcXVlbmNlX3R5cGUgPT0gJ0ROQSc6CiAgICAgICAgICAgICAgICBmaWxlX25hbWUgPSAn
dHJpZG5hUGh5Y2hlLmRhdGEnCiAgICAgICAgICAgICAgICBwcm9wZXJ0eV9uYW1lID0gc2VsZi5rd1sn
VHJpLUROQS1QaHljaGVtJ10uc3BsaXQoJzsnKQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAg
ICAgZGF0YV9maWxlID0gb3MucGF0aC5zcGxpdChvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSlbMF0g
KyByJ1xkYXRhXCVzJyAlZmlsZV9uYW1lIGlmIHBsYXRmb3JtLnN5c3RlbSgpID09ICdXaW5kb3dzJyBl
bHNlIG9zLnBhdGguc3BsaXQob3MucGF0aC5yZWFscGF0aChfX2ZpbGVfXykpWzBdICsgcicvZGF0YS8l
cycgJWZpbGVfbmFtZQogICAgICAgICAgICAgICAgd2l0aCBvcGVuKGRhdGFfZmlsZSwgJ3JiJykgYXMg
aGFuZGxlOgogICAgICAgICAgICAgICAgICAgIHByb3BlcnR5X2RpY3QgPSBwaWNrbGUubG9hZChoYW5k
bGUpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHNlbGYu
ZXJyb3JfbXNnID0gJ0NvdWxkIG5vdCBmaW5kIHRoZSBwaHlzaWNvY2hlbWljYWwgcHJvcGVydGllcyBm
aWxlLicKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAgQUEgPSAnQUNHVCcK
ICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1l
JywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKHNlbGYuZmFzdGFfbGlzdFsw
XVsxXSkgLSAyKToKICAgICAgICAgICAgICAgIGZvciBwX25hbWUgaW4gcHJvcGVydHlfbmFtZToKICAg
ICAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKHBfbmFtZSArICdfcG9zJXMnICUoaSsxKSkKICAg
ICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBBQURpY3QgPSB7fQog
ICAgICAgICAgICBBQV9saXN0ID0gW2FhMSArIGFhMiArIGFhMyBmb3IgYWExIGluIEFBIGZvciBhYTIg
aW4gQUEgZm9yIGFhMyBpbiBBQV0KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKEFBX2xpc3Qp
KToKICAgICAgICAgICAgICAgIEFBRGljdFtBQV9saXN0W2ldXSA9IGkKCiAgICAgICAgICAgIGZvciBp
IGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9
IGlbMF0sIGlbMV0sIGlbMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAg
ICAgICAgICAgICBmb3IgcF9uYW1lIGluIHByb3BlcnR5X25hbWU6CiAgICAgICAgICAgICAgICAgICAg
Zm9yIGogaW4gcmFuZ2UobGVuKHNlcXVlbmNlKSAtIDIpOgogICAgICAgICAgICAgICAgICAgICAgICBp
ZiBzZXF1ZW5jZVtqOiBqICsgM10gaW4gQUFEaWN0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAg
Y29kZS5hcHBlbmQocHJvcGVydHlfZGljdFtwX25hbWVdW0FBRGljdFtzZXF1ZW5jZVtqOiBqICsgM11d
XSkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGNvZGUuYXBwZW5kKDApCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCiAgICAg
ICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAgc2VsZi5l
bmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBz
ZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5y
b3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2Rp
bmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAg
ICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVy
biBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJv
cl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIE1NSShzZWxmKToK
ICAgICAgICB0cnk6CiAgICAgICAgICAgIE5BID0gJ0FDR1QnCiAgICAgICAgICAgIGRpbnVjbGVvdGlk
ZV9saXN0ID0gW2ExICsgYTIgZm9yIGExIGluIE5BIGZvciBhMiBpbiBOQV0KICAgICAgICAgICAgdHJp
bnVjbGVvdGlkZV9saXN0ID0gW2ExICsgYTIgKyBhMyBmb3IgYTEgaW4gTkEgZm9yIGEyIGluIE5BIGZv
ciBhMyBpbiBOQV0KICAgICAgICAgICAgZGludWNsZW90aWRlX2RpY3QgPSB7fQogICAgICAgICAgICB0
cmludWNsZW90aWRlX2RpY3QgPSB7fQogICAgICAgICAgICBmb3IgZWxlbSBpbiBkaW51Y2xlb3RpZGVf
bGlzdDoKICAgICAgICAgICAgICAgIGRpbnVjbGVvdGlkZV9kaWN0WycnLmpvaW4oc29ydGVkKGVsZW0p
KV0gPSAwCiAgICAgICAgICAgIGZvciBlbGVtIGluIHRyaW51Y2xlb3RpZGVfbGlzdDoKICAgICAgICAg
ICAgICAgIHRyaW51Y2xlb3RpZGVfZGljdFsnJy5qb2luKHNvcnRlZChlbGVtKSldID0gMAoKICAgICAg
ICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xh
YmVsJ10KICAgICAgICAgICAgaGVhZGVyICs9IFsnTU1JXyVzJyAlIGVsZW0gZm9yIGVsZW0gaW4gc29y
dGVkKGRpbnVjbGVvdGlkZV9kaWN0LmtleXMoKSldCiAgICAgICAgICAgIGhlYWRlciArPSBbJ01NSV8l
cycgJSBlbGVtIGZvciBlbGVtIGluIHNvcnRlZCh0cmludWNsZW90aWRlX2RpY3Qua2V5cygpKV0KICAg
ICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBmb3IgaSBpbiBzZWxm
LmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCBy
ZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFi
ZWxdCiAgICAgICAgICAgICAgICBmMV9kaWN0ID0gewogICAgICAgICAgICAgICAgICAgICdBJzogMCwK
ICAgICAgICAgICAgICAgICAgICAnQyc6IDAsCiAgICAgICAgICAgICAgICAgICAgJ0cnOiAwLAogICAg
ICAgICAgICAgICAgICAgICdUJzogMCwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGYy
X2RpY3QgPSBkaW51Y2xlb3RpZGVfZGljdC5jb3B5KCkKICAgICAgICAgICAgICAgIGYzX2RpY3QgPSB0
cmludWNsZW90aWRlX2RpY3QuY29weSgpCgogICAgICAgICAgICAgICAgZm9yIGVsZW0gaW4gc2VxdWVu
Y2U6CiAgICAgICAgICAgICAgICAgICAgaWYgZWxlbSBpbiBmMV9kaWN0OgogICAgICAgICAgICAgICAg
ICAgICAgICBmMV9kaWN0W2VsZW1dICs9IDEKICAgICAgICAgICAgICAgIGZvciBrZXkgaW4gZjFfZGlj
dDoKICAgICAgICAgICAgICAgICAgICBmMV9kaWN0W2tleV0gLz0gbGVuKHNlcXVlbmNlKQoKICAgICAg
ICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihzZXF1ZW5jZSkgLSAxKToKICAgICAgICAgICAgICAg
ICAgICBpZiAnJy5qb2luKHNvcnRlZChzZXF1ZW5jZVtpOiBpICsgMl0pKSBpbiBmMl9kaWN0OgogICAg
ICAgICAgICAgICAgICAgICAgICBmMl9kaWN0WycnLmpvaW4oc29ydGVkKHNlcXVlbmNlW2k6IGkgKyAy
XSkpXSArPSAxCiAgICAgICAgICAgICAgICBmb3Iga2V5IGluIGYyX2RpY3Q6CiAgICAgICAgICAgICAg
ICAgICAgZjJfZGljdFtrZXldIC89IChsZW4oc2VxdWVuY2UpIC0gMSkKCiAgICAgICAgICAgICAgICBm
b3IgaSBpbiByYW5nZShsZW4oc2VxdWVuY2UpIC0gMik6CiAgICAgICAgICAgICAgICAgICAgaWYgJycu
am9pbihzb3J0ZWQoc2VxdWVuY2VbaTogaSArIDNdKSkgaW4gZjNfZGljdDoKICAgICAgICAgICAgICAg
ICAgICAgICAgZjNfZGljdFsnJy5qb2luKHNvcnRlZChzZXF1ZW5jZVtpOiBpICsgM10pKV0gKz0gMQog
ICAgICAgICAgICAgICAgZm9yIGtleSBpbiBmM19kaWN0OgogICAgICAgICAgICAgICAgICAgIGYzX2Rp
Y3Rba2V5XSAvPSAobGVuKHNlcXVlbmNlKSAtIDIpCgogICAgICAgICAgICAgICAgZm9yIGtleSBpbiBz
b3J0ZWQoZjJfZGljdC5rZXlzKCkpOgogICAgICAgICAgICAgICAgICAgIGlmIGYyX2RpY3Rba2V5XSAh
PSAwIGFuZCBmMV9kaWN0W2tleVswXV0gKiBmMV9kaWN0W2tleVsxXV0gIT0gMDoKICAgICAgICAgICAg
ICAgICAgICAgICAgY29kZS5hcHBlbmQoZjJfZGljdFtrZXldICogbWF0aC5sb2coZjJfZGljdFtrZXld
IC8gKGYxX2RpY3Rba2V5WzBdXSAqIGYxX2RpY3Rba2V5WzFdXSkpKQogICAgICAgICAgICAgICAgICAg
IGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKDApCiAgICAgICAgICAgICAg
ICBmb3Iga2V5IGluIHNvcnRlZChmM19kaWN0LmtleXMoKSk6CiAgICAgICAgICAgICAgICAgICAgZWxl
bWVudF8xID0gMAogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRfMiA9IDAKICAgICAgICAgICAgICAg
ICAgICBlbGVtZW50XzMgPSAwCiAgICAgICAgICAgICAgICAgICAgaWYgZjJfZGljdFtrZXlbMDoyXV0g
IT0gMCBhbmQgZjFfZGljdFtrZXlbMF1dICogZjFfZGljdFtrZXlbMV1dICE9IDA6CiAgICAgICAgICAg
ICAgICAgICAgICAgIGVsZW1lbnRfMSA9IGYyX2RpY3Rba2V5WzA6Ml1dICogbWF0aC5sb2coZjJfZGlj
dFtrZXlbMDoyXV0gLyAoZjFfZGljdFtrZXlbMF1dICogZjFfZGljdFtrZXlbMV1dKSkKICAgICAgICAg
ICAgICAgICAgICBpZiBmMl9kaWN0W2tleVswXSArIGtleVsyXV0gIT0gMCBhbmQgZjFfZGljdFtrZXlb
Ml1dICE9IDA6CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRfMiA9IChmMl9kaWN0W2tleVsw
XSArIGtleVsyXV0gLyBmMV9kaWN0W2tleVsyXV0pICogbWF0aC5sb2coCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBmMl9kaWN0W2tleVswXSArIGtleVsyXV0gLyBmMV9kaWN0W2tleVsyXV0pCiAgICAg
ICAgICAgICAgICAgICAgaWYgZjJfZGljdFtrZXlbMTozXV0gIT0gMCBhbmQgZjNfZGljdFtrZXldIC8g
ZjJfZGljdFtrZXlbMTozXV0gIT0gMDoKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudF8zID0g
KGYzX2RpY3Rba2V5XSAvIGYyX2RpY3Rba2V5WzE6M11dKSAqIG1hdGgubG9nKGYzX2RpY3Rba2V5XSAv
IGYyX2RpY3Rba2V5WzE6M11dKQogICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKGVsZW1lbnRf
MSArIGVsZW1lbnRfMiAtIGVsZW1lbnRfMykKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQo
Y29kZSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAg
ICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAg
ICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAg
ICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAg
IGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+
IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAg
ICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAnJycg
RE5BL1JOQSBLTk4gZGVzY3JpcHRvciAnJycKICAgIGRlZiBTaW1OKHNlbGYsIGEsIGIpOgogICAgICAg
IHNjb3JlX21hdHJpeCA9IFsKICAgICAgICAgICAgWyAyLCAtMSwgLTEsIC0xLCAtMV0sICAjIEEKICAg
ICAgICAgICAgWy0xLCAgMiwgLTEsIC0xLCAtMV0sICAjIEMKICAgICAgICAgICAgWy0xLCAtMSwgIDIs
IC0xLCAtMV0sICAjIEcKICAgICAgICAgICAgWy0xLCAtMSwgLTEsICAyLCAtMV0sICAjIFQKICAgICAg
ICAgICAgWy0xLCAtMSwgLTEsIC0xLCAgMl0sICAjIC0KICAgICAgICBdCiAgICAgICAgQUEgPSAnQUNH
VC0nCiAgICAgICAgbXlEaWN0ID0ge30KICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUEpKToKICAg
ICAgICAgICAgbXlEaWN0W0FBW2ldXSA9IGkKICAgICAgICBtYXhWYWx1ZSwgbWluVmFsdWUgPSAyLCAt
MQogICAgICAgIHJldHVybiAoc2NvcmVfbWF0cml4W215RGljdFthXV1bbXlEaWN0W2JdXSAtIG1pblZh
bHVlKSAvIChtYXhWYWx1ZSAtIG1pblZhbHVlKQoKICAgIGRlZiBDYWxjdWxhdGVEaXN0YW5jZU4oc2Vs
Ziwgc2VxdWVuY2UxLCBzZXF1ZW5jZTIpOgogICAgICAgIGlmIGxlbihzZXF1ZW5jZTEpICE9IGxlbihz
ZXF1ZW5jZTIpOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdLTk4gZGVzY3JpcHRvciBuZWVk
IGZhc3RhIHNlcXVlbmNlIHdpdGggZXF1YWwgbGVuZ3RoLicKICAgICAgICAgICAgcmV0dXJuIDEKICAg
ICAgICBkaXN0YW5jZSA9IDEgLSBzdW0oW3NlbGYuU2ltTihzZXF1ZW5jZTFbaV0sIHNlcXVlbmNlMltp
XSkgZm9yIGkgaW4gcmFuZ2UobGVuKHNlcXVlbmNlMSkpXSkgLyBsZW4oc2VxdWVuY2UxKQogICAgICAg
IHJldHVybiBkaXN0YW5jZQoKICAgIGRlZiBLTk4oc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAg
ICAjIGNsZWFyCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKCiAg
ICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9t
c2cgPSAnS05OIGRlc2NyaXB0b3IgbmVlZCBmYXN0YSBzZXF1ZW5jZSB3aXRoIGVxdWFsIGxlbmd0aC4n
CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgIHRvcEtfdmFsdWVzID0gWzAu
MDEsIDAuMDIsIDAuMDMsIDAuMDQsIDAuMDUsIDAuMDYsIDAuMDcsIDAuMDgsIDAuMDksIDAuMTAsIDAu
MTEsIDAuMTIsIDAuMTMsIDAuMTQsIDAuMTUsIDAuMTYsCiAgICAgICAgICAgICAgICAgICAgICAgIDAu
MTcsIDAuMTgsIDAuMTksIDAuMjAsIDAuMjEsIDAuMjIsIDAuMjMsIDAuMjQsIDAuMjUsIDAuMjYsIDAu
MjcsIDAuMjgsIDAuMjksIDAuMzBdCgogICAgICAgICAgICB0cmFpbmluZ19kYXRhID0gW10KICAgICAg
ICAgICAgdHJhaW5pbmdfbGFiZWwgPSB7fQogICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZhc3RhX2xp
c3Q6CiAgICAgICAgICAgICAgICBpZiBpWzNdID09ICd0cmFpbmluZyc6CiAgICAgICAgICAgICAgICAg
ICAgdHJhaW5pbmdfZGF0YS5hcHBlbmQoaSkKICAgICAgICAgICAgICAgICAgICB0cmFpbmluZ19sYWJl
bFtpWzBdXSA9IGludChpWzJdKQogICAgICAgICAgICB0bXBfbGFiZWxfc2V0cyA9IGxpc3Qoc2V0KHRy
YWluaW5nX2xhYmVsLnZhbHVlcygpKSkKCiAgICAgICAgICAgIHRvcEtfbnVtYmVycyA9IFtdCiAgICAg
ICAgICAgIGZvciBpIGluIHRvcEtfdmFsdWVzOgogICAgICAgICAgICAgICAgdG9wS19udW1iZXJzLmFw
cGVuZChtYXRoLmNlaWwobGVuKHRyYWluaW5nX2RhdGEpICogaSkpCgogICAgICAgICAgICAjIGNhbGN1
bGF0ZSBwYWlyIGRpc3RhbmNlCiAgICAgICAgICAgIGRpc3RhbmNlX2RpY3QgPSB7fQogICAgICAgICAg
ICBmb3IgaSBpbiByYW5nZShsZW4oc2VsZi5mYXN0YV9saXN0KSk6CiAgICAgICAgICAgICAgICBuYW1l
X3NlcTEsIHNlcXVlbmNlXzEsIGxhYmVsXzEsIHVzYWdlXzEgPSBzZWxmLmZhc3RhX2xpc3RbaV1bMF0s
IHNlbGYuZmFzdGFfbGlzdFtpXVsxXSwgc2VsZi5mYXN0YV9saXN0W2ldWzJdLCBzZWxmLmZhc3RhX2xp
c3RbaV1bM10KICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGkrMSwgbGVuKHNlbGYuZmFzdGFf
bGlzdCkpOgogICAgICAgICAgICAgICAgICAgIG5hbWVfc2VxMiwgc2VxdWVuY2VfMiwgbGFiZWxfMiwg
dXNhZ2VfMiA9IHNlbGYuZmFzdGFfbGlzdFtqXVswXSwgc2VsZi5mYXN0YV9saXN0W2pdWzFdLCBzZWxm
LmZhc3RhX2xpc3Rbal1bMl0sIHNlbGYuZmFzdGFfbGlzdFtqXVszXQogICAgICAgICAgICAgICAgICAg
IGlmIHVzYWdlXzEgPT0gJ3Rlc3RpbmcnIGFuZCB1c2FnZV8yID09ICd0ZXN0aW5nJzoKICAgICAgICAg
ICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgICAgICAgICBkaXN0YW5jZV9kaWN0Wyc6Jy5qb2luKHNvcnRlZChbbmFtZV9zZXExLCBuYW1l
X3NlcTJdKSldID0gc2VsZi5DYWxjdWxhdGVEaXN0YW5jZU4oc2VxdWVuY2VfMSwgc2VxdWVuY2VfMikK
CiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgICAgIGhlYWRlciA9IFsnIycsICdsYWJl
bCddCiAgICAgICAgICAgIGZvciBrIGluIHRvcEtfbnVtYmVyczoKICAgICAgICAgICAgICAgIGZvciBs
IGluIHRtcF9sYWJlbF9zZXRzOgogICAgICAgICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoJ1RvcCcg
KyBzdHIoaykgKyAnLmxhYmVsJyArIHN0cihsKSkKICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZCho
ZWFkZXIpCgogICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAgICAg
ICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCBpWzFdLCBpWzJdCiAgICAgICAgICAgICAgICBj
b2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgdG1wX2Rpc3RhbmNlX2xpc3QgPSBbXQog
ICAgICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UobGVuKHRyYWluaW5nX2RhdGEpKToKICAgICAgICAg
ICAgICAgICAgICBpZiBuYW1lICE9IHRyYWluaW5nX2RhdGFbal1bMF06CiAgICAgICAgICAgICAgICAg
ICAgICAgIHRtcF9kaXN0YW5jZV9saXN0LmFwcGVuZChbaW50KHRyYWluaW5nX2RhdGFbal1bMl0pLCBk
aXN0YW5jZV9kaWN0LmdldCgnOicuam9pbihzb3J0ZWQoW25hbWUsIHRyYWluaW5nX2RhdGFbal1bMF1d
KSksIDEpXSkKCiAgICAgICAgICAgICAgICB0bXBfZGlzdGFuY2VfbGlzdCA9IG5wLmFycmF5KHRtcF9k
aXN0YW5jZV9saXN0KQogICAgICAgICAgICAgICAgdG1wX2Rpc3RhbmNlX2xpc3QgPSB0bXBfZGlzdGFu
Y2VfbGlzdFtucC5sZXhzb3J0KHRtcF9kaXN0YW5jZV9saXN0LlQpXQoKICAgICAgICAgICAgICAgIGZv
ciBqIGluIHRvcEtfbnVtYmVyczoKICAgICAgICAgICAgICAgICAgICBjb2RlICs9IHNlbGYuQ2FsY3Vs
YXRlQ29udGVudCh0bXBfZGlzdGFuY2VfbGlzdCwgaiwgdG1wX2xhYmVsX3NldHMpCiAgICAgICAgICAg
ICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5
ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0g
c2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5j
b2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAg
ICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1
cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAg
ICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihl
KQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAnJycgZW5kaW5nIEROQS9STkEgS05OIGRlc2Ny
aXB0b3IgJycnCgogICAgZGVmIFBTMihzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIG5v
dCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnUFMyIGRlc2Ny
aXB0b3IgbmVlZCBmYXN0YSBzZXF1ZW5jZSB3aXRoIGVxdWFsIGxlbmd0aC4nCiAgICAgICAgICAgICAg
ICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgQUEgPSAnQUNHVCcKICAgICAgICAgICAgQUFfbGlzdCA9
IFthMSArIGEyIGZvciBhMSBpbiBBQSBmb3IgYTIgaW4gQUFdCiAgICAgICAgICAgIEFBX2RpY3QgPSB7
fQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUFfbGlzdCkpOgogICAgICAgICAgICAgICAg
QUFfZGljdFtBQV9saXN0W2ldXSA9IFswXSAqIDE2CiAgICAgICAgICAgICAgICBBQV9kaWN0W0FBX2xp
c3RbaV1dW2ldID0gMQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVy
ID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMSwgKGxl
bihzZWxmLmZhc3RhX2xpc3RbMF1bMV0pIC0gMSkgKiAxNiArIDEpOgogICAgICAgICAgICAgICAgaGVh
ZGVyLmFwcGVuZCgnQklOQVJZLkYnICsgc3RyKGkpKQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5k
KGhlYWRlcikKCiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAg
ICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIGlbMV0sIGlbMl0KICAgICAgICAgICAgICAg
IGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICBmb3IgaiBpbiByYW5nZShsZW4oc2Vx
dWVuY2UpIC0gMSk6CiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBBQV9kaWN0LmdldChzZXF1ZW5j
ZVtqOiBqKzJdLCBbMF0qMTYpCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCiAg
ICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAgc2Vs
Zi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAg
ICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2Vs
Zi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5j
b2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAg
ICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJl
dHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5l
cnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFBTMyhzZWxm
KToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAg
ICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnUFMzIGRlc2NyaXB0b3IgbmVlZCBmYXN0YSBzZXF1ZW5jZSB3
aXRoIGVxdWFsIGxlbmd0aC4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAg
QUEgPSAnQUNHVCcKICAgICAgICAgICAgQUFfbGlzdCA9IFthMSArIGEyICsgYTMgZm9yIGExIGluIEFB
IGZvciBhMiBpbiBBQSBmb3IgYTMgaW4gQUFdCiAgICAgICAgICAgIEFBX2RpY3QgPSB7fQogICAgICAg
ICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUFfbGlzdCkpOgogICAgICAgICAgICAgICAgQUFfZGljdFtB
QV9saXN0W2ldXSA9IFswXSAqIDY0CiAgICAgICAgICAgICAgICBBQV9kaWN0W0FBX2xpc3RbaV1dW2ld
ID0gMQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydTYW1w
bGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMSwgKGxlbihzZWxmLmZh
c3RhX2xpc3RbMF1bMV0pIC0gMikgKiA2NCArIDEpOgogICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVu
ZCgnQklOQVJZLkYnICsgc3RyKGkpKQogICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGhlYWRlcikK
CiAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZmFzdGFfbGlzdDoKICAgICAgICAgICAgICAgIG5hbWUs
IHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0sIGlbMV0sIGlbMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBb
bmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICBmb3IgaiBpbiByYW5nZShsZW4oc2VxdWVuY2UpIC0g
Mik6CiAgICAgICAgICAgICAgICAgICAgY29kZSArPSBBQV9kaWN0LmdldChzZXF1ZW5jZVtqOiBqKzNd
LCBbMF0qNjQpCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCiAgICAgICAgICAg
IHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAgc2VsZi5lbmNvZGlu
Z19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNv
bHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBz
ZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAg
ICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAg
ICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxz
ZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cg
PSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFBTNChzZWxmKToKICAgICAg
ICB0cnk6CiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmlzX2VxdWFsOgogICAgICAgICAgICAgICAgc2Vs
Zi5lcnJvcl9tc2cgPSAnUFM0IGRlc2NyaXB0b3IgbmVlZCBmYXN0YSBzZXF1ZW5jZSB3aXRoIGVxdWFs
IGxlbmd0aC4nCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgQUEgPSAnQUNH
VCcKICAgICAgICAgICAgQUFfbGlzdCA9IFthMSArIGEyICsgYTMgKyBhNCBmb3IgYTEgaW4gQUEgZm9y
IGEyIGluIEFBIGZvciBhMyBpbiBBQSBmb3IgYTQgaW4gQUFdCiAgICAgICAgICAgIEFBX2RpY3QgPSB7
fQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUFfbGlzdCkpOgogICAgICAgICAgICAgICAg
QUFfZGljdFtBQV9saXN0W2ldXSA9IFswXSAqIDI1NgogICAgICAgICAgICAgICAgQUFfZGljdFtBQV9s
aXN0W2ldXVtpXSA9IDEKCiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgICAgIGhlYWRl
ciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDEsIChs
ZW4oc2VsZi5mYXN0YV9saXN0WzBdWzFdKSAtIDMpICogMjU2ICsgMSk6CiAgICAgICAgICAgICAgICBo
ZWFkZXIuYXBwZW5kKCdCSU5BUlkuRicgKyBzdHIoaSkpCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBl
bmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAg
ICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgaVsxXSwgaVsyXQogICAgICAgICAgICAg
ICAgY29kZSA9IFtuYW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGxlbihz
ZXF1ZW5jZSkgLSAzKToKICAgICAgICAgICAgICAgICAgICBjb2RlICs9IEFBX2RpY3QuZ2V0KHNlcXVl
bmNlW2o6IGorNF0sIFswXSoyNTYpCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUp
CiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAg
c2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAg
ICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAg
c2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwg
ZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgog
ICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
IHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2Vs
Zi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFpfY3Vy
dmVfOWJpdChzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtdCiAgICAg
ICAgICAgIGhlYWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgICAgIGZvciBwb3Mg
aW4gcmFuZ2UoMSwgNCk6CiAgICAgICAgICAgICAgICBmb3IgZWxlbSBpbiBbJ3gnLCAneScsICd6J106
CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZCgnUG9zXyVzLiVzJyAlKHBvcywgZWxlbSkp
CiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9yIGVsZW0g
aW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0g
ZWxlbVswXSwgcmUuc3ViKCctJywgJycsIGVsZW1bMV0pLCBlbGVtWzJdCiAgICAgICAgICAgICAgICBj
b2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgcG9zMV9kaWN0ID0ge30KICAgICAgICAg
ICAgICAgIHBvczJfZGljdCA9IHt9CiAgICAgICAgICAgICAgICBwb3MzX2RpY3QgPSB7fQogICAgICAg
ICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKHNlcXVlbmNlKSk6CiAgICAgICAgICAgICAgICAgICAg
aWYgKGkrMSkgJSAzID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlcXVlbmNlW2ldIGlu
IHBvczFfZGljdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvczFfZGljdFtzZXF1ZW5jZVtp
XV0gKz0gMQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgcG9zMV9kaWN0W3NlcXVlbmNlW2ldXSA9IDEKICAgICAgICAgICAgICAgICAgICBlbGlmIChp
KzEpICUgMyA9PSAyOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBzZXF1ZW5jZVtpXSBpbiBwb3My
X2RpY3Q6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MyX2RpY3Rbc2VxdWVuY2VbaV1dICs9
IDEKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHBvczJfZGljdFtzZXF1ZW5jZVtpXV0gPSAxCiAgICAgICAgICAgICAgICAgICAgZWxpZiAoaSsxKSAl
IDMgPT0gMDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VxdWVuY2VbaV0gaW4gcG9zM19kaWN0
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zM19kaWN0W3NlcXVlbmNlW2ldXSArPSAxCiAg
ICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3Mz
X2RpY3Rbc2VxdWVuY2VbaV1dID0gMQoKICAgICAgICAgICAgICAgIGNvZGUgKz0gWwogICAgICAgICAg
ICAgICAgICAgIChwb3MxX2RpY3QuZ2V0KCdBJywgMCkgKyBwb3MxX2RpY3QuZ2V0KCdHJywgMCkgLSBw
b3MxX2RpY3QuZ2V0KCdDJywgMCkgLSBwb3MxX2RpY3QuZ2V0KCdUJywgMCkpIC8gbGVuKHNlcXVlbmNl
KSwgIyB4CiAgICAgICAgICAgICAgICAgICAgKHBvczFfZGljdC5nZXQoJ0EnLCAwKSArIHBvczFfZGlj
dC5nZXQoJ0MnLCAwKSAtIHBvczFfZGljdC5nZXQoJ0cnLCAwKSAtIHBvczFfZGljdC5nZXQoJ1QnLCAw
KSkgLyBsZW4oc2VxdWVuY2UpLCAjIHkKICAgICAgICAgICAgICAgICAgICAocG9zMV9kaWN0LmdldCgn
QScsIDApICsgcG9zMV9kaWN0LmdldCgnVCcsIDApIC0gcG9zMV9kaWN0LmdldCgnRycsIDApIC0gcG9z
MV9kaWN0LmdldCgnQycsIDApKSAvIGxlbihzZXF1ZW5jZSkgICMgegogICAgICAgICAgICAgICAgICAg
IF0KICAgICAgICAgICAgICAgIGNvZGUgKz0gWwogICAgICAgICAgICAgICAgICAgIChwb3MyX2RpY3Qu
Z2V0KCdBJywgMCkgKyBwb3MyX2RpY3QuZ2V0KCdHJywgMCkgLSBwb3MyX2RpY3QuZ2V0KCdDJywgMCkg
LSBwb3MyX2RpY3QuZ2V0KCdUJywgMCkpIC8gbGVuKHNlcXVlbmNlKSwKICAgICAgICAgICAgICAgICAg
ICAocG9zMl9kaWN0LmdldCgnQScsIDApICsgcG9zMl9kaWN0LmdldCgnQycsIDApIC0gcG9zMl9kaWN0
LmdldCgnRycsIDApIC0gcG9zMl9kaWN0LmdldCgnVCcsIDApKSAvIGxlbihzZXF1ZW5jZSksCiAgICAg
ICAgICAgICAgICAgICAgKHBvczJfZGljdC5nZXQoJ0EnLCAwKSArIHBvczJfZGljdC5nZXQoJ1QnLCAw
KSAtIHBvczJfZGljdC5nZXQoJ0cnLCAwKSAtIHBvczJfZGljdC5nZXQoJ0MnLCAwKSkgLyBsZW4oc2Vx
dWVuY2UpCiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgY29kZSArPSBbCiAgICAg
ICAgICAgICAgICAgICAgKHBvczNfZGljdC5nZXQoJ0EnLCAwKSArIHBvczNfZGljdC5nZXQoJ0cnLCAw
KSAtIHBvczNfZGljdC5nZXQoJ0MnLCAwKSAtIHBvczNfZGljdC5nZXQoJ1QnLCAwKSkgLyBsZW4oc2Vx
dWVuY2UpLAogICAgICAgICAgICAgICAgICAgIChwb3MzX2RpY3QuZ2V0KCdBJywgMCkgKyBwb3MzX2Rp
Y3QuZ2V0KCdDJywgMCkgLSBwb3MzX2RpY3QuZ2V0KCdHJywgMCkgLSBwb3MzX2RpY3QuZ2V0KCdUJywg
MCkpIC8gbGVuKHNlcXVlbmNlKSwKICAgICAgICAgICAgICAgICAgICAocG9zM19kaWN0LmdldCgnQScs
IDApICsgcG9zM19kaWN0LmdldCgnVCcsIDApIC0gcG9zM19kaWN0LmdldCgnRycsIDApIC0gcG9zM19k
aWN0LmdldCgnQycsIDApKSAvIGxlbihzZXF1ZW5jZSkKICAgICAgICAgICAgICAgICAgICBdCiAgICAg
ICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5n
X2FycmF5ID0gbnAuYXJyYXkoW10pCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5h
cnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVu
Y29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19h
cnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBz
ZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVl
CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNl
cHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAg
ICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBaX2N1cnZlXzEyYml0KHNlbGYpOgogICAgICAgIHRy
eToKICAgICAgICAgICAgTk4gPSAnQUNHVCcKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAg
ICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIGJhc2Ug
aW4gTk46CiAgICAgICAgICAgICAgICBmb3IgZWxlbSBpbiBbJ3gnLCAneScsICd6J106CiAgICAgICAg
ICAgICAgICAgICAgaGVhZGVyLmFwcGVuZCgnJXMuJXMnICUoYmFzZSwgZWxlbSkpCiAgICAgICAgICAg
IGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9yIGVsZW0gaW4gc2VsZi5mYXN0
YV9saXN0OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gZWxlbVswXSwgcmUu
c3ViKCctJywgJycsIGVsZW1bMV0pLCBlbGVtWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUs
IGxhYmVsXQogICAgICAgICAgICAgICAgcG9zX2RpY3QgPSB7fQogICAgICAgICAgICAgICAgZm9yIGkg
aW4gcmFuZ2UobGVuKHNlcXVlbmNlKSAtIDEpOgogICAgICAgICAgICAgICAgICAgIGlmIHNlcXVlbmNl
W2k6IGkrMl0gaW4gcG9zX2RpY3Q6CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc19kaWN0W3NlcXVl
bmNlW2k6IGkrMl1dICs9IDEKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAg
ICAgICAgICBwb3NfZGljdFtzZXF1ZW5jZVtpOiBpKzJdXSA9IDEKCiAgICAgICAgICAgICAgICBmb3Ig
YmFzZSBpbiBOTjoKICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFsKICAgICAgICAgICAgICAgICAg
ICAgICAgKHBvc19kaWN0LmdldCgnJXNBJyAlYmFzZSwgMCkgKyBwb3NfZGljdC5nZXQoJyVzRycgJWJh
c2UsIDApIC0gcG9zX2RpY3QuZ2V0KCclc0MnICViYXNlLCAwKSAtIHBvc19kaWN0LmdldCgnJXNUJyAl
YmFzZSwgMCkpIC8gKGxlbihzZXF1ZW5jZSkgLSAxKSwgIyB4CiAgICAgICAgICAgICAgICAgICAgICAg
IChwb3NfZGljdC5nZXQoJyVzQScgJWJhc2UsIDApICsgcG9zX2RpY3QuZ2V0KCclc0MnICViYXNlLCAw
KSAtIHBvc19kaWN0LmdldCgnJXNHJyAlYmFzZSwgMCkgLSBwb3NfZGljdC5nZXQoJyVzVCcgJWJhc2Us
IDApKSAvIChsZW4oc2VxdWVuY2UpIC0gMSksICMgeQogICAgICAgICAgICAgICAgICAgICAgICAocG9z
X2RpY3QuZ2V0KCclc0EnICViYXNlLCAwKSArIHBvc19kaWN0LmdldCgnJXNUJyAlYmFzZSwgMCkgLSBw
b3NfZGljdC5nZXQoJyVzRycgJWJhc2UsIDApIC0gcG9zX2RpY3QuZ2V0KCclc0MnICViYXNlLCAwKSkg
LyAobGVuKHNlcXVlbmNlKSAtIDEpICAjIHoKICAgICAgICAgICAgICAgICAgICAgICAgXQoKICAgICAg
ICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2Rpbmdf
YXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFy
cmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5j
b2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2Fy
cmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNl
bGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUK
ICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2Vw
dCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAg
ICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFpfY3VydmVfMzZiaXQoc2VsZik6CiAgICAgICAgdHJ5
OgogICAgICAgICAgICBOTiA9ICdBQ0dUJwogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAg
ICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXQoKICAgICAgICAgICAgZm9yIGJhc2Ug
aW4gTk46CiAgICAgICAgICAgICAgICBmb3IgcG9zIGluIHJhbmdlKDEsIDQpOgogICAgICAgICAgICAg
ICAgICAgIGZvciBlbGVtIGluIFsneCcsICd5JywgJ3onXToKICAgICAgICAgICAgICAgICAgICAgICAg
aGVhZGVyLmFwcGVuZCgnUG9zXyVzXyVzLiVzJyAlKHBvcywgYmFzZSwgZWxlbSkpCiAgICAgICAgICAg
IGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9yIGVsZW0gaW4gc2VsZi5mYXN0
YV9saXN0OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gZWxlbVswXSwgcmUu
c3ViKCctJywgJycsIGVsZW1bMV0pLCBlbGVtWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUs
IGxhYmVsXQogICAgICAgICAgICAgICAgcG9zMV9kaWN0ID0ge30KICAgICAgICAgICAgICAgIHBvczJf
ZGljdCA9IHt9CiAgICAgICAgICAgICAgICBwb3MzX2RpY3QgPSB7fQogICAgICAgICAgICAgICAgZm9y
IGkgaW4gcmFuZ2UobGVuKHNlcXVlbmNlKSAtIDEpOgogICAgICAgICAgICAgICAgICAgIGlmIChpKzEp
ICUgMyA9PSAxOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBzZXF1ZW5jZVtpOiBpKzJdIGluIHBv
czFfZGljdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvczFfZGljdFtzZXF1ZW5jZVtpOiBp
KzJdXSArPSAxCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBwb3MxX2RpY3Rbc2VxdWVuY2VbaTogaSsyXV0gPSAxCiAgICAgICAgICAgICAgICAgICAg
ZWxpZiAoaSsxKSAlIDMgPT0gMjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VxdWVuY2VbaTog
aSsyXSBpbiBwb3MyX2RpY3Q6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MyX2RpY3Rbc2Vx
dWVuY2VbaTogaSsyXV0gKz0gMQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgcG9zMl9kaWN0W3NlcXVlbmNlW2k6IGkrMl1dID0gMQogICAgICAgICAg
ICAgICAgICAgIGVsaWYgKGkrMSkgJSAzID09IDA6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNl
cXVlbmNlW2k6IGkrMl0gaW4gcG9zM19kaWN0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9z
M19kaWN0W3NlcXVlbmNlW2k6IGkrMl1dICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvczNfZGljdFtzZXF1ZW5jZVtpOiBpKzJdXSA9IDEK
CiAgICAgICAgICAgICAgICBmb3IgYmFzZSBpbiBOTjoKICAgICAgICAgICAgICAgICAgICBjb2RlICs9
IFsKICAgICAgICAgICAgICAgICAgICAgICAgKHBvczFfZGljdC5nZXQoJyVzQScgJWJhc2UsIDApICsg
cG9zMV9kaWN0LmdldCgnJXNHJyAlYmFzZSwgMCkgLSBwb3MxX2RpY3QuZ2V0KCclc0MnICViYXNlLCAw
KSAtIHBvczFfZGljdC5nZXQoJyVzVCcgJWJhc2UsIDApKSAvIChsZW4oc2VxdWVuY2UpIC0gMSksICMg
eAogICAgICAgICAgICAgICAgICAgICAgICAocG9zMV9kaWN0LmdldCgnJXNBJyAlYmFzZSwgMCkgKyBw
b3MxX2RpY3QuZ2V0KCclc0MnICViYXNlLCAwKSAtIHBvczFfZGljdC5nZXQoJyVzRycgJWJhc2UsIDAp
IC0gcG9zMV9kaWN0LmdldCgnJXNUJyAlYmFzZSwgMCkpIC8gKGxlbihzZXF1ZW5jZSkgLSAxKSwgIyB5
CiAgICAgICAgICAgICAgICAgICAgICAgIChwb3MxX2RpY3QuZ2V0KCclc0EnICViYXNlLCAwKSArIHBv
czFfZGljdC5nZXQoJyVzVCcgJWJhc2UsIDApIC0gcG9zMV9kaWN0LmdldCgnJXNHJyAlYmFzZSwgMCkg
LSBwb3MxX2RpY3QuZ2V0KCclc0MnICViYXNlLCAwKSkgLyAobGVuKHNlcXVlbmNlKSAtIDEpICAjIHoK
ICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gWwogICAg
ICAgICAgICAgICAgICAgICAgICAocG9zMl9kaWN0LmdldCgnJXNBJyAlYmFzZSwgMCkgKyBwb3MyX2Rp
Y3QuZ2V0KCclc0cnICViYXNlLCAwKSAtIHBvczJfZGljdC5nZXQoJyVzQycgJWJhc2UsIDApIC0gcG9z
Ml9kaWN0LmdldCgnJXNUJyAlYmFzZSwgMCkpIC8gKGxlbihzZXF1ZW5jZSkgLSAxKSwKICAgICAgICAg
ICAgICAgICAgICAgICAgKHBvczJfZGljdC5nZXQoJyVzQScgJWJhc2UsIDApICsgcG9zMl9kaWN0Lmdl
dCgnJXNDJyAlYmFzZSwgMCkgLSBwb3MyX2RpY3QuZ2V0KCclc0cnICViYXNlLCAwKSAtIHBvczJfZGlj
dC5nZXQoJyVzVCcgJWJhc2UsIDApKSAvIChsZW4oc2VxdWVuY2UpIC0gMSksCiAgICAgICAgICAgICAg
ICAgICAgICAgIChwb3MyX2RpY3QuZ2V0KCclc0EnICViYXNlLCAwKSArIHBvczJfZGljdC5nZXQoJyVz
VCcgJWJhc2UsIDApIC0gcG9zMl9kaWN0LmdldCgnJXNHJyAlYmFzZSwgMCkgLSBwb3MyX2RpY3QuZ2V0
KCclc0MnICViYXNlLCAwKSkgLyAobGVuKHNlcXVlbmNlKSAtIDEpCiAgICAgICAgICAgICAgICAgICAg
ICAgIF0KICAgICAgICAgICAgICAgICAgICBjb2RlICs9IFsKICAgICAgICAgICAgICAgICAgICAgICAg
KHBvczNfZGljdC5nZXQoJyVzQScgJWJhc2UsIDApICsgcG9zM19kaWN0LmdldCgnJXNHJyAlYmFzZSwg
MCkgLSBwb3MzX2RpY3QuZ2V0KCclc0MnICViYXNlLCAwKSAtIHBvczNfZGljdC5nZXQoJyVzVCcgJWJh
c2UsIDApKSAvIChsZW4oc2VxdWVuY2UpIC0gMSksCiAgICAgICAgICAgICAgICAgICAgICAgIChwb3Mz
X2RpY3QuZ2V0KCclc0EnICViYXNlLCAwKSArIHBvczNfZGljdC5nZXQoJyVzQycgJWJhc2UsIDApIC0g
cG9zM19kaWN0LmdldCgnJXNHJyAlYmFzZSwgMCkgLSBwb3MzX2RpY3QuZ2V0KCclc1QnICViYXNlLCAw
KSkgLyAobGVuKHNlcXVlbmNlKSAtIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAocG9zM19kaWN0
LmdldCgnJXNBJyAlYmFzZSwgMCkgKyBwb3MzX2RpY3QuZ2V0KCclc1QnICViYXNlLCAwKSAtIHBvczNf
ZGljdC5nZXQoJyVzRycgJWJhc2UsIDApIC0gcG9zM19kaWN0LmdldCgnJXNDJyAlYmFzZSwgMCkpIC8g
KGxlbihzZXF1ZW5jZSkgLSAxKQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAg
ICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0g
bnAuYXJyYXkoW10pCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNv
ZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2Fy
cmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFw
ZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29k
aW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAg
ICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0
aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJl
dHVybiBGYWxzZQoKICAgIGRlZiBaX2N1cnZlXzQ4Yml0KHNlbGYpOgogICAgICAgIHRyeToKICAgICAg
ICAgICAgTk4gPSAnQUNHVCcKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVh
ZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIGJhc2UgaW4gTk46CiAg
ICAgICAgICAgICAgICBmb3IgYmFzZTEgaW4gTk46CiAgICAgICAgICAgICAgICAgICAgZm9yIGVsZW0g
aW4gWyd4JywgJ3knLCAneiddOgogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKCcl
cyVzLiVzJyAlKGJhc2UsIGJhc2UxLCBlbGVtKSkKICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZCho
ZWFkZXIpCgogICAgICAgICAgICBmb3IgZWxlbSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAgICAg
ICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBlbGVtWzBdLCByZS5zdWIoJy0nLCAnJywgZWxlbVsx
XSksIGVsZW1bMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAg
ICAgICBwb3NfZGljdCA9IHt9CiAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oc2VxdWVu
Y2UpIC0gMik6CiAgICAgICAgICAgICAgICAgICAgaWYgc2VxdWVuY2VbaTogaSszXSBpbiBwb3NfZGlj
dDoKICAgICAgICAgICAgICAgICAgICAgICAgcG9zX2RpY3Rbc2VxdWVuY2VbaTogaSszXV0gKz0gMQog
ICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc19kaWN0W3Nl
cXVlbmNlW2k6IGkrM11dID0gMQoKICAgICAgICAgICAgICAgIGZvciBiYXNlIGluIE5OOgogICAgICAg
ICAgICAgICAgICAgIGZvciBiYXNlMSBpbiBOTjoKICAgICAgICAgICAgICAgICAgICAgICAgY29kZSAr
PSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocG9zX2RpY3QuZ2V0KCclcyVzQScgJShiYXNl
LCBiYXNlMSksIDApICsgcG9zX2RpY3QuZ2V0KCclcyVzRycgJShiYXNlLCBiYXNlMSksIDApIC0gcG9z
X2RpY3QuZ2V0KCclcyVzQycgJShiYXNlLCBiYXNlMSksIDApIC0gcG9zX2RpY3QuZ2V0KCclcyVzVCcg
JShiYXNlLCBiYXNlMSksIDApKSAvIChsZW4oc2VxdWVuY2UpIC0gMiksICMgeAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgKHBvc19kaWN0LmdldCgnJXMlc0EnICUoYmFzZSwgYmFzZTEpLCAwKSArIHBv
c19kaWN0LmdldCgnJXMlc0MnICUoYmFzZSwgYmFzZTEpLCAwKSAtIHBvc19kaWN0LmdldCgnJXMlc0cn
ICUoYmFzZSwgYmFzZTEpLCAwKSAtIHBvc19kaWN0LmdldCgnJXMlc1QnICUoYmFzZSwgYmFzZTEpLCAw
KSkgLyAobGVuKHNlcXVlbmNlKSAtIDIpLCAjIHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChw
b3NfZGljdC5nZXQoJyVzJXNBJyAlKGJhc2UsIGJhc2UxKSwgMCkgKyBwb3NfZGljdC5nZXQoJyVzJXNU
JyAlKGJhc2UsIGJhc2UxKSwgMCkgLSBwb3NfZGljdC5nZXQoJyVzJXNHJyAlKGJhc2UsIGJhc2UxKSwg
MCkgLSBwb3NfZGljdC5nZXQoJyVzJXNDJyAlKGJhc2UsIGJhc2UxKSwgMCkpIC8gKGxlbihzZXF1ZW5j
ZSkgLSAyKSAgIyB6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICBl
bmNvZGluZ3MuYXBwZW5kKGNvZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAu
YXJyYXkoW10pCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGlu
Z3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5
LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsw
XSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5n
X2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAg
IGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9u
IGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVy
biBGYWxzZQoKICAgIGRlZiBaX2N1cnZlXzE0NGJpdChzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAg
ICAgIE5OID0gJ0FDR1QnCiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgICAgIGhlYWRl
ciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCgogICAgICAgICAgICBmb3IgYmFzZSBpbiBOTjoKICAg
ICAgICAgICAgICAgIGZvciBiYXNlMSBpbiBOTjoKICAgICAgICAgICAgICAgICAgICBmb3IgcG9zIGlu
IHJhbmdlKDEsIDQpOgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgZWxlbSBpbiBbJ3gnLCAneScs
ICd6J106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKCdQb3NfJXNfJXMl
cy4lcycgJShwb3MsIGJhc2UsIGJhc2UxLCBlbGVtKSkKICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVu
ZChoZWFkZXIpCgogICAgICAgICAgICBmb3IgZWxlbSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAgICAgICAg
ICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBlbGVtWzBdLCByZS5zdWIoJy0nLCAnJywgZWxl
bVsxXSksIGVsZW1bMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAg
ICAgICAgICBwb3MxX2RpY3QgPSB7fQogICAgICAgICAgICAgICAgcG9zMl9kaWN0ID0ge30KICAgICAg
ICAgICAgICAgIHBvczNfZGljdCA9IHt9CiAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4o
c2VxdWVuY2UpIC0gMik6CiAgICAgICAgICAgICAgICAgICAgaWYgKGkrMSkgJSAzID09IDE6CiAgICAg
ICAgICAgICAgICAgICAgICAgIGlmIHNlcXVlbmNlW2k6IGkrM10gaW4gcG9zMV9kaWN0OgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcG9zMV9kaWN0W3NlcXVlbmNlW2k6IGkrM11dICs9IDEKICAgICAg
ICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvczFfZGlj
dFtzZXF1ZW5jZVtpOiBpKzNdXSA9IDEKICAgICAgICAgICAgICAgICAgICBlbGlmIChpKzEpICUgMyA9
PSAyOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBzZXF1ZW5jZVtpOiBpKzNdIGluIHBvczJfZGlj
dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvczJfZGljdFtzZXF1ZW5jZVtpOiBpKzNdXSAr
PSAxCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBwb3MyX2RpY3Rbc2VxdWVuY2VbaTogaSszXV0gPSAxCiAgICAgICAgICAgICAgICAgICAgZWxpZiAo
aSsxKSAlIDMgPT0gMDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VxdWVuY2VbaTogaSszXSBp
biBwb3MzX2RpY3Q6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MzX2RpY3Rbc2VxdWVuY2Vb
aTogaSszXV0gKz0gMQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcG9zM19kaWN0W3NlcXVlbmNlW2k6IGkrM11dID0gMQoKICAgICAgICAgICAgICAg
IGZvciBiYXNlIGluIE5OOgogICAgICAgICAgICAgICAgICAgIGZvciBiYXNlMSBpbiBOTjoKICAgICAg
ICAgICAgICAgICAgICAgICAgY29kZSArPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocG9z
MV9kaWN0LmdldCgnJXMlc0EnICUoYmFzZSwgYmFzZTEpLCAwKSArIHBvczFfZGljdC5nZXQoJyVzJXNH
JyAlKGJhc2UsIGJhc2UxKSwgMCkgLSBwb3MxX2RpY3QuZ2V0KCclcyVzQycgJShiYXNlLCBiYXNlMSks
IDApIC0gcG9zMV9kaWN0LmdldCgnJXMlc1QnICUoYmFzZSwgYmFzZTEpLCAwKSkgLyAobGVuKHNlcXVl
bmNlKSAtIDIpLCAjIHgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwb3MxX2RpY3QuZ2V0KCcl
cyVzQScgJShiYXNlLCBiYXNlMSksIDApICsgcG9zMV9kaWN0LmdldCgnJXMlc0MnICUoYmFzZSwgYmFz
ZTEpLCAwKSAtIHBvczFfZGljdC5nZXQoJyVzJXNHJyAlKGJhc2UsIGJhc2UxKSwgMCkgLSBwb3MxX2Rp
Y3QuZ2V0KCclcyVzVCcgJShiYXNlLCBiYXNlMSksIDApKSAvIChsZW4oc2VxdWVuY2UpIC0gMiksICMg
eQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBvczFfZGljdC5nZXQoJyVzJXNBJyAlKGJhc2Us
IGJhc2UxKSwgMCkgKyBwb3MxX2RpY3QuZ2V0KCclcyVzVCcgJShiYXNlLCBiYXNlMSksIDApIC0gcG9z
MV9kaWN0LmdldCgnJXMlc0cnICUoYmFzZSwgYmFzZTEpLCAwKSAtIHBvczFfZGljdC5nZXQoJyVzJXND
JyAlKGJhc2UsIGJhc2UxKSwgMCkpIC8gKGxlbihzZXF1ZW5jZSkgLSAyKSAgIyB6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgKz0gWwogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgKHBvczJfZGljdC5nZXQoJyVzJXNBJyAlKGJhc2UsIGJhc2UxKSwg
MCkgKyBwb3MyX2RpY3QuZ2V0KCclcyVzRycgJShiYXNlLCBiYXNlMSksIDApIC0gcG9zMl9kaWN0Lmdl
dCgnJXMlc0MnICUoYmFzZSwgYmFzZTEpLCAwKSAtIHBvczJfZGljdC5nZXQoJyVzJXNUJyAlKGJhc2Us
IGJhc2UxKSwgMCkpIC8gKGxlbihzZXF1ZW5jZSkgLSAyKSwgIyB4CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAocG9zMl9kaWN0LmdldCgnJXMlc0EnICUoYmFzZSwgYmFzZTEpLCAwKSArIHBvczJfZGlj
dC5nZXQoJyVzJXNDJyAlKGJhc2UsIGJhc2UxKSwgMCkgLSBwb3MyX2RpY3QuZ2V0KCclcyVzRycgJShi
YXNlLCBiYXNlMSksIDApIC0gcG9zMl9kaWN0LmdldCgnJXMlc1QnICUoYmFzZSwgYmFzZTEpLCAwKSkg
LyAobGVuKHNlcXVlbmNlKSAtIDIpLCAjIHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwb3My
X2RpY3QuZ2V0KCclcyVzQScgJShiYXNlLCBiYXNlMSksIDApICsgcG9zMl9kaWN0LmdldCgnJXMlc1Qn
ICUoYmFzZSwgYmFzZTEpLCAwKSAtIHBvczJfZGljdC5nZXQoJyVzJXNHJyAlKGJhc2UsIGJhc2UxKSwg
MCkgLSBwb3MyX2RpY3QuZ2V0KCclcyVzQycgJShiYXNlLCBiYXNlMSksIDApKSAvIChsZW4oc2VxdWVu
Y2UpIC0gMikgICMgegogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAg
ICAgICAgICBjb2RlICs9IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwb3MzX2RpY3QuZ2V0
KCclcyVzQScgJShiYXNlLCBiYXNlMSksIDApICsgcG9zM19kaWN0LmdldCgnJXMlc0cnICUoYmFzZSwg
YmFzZTEpLCAwKSAtIHBvczNfZGljdC5nZXQoJyVzJXNDJyAlKGJhc2UsIGJhc2UxKSwgMCkgLSBwb3Mz
X2RpY3QuZ2V0KCclcyVzVCcgJShiYXNlLCBiYXNlMSksIDApKSAvIChsZW4oc2VxdWVuY2UpIC0gMiks
ICMgeAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBvczNfZGljdC5nZXQoJyVzJXNBJyAlKGJh
c2UsIGJhc2UxKSwgMCkgKyBwb3MzX2RpY3QuZ2V0KCclcyVzQycgJShiYXNlLCBiYXNlMSksIDApIC0g
cG9zM19kaWN0LmdldCgnJXMlc0cnICUoYmFzZSwgYmFzZTEpLCAwKSAtIHBvczNfZGljdC5nZXQoJyVz
JXNUJyAlKGJhc2UsIGJhc2UxKSwgMCkpIC8gKGxlbihzZXF1ZW5jZSkgLSAyKSwgIyB5CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAocG9zM19kaWN0LmdldCgnJXMlc0EnICUoYmFzZSwgYmFzZTEpLCAw
KSArIHBvczNfZGljdC5nZXQoJyVzJXNUJyAlKGJhc2UsIGJhc2UxKSwgMCkgLSBwb3MzX2RpY3QuZ2V0
KCclcyVzRycgJShiYXNlLCBiYXNlMSksIDApIC0gcG9zM19kaWN0LmdldCgnJXMlc0MnICUoYmFzZSwg
YmFzZTEpLCAwKSkgLyAobGVuKHNlcXVlbmNlKSAtIDIpICAjIHoKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIF0KICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAg
IHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAgc2VsZi5lbmNvZGlu
Z19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNv
bHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBz
ZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAg
ICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAg
ICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxz
ZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cg
PSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIE5NQnJvdG8oc2VsZik6CiAg
ICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCgog
ICAgICAgICAgICBpZiBzZWxmLnNlcXVlbmNlX3R5cGUgPT0gJ0ROQSc6CiAgICAgICAgICAgICAgICBm
aWxlX25hbWUgPSAnZGlkbmFQaHljaGUuZGF0YScKICAgICAgICAgICAgICAgIHByb3BlcnR5X25hbWUg
PSBzZWxmLmt3WydEaS1ETkEtUGh5Y2hlbSddLnNwbGl0KCc7JykKICAgICAgICAgICAgZWxzZToKICAg
ICAgICAgICAgICAgIGZpbGVfbmFtZSA9ICdkaXJuYVBoeWNoZS5kYXRhJwogICAgICAgICAgICAgICAg
cHJvcGVydHlfbmFtZSA9IHNlbGYua3dbJ0RpLVJOQS1QaHljaGVtJ10uc3BsaXQoJzsnKQogICAgICAg
ICAgICB0cnk6CiAgICAgICAgICAgICAgICBkYXRhX2ZpbGUgPSBvcy5wYXRoLnNwbGl0KG9zLnBhdGgu
cmVhbHBhdGgoX19maWxlX18pKVswXSArIHInXGRhdGFcJXMnICVmaWxlX25hbWUgaWYgcGxhdGZvcm0u
c3lzdGVtKCkgPT0gJ1dpbmRvd3MnIGVsc2Ugb3MucGF0aC5zcGxpdChvcy5wYXRoLnJlYWxwYXRoKF9f
ZmlsZV9fKSlbMF0gKyByJy9kYXRhLyVzJyAlZmlsZV9uYW1lCiAgICAgICAgICAgICAgICB3aXRoIG9w
ZW4oZGF0YV9maWxlLCAncmInKSBhcyBoYW5kbGU6CiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlf
ZGljdCA9IHBpY2tsZS5sb2FkKGhhbmRsZSkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBl
OgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAnQ291bGQgbm90IGZpbmQgdGhlIHBoeXNp
Y29jaGVtaWNhbCBwcm9wZXJ0aWVzIGZpbGUuJwogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAg
ICAgICAgICAgIG5sYWcgPSBzZWxmLmt3WydubGFnJ10KCiAgICAgICAgICAgICMgdmFsdWUgbm9ybWFs
aXphdGlvbgogICAgICAgICAgICBmb3IgcF9uYW1lIGluIHByb3BlcnR5X25hbWU6CiAgICAgICAgICAg
ICAgICB0bXAgPSBucC5hcnJheShwcm9wZXJ0eV9kaWN0W3BfbmFtZV0sIGR0eXBlPWZsb2F0KQogICAg
ICAgICAgICAgICAgcG1lYW4gPSBucC5hdmVyYWdlKHRtcCkKICAgICAgICAgICAgICAgIHBzdGQgPSBu
cC5zdGQodG1wKQogICAgICAgICAgICAgICAgcHJvcGVydHlfZGljdFtwX25hbWVdID0gWyhlbGVtIC0g
cG1lYW4pIC8gcHN0ZCBmb3IgZWxlbSBpbiB0bXBdCgogICAgICAgICAgICBiYXNlID0gJ0FDR1QnCiAg
ICAgICAgICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgICAgIGhlYWRlciA9IFsnU2FtcGxlTmFtZScs
ICdsYWJlbCddCiAgICAgICAgICAgIGZvciBwX25hbWUgaW4gcHJvcGVydHlfbmFtZToKICAgICAgICAg
ICAgICAgIGZvciBkIGluIHJhbmdlKDEsIG5sYWcgKyAxKToKICAgICAgICAgICAgICAgICAgICBoZWFk
ZXIuYXBwZW5kKHBfbmFtZSArICcubGFnJyArIHN0cihkKSkKICAgICAgICAgICAgZW5jb2RpbmdzLmFw
cGVuZChoZWFkZXIpCgogICAgICAgICAgICBBQURpY3QgPSB7fQogICAgICAgICAgICBBQV9saXN0ID0g
W2FhMSArIGFhMiBmb3IgYWExIGluIGJhc2UgZm9yIGFhMiBpbiBiYXNlXQogICAgICAgICAgICBmb3Ig
aSBpbiByYW5nZShsZW4oQUFfbGlzdCkpOgogICAgICAgICAgICAgICAgQUFEaWN0W0FBX2xpc3RbaV1d
ID0gaQoKICAgICAgICAgICAgZm9yIGVsZW0gaW4gc2VsZi5mYXN0YV9saXN0OgogICAgICAgICAgICAg
ICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gZWxlbVswXSwgcmUuc3ViKCctJywgJycsIGVsZW1bMV0p
LCBlbGVtWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAg
ICAgTiA9IGxlbihzZXF1ZW5jZSkgLSAxCiAgICAgICAgICAgICAgICBmb3IgcF9uYW1lIGluIHByb3Bl
cnR5X25hbWU6CiAgICAgICAgICAgICAgICAgICAgZm9yIGQgaW4gcmFuZ2UoMSwgbmxhZyArIDEpOgog
ICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBO
ID4gbmxhZzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHNkID0gc3VtKFtmbG9hdChw
cm9wZXJ0eV9kaWN0W3BfbmFtZV1bQUFEaWN0W3NlcXVlbmNlW2o6IGorMl1dXSkgKiBmbG9hdChwcm9w
ZXJ0eV9kaWN0W3BfbmFtZV1bQUFEaWN0W3NlcXVlbmNlW2orZDogaitkKzJdXV0pIGZvciBqIGluIHJh
bmdlKE4tZCldKSAvIChOIC0gZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgYXRzZCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAg
ZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXRzZCA9IDAK
ICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoYXRzZCkKICAgICAgICAgICAgICAgIGVu
Y29kaW5ncy5hcHBlbmQoY29kZSkKCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5h
cnJheShbXSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5n
cywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXku
c2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBd
IC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2Rpbmdf
YXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAg
ZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24g
YXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJu
IEZhbHNlCgogICAgZGVmIE1vcmFuKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5l
bmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQoKICAgICAgICAgICAgaWYgc2VsZi5zZXF1ZW5jZV90
eXBlID09ICdETkEnOgogICAgICAgICAgICAgICAgZmlsZV9uYW1lID0gJ2RpZG5hUGh5Y2hlLmRhdGEn
CiAgICAgICAgICAgICAgICBwcm9wZXJ0eV9uYW1lID0gc2VsZi5rd1snRGktRE5BLVBoeWNoZW0nXS5z
cGxpdCgnOycpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBmaWxlX25hbWUgPSAnZGly
bmFQaHljaGUuZGF0YScKICAgICAgICAgICAgICAgIHByb3BlcnR5X25hbWUgPSBzZWxmLmt3WydEaS1S
TkEtUGh5Y2hlbSddLnNwbGl0KCc7JykKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZGF0
YV9maWxlID0gb3MucGF0aC5zcGxpdChvcy5wYXRoLnJlYWxwYXRoKF9fZmlsZV9fKSlbCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgMF0gKyByJ1xkYXRhXCVzJyAlIGZpbGVfbmFtZSBpZiBwbGF0
Zm9ybS5zeXN0ZW0oKSA9PSAnV2luZG93cycgZWxzZSBcCiAgICAgICAgICAgICAgICBvcy5wYXRoLnNw
bGl0KG9zLnBhdGgucmVhbHBhdGgoX19maWxlX18pKVswXSArIHInL2RhdGEvJXMnICUgZmlsZV9uYW1l
CiAgICAgICAgICAgICAgICB3aXRoIG9wZW4oZGF0YV9maWxlLCAncmInKSBhcyBoYW5kbGU6CiAgICAg
ICAgICAgICAgICAgICAgcHJvcGVydHlfZGljdCA9IHBpY2tsZS5sb2FkKGhhbmRsZSkKICAgICAgICAg
ICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSAn
Q291bGQgbm90IGZpbmQgdGhlIHBoeXNpY29jaGVtaWNhbCBwcm9wZXJ0aWVzIGZpbGUuJwogICAgICAg
ICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIG5sYWcgPSBzZWxmLmt3WydubGFnJ10KCiAg
ICAgICAgICAgICMgdmFsdWUgbm9ybWFsaXphdGlvbgogICAgICAgICAgICBmb3IgcF9uYW1lIGluIHBy
b3BlcnR5X25hbWU6CiAgICAgICAgICAgICAgICB0bXAgPSBucC5hcnJheShwcm9wZXJ0eV9kaWN0W3Bf
bmFtZV0sIGR0eXBlPWZsb2F0KQogICAgICAgICAgICAgICAgcG1lYW4gPSBucC5hdmVyYWdlKHRtcCkK
ICAgICAgICAgICAgICAgIHBzdGQgPSBucC5zdGQodG1wKQogICAgICAgICAgICAgICAgcHJvcGVydHlf
ZGljdFtwX25hbWVdID0gWyhlbGVtIC0gcG1lYW4pIC8gcHN0ZCBmb3IgZWxlbSBpbiB0bXBdCgogICAg
ICAgICAgICBiYXNlID0gJ0FDR1QnCiAgICAgICAgICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgICAg
IGhlYWRlciA9IFsnU2FtcGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgICAgIGZvciBwX25hbWUgaW4g
cHJvcGVydHlfbmFtZToKICAgICAgICAgICAgICAgIGZvciBkIGluIHJhbmdlKDEsIG5sYWcgKyAxKToK
ICAgICAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKHBfbmFtZSArICcubGFnJyArIHN0cihkKSkK
ICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgogICAgICAgICAgICBBQURpY3QgPSB7
fQogICAgICAgICAgICBBQV9saXN0ID0gW2FhMSArIGFhMiBmb3IgYWExIGluIGJhc2UgZm9yIGFhMiBp
biBiYXNlXQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oQUFfbGlzdCkpOgogICAgICAgICAg
ICAgICAgQUFEaWN0W0FBX2xpc3RbaV1dID0gaQoKICAgICAgICAgICAgZm9yIGVsZW0gaW4gc2VsZi5m
YXN0YV9saXN0OgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gZWxlbVswXSwg
cmUuc3ViKCctJywgJycsIGVsZW1bMV0pLCBlbGVtWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25h
bWUsIGxhYmVsXQogICAgICAgICAgICAgICAgTiA9IGxlbihzZXF1ZW5jZSkgLSAxCiAgICAgICAgICAg
ICAgICBmb3IgcF9uYW1lIGluIHByb3BlcnR5X25hbWU6CiAgICAgICAgICAgICAgICAgICAgcG1lYW4g
PSBzdW0oW3Byb3BlcnR5X2RpY3RbcF9uYW1lXVtBQURpY3Rbc2VxdWVuY2VbaTogaSsyXV1dIGZvciBp
IGluIHJhbmdlKE4pXSkgLyBOCiAgICAgICAgICAgICAgICAgICAgZm9yIGQgaW4gcmFuZ2UoMSwgbmxh
ZyArIDEpOgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBJZHVwID0gc3VtKFsocHJvcGVydHlfZGljdFtwX25hbWVdW0FBRGljdFtzZXF1ZW5jZVtqOiBq
KzJdXV0gLSBwbWVhbikgKiAocHJvcGVydHlfZGljdFtwX25hbWVdW0FBRGljdFtzZXF1ZW5jZVtqK2Q6
IGorZCsyXV1dIC0gcG1lYW4pIGZvciBqIGluIHJhbmdlKE4tZCldKSAvIChOIC0gZCkKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIElkZG93biA9IHN1bShbKHByb3BlcnR5X2RpY3RbcF9uYW1lXVtBQURp
Y3Rbc2VxdWVuY2VbajogaisyXV1dIC0gcG1lYW4pICoqIDIgZm9yIGogaW4gcmFuZ2UoTi1kKV0pIC8g
TgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoSWR1cC9JZGRvd24pCiAgICAg
ICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGNvZGUuYXBwZW5kKDApCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNv
ZGUpCgogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCiAgICAgICAg
ICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAg
ICAgICAgICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAg
ICAgIHNlbGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAg
ZGVsIGVuY29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4g
MToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
ICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAg
IHNlbGYuZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBH
ZWFyeShzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBu
cC5hcnJheShbXSkKCiAgICAgICAgICAgIGlmIHNlbGYuc2VxdWVuY2VfdHlwZSA9PSAnRE5BJzoKICAg
ICAgICAgICAgICAgIGZpbGVfbmFtZSA9ICdkaWRuYVBoeWNoZS5kYXRhJwogICAgICAgICAgICAgICAg
cHJvcGVydHlfbmFtZSA9IHNlbGYua3dbJ0RpLUROQS1QaHljaGVtJ10uc3BsaXQoJzsnKQogICAgICAg
ICAgICBlbHNlOgogICAgICAgICAgICAgICAgZmlsZV9uYW1lID0gJ2Rpcm5hUGh5Y2hlLmRhdGEnCiAg
ICAgICAgICAgICAgICBwcm9wZXJ0eV9uYW1lID0gc2VsZi5rd1snRGktUk5BLVBoeWNoZW0nXS5zcGxp
dCgnOycpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGRhdGFfZmlsZSA9IG9zLnBhdGgu
c3BsaXQob3MucGF0aC5yZWFscGF0aChfX2ZpbGVfXykpWwogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIDBdICsgcidcZGF0YVwlcycgJSBmaWxlX25hbWUgaWYgcGxhdGZvcm0uc3lzdGVtKCkgPT0g
J1dpbmRvd3MnIGVsc2UgXAogICAgICAgICAgICAgICAgICAgIG9zLnBhdGguc3BsaXQob3MucGF0aC5y
ZWFscGF0aChfX2ZpbGVfXykpWzBdICsgcicvZGF0YS8lcycgJSBmaWxlX25hbWUKICAgICAgICAgICAg
ICAgIHdpdGggb3BlbihkYXRhX2ZpbGUsICdyYicpIGFzIGhhbmRsZToKICAgICAgICAgICAgICAgICAg
ICBwcm9wZXJ0eV9kaWN0ID0gcGlja2xlLmxvYWQoaGFuZGxlKQogICAgICAgICAgICBleGNlcHQgRXhj
ZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9ICdDb3VsZCBub3QgZmlu
ZCB0aGUgcGh5c2ljb2NoZW1pY2FsIHByb3BlcnRpZXMgZmlsZS4nCiAgICAgICAgICAgICAgICByZXR1
cm4gRmFsc2UKICAgICAgICAgICAgbmxhZyA9IHNlbGYua3dbJ25sYWcnXQoKICAgICAgICAgICAgIyB2
YWx1ZSBub3JtYWxpemF0aW9uCiAgICAgICAgICAgIGZvciBwX25hbWUgaW4gcHJvcGVydHlfbmFtZToK
ICAgICAgICAgICAgICAgIHRtcCA9IG5wLmFycmF5KHByb3BlcnR5X2RpY3RbcF9uYW1lXSwgZHR5cGU9
ZmxvYXQpCiAgICAgICAgICAgICAgICBwbWVhbiA9IG5wLmF2ZXJhZ2UodG1wKQogICAgICAgICAgICAg
ICAgcHN0ZCA9IG5wLnN0ZCh0bXApCiAgICAgICAgICAgICAgICBwcm9wZXJ0eV9kaWN0W3BfbmFtZV0g
PSBbKGVsZW0gLSBwbWVhbikgLyBwc3RkIGZvciBlbGVtIGluIHRtcF0KCiAgICAgICAgICAgIGJhc2Ug
PSAnQUNHVCcKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAgICAgICAgaGVhZGVyID0gWydT
YW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIHBfbmFtZSBpbiBwcm9wZXJ0eV9uYW1l
OgogICAgICAgICAgICAgICAgZm9yIGQgaW4gcmFuZ2UoMSwgbmxhZyArIDEpOgogICAgICAgICAgICAg
ICAgICAgIGhlYWRlci5hcHBlbmQocF9uYW1lICsgJy5sYWcnICsgc3RyKGQpKQogICAgICAgICAgICBl
bmNvZGluZ3MuYXBwZW5kKGhlYWRlcikKCiAgICAgICAgICAgIEFBRGljdCA9IHt9CiAgICAgICAgICAg
IEFBX2xpc3QgPSBbYWExICsgYWEyIGZvciBhYTEgaW4gYmFzZSBmb3IgYWEyIGluIGJhc2VdCiAgICAg
ICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihBQV9saXN0KSk6CiAgICAgICAgICAgICAgICBBQURpY3Rb
QUFfbGlzdFtpXV0gPSBpCgogICAgICAgICAgICBmb3IgZWxlbSBpbiBzZWxmLmZhc3RhX2xpc3Q6CiAg
ICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBlbGVtWzBdLCByZS5zdWIoJy0nLCAn
JywgZWxlbVsxXSksIGVsZW1bMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAg
ICAgICAgICAgICAgICBOID0gbGVuKHNlcXVlbmNlKSAtIDEKICAgICAgICAgICAgICAgIGZvciBwX25h
bWUgaW4gcHJvcGVydHlfbmFtZToKICAgICAgICAgICAgICAgICAgICBwbWVhbiA9IHN1bShbcHJvcGVy
dHlfZGljdFtwX25hbWVdW0FBRGljdFtzZXF1ZW5jZVtpOiBpICsgMl1dXSBmb3IgaSBpbiByYW5nZShO
KV0pIC8gTgogICAgICAgICAgICAgICAgICAgIGZvciBkIGluIHJhbmdlKDEsIG5sYWcgKyAxKToKICAg
ICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2R1cCA9
IHN1bShbKHByb3BlcnR5X2RpY3RbcF9uYW1lXVtBQURpY3Rbc2VxdWVuY2VbajogaisyXV1dIC0gcHJv
cGVydHlfZGljdFtwX25hbWVdW0FBRGljdFtzZXF1ZW5jZVtqK2Q6IGorZCsyXV1dKSAqKiAyIGZvciBq
IGluIHJhbmdlKE4gLSBkKV0pIC8gKDIgKiAoTiAtIGQpKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgQ2Rkb3duID0gc3VtKFsocHJvcGVydHlfZGljdFtwX25hbWVdW0FBRGljdFtzZXF1ZW5jZVtqOiBq
KzJdXV0gLSBwbWVhbikgKiogMiBmb3IgaiBpbiByYW5nZShOIC0gZCldKSAvIChOIC0gMSkKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKENkdXAgLyBDZGRvd24pCiAgICAgICAgICAg
ICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGNvZGUuYXBwZW5kKDApCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCgog
ICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCiAgICAgICAgICAgIHNl
bGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAg
ICAgc2VsZi5jb2x1bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNl
bGYucm93ID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVu
Y29kaW5ncwogICAgICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAg
ICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBy
ZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYu
ZXJyb3JfbXNnID0gc3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBnZW5lcmF0
ZVByb3BlcnR5UGFpcnMoc2VsZiwgbXlQcm9wZXJ0eU5hbWUpOgogICAgICAgIHBhaXJzID0gW10KICAg
ICAgICBmb3IgaSBpbiByYW5nZShsZW4obXlQcm9wZXJ0eU5hbWUpKToKICAgICAgICAgICAgZm9yIGog
aW4gcmFuZ2UoaSArIDEsIGxlbihteVByb3BlcnR5TmFtZSkpOgogICAgICAgICAgICAgICAgcGFpcnMu
YXBwZW5kKFtteVByb3BlcnR5TmFtZVtpXSwgbXlQcm9wZXJ0eU5hbWVbal1dKQogICAgICAgICAgICAg
ICAgcGFpcnMuYXBwZW5kKFtteVByb3BlcnR5TmFtZVtqXSwgbXlQcm9wZXJ0eU5hbWVbaV1dKQogICAg
ICAgIHJldHVybiBwYWlycwoKICAgIGRlZiBtYWtlX2FjX3ZlY3RvcihzZWxmLCBteVByb3BlcnR5TmFt
ZSwgbXlQcm9wZXJ0eVZhbHVlLCBrbWVyKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGZhc3RhcyA9
IHNlbGYuZmFzdGFfbGlzdAogICAgICAgICAgICBsYWcgPSBzZWxmLmt3WydubGFnJ10KCiAgICAgICAg
ICAgIGVuY29kaW5ncyA9IFtdCiAgICAgICAgICAgIG15SW5kZXggPSBzZWxmLm15RGlJbmRleCBpZiBr
bWVyID09IDIgZWxzZSBzZWxmLm15VHJpSW5kZXgKICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVO
YW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIHAgaW4gbXlQcm9wZXJ0eU5hbWU6CiAgICAgICAg
ICAgICAgICBmb3IgbCBpbiByYW5nZSgxLCBsYWcgKyAxKToKICAgICAgICAgICAgICAgICAgICBoZWFk
ZXIuYXBwZW5kKCclcy5sYWclZCcgJSAocCwgbCkpCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQo
aGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gZmFzdGFzOgogICAgICAgICAgICAgICAgIyBwcmlu
dChpWzBdKQogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3Vi
KCctJywgJycsIGlbMV0pLCBpWzJdCiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQoK
ICAgICAgICAgICAgICAgIGZvciBwIGluIG15UHJvcGVydHlOYW1lOgogICAgICAgICAgICAgICAgICAg
IG1lYW5WYWx1ZSA9IDAKICAgICAgICAgICAgICAgICAgICAjIGZvciBqIGluIHJhbmdlKGxlbihzZXF1
ZW5jZSkgLSBrbWVyKToKICAgICAgICAgICAgICAgICAgICBmb3IgaiBpbiByYW5nZShsZW4oc2VxdWVu
Y2UpIC0ga21lciArIDEpOgogICAgICAgICAgICAgICAgICAgICAgICBtZWFuVmFsdWUgPSBtZWFuVmFs
dWUgKyBmbG9hdChteVByb3BlcnR5VmFsdWVbcF1bbXlJbmRleFtzZXF1ZW5jZVtqOiBqICsga21lcl1d
XSkKICAgICAgICAgICAgICAgICAgICAjIG1lYW5WYWx1ZSA9IG1lYW5WYWx1ZSAvIChsZW4oc2VxdWVu
Y2UpIC0ga21lcikKICAgICAgICAgICAgICAgICAgICBtZWFuVmFsdWUgPSBtZWFuVmFsdWUgLyAobGVu
KHNlcXVlbmNlKSAtIGttZXIgKyAxKQoKICAgICAgICAgICAgICAgICAgICBmb3IgbCBpbiByYW5nZSgx
LCBsYWcgKyAxKToKICAgICAgICAgICAgICAgICAgICAgICAgYWNWYWx1ZSA9IDAKICAgICAgICAgICAg
ICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UobGVuKHNlcXVlbmNlKSAtIGttZXIgLSBsICsgMSk6CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAjIGFjVmFsdWUgPSBhY1ZhbHVlICsgKGZsb2F0KG15UHJv
cGVydHlWYWx1ZVtwXVtteUluZGV4W3NlcXVlbmNlW2o6IGora21lcl1dXSkgLSBtZWFuVmFsdWUpICog
KGZsb2F0KG15UHJvcGVydHlWYWx1ZVtwXVtteUluZGV4W3NlcXVlbmNlW2orbDpqK2wra21lcl1dXSkp
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY1ZhbHVlID0gYWNWYWx1ZSArIChmbG9hdChteVBy
b3BlcnR5VmFsdWVbcF1bbXlJbmRleFtzZXF1ZW5jZVtqOiBqICsga21lcl1dXSkgLSBtZWFuVmFsdWUp
ICogKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdChteVByb3BlcnR5VmFs
dWVbcF1bbXlJbmRleFtzZXF1ZW5jZVtqICsgbDpqICsgbCArIGttZXJdXV0pIC0gbWVhblZhbHVlKQog
ICAgICAgICAgICAgICAgICAgICAgICBhY1ZhbHVlID0gYWNWYWx1ZSAvIChsZW4oc2VxdWVuY2UpIC0g
a21lciAtIGwgKyAxKQogICAgICAgICAgICAgICAgICAgICAgICAjIHByaW50KGFjVmFsdWUpCiAgICAg
ICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKGFjVmFsdWUpCiAgICAgICAgICAgICAgICBlbmNv
ZGluZ3MuYXBwZW5kKGNvZGUpCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJh
eShbXSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywg
ZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hh
cGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0g
MQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJy
YXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxz
ZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMg
ZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZh
bHNlCgogICAgZGVmIG1ha2VfY2NfdmVjdG9yKHNlbGYsIG15UHJvcGVydHlOYW1lLCBteVByb3BlcnR5
VmFsdWUsIGttZXIpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZmFzdGFzID0gc2VsZi5mYXN0YV9s
aXN0CiAgICAgICAgICAgIGxhZyA9IHNlbGYua3dbJ25sYWcnXQoKICAgICAgICAgICAgZW5jb2Rpbmdz
ID0gW10KICAgICAgICAgICAgbXlJbmRleCA9IHNlbGYubXlEaUluZGV4IGlmIGttZXIgPT0gMiBlbHNl
IHNlbGYubXlUcmlJbmRleAogICAgICAgICAgICBpZiBsZW4obXlQcm9wZXJ0eU5hbWUpIDwgMjoKICAg
ICAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0gJ3R3byBvciBtb3JlIHByb3BlcnR5IGFyZSBuZWVk
ZWQgZm9yIGNyb3NzIGNvdmFyaWFuY2UgKGkuZS4gRENDIGFuZCBUQ0MpIGRlc2NyaXB0b3JzJwogICAg
ICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIHByb3BlcnR5UGFpcnMgPSBzZWxmLmdl
bmVyYXRlUHJvcGVydHlQYWlycyhteVByb3BlcnR5TmFtZSkKICAgICAgICAgICAgaGVhZGVyID0gWydT
YW1wbGVOYW1lJywgJ2xhYmVsJ10gKyBbblswXSArICctJyArIG5bMV0gKyAnLWxhZy4nICsgc3RyKGwp
IGZvciBuIGluIHByb3BlcnR5UGFpcnMgZm9yIGwgaW4KICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcmFuZ2UoMSwgbGFnICsgMSldCiAgICAgICAgICAgIGVuY29kaW5n
cy5hcHBlbmQoaGVhZGVyKQoKICAgICAgICAgICAgZm9yIGkgaW4gZmFzdGFzOgogICAgICAgICAgICAg
ICAgbmFtZSwgc2VxdWVuY2UsIGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBpWzJd
CiAgICAgICAgICAgICAgICBjb2RlID0gW25hbWUsIGxhYmVsXQoKICAgICAgICAgICAgICAgIGZvciBw
YWlyIGluIHByb3BlcnR5UGFpcnM6CiAgICAgICAgICAgICAgICAgICAgbWVhblAxID0gMAogICAgICAg
ICAgICAgICAgICAgIG1lYW5QMiA9IDAKICAgICAgICAgICAgICAgICAgICAjIGZvciBqIGluIHJhbmdl
KGxlbihzZXF1ZW5jZSkgLSBrbWVyKToKICAgICAgICAgICAgICAgICAgICBmb3IgaiBpbiByYW5nZShs
ZW4oc2VxdWVuY2UpIC0ga21lciArIDEpOgogICAgICAgICAgICAgICAgICAgICAgICBtZWFuUDEgPSBt
ZWFuUDEgKyBmbG9hdChteVByb3BlcnR5VmFsdWVbcGFpclswXV1bbXlJbmRleFtzZXF1ZW5jZVtqOiBq
ICsga21lcl1dXSkKICAgICAgICAgICAgICAgICAgICAgICAgbWVhblAyID0gbWVhblAyICsgZmxvYXQo
bXlQcm9wZXJ0eVZhbHVlW3BhaXJbMV1dW215SW5kZXhbc2VxdWVuY2VbajogaiArIGttZXJdXV0pCiAg
ICAgICAgICAgICAgICAgICAgIyBtZWFuUDEgPSBtZWFuUDEgLyAobGVuKHNlcXVlbmNlKSAtIGttZXIp
CiAgICAgICAgICAgICAgICAgICAgIyBtZWFuUDIgPSBtZWFuUDIgLyAobGVuKHNlcXVlbmNlKSAtIGtt
ZXIpCiAgICAgICAgICAgICAgICAgICAgbWVhblAxID0gbWVhblAxIC8gKGxlbihzZXF1ZW5jZSkgLSBr
bWVyICsgMSkKICAgICAgICAgICAgICAgICAgICBtZWFuUDIgPSBtZWFuUDIgLyAobGVuKHNlcXVlbmNl
KSAtIGttZXIgKyAxKQoKICAgICAgICAgICAgICAgICAgICBmb3IgbCBpbiByYW5nZSgxLCBsYWcgKyAx
KToKICAgICAgICAgICAgICAgICAgICAgICAgY2NWYWx1ZSA9IDAKICAgICAgICAgICAgICAgICAgICAg
ICAgZm9yIGogaW4gcmFuZ2UobGVuKHNlcXVlbmNlKSAtIGttZXIgLSBsICsgMSk6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBjY1ZhbHVlID0gY2NWYWx1ZSArICgKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZmxvYXQobXlQcm9wZXJ0eVZhbHVlW3BhaXJbMF1dW215SW5kZXhbc2VxdWVu
Y2VbajogaiArIGttZXJdXV0pIC0gbWVhblAxKSAqICgKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBmbG9hdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgbXlQcm9wZXJ0eVZhbHVlW3BhaXJbMV1dW215SW5kZXhbc2VxdWVuY2VbaiArIGw6
aiArIGwgKyBrbWVyXV1dKSAtIG1lYW5QMikKICAgICAgICAgICAgICAgICAgICAgICAgY2NWYWx1ZSA9
IGNjVmFsdWUgLyAobGVuKHNlcXVlbmNlKSAtIGttZXIgLSBsICsgMSkKICAgICAgICAgICAgICAgICAg
ICAgICAgY29kZS5hcHBlbmQoY2NWYWx1ZSkKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQo
Y29kZSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAg
ICAgICBzZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAg
ICAgICAgICAgIHNlbGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAg
ICAgICBzZWxmLnJvdyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAg
IGRlbCBlbmNvZGluZ3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+
IDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAg
ICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAg
ICBzZWxmLmVycm9yX21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYg
bWFrZV9hY2NfdmVjdG9yKHNlbGYsIG15UHJvcGVydHlOYW1lLCBteVByb3BlcnR5VmFsdWUsIGttZXIp
OgogICAgICAgIHRyeToKICAgICAgICAgICAgZmFzdGFzID0gc2VsZi5mYXN0YV9saXN0CiAgICAgICAg
ICAgIGxhZyA9IHNlbGYua3dbJ25sYWcnXQoKICAgICAgICAgICAgZW5jb2RpbmdzID0gW10KICAgICAg
ICAgICAgbXlJbmRleCA9IHNlbGYubXlEaUluZGV4IGlmIGttZXIgPT0gMiBlbHNlIHNlbGYubXlUcmlJ
bmRleAogICAgICAgICAgICBpZiBsZW4obXlQcm9wZXJ0eU5hbWUpIDwgMjoKICAgICAgICAgICAgICAg
IHNlbGYuZXJyb3JfbXNnID0gJ3R3byBvciBtb3JlIHByb3BlcnR5IGFyZSBuZWVkZWQgZm9yIGNyb3Nz
IGNvdmFyaWFuY2UgKGkuZS4gRENDIGFuZCBUQ0MpIGRlc2NyaXB0b3JzJwogICAgICAgICAgICAgICAg
cmV0dXJuIEZhbHNlCgogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5hbWUnLCAnbGFiZWwnXQog
ICAgICAgICAgICBmb3IgcCBpbiBteVByb3BlcnR5TmFtZToKICAgICAgICAgICAgICAgIGZvciBsIGlu
IHJhbmdlKDEsIGxhZyArIDEpOgogICAgICAgICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoJyVzLmxh
ZyVkJyAlIChwLCBsKSkKICAgICAgICAgICAgcHJvcGVydHlQYWlycyA9IHNlbGYuZ2VuZXJhdGVQcm9w
ZXJ0eVBhaXJzKG15UHJvcGVydHlOYW1lKQogICAgICAgICAgICBoZWFkZXIgPSBoZWFkZXIgKyBbblsw
XSArICctJyArIG5bMV0gKyAnLWxhZy4nICsgc3RyKGwpIGZvciBuIGluIHByb3BlcnR5UGFpcnMgZm9y
IGwgaW4gcmFuZ2UoMSwgbGFnICsgMSldCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVy
KQoKICAgICAgICAgICAgZm9yIGkgaW4gZmFzdGFzOgogICAgICAgICAgICAgICAgbmFtZSwgc2VxdWVu
Y2UsIGxhYmVsID0gaVswXSwgcmUuc3ViKCctJywgJycsIGlbMV0pLCBpWzJdCiAgICAgICAgICAgICAg
ICBjb2RlID0gW25hbWUsIGxhYmVsXQogICAgICAgICAgICAgICAgIyMgQXV0byBjb3ZhcmlhbmNlCiAg
ICAgICAgICAgICAgICBmb3IgcCBpbiBteVByb3BlcnR5TmFtZToKICAgICAgICAgICAgICAgICAgICBt
ZWFuVmFsdWUgPSAwCiAgICAgICAgICAgICAgICAgICAgIyBmb3IgaiBpbiByYW5nZShsZW4oc2VxdWVu
Y2UpIC0ga21lcik6CiAgICAgICAgICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UobGVuKHNlcXVlbmNl
KSAtIGttZXIgKyAxKToKICAgICAgICAgICAgICAgICAgICAgICAgbWVhblZhbHVlID0gbWVhblZhbHVl
ICsgZmxvYXQobXlQcm9wZXJ0eVZhbHVlW3BdW215SW5kZXhbc2VxdWVuY2VbajogaiArIGttZXJdXV0p
CiAgICAgICAgICAgICAgICAgICAgIyBtZWFuVmFsdWUgPSBtZWFuVmFsdWUgLyAobGVuKHNlcXVlbmNl
KSAtIGttZXIpCiAgICAgICAgICAgICAgICAgICAgbWVhblZhbHVlID0gbWVhblZhbHVlIC8gKGxlbihz
ZXF1ZW5jZSkgLSBrbWVyICsgMSkKCiAgICAgICAgICAgICAgICAgICAgZm9yIGwgaW4gcmFuZ2UoMSwg
bGFnICsgMSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGFjVmFsdWUgPSAwCiAgICAgICAgICAgICAg
ICAgICAgICAgIGZvciBqIGluIHJhbmdlKGxlbihzZXF1ZW5jZSkgLSBrbWVyIC0gbCArIDEpOgogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIyBhY1ZhbHVlID0gYWNWYWx1ZSArIChmbG9hdChteVByb3Bl
cnR5VmFsdWVbcF1bbXlJbmRleFtzZXF1ZW5jZVtqOiBqK2ttZXJdXV0pIC0gbWVhblZhbHVlKSAqIChm
bG9hdChteVByb3BlcnR5VmFsdWVbcF1bbXlJbmRleFtzZXF1ZW5jZVtqK2w6aitsK2ttZXJdXV0pKQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNWYWx1ZSA9IGFjVmFsdWUgKyAoZmxvYXQobXlQcm9w
ZXJ0eVZhbHVlW3BdW215SW5kZXhbc2VxdWVuY2VbajogaiArIGttZXJdXV0pIC0gbWVhblZhbHVlKSAq
ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQobXlQcm9wZXJ0eVZhbHVl
W3BdW215SW5kZXhbc2VxdWVuY2VbaiArIGw6aiArIGwgKyBrbWVyXV1dKSAtIG1lYW5WYWx1ZSkKICAg
ICAgICAgICAgICAgICAgICAgICAgYWNWYWx1ZSA9IGFjVmFsdWUgLyAobGVuKHNlcXVlbmNlKSAtIGtt
ZXIgLSBsICsgMSkKICAgICAgICAgICAgICAgICAgICAgICAgIyBwcmludChhY1ZhbHVlKQogICAgICAg
ICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChhY1ZhbHVlKQoKICAgICAgICAgICAgICAgICMjIENy
b3NzIGNvdmFyaWFuY2UKICAgICAgICAgICAgICAgIGZvciBwYWlyIGluIHByb3BlcnR5UGFpcnM6CiAg
ICAgICAgICAgICAgICAgICAgbWVhblAxID0gMAogICAgICAgICAgICAgICAgICAgIG1lYW5QMiA9IDAK
ICAgICAgICAgICAgICAgICAgICAjIGZvciBqIGluIHJhbmdlKGxlbihzZXF1ZW5jZSkgLSBrbWVyKToK
ICAgICAgICAgICAgICAgICAgICBmb3IgaiBpbiByYW5nZShsZW4oc2VxdWVuY2UpIC0ga21lciArIDEp
OgogICAgICAgICAgICAgICAgICAgICAgICBtZWFuUDEgPSBtZWFuUDEgKyBmbG9hdChteVByb3BlcnR5
VmFsdWVbcGFpclswXV1bbXlJbmRleFtzZXF1ZW5jZVtqOiBqICsga21lcl1dXSkKICAgICAgICAgICAg
ICAgICAgICAgICAgbWVhblAyID0gbWVhblAyICsgZmxvYXQobXlQcm9wZXJ0eVZhbHVlW3BhaXJbMV1d
W215SW5kZXhbc2VxdWVuY2VbajogaiArIGttZXJdXV0pCiAgICAgICAgICAgICAgICAgICAgIyBtZWFu
UDEgPSBtZWFuUDEgLyAobGVuKHNlcXVlbmNlKSAtIGttZXIpCiAgICAgICAgICAgICAgICAgICAgIyBt
ZWFuUDIgPSBtZWFuUDIgLyAobGVuKHNlcXVlbmNlKSAtIGttZXIpCiAgICAgICAgICAgICAgICAgICAg
bWVhblAxID0gbWVhblAxIC8gKGxlbihzZXF1ZW5jZSkgLSBrbWVyICsgMSkKICAgICAgICAgICAgICAg
ICAgICBtZWFuUDIgPSBtZWFuUDIgLyAobGVuKHNlcXVlbmNlKSAtIGttZXIgKyAxKQoKICAgICAgICAg
ICAgICAgICAgICBmb3IgbCBpbiByYW5nZSgxLCBsYWcgKyAxKToKICAgICAgICAgICAgICAgICAgICAg
ICAgY2NWYWx1ZSA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UobGVuKHNl
cXVlbmNlKSAtIGttZXIgLSBsICsgMSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjY1ZhbHVl
ID0gY2NWYWx1ZSArICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQobXlQ
cm9wZXJ0eVZhbHVlW3BhaXJbMF1dW215SW5kZXhbc2VxdWVuY2VbajogaiArIGttZXJdXV0pIC0gbWVh
blAxKSAqICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCgK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlQcm9wZXJ0eVZh
bHVlW3BhaXJbMV1dW215SW5kZXhbc2VxdWVuY2VbaiArIGw6aiArIGwgKyBrbWVyXV1dKSAtIG1lYW5Q
MikKICAgICAgICAgICAgICAgICAgICAgICAgY2NWYWx1ZSA9IGNjVmFsdWUgLyAobGVuKHNlcXVlbmNl
KSAtIGttZXIgLSBsICsgMSkKICAgICAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoY2NWYWx1
ZSkKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKICAgICAgICAgICAgc2VsZi5l
bmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVuY29kaW5nX2FycmF5
ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNlbGYuY29sdW1uID0g
c2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJvdyA9IHNlbGYuZW5j
b2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGluZ3MKICAgICAgICAg
ICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAgICAgICAgICByZXR1
cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAg
ICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9yX21zZyA9IHN0cihl
KQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgZ2V0X2ttZXJfZnJlcXVlbmN5KHNlbGYs
IHNlcXVlbmNlLCBrbWVyKToKICAgICAgICBiYXNlU3ltYm9sID0gJ0FDR1QnCiAgICAgICAgbXlGcmVx
dWVuY3kgPSB7fQogICAgICAgIGZvciBwZXAgaW4gWycnLmpvaW4oaSkgZm9yIGkgaW4gbGlzdChpdGVy
dG9vbHMucHJvZHVjdChiYXNlU3ltYm9sLCByZXBlYXQ9a21lcikpXToKICAgICAgICAgICAgbXlGcmVx
dWVuY3lbcGVwXSA9IDAKICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oc2VxdWVuY2UpIC0ga21lciAr
IDEpOgogICAgICAgICAgICBteUZyZXF1ZW5jeVtzZXF1ZW5jZVtpOiBpICsga21lcl1dID0gbXlGcmVx
dWVuY3lbc2VxdWVuY2VbaTogaSArIGttZXJdXSArIDEKICAgICAgICBmb3Iga2V5IGluIG15RnJlcXVl
bmN5OgogICAgICAgICAgICBteUZyZXF1ZW5jeVtrZXldID0gbXlGcmVxdWVuY3lba2V5XSAvIChsZW4o
c2VxdWVuY2UpIC0ga21lciArIDEpCiAgICAgICAgcmV0dXJuIG15RnJlcXVlbmN5CgogICAgZGVmIGNv
cnJlbGF0aW9uRnVuY3Rpb24oc2VsZiwgcGVwQSwgcGVwQiwgbXlJbmRleCwgbXlQcm9wZXJ0eU5hbWUs
IG15UHJvcGVydHlWYWx1ZSk6CiAgICAgICAgQ0MgPSAwCiAgICAgICAgZm9yIHAgaW4gbXlQcm9wZXJ0
eU5hbWU6CiAgICAgICAgICAgIENDID0gQ0MgKyAoZmxvYXQobXlQcm9wZXJ0eVZhbHVlW3BdW215SW5k
ZXhbcGVwQV1dKSAtIGZsb2F0KG15UHJvcGVydHlWYWx1ZVtwXVtteUluZGV4W3BlcEJdXSkpICoqIDIK
ICAgICAgICByZXR1cm4gQ0MgLyBsZW4obXlQcm9wZXJ0eU5hbWUpCgogICAgZGVmIGNvcnJlbGF0aW9u
RnVuY3Rpb25fdHlwZTIoc2VsZiwgcGVwQSwgcGVwQiwgbXlJbmRleCwgbXlQcm9wZXJ0eU5hbWUsIG15
UHJvcGVydHlWYWx1ZSk6CiAgICAgICAgQ0MgPSAwCiAgICAgICAgZm9yIHAgaW4gbXlQcm9wZXJ0eU5h
bWU6CiAgICAgICAgICAgIENDID0gQ0MgKyBmbG9hdChteVByb3BlcnR5VmFsdWVbcF1bbXlJbmRleFtw
ZXBBXV0pICogZmxvYXQobXlQcm9wZXJ0eVZhbHVlW3BdW215SW5kZXhbcGVwQl1dKQogICAgICAgIHJl
dHVybiBDQwoKICAgIGRlZiBnZXRfdGhldGFfYXJyYXkoc2VsZiwgbXlJbmRleCwgbXlQcm9wZXJ0eU5h
bWUsIG15UHJvcGVydHlWYWx1ZSwgbGFtYWRhVmFsdWUsIHNlcXVlbmNlLCBrbWVyKToKICAgICAgICB0
aGV0YUFycmF5ID0gW10KICAgICAgICBmb3IgdG1wTGFtYWRhIGluIHJhbmdlKGxhbWFkYVZhbHVlKToK
ICAgICAgICAgICAgdGhldGEgPSAwCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihzZXF1ZW5j
ZSkgLSB0bXBMYW1hZGEgLSBrbWVyKToKICAgICAgICAgICAgICAgIHRoZXRhID0gdGhldGEgKyBzZWxm
LmNvcnJlbGF0aW9uRnVuY3Rpb24oc2VxdWVuY2VbaTppICsga21lcl0sCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlW2kgKyB0bXBMYW1h
ZGEgKyAxOiBpICsgdG1wTGFtYWRhICsgMSArIGttZXJdLCBteUluZGV4LAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBteVByb3BlcnR5TmFtZSwgbXlQ
cm9wZXJ0eVZhbHVlKQogICAgICAgICAgICB0aGV0YUFycmF5LmFwcGVuZCh0aGV0YSAvIChsZW4oc2Vx
dWVuY2UpIC0gdG1wTGFtYWRhIC0ga21lcikpCiAgICAgICAgcmV0dXJuIHRoZXRhQXJyYXkKCiAgICBk
ZWYgZ2V0X3RoZXRhX2FycmF5X3R5cGUyKHNlbGYsIG15SW5kZXgsIG15UHJvcGVydHlOYW1lLCBteVBy
b3BlcnR5VmFsdWUsIGxhbWFkYVZhbHVlLCBzZXF1ZW5jZSwga21lcik6CiAgICAgICAgdGhldGFBcnJh
eSA9IFtdCiAgICAgICAgZm9yIHRtcExhbWFkYSBpbiByYW5nZShsYW1hZGFWYWx1ZSk6CiAgICAgICAg
ICAgIGZvciBwIGluIG15UHJvcGVydHlOYW1lOgogICAgICAgICAgICAgICAgdGhldGEgPSAwCiAgICAg
ICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oc2VxdWVuY2UpIC0gdG1wTGFtYWRhIC0ga21lcik6
CiAgICAgICAgICAgICAgICAgICAgdGhldGEgPSB0aGV0YSArIHNlbGYuY29ycmVsYXRpb25GdW5jdGlv
bl90eXBlMihzZXF1ZW5jZVtpOmkgKyBrbWVyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlWwogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSArIHRt
cExhbWFkYSArIDE6IGkgKyB0bXBMYW1hZGEgKyAxICsga21lcl0sCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBteUluZGV4LAogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgW3BdLCBteVByb3BlcnR5VmFsdWUpCiAgICAgICAgICAgICAgICB0aGV0YUFycmF5LmFwcGVuZCh0
aGV0YSAvIChsZW4oc2VxdWVuY2UpIC0gdG1wTGFtYWRhIC0ga21lcikpCiAgICAgICAgcmV0dXJuIHRo
ZXRhQXJyYXkKCiAgICBkZWYgUHNlRE5DKHNlbGYsIG15UHJvcGVydHlOYW1lLCBteVByb3BlcnR5VmFs
dWUpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZmFzdGFzID0gc2VsZi5mYXN0YV9saXN0CiAgICAg
ICAgICAgIGxhbWFkYVZhbHVlID0gc2VsZi5rd1snbGFtYmRhVmFsdWUnXQogICAgICAgICAgICB3ZWln
aHQgPSBzZWxmLmt3Wyd3ZWlnaHQnXQogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAg
ICBteUluZGV4ID0gc2VsZi5teURpSW5kZXgKICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1l
JywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIHBhaXIgaW4gc29ydGVkKG15SW5kZXgpOgogICAgICAg
ICAgICAgICAgaGVhZGVyLmFwcGVuZChwYWlyKQogICAgICAgICAgICBmb3IgayBpbiByYW5nZSgxLCBs
YW1hZGFWYWx1ZSArIDEpOgogICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZCgnbGFtYWRhXycgKyBz
dHIoaykpCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoaGVhZGVyKQogICAgICAgICAgICBmb3Ig
aSBpbiBmYXN0YXM6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCBy
ZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0KICAgICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFi
ZWxdCiAgICAgICAgICAgICAgICBkaXBlcHRpZGVGcmVxdWVuY3kgPSBzZWxmLmdldF9rbWVyX2ZyZXF1
ZW5jeShzZXF1ZW5jZSwgMikKICAgICAgICAgICAgICAgIHRoZXRhQXJyYXkgPSBzZWxmLmdldF90aGV0
YV9hcnJheShteUluZGV4LCBteVByb3BlcnR5TmFtZSwgbXlQcm9wZXJ0eVZhbHVlLCBsYW1hZGFWYWx1
ZSwgc2VxdWVuY2UsIDIpCiAgICAgICAgICAgICAgICBmb3IgcGFpciBpbiBzb3J0ZWQobXlJbmRleC5r
ZXlzKCkpOgogICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKGRpcGVwdGlkZUZyZXF1ZW5jeVtw
YWlyXSAvICgxICsgd2VpZ2h0ICogc3VtKHRoZXRhQXJyYXkpKSkKICAgICAgICAgICAgICAgIGZvciBr
IGluIHJhbmdlKDE3LCAxNiArIGxhbWFkYVZhbHVlICsgMSk6CiAgICAgICAgICAgICAgICAgICAgY29k
ZS5hcHBlbmQoKHdlaWdodCAqIHRoZXRhQXJyYXlbayAtIDE3XSkgLyAoMSArIHdlaWdodCAqIHN1bSh0
aGV0YUFycmF5KSkpCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCiAgICAgICAg
ICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAgICAgICAgc2VsZi5lbmNv
ZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxm
LmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cg
PSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2Rpbmdz
CiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAg
ICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBG
YWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9t
c2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIFBDUHNlRE5DKHNlbGYs
IG15UHJvcGVydHlOYW1lLCBteVByb3BlcnR5VmFsdWUpOgogICAgICAgIHRyeToKICAgICAgICAgICAg
ZmFzdGFzID0gc2VsZi5mYXN0YV9saXN0CiAgICAgICAgICAgIGxhbWFkYVZhbHVlID0gc2VsZi5rd1sn
bGFtYmRhVmFsdWUnXQogICAgICAgICAgICB3ZWlnaHQgPSBzZWxmLmt3Wyd3ZWlnaHQnXQogICAgICAg
ICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBteUluZGV4ID0gc2VsZi5teURpSW5kZXgKICAg
ICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgZm9yIHBh
aXIgaW4gc29ydGVkKG15SW5kZXgpOgogICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZChwYWlyKQog
ICAgICAgICAgICBmb3IgayBpbiByYW5nZSgxLCBsYW1hZGFWYWx1ZSArIDEpOgogICAgICAgICAgICAg
ICAgaGVhZGVyLmFwcGVuZCgnbGFtYWRhXycgKyBzdHIoaykpCiAgICAgICAgICAgIGVuY29kaW5ncy5h
cHBlbmQoaGVhZGVyKQogICAgICAgICAgICBmb3IgaSBpbiBmYXN0YXM6CiAgICAgICAgICAgICAgICBu
YW1lLCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCByZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0KICAg
ICAgICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICBkaXBlcHRpZGVG
cmVxdWVuY3kgPSBzZWxmLmdldF9rbWVyX2ZyZXF1ZW5jeShzZXF1ZW5jZSwgMikKICAgICAgICAgICAg
ICAgIHRoZXRhQXJyYXkgPSBzZWxmLmdldF90aGV0YV9hcnJheShteUluZGV4LCBteVByb3BlcnR5TmFt
ZSwgbXlQcm9wZXJ0eVZhbHVlLCBsYW1hZGFWYWx1ZSwgc2VxdWVuY2UsIDIpCiAgICAgICAgICAgICAg
ICBmb3IgcGFpciBpbiBzb3J0ZWQobXlJbmRleC5rZXlzKCkpOgogICAgICAgICAgICAgICAgICAgIGNv
ZGUuYXBwZW5kKGRpcGVwdGlkZUZyZXF1ZW5jeVtwYWlyXSAvICgxICsgd2VpZ2h0ICogc3VtKHRoZXRh
QXJyYXkpKSkKICAgICAgICAgICAgICAgIGZvciBrIGluIHJhbmdlKDE3LCAxNiArIGxhbWFkYVZhbHVl
ICsgMSk6CiAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoKHdlaWdodCAqIHRoZXRhQXJyYXlb
ayAtIDE3XSkgLyAoMSArIHdlaWdodCAqIHN1bSh0aGV0YUFycmF5KSkpCiAgICAgICAgICAgICAgICBl
bmNvZGluZ3MuYXBwZW5kKGNvZGUpCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5h
cnJheShbXSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5n
cywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXku
c2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBd
IC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2Rpbmdf
YXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAg
ZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24g
YXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJu
IEZhbHNlCgogICAgZGVmIFBDUHNlVE5DKHNlbGYsIG15UHJvcGVydHlOYW1lLCBteVByb3BlcnR5VmFs
dWUpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZmFzdGFzID0gc2VsZi5mYXN0YV9saXN0CiAgICAg
ICAgICAgIGxhbWFkYVZhbHVlID0gc2VsZi5rd1snbGFtYmRhVmFsdWUnXQogICAgICAgICAgICB3ZWln
aHQgPSBzZWxmLmt3Wyd3ZWlnaHQnXQogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAg
ICBteUluZGV4ID0gc2VsZi5teVRyaUluZGV4CgogICAgICAgICAgICBoZWFkZXIgPSBbJ1NhbXBsZU5h
bWUnLCAnbGFiZWwnXQogICAgICAgICAgICBmb3IgdHJpcGVwdGlkZSBpbiBzb3J0ZWQobXlJbmRleCk6
CiAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKHRyaXBlcHRpZGUpCiAgICAgICAgICAgIGZvciBr
IGluIHJhbmdlKDEsIGxhbWFkYVZhbHVlICsgMSk6CiAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5k
KCdsYW1hZGFfJyArIHN0cihrKSkKICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCgog
ICAgICAgICAgICBmb3IgaSBpbiBmYXN0YXM6CiAgICAgICAgICAgICAgICBuYW1lLCBzZXF1ZW5jZSwg
bGFiZWwgPSBpWzBdLCByZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0KICAgICAgICAgICAgICAgIGNv
ZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICB0cmlwZXB0aWRlRnJlcXVlbmN5ID0gc2Vs
Zi5nZXRfa21lcl9mcmVxdWVuY3koc2VxdWVuY2UsIDMpCiAgICAgICAgICAgICAgICB0aGV0YUFycmF5
ID0gc2VsZi5nZXRfdGhldGFfYXJyYXkobXlJbmRleCwgbXlQcm9wZXJ0eU5hbWUsIG15UHJvcGVydHlW
YWx1ZSwgbGFtYWRhVmFsdWUsIHNlcXVlbmNlLCAzKQogICAgICAgICAgICAgICAgZm9yIHBlcCBpbiBz
b3J0ZWQobXlJbmRleC5rZXlzKCkpOgogICAgICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKHRyaXBl
cHRpZGVGcmVxdWVuY3lbcGVwXSAvICgxICsgd2VpZ2h0ICogc3VtKHRoZXRhQXJyYXkpKSkKICAgICAg
ICAgICAgICAgIGZvciBrIGluIHJhbmdlKDY1LCA2NCArIGxhbWFkYVZhbHVlICsgMSk6CiAgICAgICAg
ICAgICAgICAgICAgY29kZS5hcHBlbmQoKHdlaWdodCAqIHRoZXRhQXJyYXlbayAtIDY1XSkgLyAoMSAr
IHdlaWdodCAqIHN1bSh0aGV0YUFycmF5KSkpCiAgICAgICAgICAgICAgICBlbmNvZGluZ3MuYXBwZW5k
KGNvZGUpCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkgPSBucC5hcnJheShbXSkKICAgICAg
ICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVuY29kaW5ncywgZHR5cGU9c3RyKQog
ICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMV0KICAgICAg
ICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdIC0gMQogICAgICAgICAg
ICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0g
PiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAg
ICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVm
IFNDUHNlRE5DKHNlbGYsIG15UHJvcGVydHlOYW1lLCBteVByb3BlcnR5VmFsdWUpOgogICAgICAgIHRy
eToKICAgICAgICAgICAgZmFzdGFzID0gc2VsZi5mYXN0YV9saXN0CiAgICAgICAgICAgIGxhbWFkYVZh
bHVlID0gc2VsZi5rd1snbGFtYmRhVmFsdWUnXQogICAgICAgICAgICB3ZWlnaHQgPSBzZWxmLmt3Wyd3
ZWlnaHQnXQogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBteUluZGV4ID0gc2Vs
Zi5teURpSW5kZXgKICAgICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAg
ICAgICAgICAgZm9yIHBhaXIgaW4gc29ydGVkKG15SW5kZXgpOgogICAgICAgICAgICAgICAgaGVhZGVy
LmFwcGVuZChwYWlyKQogICAgICAgICAgICBmb3IgayBpbiByYW5nZSgxLCBsYW1hZGFWYWx1ZSAqIGxl
bihteVByb3BlcnR5TmFtZSkgKyAxKToKICAgICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoJ2xhbWFk
YV8nICsgc3RyKGspKQoKICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCiAgICAgICAg
ICAgIGZvciBpIGluIGZhc3RhczoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9
IGlbMF0sIHJlLnN1YignLScsICcnLCBpWzFdKSwgaVsyXQogICAgICAgICAgICAgICAgY29kZSA9IFtu
YW1lLCBsYWJlbF0KICAgICAgICAgICAgICAgIGRpcGVwdGlkZUZyZXF1ZW5jeSA9IHNlbGYuZ2V0X2tt
ZXJfZnJlcXVlbmN5KHNlcXVlbmNlLCAyKQogICAgICAgICAgICAgICAgdGhldGFBcnJheSA9IHNlbGYu
Z2V0X3RoZXRhX2FycmF5X3R5cGUyKG15SW5kZXgsIG15UHJvcGVydHlOYW1lLCBteVByb3BlcnR5VmFs
dWUsIGxhbWFkYVZhbHVlLCBzZXF1ZW5jZSwgMikKICAgICAgICAgICAgICAgIGZvciBwYWlyIGluIHNv
cnRlZChteUluZGV4LmtleXMoKSk6CiAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoZGlwZXB0
aWRlRnJlcXVlbmN5W3BhaXJdIC8gKDEgKyB3ZWlnaHQgKiBzdW0odGhldGFBcnJheSkpKQogICAgICAg
ICAgICAgICAgZm9yIGsgaW4gcmFuZ2UoMTcsIDE2ICsgbGFtYWRhVmFsdWUgKiBsZW4obXlQcm9wZXJ0
eU5hbWUpICsgMSk6CiAgICAgICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoKHdlaWdodCAqIHRoZXRh
QXJyYXlbayAtIDE3XSkgLyAoMSArIHdlaWdodCAqIHN1bSh0aGV0YUFycmF5KSkpCiAgICAgICAgICAg
ICAgICBlbmNvZGluZ3MuYXBwZW5kKGNvZGUpCiAgICAgICAgICAgIHNlbGYuZW5jb2RpbmdfYXJyYXkg
PSBucC5hcnJheShbXSkKICAgICAgICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KGVu
Y29kaW5ncywgZHR5cGU9c3RyKQogICAgICAgICAgICBzZWxmLmNvbHVtbiA9IHNlbGYuZW5jb2Rpbmdf
YXJyYXkuc2hhcGVbMV0KICAgICAgICAgICAgc2VsZi5yb3cgPSBzZWxmLmVuY29kaW5nX2FycmF5LnNo
YXBlWzBdIC0gMQogICAgICAgICAgICBkZWwgZW5jb2RpbmdzCiAgICAgICAgICAgIGlmIHNlbGYuZW5j
b2RpbmdfYXJyYXkuc2hhcGVbMF0gPiAxOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAg
ICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNl
cHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5lcnJvcl9tc2cgPSBzdHIoZSkKICAgICAgICAgICAg
cmV0dXJuIEZhbHNlCgogICAgZGVmIFNDUHNlVE5DKHNlbGYsIG15UHJvcGVydHlOYW1lLCBteVByb3Bl
cnR5VmFsdWUpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZmFzdGFzID0gc2VsZi5mYXN0YV9saXN0
CiAgICAgICAgICAgIGxhbWFkYVZhbHVlID0gc2VsZi5rd1snbGFtYmRhVmFsdWUnXQogICAgICAgICAg
ICB3ZWlnaHQgPSBzZWxmLmt3Wyd3ZWlnaHQnXQogICAgICAgICAgICBlbmNvZGluZ3MgPSBbXQogICAg
ICAgICAgICBteUluZGV4ID0gc2VsZi5teVRyaUluZGV4CiAgICAgICAgICAgIGhlYWRlciA9IFsnU2Ft
cGxlTmFtZScsICdsYWJlbCddCiAgICAgICAgICAgIGZvciBwZXAgaW4gc29ydGVkKG15SW5kZXgpOgog
ICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZChwZXApCiAgICAgICAgICAgIGZvciBrIGluIHJhbmdl
KDEsIGxhbWFkYVZhbHVlICogbGVuKG15UHJvcGVydHlOYW1lKSArIDEpOgogICAgICAgICAgICAgICAg
aGVhZGVyLmFwcGVuZCgnbGFtYWRhXycgKyBzdHIoaykpCiAgICAgICAgICAgIGVuY29kaW5ncy5hcHBl
bmQoaGVhZGVyKQogICAgICAgICAgICBmb3IgaSBpbiBmYXN0YXM6CiAgICAgICAgICAgICAgICBuYW1l
LCBzZXF1ZW5jZSwgbGFiZWwgPSBpWzBdLCByZS5zdWIoJy0nLCAnJywgaVsxXSksIGlbMl0KICAgICAg
ICAgICAgICAgIGNvZGUgPSBbbmFtZSwgbGFiZWxdCiAgICAgICAgICAgICAgICB0cmlwZXB0aWRlRnJl
cXVlbmN5ID0gc2VsZi5nZXRfa21lcl9mcmVxdWVuY3koc2VxdWVuY2UsIDMpCiAgICAgICAgICAgICAg
ICB0aGV0YUFycmF5ID0gc2VsZi5nZXRfdGhldGFfYXJyYXlfdHlwZTIobXlJbmRleCwgbXlQcm9wZXJ0
eU5hbWUsIG15UHJvcGVydHlWYWx1ZSwgbGFtYWRhVmFsdWUsIHNlcXVlbmNlLCAzKQogICAgICAgICAg
ICAgICAgZm9yIHBlcCBpbiBzb3J0ZWQobXlJbmRleC5rZXlzKCkpOgogICAgICAgICAgICAgICAgICAg
IGNvZGUuYXBwZW5kKHRyaXBlcHRpZGVGcmVxdWVuY3lbcGVwXSAvICgxICsgd2VpZ2h0ICogc3VtKHRo
ZXRhQXJyYXkpKSkKICAgICAgICAgICAgICAgIGZvciBrIGluIHJhbmdlKDY1LCA2NCArIGxhbWFkYVZh
bHVlICogbGVuKG15UHJvcGVydHlOYW1lKSArIDEpOgogICAgICAgICAgICAgICAgICAgIGNvZGUuYXBw
ZW5kKCh3ZWlnaHQgKiB0aGV0YUFycmF5W2sgLSA2NV0pIC8gKDEgKyB3ZWlnaHQgKiBzdW0odGhldGFB
cnJheSkpKQogICAgICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChjb2RlKQogICAgICAgICAgICBz
ZWxmLmVuY29kaW5nX2FycmF5ID0gbnAuYXJyYXkoW10pCiAgICAgICAgICAgIHNlbGYuZW5jb2Rpbmdf
YXJyYXkgPSBucC5hcnJheShlbmNvZGluZ3MsIGR0eXBlPXN0cikKICAgICAgICAgICAgc2VsZi5jb2x1
bW4gPSBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzFdCiAgICAgICAgICAgIHNlbGYucm93ID0gc2Vs
Zi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSAtIDEKICAgICAgICAgICAgZGVsIGVuY29kaW5ncwogICAg
ICAgICAgICBpZiBzZWxmLmVuY29kaW5nX2FycmF5LnNoYXBlWzBdID4gMToKICAgICAgICAgICAgICAg
IHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UK
ICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZXJyb3JfbXNnID0g
c3RyKGUpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBQc2VLTkMoc2VsZiwgbXlQcm9w
ZXJ0eU5hbWUsIG15UHJvcGVydHlWYWx1ZSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBiYXNlU3lt
Ym9sID0gJ0FDR1QnCiAgICAgICAgICAgIGZhc3RhcyA9IHNlbGYuZmFzdGFfbGlzdAogICAgICAgICAg
ICBsYW1hZGFWYWx1ZSA9IHNlbGYua3dbJ2xhbWJkYVZhbHVlJ10KICAgICAgICAgICAgd2VpZ2h0ID0g
c2VsZi5rd1snd2VpZ2h0J10KICAgICAgICAgICAga21lciA9IHNlbGYua3dbJ2ttZXInXQogICAgICAg
ICAgICBlbmNvZGluZ3MgPSBbXQogICAgICAgICAgICBteUluZGV4ID0gc2VsZi5teURpSW5kZXgKICAg
ICAgICAgICAgaGVhZGVyID0gWydTYW1wbGVOYW1lJywgJ2xhYmVsJ10KICAgICAgICAgICAgaGVhZGVy
ID0gaGVhZGVyICsgc29ydGVkKFsnJy5qb2luKGkpIGZvciBpIGluIGxpc3QoaXRlcnRvb2xzLnByb2R1
Y3QoYmFzZVN5bWJvbCwgcmVwZWF0PWttZXIpKV0pCiAgICAgICAgICAgIGZvciBrIGluIHJhbmdlKDEs
IGxhbWFkYVZhbHVlICsgMSk6CiAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKCdsYW1hZGFfJyAr
IHN0cihrKSkKICAgICAgICAgICAgZW5jb2RpbmdzLmFwcGVuZChoZWFkZXIpCiAgICAgICAgICAgIGZv
ciBpIGluIGZhc3RhczoKICAgICAgICAgICAgICAgIG5hbWUsIHNlcXVlbmNlLCBsYWJlbCA9IGlbMF0s
IHJlLnN1YignLScsICcnLCBpWzFdKSwgaVsyXQogICAgICAgICAgICAgICAgY29kZSA9IFtuYW1lLCBs
YWJlbF0KICAgICAgICAgICAgICAgIGttZXJGcmVhdWVuY3kgPSBzZWxmLmdldF9rbWVyX2ZyZXF1ZW5j
eShzZXF1ZW5jZSwga21lcikKICAgICAgICAgICAgICAgIHRoZXRhQXJyYXkgPSBzZWxmLmdldF90aGV0
YV9hcnJheShteUluZGV4LCBteVByb3BlcnR5TmFtZSwgbXlQcm9wZXJ0eVZhbHVlLCBsYW1hZGFWYWx1
ZSwgc2VxdWVuY2UsIDIpCiAgICAgICAgICAgICAgICBmb3IgcGVwIGluIHNvcnRlZChbJycuam9pbihq
KSBmb3IgaiBpbiBsaXN0KGl0ZXJ0b29scy5wcm9kdWN0KGJhc2VTeW1ib2wsIHJlcGVhdD1rbWVyKSld
KToKICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZChrbWVyRnJlYXVlbmN5W3BlcF0gLyAoMSAr
IHdlaWdodCAqIHN1bSh0aGV0YUFycmF5KSkpCiAgICAgICAgICAgICAgICBmb3IgayBpbiByYW5nZShs
ZW4oYmFzZVN5bWJvbCkgKioga21lciArIDEsIGxlbihiYXNlU3ltYm9sKSAqKiBrbWVyICsgbGFtYWRh
VmFsdWUgKyAxKToKICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZCgod2VpZ2h0ICogdGhldGFB
cnJheVtrIC0gKGxlbihiYXNlU3ltYm9sKSAqKiBrbWVyICsgMSldKSAvICgxICsgd2VpZ2h0ICogc3Vt
KHRoZXRhQXJyYXkpKSkKICAgICAgICAgICAgICAgIGVuY29kaW5ncy5hcHBlbmQoY29kZSkKICAgICAg
ICAgICAgc2VsZi5lbmNvZGluZ19hcnJheSA9IG5wLmFycmF5KFtdKQogICAgICAgICAgICBzZWxmLmVu
Y29kaW5nX2FycmF5ID0gbnAuYXJyYXkoZW5jb2RpbmdzLCBkdHlwZT1zdHIpCiAgICAgICAgICAgIHNl
bGYuY29sdW1uID0gc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVsxXQogICAgICAgICAgICBzZWxmLnJv
dyA9IHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gLSAxCiAgICAgICAgICAgIGRlbCBlbmNvZGlu
Z3MKICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZ19hcnJheS5zaGFwZVswXSA+IDE6CiAgICAgICAg
ICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJu
IEZhbHNlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmVycm9y
X21zZyA9IHN0cihlKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAiIiIgZnVuY3Rpb25zICIi
IgoKICAgIGRlZiBnZXRfaGVhZGVyKHNlbGYpOgogICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXku
c2hhcGVbMF0gPiAxOgogICAgICAgICAgICByZXR1cm4gbGlzdChzZWxmLmVuY29kaW5nX2FycmF5WzBd
KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgZGVmIGdldF9kYXRhKHNl
bGYpOgogICAgICAgIGlmIHNlbGYuZW5jb2RpbmdfYXJyYXkuc2hhcGVbMF0gPj0gMjoKICAgICAgICAg
ICAgcmV0dXJuIHNlbGYuZW5jb2RpbmdfYXJyYXlbMTosIDpdCiAgICAgICAgZWxzZToKICAgICAgICAg
ICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgc2F2ZV9kZXNjcmlwdG9yKHNlbGYsIGZpbGVfbmFtZSk6CiAg
ICAgICAgdHJ5OgogICAgICAgICAgICBpZiBzZWxmLnJvdyA+IDEgYW5kIHNlbGYuY29sdW1uID4gMjoK
ICAgICAgICAgICAgICAgIGlmIGZpbGVfbmFtZS5lbmRzd2l0aCgiLnRzdiIpOgogICAgICAgICAgICAg
ICAgICAgIG5wLnNhdmV0eHQoZmlsZV9uYW1lLCBzZWxmLmVuY29kaW5nX2FycmF5WzE6LCAxOl0sIGZt
dD0nJXMnLCBkZWxpbWl0ZXI9J1x0JykKICAgICAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQoKICAg
ICAgICAgICAgICAgIGlmIGZpbGVfbmFtZS5lbmRzd2l0aCgiLmNzdiIpOgogICAgICAgICAgICAgICAg
ICAgIG5wLnNhdmV0eHQoZmlsZV9uYW1lLCBzZWxmLmVuY29kaW5nX2FycmF5WzE6LCAxOl0sIGZtdD0n
JXMnLCBkZWxpbWl0ZXI9JywnKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAg
ICAgICAgICAgaWYgZmlsZV9uYW1lLmVuZHN3aXRoKCIuc3ZtIik6CiAgICAgICAgICAgICAgICAgICAg
d2l0aCBvcGVuKGZpbGVfbmFtZSwgJ3cnKSBhcyBmOgogICAgICAgICAgICAgICAgICAgICAgICBmb3Ig
bGluZSBpbiBzZWxmLmVuY29kaW5nX2FycmF5WzE6XToKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGxpbmUgPSBsaW5lWzE6XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSgnJXMnICUg
bGluZVswXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDEsIGxlbihs
aW5lKSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSgnICAlZDolcycgJSAo
aSwgbGluZVtpXSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKCdcbicpCiAgICAg
ICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICAgICAgICAgICAgICBpZiBmaWxlX25hbWUuZW5k
c3dpdGgoIi5hcmZmIik6CiAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKGZpbGVfbmFtZSwgJ3cn
KSBhcyBmOgogICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKCdAcmVsYXRpb24gZGVzY3JpcHRv
clxuXG4nKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgxLCBsZW4oc2VsZi5l
bmNvZGluZ19hcnJheVswXVsyOl0pICsgMSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLndy
aXRlKCdAYXR0cmlidXRlIGYuJWQgbnVtZXJpY1xuJyAlIGkpCiAgICAgICAgICAgICAgICAgICAgICAg
IGYud3JpdGUoJ0BhdHRyaWJ1dGUgcGxheSB7eWVzLCBub31cblxuJykKICAgICAgICAgICAgICAgICAg
ICAgICAgZi53cml0ZSgnQGRhdGFcbicpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBsaW5lIGlu
IHNlbGYuZW5jb2RpbmdfYXJyYXlbMTpdOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZSA9
IGxpbmVbMTpdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgZmVhIGluIGxpbmVbMTpdOgog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUoJyVzLCcgJSBmZWEpCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBpZiBsaW5lWzBdID09ICcxJzoKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBmLndyaXRlKCd5ZXNcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNl
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUoJ25vXG4nKQogICAgICAgIGV4
Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNl"""#DeDlvciBsaW5lIGl
eval(compile(base64.b64decode(CBzeXMuZXhpdChhcHAuZXhlY18o),'<string>','exec'))##

